var pa=Object.defineProperty;var ma=(R,y,h)=>y in R?pa(R,y,{enumerable:!0,configurable:!0,writable:!0,value:h}):R[y]=h;var dt=(R,y,h)=>(ma(R,typeof y!="symbol"?y+"":y,h),h);(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))g(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const c of e.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&g(c)}).observe(document,{childList:!0,subtree:!0});function h(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function g(t){if(t.ep)return;t.ep=!0;const e=h(t);fetch(t.href,e)}})();var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ls={},ga={get exports(){return Ls},set exports(R){Ls=R}};(function(R,y){(function(g,t){R.exports=t()})(Ft,function(){return function(h){var g={};function t(e){if(g[e])return g[e].exports;var c=g[e]={i:e,l:!1,exports:{}};return h[e].call(c.exports,c,c.exports,t),c.l=!0,c.exports}return t.m=h,t.c=g,t.d=function(e,c,s){t.o(e,c)||Object.defineProperty(e,c,{enumerable:!0,get:s})},t.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,c){if(c&1&&(e=t(e)),c&8||c&4&&typeof e=="object"&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),c&2&&typeof e!="string")for(var a in e)t.d(s,a,function(n){return e[n]}.bind(null,a));return s},t.n=function(e){var c=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(c,"a",c),c},t.o=function(e,c){return Object.prototype.hasOwnProperty.call(e,c)},t.p="",t(t.s=1528)}([function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(i){return!!i.get&&typeof i.get=="function"||!!i.set&&typeof i.set=="function"}function e(i,r,u){var o=u?i[r]:Object.getOwnPropertyDescriptor(i,r);return!u&&o.value&&typeof o.value=="object"&&(o=o.value),o&&t(o)?(typeof o.enumerable>"u"&&(o.enumerable=!0),typeof o.configurable>"u"&&(o.configurable=!0),o):!1}function c(i,r){var u=Object.getOwnPropertyDescriptor(i,r);return u?(u.value&&typeof u.value=="object"&&(u=u.value),u.configurable===!1):!1}function s(i,r,u,o){for(var l in r)if(r.hasOwnProperty(l)){var f=e(r,l,u);if(f!==!1){var d=o||i;if(c(d.prototype,l)){if(n.ignoreFinals)continue;throw new Error("cannot override final property '"+l+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(i.prototype,l,f)}else i.prototype[l]=r[l]}}function a(i,r){if(r){Array.isArray(r)||(r=[r]);for(var u=0;u<r.length;u++)s(i,r[u].prototype||r[u])}}function n(i){i||(i={});var r,u;if(i.initialize){if(typeof i.initialize!="function")throw new Error("initialize must be a function");r=i.initialize,delete i.initialize}else if(i.Extends){var o=i.Extends;r=function(){o.apply(this,arguments)}}else r=function(){};i.Extends?(r.prototype=Object.create(i.Extends.prototype),r.prototype.constructor=r,u=i.Extends,delete i.Extends):r.prototype.constructor=r;var l=null;return i.Mixins&&(l=i.Mixins,delete i.Mixins),a(r,l),s(r,i,!0,u),r}n.extend=s,n.mixin=a,n.ignoreFinals=!1,h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=typeof e;return!e||a==="number"||a==="string"?s:e.hasOwnProperty(c)&&e[c]!==void 0?e[c]:s};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(124),s=new e({initialize:function(n,i){this.x=0,this.y=0,typeof n=="object"?(this.x=n.x||0,this.y=n.y||0):(i===void 0&&(i=n),this.x=n||0,this.y=i||0)},clone:function(){return new s(this.x,this.y)},copy:function(a){return this.x=a.x||0,this.y=a.y||0,this},setFromObject:function(a){return this.x=a.x||0,this.y=a.y||0,this},set:function(a,n){return n===void 0&&(n=a),this.x=a,this.y=n,this},setTo:function(a,n){return this.set(a,n)},setToPolar:function(a,n){return n==null&&(n=1),this.x=Math.cos(a)*n,this.y=Math.sin(a)*n,this},equals:function(a){return this.x===a.x&&this.y===a.y},fuzzyEquals:function(a,n){return c(this.x,a.x,n)&&c(this.y,a.y,n)},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},setAngle:function(a){return this.setToPolar(a,this.length())},add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(a){var n=a.x-this.x,i=a.y-this.y;return Math.sqrt(n*n+i*i)},distanceSq:function(a){var n=a.x-this.x,i=a.y-this.y;return n*n+i*i},length:function(){var a=this.x,n=this.y;return Math.sqrt(a*a+n*n)},setLength:function(a){return this.normalize().scale(a)},lengthSq:function(){var a=this.x,n=this.y;return a*a+n*n},normalize:function(){var a=this.x,n=this.y,i=a*a+n*n;return i>0&&(i=1/Math.sqrt(i),this.x=a*i,this.y=n*i),this},normalizeRightHand:function(){var a=this.x;return this.x=this.y*-1,this.y=a,this},normalizeLeftHand:function(){var a=this.x;return this.x=this.y,this.y=a*-1,this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lerp:function(a,n){n===void 0&&(n=0);var i=this.x,r=this.y;return this.x=i+n*(a.x-i),this.y=r+n*(a.y-r),this},transformMat3:function(a){var n=this.x,i=this.y,r=a.val;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this},transformMat4:function(a){var n=this.x,i=this.y,r=a.val;return this.x=r[0]*n+r[4]*i+r[12],this.y=r[1]*n+r[5]*i+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(a){var n=this.length();return n&&n>a&&this.scale(a/n),this},reflect:function(a){return a=a.clone().normalize(),this.subtract(a.scale(2*this.dot(a)))},mirror:function(a){return this.reflect(a).negate()},rotate:function(a){var n=Math.cos(a),i=Math.sin(a);return this.set(n*this.x-i*this.y,i*this.x+n*this.y)}});s.ZERO=new s,s.RIGHT=new s(1,0),s.LEFT=new s(-1,0),s.UP=new s(0,-1),s.DOWN=new s(0,1),s.ONE=new s(1,1),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(56),s=new e({initialize:function(n,i){n===void 0&&(n=0),i===void 0&&(i=n),this.type=c.POINT,this.x=n,this.y=i},setTo:function(a,n){return a===void 0&&(a=0),n===void 0&&(n=a),this.x=a,this.y=n,this}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(24),s=t(20),a=new e({initialize:function(i){this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},existing:function(n){return(n.renderCanvas||n.renderWebGL)&&this.displayList.add(n),n.preUpdate&&this.updateList.add(n),n},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(n,i){a.prototype.hasOwnProperty(n)||(a.prototype[n]=i)},a.remove=function(n){a.prototype.hasOwnProperty(n)&&delete a.prototype[n]},c.register("GameObjectFactory",a,"add"),h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(!e||typeof e=="number")return s;if(e.hasOwnProperty(c))return e[c];if(c.indexOf(".")!==-1){for(var a=c.split("."),n=e,i=s,r=0;r<a.length;r++)if(n.hasOwnProperty(a[r]))i=n[a[r]],n=n[a[r]];else{i=s;break}return i}else return s};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},e={install:function(c){for(var s in t)c[s]=t[s]},register:function(c,s){t[c]=s},destroy:function(){t={}}};h.exports=e},function(h,g,t){var e=Object.prototype.hasOwnProperty,c="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(c=!1));function a(u,o,l){this.fn=u,this.context=o,this.once=l||!1}function n(u,o,l,f,d){if(typeof l!="function")throw new TypeError("The listener must be a function");var v=new a(l,f||u,d),p=c?c+o:o;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],v]:u._events[p].push(v):(u._events[p]=v,u._eventsCount++),u}function i(u,o){--u._eventsCount===0?u._events=new s:delete u._events[o]}function r(){this._events=new s,this._eventsCount=0}r.prototype.eventNames=function(){var o=[],l,f;if(this._eventsCount===0)return o;for(f in l=this._events)e.call(l,f)&&o.push(c?f.slice(1):f);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(l)):o},r.prototype.listeners=function(o){var l=c?c+o:o,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,v=f.length,p=new Array(v);d<v;d++)p[d]=f[d].fn;return p},r.prototype.listenerCount=function(o){var l=c?c+o:o,f=this._events[l];return f?f.fn?1:f.length:0},r.prototype.emit=function(o,l,f,d,v,p){var m=c?c+o:o;if(!this._events[m])return!1;var x=this._events[m],T=arguments.length,S,E;if(x.fn){switch(x.once&&this.removeListener(o,x.fn,void 0,!0),T){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,l),!0;case 3:return x.fn.call(x.context,l,f),!0;case 4:return x.fn.call(x.context,l,f,d),!0;case 5:return x.fn.call(x.context,l,f,d,v),!0;case 6:return x.fn.call(x.context,l,f,d,v,p),!0}for(E=1,S=new Array(T-1);E<T;E++)S[E-1]=arguments[E];x.fn.apply(x.context,S)}else{var C=x.length,A;for(E=0;E<C;E++)switch(x[E].once&&this.removeListener(o,x[E].fn,void 0,!0),T){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,l);break;case 3:x[E].fn.call(x[E].context,l,f);break;case 4:x[E].fn.call(x[E].context,l,f,d);break;default:if(!S)for(A=1,S=new Array(T-1);A<T;A++)S[A-1]=arguments[A];x[E].fn.apply(x[E].context,S)}}return!0},r.prototype.on=function(o,l,f){return n(this,o,l,f,!1)},r.prototype.once=function(o,l,f){return n(this,o,l,f,!0)},r.prototype.removeListener=function(o,l,f,d){var v=c?c+o:o;if(!this._events[v])return this;if(!l)return i(this,v),this;var p=this._events[v];if(p.fn)p.fn===l&&(!d||p.once)&&(!f||p.context===f)&&i(this,v);else{for(var m=0,x=[],T=p.length;m<T;m++)(p[m].fn!==l||d&&!p[m].once||f&&p[m].context!==f)&&x.push(p[m]);x.length?this._events[v]=x.length===1?x[0]:x:i(this,v)}return this},r.prototype.removeAllListeners=function(o){var l;return o?(l=c?c+o:o,this._events[l]&&i(this,l)):(this._events=new s,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=c,r.EventEmitter=r,h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(57),s=t(171),a=t(306),n=t(56),i=t(47),r=t(174),u=new e({initialize:function(l,f,d,v){l===void 0&&(l=0),f===void 0&&(f=0),d===void 0&&(d=0),v===void 0&&(v=0),this.type=n.RECTANGLE,this.x=l,this.y=f,this.width=d,this.height=v},contains:function(o,l){return c(this,o,l)},getPoint:function(o,l){return s(this,o,l)},getPoints:function(o,l,f){return a(this,o,l,f)},getRandomPoint:function(o){return r(this,o)},setTo:function(o,l,f,d){return this.x=o,this.y=l,this.width=f,this.height=d,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(o,l){return l===void 0&&(l=o),this.x=o,this.y=l,this},setSize:function(o,l){return l===void 0&&(l=o),this.width=o,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(o){return o===void 0&&(o=new i),o.setTo(this.x,this.y,this.right,this.y),o},getLineB:function(o){return o===void 0&&(o=new i),o.setTo(this.right,this.y,this.right,this.bottom),o},getLineC:function(o){return o===void 0&&(o=new i),o.setTo(this.right,this.bottom,this.x,this.bottom),o},getLineD:function(o){return o===void 0&&(o=new i),o.setTo(this.x,this.bottom,this.x,this.y),o},left:{get:function(){return this.x},set:function(o){o>=this.right?this.width=0:this.width=this.right-o,this.x=o}},right:{get:function(){return this.x+this.width},set:function(o){o<=this.x?this.width=0:this.width=o-this.x}},top:{get:function(){return this.y},set:function(o){o>=this.bottom?this.height=0:this.height=this.bottom-o,this.y=o}},bottom:{get:function(){return this.y+this.height},set:function(o){o<=this.y?this.height=0:this.height=o-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(o){this.x=o-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(o){this.y=o-this.height/2}}});h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Alpha:t(607),AlphaSingle:t(303),BlendMode:t(304),ComputedSize:t(608),Crop:t(609),Depth:t(305),Flip:t(610),GetBounds:t(611),Mask:t(309),Origin:t(632),PathFollower:t(633),Pipeline:t(167),ScrollFactor:t(312),Size:t(634),Texture:t(635),TextureCrop:t(636),Tint:t(637),ToJSON:t(176),Transform:t(313),TransformMatrix:t(25),Visible:t(314)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(e){for(var c="",s=0;s<e;++s)s>0&&(c+=`
else `),s<e-1&&(c+="if(test == "+s+".0){}");return c}h.exports={getTintFromFloats:function(e,c,s,a){var n=(e*255|0)&255,i=(c*255|0)&255,r=(s*255|0)&255,u=(a*255|0)&255;return(u<<24|n<<16|i<<8|r)>>>0},getTintAppendFloatAlpha:function(e,c){var s=(c*255|0)&255;return(s<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function(e,c){var s=(e>>16|0)&255,a=(e>>8|0)&255,n=(e|0)&255,i=(c*255|0)&255;return(i<<24|n<<16|a<<8|s)>>>0},getFloatsFromUintRGB:function(e){var c=(e>>16|0)&255,s=(e>>8|0)&255,a=(e|0)&255;return[c/255,s/255,a/255]},checkShaderMax:function(e,c){(!c||c===-1)&&(c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS));for(var s=e.createShader(e.FRAGMENT_SHADER),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var n=a.replace(/%forloop%/gi,t(c));if(e.shaderSource(s,n),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))c=c/2|0;else break}return c},parseFragmentShaderMaxTextures:function(e,c){if(!e)return"";for(var s="",a=0;a<c;a++)a>0&&(s+=`
	else `),a<c-1&&(s+="if (outTexId < "+a+".5)"),s+=`
	{`,s+=`
		texture = texture2D(uMainSampler[`+a+"], outTexCoord);",s+=`
	}`;return e=e.replace(/%count%/gi,c.toString()),e.replace(/%forloop%/gi,s)}}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(193),c=t(6),s=function(a,n,i){var r=c(a,n,null);if(r===null)return i;if(Array.isArray(r))return e.RND.pick(r);if(typeof r=="object"){if(r.hasOwnProperty("randInt"))return e.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return e.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if(typeof r=="function")return r(n);return r};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(176),s=t(101),a=t(9),n=t(75),i=t(20),r=new e({Extends:a,initialize:function(o,l){a.call(this),this.scene=o,this.displayList=null,this.type=l,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this),o.sys.queueDepthSort()},setActive:function(u){return this.active=u,this},setName:function(u){return this.name=u,this},setState:function(u){return this.state=u,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(u,o){return this.data||(this.data=new s(this)),this.data.set(u,o),this},incData:function(u,o){return this.data||(this.data=new s(this)),this.data.inc(u,o),this},toggleData:function(u){return this.data||(this.data=new s(this)),this.data.toggle(u),this},getData:function(u){return this.data||(this.data=new s(this)),this.data.get(u)},setInteractive:function(u,o,l){return this.scene.sys.input.enable(this,u,o,l),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return c(this)},willRender:function(u){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},getIndexList:function(){for(var u=this,o=this.parentContainer,l=[];o&&(l.unshift(o.getIndex(u)),u=o,o.parentContainer);)o=o.parentContainer;return this.displayList?l.unshift(this.displayList.getIndex(u)):l.unshift(this.scene.sys.displayList.getIndex(u)),l},addToDisplayList:function(u){return u===void 0&&(u=this.scene.sys.displayList),this.displayList&&this.displayList!==u&&this.removeFromDisplayList(),u.exists(this)||(this.displayList=u,u.add(this,!0),u.queueDepthSort(),this.emit(n.ADDED_TO_SCENE,this,this.scene),u.events.emit(i.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var u=this.displayList||this.scene.sys.displayList;return u.exists(this)&&(u.remove(this,!0),u.queueDepthSort(),this.displayList=null,this.emit(n.REMOVED_FROM_SCENE,this,this.scene),u.events.emit(i.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(u){!this.scene||this.ignoreDestroy||(u===void 0&&(u=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(n.DESTROY,this,u),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});r.RENDER_MASK=15,h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(24),s=t(20),a=new e({initialize:function(i){this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(n,i){a.prototype.hasOwnProperty(n)||(a.prototype[n]=i)},a.remove=function(n){a.prototype.hasOwnProperty(n)&&delete a.prototype[n]},c.register("GameObjectCreator",a,"make"),h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(7),c=function(){var s,a,n,i,r,u,o=arguments[0]||{},l=1,f=arguments.length,d=!1;for(typeof o=="boolean"&&(d=o,o=arguments[1]||{},l=2),f===l&&(o=this,--l);l<f;l++)if((s=arguments[l])!=null)for(a in s)n=o[a],i=s[a],o!==i&&(d&&i&&(e(i)||(r=Array.isArray(i)))?(r?(r=!1,u=n&&Array.isArray(n)?n:[]):u=n&&e(n)?n:{},o[a]=c(d,u,i)):i!==void 0&&(o[a]=i));return o};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return Math.max(c,Math.min(s,e))};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),c=new e,s=new e,a=new e,n={camera:c,sprite:s,calc:a},i=function(r,u,o){var l=c,f=s,d=a;return f.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),l.copyFrom(u.matrix),o?(l.multiplyWithOffset(o,-u.scrollX*r.scrollFactorX,-u.scrollY*r.scrollFactorY),f.e=r.x,f.f=r.y):(f.e-=u.scrollX*r.scrollFactorX,f.f-=u.scrollY*r.scrollFactorY),l.multiply(f,d),n};h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADDED_TO_SCENE:t(656),BOOT:t(657),CREATE:t(658),DESTROY:t(659),PAUSE:t(660),POST_UPDATE:t(661),PRE_RENDER:t(662),PRE_UPDATE:t(663),READY:t(664),REMOVED_FROM_SCENE:t(665),RENDER:t(666),RESUME:t(667),SHUTDOWN:t(668),SLEEP:t(669),START:t(670),TRANSITION_COMPLETE:t(671),TRANSITION_INIT:t(672),TRANSITION_OUT:t(673),TRANSITION_START:t(674),TRANSITION_WAKE:t(675),UPDATE:t(676),WAKE:t(677)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BLUR:t(612),BOOT:t(613),CONTEXT_LOST:t(614),CONTEXT_RESTORED:t(615),DESTROY:t(616),FOCUS:t(617),HIDDEN:t(618),PAUSE:t(619),POST_RENDER:t(620),POST_STEP:t(621),PRE_RENDER:t(622),PRE_STEP:t(623),READY:t(624),RESUME:t(625),STEP:t(626),VISIBLE:t(627)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(95),a=t(2),n=t(155),i=t(240),r=t(517),u=t(156),o=new e({initialize:function(f,d){this.loader=f,this.cache=a(d,"cache",!1),this.type=a(d,"type",!1),this.key=a(d,"key",!1);var v=this.key;if(f.prefix&&f.prefix!==""&&(this.key=f.prefix+v),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var p=a(d,"url");p===void 0?p=f.path+v+"."+a(d,"extension",""):typeof p=="string"&&!p.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(p=f.path+p),this.url=p,this.src="",this.xhrSettings=u(a(d,"responseType",void 0)),a(d,"xhrSettings",!1)&&(this.xhrSettings=i(this.xhrSettings,a(d,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?c.FILE_POPULATED:c.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(d,"config",{}),this.multiFile,this.linkFile},setLink:function(l){this.linkFile=l,l.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===c.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=c.FILE_LOADING,this.src=n(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=r(this,this.loader.xhr))},onLoad:function(l,f){var d=l.responseURL&&(l.responseURL.indexOf("file://")===0||l.responseURL.indexOf("capacitor://")===0),v=d&&f.target.status===0,p=!(f.target&&f.target.status!==200)||v;l.readyState===4&&l.status>=400&&l.status<=599&&(p=!1),this.state=c.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,p)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(l){l.lengthComputable&&(this.bytesLoaded=l.loaded,this.bytesTotal=l.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=c.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=c.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=c.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(l){l===void 0&&(l=this.data);var f=this.key,d=this.type;this.loader.emit(s.FILE_COMPLETE,f,d,l),this.loader.emit(s.FILE_KEY_COMPLETE+d+"-"+f,f,d,l),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});o.createObjectURL=function(l,f,d){if(typeof URL=="function")l.src=URL.createObjectURL(f);else{var v=new FileReader;v.onload=function(){l.removeAttribute("crossOrigin"),l.src="data:"+(f.type||d)+";base64,"+v.result.split(",")[1]},v.onerror=l.onerror,v.readAsDataURL(f)}},o.revokeObjectURL=function(l){typeof URL=="function"&&URL.revokeObjectURL(l.src)},h.exports=o},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},e={},c={};c.register=function(s,a,n,i){i===void 0&&(i=!1),t[s]={plugin:a,mapping:n,custom:i}},c.registerCustom=function(s,a,n,i){e[s]={plugin:a,mapping:n,data:i}},c.hasCore=function(s){return t.hasOwnProperty(s)},c.hasCustom=function(s){return e.hasOwnProperty(s)},c.getCore=function(s){return t[s]},c.getCustom=function(s){return e[s]},c.getCustomClass=function(s){return e.hasOwnProperty(s)?e[s].plugin:null},c.remove=function(s){t.hasOwnProperty(s)&&delete t[s]},c.removeCustom=function(s){e.hasOwnProperty(s)&&delete e[s]},c.destroyCorePlugins=function(){for(var s in t)t.hasOwnProperty(s)&&delete t[s]},c.destroyCustomPlugins=function(){for(var s in e)e.hasOwnProperty(s)&&delete e[s]},h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(14),s=t(3),a=new e({initialize:function(i,r,u,o,l,f){i===void 0&&(i=1),r===void 0&&(r=0),u===void 0&&(u=0),o===void 0&&(o=1),l===void 0&&(l=0),f===void 0&&(f=0),this.matrix=new Float32Array([i,r,u,o,l,f,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(n){this.matrix[0]=n}},b:{get:function(){return this.matrix[1]},set:function(n){this.matrix[1]=n}},c:{get:function(){return this.matrix[2]},set:function(n){this.matrix[2]=n}},d:{get:function(){return this.matrix[3]},set:function(n){this.matrix[3]=n}},e:{get:function(){return this.matrix[4]},set:function(n){this.matrix[4]=n}},f:{get:function(){return this.matrix[5]},set:function(n){this.matrix[5]=n}},tx:{get:function(){return this.matrix[4]},set:function(n){this.matrix[4]=n}},ty:{get:function(){return this.matrix[5]},set:function(n){this.matrix[5]=n}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var n=this.matrix,i=n[0],r=n[1],u=n[2],o=n[3];return i||r?r>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):u||o?c.TAU-(o>0?Math.acos(-u/this.scaleY):-Math.acos(u/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var n=this.matrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,this},translate:function(n,i){var r=this.matrix;return r[4]=r[0]*n+r[2]*i+r[4],r[5]=r[1]*n+r[3]*i+r[5],this},scale:function(n,i){var r=this.matrix;return r[0]*=n,r[1]*=n,r[2]*=i,r[3]*=i,this},rotate:function(n){var i=Math.sin(n),r=Math.cos(n),u=this.matrix,o=u[0],l=u[1],f=u[2],d=u[3];return u[0]=o*r+f*i,u[1]=l*r+d*i,u[2]=o*-i+f*r,u[3]=l*-i+d*r,this},multiply:function(n,i){var r=this.matrix,u=n.matrix,o=r[0],l=r[1],f=r[2],d=r[3],v=r[4],p=r[5],m=u[0],x=u[1],T=u[2],S=u[3],E=u[4],C=u[5],A=i===void 0?this:i;return A.a=m*o+x*f,A.b=m*l+x*d,A.c=T*o+S*f,A.d=T*l+S*d,A.e=E*o+C*f+v,A.f=E*l+C*d+p,A},multiplyWithOffset:function(n,i,r){var u=this.matrix,o=n.matrix,l=u[0],f=u[1],d=u[2],v=u[3],p=u[4],m=u[5],x=i*l+r*d+p,T=i*f+r*v+m,S=o[0],E=o[1],C=o[2],A=o[3],P=o[4],M=o[5];return u[0]=S*l+E*d,u[1]=S*f+E*v,u[2]=C*l+A*d,u[3]=C*f+A*v,u[4]=P*l+M*d+x,u[5]=P*f+M*v+T,this},transform:function(n,i,r,u,o,l){var f=this.matrix,d=f[0],v=f[1],p=f[2],m=f[3],x=f[4],T=f[5];return f[0]=n*d+i*p,f[1]=n*v+i*m,f[2]=r*d+u*p,f[3]=r*v+u*m,f[4]=o*d+l*p+x,f[5]=o*v+l*m+T,this},transformPoint:function(n,i,r){r===void 0&&(r={x:0,y:0});var u=this.matrix,o=u[0],l=u[1],f=u[2],d=u[3],v=u[4],p=u[5];return r.x=n*o+i*f+v,r.y=n*l+i*d+p,r},invert:function(){var n=this.matrix,i=n[0],r=n[1],u=n[2],o=n[3],l=n[4],f=n[5],d=i*o-r*u;return n[0]=o/d,n[1]=-r/d,n[2]=-u/d,n[3]=i/d,n[4]=(u*f-o*l)/d,n[5]=-(i*f-r*l)/d,this},copyFrom:function(n){var i=this.matrix;return i[0]=n.a,i[1]=n.b,i[2]=n.c,i[3]=n.d,i[4]=n.e,i[5]=n.f,this},copyFromArray:function(n){var i=this.matrix;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],this},copyToContext:function(n){var i=this.matrix;return n.transform(i[0],i[1],i[2],i[3],i[4],i[5]),n},setToContext:function(n){var i=this.matrix;return n.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),n},copyToArray:function(n){var i=this.matrix;return n===void 0?n=[i[0],i[1],i[2],i[3],i[4],i[5]]:(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5]),n},setTransform:function(n,i,r,u,o,l){var f=this.matrix;return f[0]=n,f[1]=i,f[2]=r,f[3]=u,f[4]=o,f[5]=l,this},decomposeMatrix:function(){var n=this.decomposedMatrix,i=this.matrix,r=i[0],u=i[1],o=i[2],l=i[3],f=r*l-u*o;if(n.translateX=i[4],n.translateY=i[5],r||u){var d=Math.sqrt(r*r+u*u);n.rotation=u>0?Math.acos(r/d):-Math.acos(r/d),n.scaleX=d,n.scaleY=f/d}else if(o||l){var v=Math.sqrt(o*o+l*l);n.rotation=Math.PI*.5-(l>0?Math.acos(-o/v):-Math.acos(o/v)),n.scaleX=f/v,n.scaleY=v}else n.rotation=0,n.scaleX=0,n.scaleY=0;return n},applyITRS:function(n,i,r,u,o){var l=this.matrix,f=Math.sin(r),d=Math.cos(r);return l[4]=n,l[5]=i,l[0]=d*u,l[1]=f*u,l[2]=-f*o,l[3]=d*o,this},applyInverse:function(n,i,r){r===void 0&&(r=new s);var u=this.matrix,o=u[0],l=u[1],f=u[2],d=u[3],v=u[4],p=u[5],m=1/(o*d+f*-l);return r.x=d*m*n+-f*m*i+(p*f-v*d)*m,r.y=o*m*i+-l*m*n+(-p*o+v*l)*m,r},getX:function(n,i){return n*this.a+i*this.c+this.e},getY:function(n,i){return n*this.b+i*this.d+this.f},getXRound:function(n,i,r){var u=this.getX(n,i);return r&&(u=Math.round(u)),u},getYRound:function(n,i,r){var u=this.getY(n,i);return r&&(u=Math.round(u)),u},getCSSMatrix:function(){var n=this.matrix;return"matrix("+n[0]+","+n[1]+","+n[2]+","+n[3]+","+n[4]+","+n[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),c=function(s,a,n,i,r,u){s===void 0&&(s=0),a===void 0&&(a=0),n===void 0&&(n=u.width),i===void 0&&(i=u.height),r||(r={});var o=e(r,"isNotEmpty",!1),l=e(r,"isColliding",!1),f=e(r,"hasInterestingFace",!1);s<0&&(n+=s,s=0),a<0&&(i+=a,a=0),s+n>u.width&&(n=Math.max(u.width-s,0)),a+i>u.height&&(i=Math.max(u.height-a,0));for(var d=[],v=a;v<a+i;v++)for(var p=s;p<s+n;p++){var m=u.data[v][p];if(m!==null){if(o&&m.index===-1||l&&!m.collides||f&&!m.hasInterestingFace)continue;d.push(m)}}return d};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n,i){a===void 0&&(a=0),n===void 0&&(n=0),i===void 0&&(i=1);var r,u=0,o=e.length;if(i===1)for(r=n;r<o;r++)e[r][c]=s+u*a,u++;else for(r=n;r>=0;r--)e[r][c]=s+u*a,u++;return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),c=t(13),s=function(a,n,i){n.x=c(i,"x",0),n.y=c(i,"y",0),n.depth=c(i,"depth",0),n.flipX=c(i,"flipX",!1),n.flipY=c(i,"flipY",!1);var r=c(i,"scale",null);typeof r=="number"?n.setScale(r):r!==null&&(n.scaleX=c(r,"x",1),n.scaleY=c(r,"y",1));var u=c(i,"scrollFactor",null);typeof u=="number"?n.setScrollFactor(u):u!==null&&(n.scrollFactorX=c(u,"x",1),n.scrollFactorY=c(u,"y",1)),n.rotation=c(i,"rotation",0);var o=c(i,"angle",null);o!==null&&(n.angle=o),n.alpha=c(i,"alpha",1);var l=c(i,"origin",null);if(typeof l=="number")n.setOrigin(l);else if(l!==null){var f=c(l,"x",.5),d=c(l,"y",.5);n.setOrigin(f,d)}n.blendMode=c(i,"blendMode",e.NORMAL),n.visible=c(i,"visible",!0);var v=c(i,"add",!0);return v&&a.sys.displayList.add(n),n.preUpdate&&a.sys.updateList.add(n),n};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=function(s,a,n,i,r){var u=i.alpha*n.alpha;if(u<=0)return!1;var o=e(n,i,r).calc;return a.globalCompositeOperation=s.blendModes[n.blendMode],a.globalAlpha=u,a.save(),o.setToContext(a),a.imageSmoothingEnabled=!(!s.antialias||n.frame&&n.frame.source.scaleMode),!0};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),c=t(192),s=[],a=!1,n=function(){var i=function(m,x,T,S,E){x===void 0&&(x=1),T===void 0&&(T=1),S===void 0&&(S=e.CANVAS),E===void 0&&(E=!1);var C,A=o(S);return A===null?(A={parent:m,canvas:document.createElement("canvas"),type:S},S===e.CANVAS&&s.push(A),C=A.canvas):(A.parent=m,C=A.canvas),E&&(A.parent=C),C.width=x,C.height=T,a&&S===e.CANVAS&&c.disable(C.getContext("2d")),C},r=function(m,x,T){return i(m,x,T,e.CANVAS)},u=function(m,x,T){return i(m,x,T,e.WEBGL)},o=function(m){if(m===void 0&&(m=e.CANVAS),m===e.WEBGL)return null;for(var x=0;x<s.length;x++){var T=s[x];if(!T.parent&&T.type===m)return T}return null},l=function(m){var x=m instanceof HTMLCanvasElement;s.forEach(function(T){(x&&T.canvas===m||!x&&T.parent===m)&&(T.parent=null,T.canvas.width=1,T.canvas.height=1)})},f=function(){var m=0;return s.forEach(function(x){x.parent&&m++}),m},d=function(){return s.length-f()},v=function(){a=!0},p=function(){a=!1};return{create2D:r,create:i,createWebGL:u,disableSmoothing:v,enableSmoothing:p,first:o,free:d,pool:s,remove:l,total:f}};h.exports=n()},function(h,g){var t={};h.exports=t,function(){t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t.extend=function(c,s){var a,n;typeof s=="boolean"?(a=2,n=s):(a=1,n=!0);for(var i=a;i<arguments.length;i++){var r=arguments[i];if(r)for(var u in r)n&&r[u]&&r[u].constructor===Object&&(!c[u]||c[u].constructor===Object)?(c[u]=c[u]||{},t.extend(c[u],n,r[u])):c[u]=r[u]}return c},t.clone=function(c,s){return t.extend({},s,c)},t.keys=function(c){if(Object.keys)return Object.keys(c);var s=[];for(var a in c)s.push(a);return s},t.values=function(c){var s=[];if(Object.keys){for(var a=Object.keys(c),n=0;n<a.length;n++)s.push(c[a[n]]);return s}for(var i in c)s.push(c[i]);return s},t.get=function(c,s,a,n){s=s.split(".").slice(a,n);for(var i=0;i<s.length;i+=1)c=c[s[i]];return c},t.set=function(c,s,a,n,i){var r=s.split(".").slice(n,i);return t.get(c,s,0,-1)[r[r.length-1]]=a,a},t.shuffle=function(c){for(var s=c.length-1;s>0;s--){var a=Math.floor(t.random()*(s+1)),n=c[s];c[s]=c[a],c[a]=n}return c},t.choose=function(c){return c[Math.floor(t.random()*c.length)]},t.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},t.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},t.isFunction=function(c){return typeof c=="function"},t.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},t.isString=function(c){return Object.prototype.toString.call(c)==="[object String]"},t.clamp=function(c,s,a){return c<s?s:c>a?a:c},t.sign=function(c){return c<0?-1:1},t.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-t._nowStartTime},t.random=function(c,s){return c=typeof c<"u"?c:0,s=typeof s<"u"?s:1,c+e()*(s-c)};var e=function(){return t._seed=(t._seed*9301+49297)%233280,t._seed/233280};t.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},t.logLevel=1,t.log=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.info=function(){console&&t.logLevel>0&&t.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.warn=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.nextId=function(){return t._nextId++},t.indexOf=function(c,s){if(c.indexOf)return c.indexOf(s);for(var a=0;a<c.length;a++)if(c[a]===s)return a;return-1},t.map=function(c,s){if(c.map)return c.map(s);for(var a=[],n=0;n<c.length;n+=1)a.push(s(c[n]));return a},t.topologicalSort=function(c){var s=[],a=[],n=[];for(var i in c)!a[i]&&!n[i]&&t._topologicalSort(i,a,n,c,s);return s},t._topologicalSort=function(c,s,a,n,i){var r=n[c]||[];a[c]=!0;for(var u=0;u<r.length;u+=1){var o=r[u];a[o]||s[o]||t._topologicalSort(o,s,a,n,i)}a[c]=!1,s[c]=!0,i.push(c)},t.chain=function(){for(var c=[],s=0;s<arguments.length;s+=1){var a=arguments[s];a._chained?c.push.apply(c,a._chained):c.push(a)}var n=function(){for(var i,r=new Array(arguments.length),u=0,o=arguments.length;u<o;u++)r[u]=arguments[u];for(u=0;u<c.length;u+=1){var l=c[u].apply(i,r);typeof l<"u"&&(i=l)}return i};return n._chained=c,n},t.chainPathBefore=function(c,s,a){return t.set(c,s,t.chain(a,t.get(c,s)))},t.chainPathAfter=function(c,s,a){return t.set(c,s,t.chain(t.get(c,s),a))}}()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={VERSION:"3.55.2",BlendModes:t(35),ScaleModes:t(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(15),a=t(47),n=new e({Extends:s,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.ScrollFactor,c.Transform,c.Visible],initialize:function(r,u,o){u===void 0&&(u="Shape"),s.call(this,r,u),this.geom=o,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(i,r){return r===void 0&&(r=1),i===void 0?this.isFilled=!1:(this.fillColor=i,this.fillAlpha=r,this.isFilled=!0),this},setStrokeStyle:function(i,r,u){return u===void 0&&(u=1),i===void 0?this.isStroked=!1:(this.lineWidth=i,this.strokeColor=r,this.strokeAlpha=u,this.isStroked=!0),this},setClosePath:function(i){return this.closePath=i,this},setSize:function(i,r){return this.width=i,this.height=r,this},setDisplaySize:function(i,r){return this.displayWidth=i,this.displayHeight=r,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(i){this.scaleX=i/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(i){this.scaleY=i/this.height}}});h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),c=function(s){return s*e.DEG_TO_RAD};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DESTROY:t(743),FADE_IN_COMPLETE:t(744),FADE_IN_START:t(745),FADE_OUT_COMPLETE:t(746),FADE_OUT_START:t(747),FLASH_COMPLETE:t(748),FLASH_START:t(749),FOLLOW_UPDATE:t(750),PAN_COMPLETE:t(751),PAN_START:t(752),POST_RENDER:t(753),PRE_RENDER:t(754),ROTATE_COMPLETE:t(755),ROTATE_START:t(756),SHAKE_COMPLETE:t(757),SHAKE_START:t(758),ZOOM_COMPLETE:t(759),ZOOM_START:t(760)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(103),s=t(328),a=t(188),n=t(329),i=new e({initialize:function(u,o,l,f){u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(u,o,l,f)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(r,u,o,l,f){return l===void 0&&(l=255),f===void 0&&(f=!0),this._locked=!0,this.red=r,this.green=u,this.blue=o,this.alpha=l,this._locked=!1,this.update(f)},setGLTo:function(r,u,o,l){return l===void 0&&(l=1),this._locked=!0,this.redGL=r,this.greenGL=u,this.blueGL=o,this.alphaGL=l,this._locked=!1,this.update(!0)},setFromRGB:function(r){return this._locked=!0,this.red=r.r,this.green=r.g,this.blue=r.b,r.hasOwnProperty("a")&&(this.alpha=r.a),this._locked=!1,this.update(!0)},setFromHSV:function(r,u,o){return a(r,u,o,this)},update:function(r){if(r===void 0&&(r=!1),this._locked)return this;var u=this.r,o=this.g,l=this.b,f=this.a;return this._color=c(u,o,l),this._color32=s(u,o,l,f),this._rgba="rgba("+u+","+o+","+l+","+f/255+")",r&&n(u,o,l,this),this},updateHSV:function(){var r=this.r,u=this.g,o=this.b;return n(r,u,o,this),this},clone:function(){return new i(this.r,this.g,this.b,this.a)},gray:function(r){return this.setTo(r,r,r)},random:function(r,u){r===void 0&&(r=0),u===void 0&&(u=255);var o=Math.floor(r+Math.random()*(u-r)),l=Math.floor(r+Math.random()*(u-r)),f=Math.floor(r+Math.random()*(u-r));return this.setTo(o,l,f)},randomGray:function(r,u){r===void 0&&(r=0),u===void 0&&(u=255);var o=Math.floor(r+Math.random()*(u-r));return this.setTo(o,o,o)},saturate:function(r){return this.s+=r/100,this},desaturate:function(r){return this.s-=r/100,this},lighten:function(r){return this.v+=r/100,this},darken:function(r){return this.v-=r/100,this},brighten:function(r){var u=this.r,o=this.g,l=this.b;return u=Math.max(0,Math.min(255,u-Math.round(255*-(r/100)))),o=Math.max(0,Math.min(255,o-Math.round(255*-(r/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(r/100)))),this.setTo(u,o,l)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(r){this.gl[0]=Math.min(Math.abs(r),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(r){this.gl[1]=Math.min(Math.abs(r),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(r){this.gl[2]=Math.min(Math.abs(r),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(r){this.gl[3]=Math.min(Math.abs(r),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(r){r=Math.floor(Math.abs(r)),this.r=Math.min(r,255),this.gl[0]=r/255,this.update(!0)}},green:{get:function(){return this.g},set:function(r){r=Math.floor(Math.abs(r)),this.g=Math.min(r,255),this.gl[1]=r/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(r){r=Math.floor(Math.abs(r)),this.b=Math.min(r,255),this.gl[2]=r/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(r){r=Math.floor(Math.abs(r)),this.a=Math.min(r,255),this.gl[3]=r/255,this.update()}},h:{get:function(){return this._h},set:function(r){this._h=r,a(r,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(r){this._s=r,a(this._h,r,this._v,this)}},v:{get:function(){return this._v},set:function(r){this._v=r,a(this._h,this._s,r,this)}}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n,i){this.x=0,this.y=0,this.z=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=n||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(s){return this.x=Math.min(this.x,s.x),this.y=Math.min(this.y,s.y),this.z=Math.min(this.z,s.z),this},max:function(s){return this.x=Math.max(this.x,s.x),this.y=Math.max(this.y,s.y),this.z=Math.max(this.z,s.z),this},clone:function(){return new c(this.x,this.y,this.z)},addVectors:function(s,a){return this.x=s.x+a.x,this.y=s.y+a.y,this.z=s.z+a.z,this},crossVectors:function(s,a){var n=s.x,i=s.y,r=s.z,u=a.x,o=a.y,l=a.z;return this.x=i*l-r*o,this.y=r*u-n*l,this.z=n*o-i*u,this},equals:function(s){return this.x===s.x&&this.y===s.y&&this.z===s.z},copy:function(s){return this.x=s.x,this.y=s.y,this.z=s.z||0,this},set:function(s,a,n){return typeof s=="object"?(this.x=s.x||0,this.y=s.y||0,this.z=s.z||0):(this.x=s||0,this.y=a||0,this.z=n||0),this},setFromMatrixPosition:function(s){return this.fromArray(s.val,12)},setFromMatrixColumn:function(s,a){return this.fromArray(s.val,a*4)},fromArray:function(s,a){return a===void 0&&(a=0),this.x=s[a],this.y=s[a+1],this.z=s[a+2],this},add:function(s){return this.x+=s.x,this.y+=s.y,this.z+=s.z||0,this},addScalar:function(s){return this.x+=s,this.y+=s,this.z+=s,this},addScale:function(s,a){return this.x+=s.x*a,this.y+=s.y*a,this.z+=s.z*a||0,this},subtract:function(s){return this.x-=s.x,this.y-=s.y,this.z-=s.z||0,this},multiply:function(s){return this.x*=s.x,this.y*=s.y,this.z*=s.z||1,this},scale:function(s){return isFinite(s)?(this.x*=s,this.y*=s,this.z*=s):(this.x=0,this.y=0,this.z=0),this},divide:function(s){return this.x/=s.x,this.y/=s.y,this.z/=s.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(s){var a=s.x-this.x,n=s.y-this.y,i=s.z-this.z||0;return Math.sqrt(a*a+n*n+i*i)},distanceSq:function(s){var a=s.x-this.x,n=s.y-this.y,i=s.z-this.z||0;return a*a+n*n+i*i},length:function(){var s=this.x,a=this.y,n=this.z;return Math.sqrt(s*s+a*a+n*n)},lengthSq:function(){var s=this.x,a=this.y,n=this.z;return s*s+a*a+n*n},normalize:function(){var s=this.x,a=this.y,n=this.z,i=s*s+a*a+n*n;return i>0&&(i=1/Math.sqrt(i),this.x=s*i,this.y=a*i,this.z=n*i),this},dot:function(s){return this.x*s.x+this.y*s.y+this.z*s.z},cross:function(s){var a=this.x,n=this.y,i=this.z,r=s.x,u=s.y,o=s.z;return this.x=n*o-i*u,this.y=i*r-a*o,this.z=a*u-n*r,this},lerp:function(s,a){a===void 0&&(a=0);var n=this.x,i=this.y,r=this.z;return this.x=n+a*(s.x-n),this.y=i+a*(s.y-i),this.z=r+a*(s.z-r),this},applyMatrix3:function(s){var a=this.x,n=this.y,i=this.z,r=s.val;return this.x=r[0]*a+r[3]*n+r[6]*i,this.y=r[1]*a+r[4]*n+r[7]*i,this.z=r[2]*a+r[5]*n+r[8]*i,this},applyMatrix4:function(s){var a=this.x,n=this.y,i=this.z,r=s.val,u=1/(r[3]*a+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*a+r[4]*n+r[8]*i+r[12])*u,this.y=(r[1]*a+r[5]*n+r[9]*i+r[13])*u,this.z=(r[2]*a+r[6]*n+r[10]*i+r[14])*u,this},transformMat3:function(s){var a=this.x,n=this.y,i=this.z,r=s.val;return this.x=a*r[0]+n*r[3]+i*r[6],this.y=a*r[1]+n*r[4]+i*r[7],this.z=a*r[2]+n*r[5]+i*r[8],this},transformMat4:function(s){var a=this.x,n=this.y,i=this.z,r=s.val;return this.x=r[0]*a+r[4]*n+r[8]*i+r[12],this.y=r[1]*a+r[5]*n+r[9]*i+r[13],this.z=r[2]*a+r[6]*n+r[10]*i+r[14],this},transformCoordinates:function(s){var a=this.x,n=this.y,i=this.z,r=s.val,u=a*r[0]+n*r[4]+i*r[8]+r[12],o=a*r[1]+n*r[5]+i*r[9]+r[13],l=a*r[2]+n*r[6]+i*r[10]+r[14],f=a*r[3]+n*r[7]+i*r[11]+r[15];return this.x=u/f,this.y=o/f,this.z=l/f,this},transformQuat:function(s){var a=this.x,n=this.y,i=this.z,r=s.x,u=s.y,o=s.z,l=s.w,f=l*a+u*i-o*n,d=l*n+o*a-r*i,v=l*i+r*n-u*a,p=-r*a-u*n-o*i;return this.x=f*l+p*-r+d*-o-v*-u,this.y=d*l+p*-u+v*-r-f*-o,this.z=v*l+p*-o+f*-u-d*-r,this},project:function(s){var a=this.x,n=this.y,i=this.z,r=s.val,u=r[0],o=r[1],l=r[2],f=r[3],d=r[4],v=r[5],p=r[6],m=r[7],x=r[8],T=r[9],S=r[10],E=r[11],C=r[12],A=r[13],P=r[14],M=r[15],O=1/(a*f+n*m+i*E+M);return this.x=(a*u+n*d+i*x+C)*O,this.y=(a*o+n*v+i*T+A)*O,this.z=(a*l+n*p+i*S+P)*O,this},projectViewMatrix:function(s,a){return this.applyMatrix4(s).applyMatrix4(a)},unprojectViewMatrix:function(s,a){return this.applyMatrix4(s).applyMatrix4(a)},unproject:function(s,a){var n=s.x,i=s.y,r=s.z,u=s.w,o=this.x-n,l=u-this.y-1-i,f=this.z;return this.x=2*o/r-1,this.y=2*l/u-1,this.z=2*f-1,this.project(a)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});c.ZERO=new c,c.RIGHT=new c(1,0,0),c.LEFT=new c(-1,0,0),c.UP=new c(0,-1,0),c.DOWN=new c(0,1,0),c.FORWARD=new c(0,0,1),c.BACK=new c(0,0,-1),c.ONE=new c(1,1,1),h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(h,g,t){var e={};h.exports=e;var c=t(64),s=t(83),a=t(165),n=t(32),i=t(84),r=t(271);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(o){var l={id:n.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!o.hasOwnProperty("position")&&o.hasOwnProperty("vertices")?o.position=c.centre(o.vertices):o.hasOwnProperty("vertices")||(l.vertices=c.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var f=n.extend(l,o);return u(f,o),f.setOnCollideWith=function(d,v){return v?this.onCollideWith[d.id]=v:delete this.onCollideWith[d.id],this},f},e.nextGroup=function(o){return o?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var u=function(o,l){l=l||{},e.set(o,{bounds:o.bounds||i.create(o.vertices),positionPrev:o.positionPrev||s.clone(o.position),anglePrev:o.anglePrev||o.angle,vertices:o.vertices,parts:o.parts||[o],isStatic:o.isStatic,isSleeping:o.isSleeping,parent:o.parent||o});var f=o.bounds;if(c.rotate(o.vertices,o.angle,o.position),r.rotate(o.axes,o.angle),i.update(f,o.vertices,o.velocity),e.set(o,{axes:l.axes||o.axes,area:l.area||o.area,mass:l.mass||o.mass,inertia:l.inertia||o.inertia}),o.parts.length===1){var d=o.centerOfMass,v=o.centerOffset,p=f.max.x-f.min.x,m=f.max.y-f.min.y;d.x=-(f.min.x-o.position.x)/p,d.y=-(f.min.y-o.position.y)/m,v.x=p*d.x,v.y=m*d.y}};e.set=function(o,l,f){var d;typeof l=="string"&&(d=l,l={},l[d]=f);for(d in l)if(Object.prototype.hasOwnProperty.call(l,d))switch(f=l[d],d){case"isStatic":e.setStatic(o,f);break;case"isSleeping":a.set(o,f);break;case"mass":e.setMass(o,f);break;case"density":e.setDensity(o,f);break;case"inertia":e.setInertia(o,f);break;case"vertices":e.setVertices(o,f);break;case"position":e.setPosition(o,f);break;case"angle":e.setAngle(o,f);break;case"velocity":e.setVelocity(o,f);break;case"angularVelocity":e.setAngularVelocity(o,f);break;case"parts":e.setParts(o,f);break;case"centre":e.setCentre(o,f);break;default:o[d]=f}},e.setStatic=function(o,l){for(var f=0;f<o.parts.length;f++){var d=o.parts[f];d.isStatic=l,l?(d._original={restitution:d.restitution,friction:d.friction,mass:d.mass,inertia:d.inertia,density:d.density,inverseMass:d.inverseMass,inverseInertia:d.inverseInertia},d.restitution=0,d.friction=1,d.mass=d.inertia=d.density=1/0,d.inverseMass=d.inverseInertia=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.angularVelocity=0,d.speed=0,d.angularSpeed=0,d.motion=0):d._original&&(d.restitution=d._original.restitution,d.friction=d._original.friction,d.mass=d._original.mass,d.inertia=d._original.inertia,d.density=d._original.density,d.inverseMass=d._original.inverseMass,d.inverseInertia=d._original.inverseInertia,d._original=null)}},e.setMass=function(o,l){var f=o.inertia/(o.mass/6);o.inertia=f*(l/6),o.inverseInertia=1/o.inertia,o.mass=l,o.inverseMass=1/o.mass,o.density=o.mass/o.area},e.setDensity=function(o,l){e.setMass(o,l*o.area),o.density=l},e.setInertia=function(o,l){o.inertia=l,o.inverseInertia=1/o.inertia},e.setVertices=function(o,l){l[0].body===o?o.vertices=l:o.vertices=c.create(l,o),o.axes=r.fromVertices(o.vertices),o.area=c.area(o.vertices),e.setMass(o,o.density*o.area);var f=c.centre(o.vertices);c.translate(o.vertices,f,-1),e.setInertia(o,e._inertiaScale*c.inertia(o.vertices,o.mass)),c.translate(o.vertices,o.position),i.update(o.bounds,o.vertices,o.velocity)},e.setParts=function(o,l,f){var d;for(l=l.slice(0),o.parts.length=0,o.parts.push(o),o.parent=o,d=0;d<l.length;d++){var v=l[d];v!==o&&(v.parent=o,o.parts.push(v))}if(o.parts.length!==1){if(f=typeof f<"u"?f:!0,f){var p=[];for(d=0;d<l.length;d++)p=p.concat(l[d].vertices);c.clockwiseSort(p);var m=c.hull(p),x=c.centre(m);e.setVertices(o,m),c.translate(o.vertices,x)}var T=e._totalProperties(o),S=T.centre.x,E=T.centre.y,C=o.bounds,A=o.centerOfMass,P=o.centerOffset;i.update(C,o.vertices,o.velocity),A.x=-(C.min.x-S)/(C.max.x-C.min.x),A.y=-(C.min.y-E)/(C.max.y-C.min.y),P.x=S,P.y=E,o.area=T.area,o.parent=o,o.position.x=S,o.position.y=E,o.positionPrev.x=S,o.positionPrev.y=E,e.setMass(o,T.mass),e.setInertia(o,T.inertia),e.setPosition(o,T.centre)}},e.setCentre=function(o,l,f){f?(o.positionPrev.x+=l.x,o.positionPrev.y+=l.y,o.position.x+=l.x,o.position.y+=l.y):(o.positionPrev.x=l.x-(o.position.x-o.positionPrev.x),o.positionPrev.y=l.y-(o.position.y-o.positionPrev.y),o.position.x=l.x,o.position.y=l.y)},e.setPosition=function(o,l){var f=s.sub(l,o.position);o.positionPrev.x+=f.x,o.positionPrev.y+=f.y;for(var d=0;d<o.parts.length;d++){var v=o.parts[d];v.position.x+=f.x,v.position.y+=f.y,c.translate(v.vertices,f),i.update(v.bounds,v.vertices,o.velocity)}},e.setAngle=function(o,l){var f=l-o.angle;o.anglePrev+=f;for(var d=0;d<o.parts.length;d++){var v=o.parts[d];v.angle+=f,c.rotate(v.vertices,f,o.position),r.rotate(v.axes,f),i.update(v.bounds,v.vertices,o.velocity),d>0&&s.rotateAbout(v.position,f,o.position,v.position)}},e.setVelocity=function(o,l){o.positionPrev.x=o.position.x-l.x,o.positionPrev.y=o.position.y-l.y,o.velocity.x=l.x,o.velocity.y=l.y,o.speed=s.magnitude(o.velocity)},e.setAngularVelocity=function(o,l){o.anglePrev=o.angle-l,o.angularVelocity=l,o.angularSpeed=Math.abs(o.angularVelocity)},e.translate=function(o,l){e.setPosition(o,s.add(o.position,l))},e.rotate=function(o,l,f){if(!f)e.setAngle(o,o.angle+l);else{var d=Math.cos(l),v=Math.sin(l),p=o.position.x-f.x,m=o.position.y-f.y;e.setPosition(o,{x:f.x+(p*d-m*v),y:f.y+(p*v+m*d)}),e.setAngle(o,o.angle+l)}},e.scale=function(o,l,f,d){var v=0,p=0;d=d||o.position;for(var m=0;m<o.parts.length;m++){var x=o.parts[m];x.scale.x=l,x.scale.y=f,c.scale(x.vertices,l,f,d),x.axes=r.fromVertices(x.vertices),x.area=c.area(x.vertices),e.setMass(x,o.density*x.area),c.translate(x.vertices,{x:-x.position.x,y:-x.position.y}),e.setInertia(x,e._inertiaScale*c.inertia(x.vertices,x.mass)),c.translate(x.vertices,{x:x.position.x,y:x.position.y}),m>0&&(v+=x.area,p+=x.inertia),x.position.x=d.x+(x.position.x-d.x)*l,x.position.y=d.y+(x.position.y-d.y)*f,i.update(x.bounds,x.vertices,o.velocity)}o.parts.length>1&&(o.area=v,o.isStatic||(e.setMass(o,o.density*v),e.setInertia(o,p))),o.circleRadius&&(l===f?o.circleRadius*=l:o.circleRadius=null)},e.update=function(o,l,f,d){var v=Math.pow(l*f*o.timeScale,2),p=1-o.frictionAir*f*o.timeScale,m=o.position.x-o.positionPrev.x,x=o.position.y-o.positionPrev.y;o.velocity.x=m*p*d+o.force.x/o.mass*v,o.velocity.y=x*p*d+o.force.y/o.mass*v,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.position.x+=o.velocity.x,o.position.y+=o.velocity.y,o.angularVelocity=(o.angle-o.anglePrev)*p*d+o.torque/o.inertia*v,o.anglePrev=o.angle,o.angle+=o.angularVelocity,o.speed=s.magnitude(o.velocity),o.angularSpeed=Math.abs(o.angularVelocity);for(var T=0;T<o.parts.length;T++){var S=o.parts[T];c.translate(S.vertices,o.velocity),T>0&&(S.position.x+=o.velocity.x,S.position.y+=o.velocity.y),o.angularVelocity!==0&&(c.rotate(S.vertices,o.angularVelocity,o.position),r.rotate(S.axes,o.angularVelocity),T>0&&s.rotateAbout(S.position,o.angularVelocity,o.position,S.position)),i.update(S.bounds,S.vertices,o.velocity)}},e.applyForce=function(o,l,f){o.force.x+=f.x,o.force.y+=f.y;var d={x:l.x-o.position.x,y:l.y-o.position.y};o.torque+=d.x*f.y-d.y*f.x},e._totalProperties=function(o){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},f=o.parts.length===1?0:1;f<o.parts.length;f++){var d=o.parts[f],v=d.mass!==1/0?d.mass:1;l.mass+=v,l.area+=d.area,l.inertia+=d.inertia,l.centre=s.add(l.centre,s.mult(d.position,v))}return l.centre=s.div(l.centre,l.mass),l}})()},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y+e.height-e.height*e.originY};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x-e.width*e.originX};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x+e.width-e.width*e.originX};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y-e.height*e.originY};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n,i){a===void 0&&(a=0),n===void 0&&(n=0),i===void 0&&(i=1);var r,u=0,o=e.length;if(i===1)for(r=n;r<o;r++)e[r][c]+=s+u*a,u++;else for(r=n;r>=0;r--)e[r][c]+=s+u*a,u++;return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(307),s=t(172),a=t(56),n=t(173),i=t(3),r=new e({initialize:function(o,l,f,d){o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=0),d===void 0&&(d=0),this.type=a.LINE,this.x1=o,this.y1=l,this.x2=f,this.y2=d},getPoint:function(u,o){return c(this,u,o)},getPoints:function(u,o,l){return s(this,u,o,l)},getRandomPoint:function(u){return n(this,u)},setTo:function(u,o,l,f){return u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=0),this.x1=u,this.y1=o,this.x2=l,this.y2=f,this},getPointA:function(u){return u===void 0&&(u=new i),u.set(this.x1,this.y1),u},getPointB:function(u){return u===void 0&&(u=new i),u.set(this.x2,this.y2),u},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(u){this.x1<=this.x2?this.x1=u:this.x2=u}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(u){this.x1>this.x2?this.x1=u:this.x2=u}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(u){this.y1<=this.y2?this.y1=u:this.y2=u}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(u){this.y1>this.y2?this.y1=u:this.y2=u}}});h.exports=r},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=s||c.fillColor,i=a||c.fillAlpha,r=(n&16711680)>>>16,u=(n&65280)>>>8,o=n&255;e.fillStyle="rgba("+r+","+u+","+o+","+i+")"};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n,i,r){var u=[];r.forEach(function(l){l&&u.push(l)}),this.loader=a,this.type=n,this.key=i,this.multiKeyIndex=a.multiKeyIndex++,this.files=u,this.complete=!1,this.pending=u.length,this.failed=0,this.config={},this.baseURL=a.baseURL,this.path=a.path,this.prefix=a.prefix;for(var o=0;o<u.length;o++)u[o].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(s){return this.files.push(s),s.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(s){var a=this.files.indexOf(s);a!==-1&&this.pending--},onFileFailed:function(s){var a=this.files.indexOf(s);a!==-1&&this.failed++}});h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=e-s,i=c-a;return Math.sqrt(n*n+i*i)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BOOT:t(922),DESTROY:t(923),DRAG_END:t(924),DRAG_ENTER:t(925),DRAG:t(926),DRAG_LEAVE:t(927),DRAG_OVER:t(928),DRAG_START:t(929),DROP:t(930),GAME_OUT:t(931),GAME_OVER:t(932),GAMEOBJECT_DOWN:t(933),GAMEOBJECT_DRAG_END:t(934),GAMEOBJECT_DRAG_ENTER:t(935),GAMEOBJECT_DRAG:t(936),GAMEOBJECT_DRAG_LEAVE:t(937),GAMEOBJECT_DRAG_OVER:t(938),GAMEOBJECT_DRAG_START:t(939),GAMEOBJECT_DROP:t(940),GAMEOBJECT_MOVE:t(941),GAMEOBJECT_OUT:t(942),GAMEOBJECT_OVER:t(943),GAMEOBJECT_POINTER_DOWN:t(944),GAMEOBJECT_POINTER_MOVE:t(945),GAMEOBJECT_POINTER_OUT:t(946),GAMEOBJECT_POINTER_OVER:t(947),GAMEOBJECT_POINTER_UP:t(948),GAMEOBJECT_POINTER_WHEEL:t(949),GAMEOBJECT_UP:t(950),GAMEOBJECT_WHEEL:t(951),MANAGER_BOOT:t(952),MANAGER_PROCESS:t(953),MANAGER_UPDATE:t(954),POINTER_DOWN:t(955),POINTER_DOWN_OUTSIDE:t(956),POINTER_MOVE:t(957),POINTER_OUT:t(958),POINTER_OVER:t(959),POINTER_UP:t(960),POINTER_UP_OUTSIDE:t(961),POINTER_WHEEL:t(962),POINTERLOCK_CHANGE:t(963),PRE_UPDATE:t(964),SHUTDOWN:t(965),START:t(966),UPDATE:t(967)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.y=c+e.height*e.originY,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x=c+e.width*e.originX,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x=c-e.width+e.width*e.originX,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.y=c-e.height+e.height*e.originY,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e.width<=0||e.height<=0?!1:e.x<=c&&e.x+e.width>=c&&e.y<=s&&e.y+e.height>=s};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(175),s=t(9),a=t(374),n=t(2),i=t(69),r=t(91),u=t(141),o=t(12),l=t(375),f=new e({Extends:s,initialize:function(v){s.call(this);var p=v.game,m=p.renderer,x=m.gl;this.name=n(v,"name","WebGLPipeline"),this.game=p,this.renderer=m,this.manager,this.gl=x,this.view=p.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=n(v,"topology",x.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=n(v,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=v,this.glReset=!1},boot:function(){var d,v=this.gl,p=this.config,m=this.renderer;this.isPostFX||(this.projectionMatrix=new i().identity());var x=this.renderTargets,T=n(p,"renderTarget",!1);typeof T=="boolean"&&T&&(T=1);var S=m.width,E=m.height;if(typeof T=="number")for(d=0;d<T;d++)x.push(new u(m,S,E,1,0,!0));else if(Array.isArray(T))for(d=0;d<T.length;d++){var C=n(T[d],"scale",1),A=n(T[d],"minFilter",0),P=n(T[d],"autoClear",1);x.push(new u(m,S,E,C,A,P))}x.length&&(this.currentRenderTarget=x[0]),this.setShadersFromConfig(p);var M=this.shaders,O=0;for(d=0;d<M.length;d++)M[d].vertexSize>O&&(O=M[d].vertexSize);var F=n(p,"batchSize",m.config.batchSize);this.vertexCapacity=F*6;var I=new ArrayBuffer(this.vertexCapacity*O);this.vertexData=I,this.bytes=new Uint8Array(I),this.vertexViewF32=new Float32Array(I),this.vertexViewU32=new Uint32Array(I);var N=n(p,"vertices",null);for(N?(this.vertexViewF32.set(N),this.vertexBuffer=m.createVertexBuffer(I,v.STATIC_DRAW)):this.vertexBuffer=m.createVertexBuffer(I.byteLength,v.DYNAMIC_DRAW),this.setVertexBuffer(),d=M.length-1;d>=0;d--)M[d].rebind();this.hasBooted=!0,m.on(r.RESIZE,this.resize,this),m.on(r.PRE_RENDER,this.onPreRender,this),m.on(r.RENDER,this.onRender,this),m.on(r.POST_RENDER,this.onPostRender,this),this.emit(a.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(d,v){var p=this.renderer;if(d!==this.currentShader||p.currentProgram!==this.currentShader.program){this.flush(),p.resetTextures();var m=this.setVertexBuffer();m&&!v&&(v=!0),d.bind(v,!1),this.currentShader=d}return this},getShaderByName:function(d){for(var v=this.shaders,p=0;p<v.length;p++)if(v[p].name===d)return v[p]},setShadersFromConfig:function(d){var v,p=this.shaders,m=this.renderer;for(v=0;v<p.length;v++)p[v].destroy();var x="vertShader",T="fragShader",S="attributes",E=n(d,x,null),C=o.parseFragmentShaderMaxTextures(n(d,T,null),m.maxTextures),A=n(d,S,null),P=n(d,"shaders",[]),M=P.length;if(M===0)E&&C&&(this.shaders=[new l(this,"default",E,C,c(A))]);else{var O=[];for(v=0;v<M;v++){var F=P[v],I=n(F,"name","default"),N=n(F,x,E),G=o.parseFragmentShaderMaxTextures(n(F,T,C),m.maxTextures),Y=n(F,S,A);N&&G&&O.push(new l(this,I,N,G,c(Y)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(d,v){return v===void 0&&(v=d.frame),this.currentUnit=this.renderer.setTextureSource(v.source),this.currentUnit},shouldFlush:function(d){return d===void 0&&(d=0),this.vertexCount+d>this.vertexCapacity},resize:function(d,v){(d!==this.width||v!==this.height)&&this.flush(),this.width=d,this.height=v;for(var p=this.renderTargets,m=0;m<p.length;m++)p[m].resize(d,v);return this.setProjectionMatrix(d,v),this.emit(a.RESIZE,d,v,this),this.onResize(d,v),this},setProjectionMatrix:function(d,v){var p=this.projectionMatrix;if(!p)return this;this.projectionWidth=d,this.projectionHeight=v,p.ortho(0,d,v,0,-1e3,1e3);for(var m=this.shaders,x="uProjectionMatrix",T=0;T<m.length;T++){var S=m[T];S.hasUniform(x)&&(S.resetUniform(x),S.setMatrix4fv(x,!1,p.val,S))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var d=this.renderer.projectionWidth,v=this.renderer.projectionHeight;(this.projectionWidth!==d||this.projectionHeight!==v)&&this.setProjectionMatrix(d,v)}},bind:function(d){if(d===void 0&&(d=this.currentShader),this.glReset)return this.rebind(d);var v=this.setVertexBuffer();return d.bind(v),this.currentShader=d,this.emit(a.BIND,this,d),this.onActive(d),this},rebind:function(d){this.setVertexBuffer();for(var v=this.shaders,p=v.length-1;p>=0;p--){var m=v[p].rebind();(!d||m===d)&&(this.currentShader=m)}return this.emit(a.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var d=this.gl,v=this.vertexBuffer;return d.getParameter(d.ARRAY_BUFFER_BINDING)!==v?(d.bindBuffer(d.ARRAY_BUFFER,v),!0):!1},preBatch:function(d){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(d),this},postBatch:function(d){return this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(d){if(d===void 0&&(d=!1),this.vertexCount>0){this.emit(a.BEFORE_FLUSH,this,d),this.onBeforeFlush(d);var v=this.gl,p=this.vertexCount,m=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),p===this.vertexCapacity?v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.DYNAMIC_DRAW):v.bufferSubData(v.ARRAY_BUFFER,0,this.bytes.subarray(0,p*m)),v.drawArrays(this.topology,0,p)),this.vertexCount=0,this.emit(a.AFTER_FLUSH,this,d),this.onAfterFlush(d)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(d,v,p,m,x,T,S){var E=this.vertexViewF32,C=this.vertexViewU32,A=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++A]=d,E[++A]=v,E[++A]=p,E[++A]=m,E[++A]=x,E[++A]=T,C[++A]=S,this.vertexCount++},batchQuad:function(d,v,p,m,x,T,S,E,C,A,P,M,O,F,I,N,G,Y,z,W){W===void 0&&(W=this.currentUnit);var D=!1;return this.shouldFlush(6)&&(this.flush(),D=!0,W=this.setTexture2D(z)),this.batchVert(v,p,A,P,W,Y,F),this.batchVert(m,x,A,O,W,Y,N),this.batchVert(T,S,M,O,W,Y,G),this.batchVert(v,p,A,P,W,Y,F),this.batchVert(T,S,M,O,W,Y,G),this.batchVert(E,C,M,P,W,Y,I),this.onBatch(d),D},batchTri:function(d,v,p,m,x,T,S,E,C,A,P,M,O,F,I,N,G){G===void 0&&(G=this.currentUnit);var Y=!1;return this.shouldFlush(3)&&(this.flush(),Y=!0,G=this.setTexture2D(N)),this.batchVert(v,p,E,C,G,I,M),this.batchVert(m,x,E,P,G,I,O),this.batchVert(T,S,A,P,G,I,F),this.onBatch(d),Y},drawFillRect:function(d,v,p,m,x,T,S,E){S===void 0&&(S=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),d=Math.floor(d),v=Math.floor(v);var C=Math.floor(d+p),A=Math.floor(v+m),P=this.setTexture2D(S),M=o.getTintAppendFloatAlphaAndSwap(x,T),O=0,F=0,I=1,N=1;E&&(F=1,N=0),this.batchQuad(null,d,v,d,A,C,A,C,v,O,F,I,N,M,M,M,M,0,S,P)},setTexture2D:function(d){return d===void 0&&(d=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(d),this.currentUnit},bindTexture:function(d,v){v===void 0&&(v=0);var p=this.gl;return p.activeTexture(p.TEXTURE0+v),p.bindTexture(p.TEXTURE_2D,d),this},bindRenderTarget:function(d,v){return this.bindTexture(d.texture,v)},setTime:function(d){return this.set1f(d,this.game.loop.getDuration()),this},set1f:function(d,v,p){return p===void 0&&(p=this.currentShader),p.set1f(d,v),this},set2f:function(d,v,p,m){return m===void 0&&(m=this.currentShader),m.set2f(d,v,p),this},set3f:function(d,v,p,m,x){return x===void 0&&(x=this.currentShader),x.set3f(d,v,p,m),this},set4f:function(d,v,p,m,x,T){return T===void 0&&(T=this.currentShader),T.set4f(d,v,p,m,x),this},set1fv:function(d,v,p){return p===void 0&&(p=this.currentShader),p.set1fv(d,v),this},set2fv:function(d,v,p){return p===void 0&&(p=this.currentShader),p.set2fv(d,v),this},set3fv:function(d,v,p){return p===void 0&&(p=this.currentShader),p.set3fv(d,v),this},set4fv:function(d,v,p){return p===void 0&&(p=this.currentShader),p.set4fv(d,v),this},set1iv:function(d,v,p){return p===void 0&&(p=this.currentShader),p.set1iv(d,v),this},set2iv:function(d,v,p){return p===void 0&&(p=this.currentShader),p.set2iv(d,v),this},set3iv:function(d,v,p){return p===void 0&&(p=this.currentShader),p.set3iv(d,v),this},set4iv:function(d,v,p){return p===void 0&&(p=this.currentShader),p.set4iv(d,v),this},set1i:function(d,v,p){return p===void 0&&(p=this.currentShader),p.set1i(d,v),this},set2i:function(d,v,p,m){return m===void 0&&(m=this.currentShader),m.set2i(d,v,p),this},set3i:function(d,v,p,m,x){return x===void 0&&(x=this.currentShader),x.set3i(d,v,p,m),this},set4i:function(d,v,p,m,x,T){return T===void 0&&(T=this.currentShader),T.set4i(d,v,p,m,x),this},setMatrix2fv:function(d,v,p,m){return m===void 0&&(m=this.currentShader),m.setMatrix2fv(d,v,p),this},setMatrix3fv:function(d,v,p,m){return m===void 0&&(m=this.currentShader),m.setMatrix3fv(d,v,p),this},setMatrix4fv:function(d,v,p,m){return m===void 0&&(m=this.currentShader),m.setMatrix4fv(d,v,p),this},destroy:function(){this.emit(a.DESTROY,this);var d,v=this.shaders;for(d=0;d<v.length;d++)v[d].destroy();var p=this.renderTargets;for(d=0;d<p.length;d++)p[d].destroy();this.gl.deleteBuffer(this.vertexBuffer);var m=this.renderer;return m.off(r.RESIZE,this.resize,this),m.off(r.PRE_RENDER,this.onPreRender,this),m.off(r.RENDER,this.onRender,this),m.off(r.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});h.exports=f},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(L,B,w){w=w||2;var V=B&&B.length,U=V?B[0]*w:L.length,X=c(L,0,U,w,!0),H=[];if(!X||X.next===X.prev)return H;var b,Z,K,Q,j,q,k;if(V&&(X=o(L,B,X,w)),L.length>80*w){b=K=L[0],Z=Q=L[1];for(var J=w;J<U;J+=w)j=L[J],q=L[J+1],j<b&&(b=j),q<Z&&(Z=q),j>K&&(K=j),q>Q&&(Q=q);k=Math.max(K-b,Q-Z),k=k!==0?1/k:0}return a(X,H,w,b,Z,k),H}function c(L,B,w,V,U){var X,H;if(U===D(L,B,w,V)>0)for(X=B;X<w;X+=V)H=Y(X,L[X],L[X+1],H);else for(X=w-V;X>=B;X-=V)H=Y(X,L[X],L[X+1],H);return H&&A(H,H.next)&&(z(H),H=H.next),H}function s(L,B){if(!L)return L;B||(B=L);var w=L,V;do if(V=!1,!w.steiner&&(A(w,w.next)||C(w.prev,w,w.next)===0)){if(z(w),w=B=w.prev,w===w.next)break;V=!0}else w=w.next;while(V||w!==B);return B}function a(L,B,w,V,U,X,H){if(L){!H&&X&&p(L,V,U,X);for(var b=L,Z,K;L.prev!==L.next;){if(Z=L.prev,K=L.next,X?i(L,V,U,X):n(L)){B.push(Z.i/w),B.push(L.i/w),B.push(K.i/w),z(L),L=K.next,b=K.next;continue}if(L=K,L===b){H?H===1?(L=r(s(L),B,w),a(L,B,w,V,U,X,2)):H===2&&u(L,B,w,V,U,X):a(s(L),B,w,V,U,X,1);break}}}}function n(L){var B=L.prev,w=L,V=L.next;if(C(B,w,V)>=0)return!1;for(var U=L.next.next;U!==L.prev;){if(S(B.x,B.y,w.x,w.y,V.x,V.y,U.x,U.y)&&C(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function i(L,B,w,V){var U=L.prev,X=L,H=L.next;if(C(U,X,H)>=0)return!1;for(var b=U.x<X.x?U.x<H.x?U.x:H.x:X.x<H.x?X.x:H.x,Z=U.y<X.y?U.y<H.y?U.y:H.y:X.y<H.y?X.y:H.y,K=U.x>X.x?U.x>H.x?U.x:H.x:X.x>H.x?X.x:H.x,Q=U.y>X.y?U.y>H.y?U.y:H.y:X.y>H.y?X.y:H.y,j=x(b,Z,B,w,V),q=x(K,Q,B,w,V),k=L.prevZ,J=L.nextZ;k&&k.z>=j&&J&&J.z<=q;){if(k!==L.prev&&k!==L.next&&S(U.x,U.y,X.x,X.y,H.x,H.y,k.x,k.y)&&C(k.prev,k,k.next)>=0||(k=k.prevZ,J!==L.prev&&J!==L.next&&S(U.x,U.y,X.x,X.y,H.x,H.y,J.x,J.y)&&C(J.prev,J,J.next)>=0))return!1;J=J.nextZ}for(;k&&k.z>=j;){if(k!==L.prev&&k!==L.next&&S(U.x,U.y,X.x,X.y,H.x,H.y,k.x,k.y)&&C(k.prev,k,k.next)>=0)return!1;k=k.prevZ}for(;J&&J.z<=q;){if(J!==L.prev&&J!==L.next&&S(U.x,U.y,X.x,X.y,H.x,H.y,J.x,J.y)&&C(J.prev,J,J.next)>=0)return!1;J=J.nextZ}return!0}function r(L,B,w){var V=L;do{var U=V.prev,X=V.next.next;!A(U,X)&&P(U,V,V.next,X)&&I(U,X)&&I(X,U)&&(B.push(U.i/w),B.push(V.i/w),B.push(X.i/w),z(V),z(V.next),V=L=X),V=V.next}while(V!==L);return s(V)}function u(L,B,w,V,U,X){var H=L;do{for(var b=H.next.next;b!==H.prev;){if(H.i!==b.i&&E(H,b)){var Z=G(H,b);H=s(H,H.next),Z=s(Z,Z.next),a(H,B,w,V,U,X),a(Z,B,w,V,U,X);return}b=b.next}H=H.next}while(H!==L)}function o(L,B,w,V){var U=[],X,H,b,Z,K;for(X=0,H=B.length;X<H;X++)b=B[X]*V,Z=X<H-1?B[X+1]*V:L.length,K=c(L,b,Z,V,!1),K===K.next&&(K.steiner=!0),U.push(T(K));for(U.sort(l),X=0;X<U.length;X++)f(U[X],w),w=s(w,w.next);return w}function l(L,B){return L.x-B.x}function f(L,B){if(B=d(L,B),B){var w=G(B,L);s(B,B.next),s(w,w.next)}}function d(L,B){var w=B,V=L.x,U=L.y,X=-1/0,H;do{if(U<=w.y&&U>=w.next.y&&w.next.y!==w.y){var b=w.x+(U-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(b<=V&&b>X){if(X=b,b===V){if(U===w.y)return w;if(U===w.next.y)return w.next}H=w.x<w.next.x?w:w.next}}w=w.next}while(w!==B);if(!H)return null;if(V===X)return H;var Z=H,K=H.x,Q=H.y,j=1/0,q;w=H;do V>=w.x&&w.x>=K&&V!==w.x&&S(U<Q?V:X,U,K,Q,U<Q?X:V,U,w.x,w.y)&&(q=Math.abs(U-w.y)/(V-w.x),I(w,L)&&(q<j||q===j&&(w.x>H.x||w.x===H.x&&v(H,w)))&&(H=w,j=q)),w=w.next;while(w!==Z);return H}function v(L,B){return C(L.prev,L,B.prev)<0&&C(B.next,L,L.next)<0}function p(L,B,w,V){var U=L;do U.z===null&&(U.z=x(U.x,U.y,B,w,V)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==L);U.prevZ.nextZ=null,U.prevZ=null,m(U)}function m(L){var B,w,V,U,X,H,b,Z,K=1;do{for(w=L,L=null,X=null,H=0;w;){for(H++,V=w,b=0,B=0;B<K&&(b++,V=V.nextZ,!!V);B++);for(Z=K;b>0||Z>0&&V;)b!==0&&(Z===0||!V||w.z<=V.z)?(U=w,w=w.nextZ,b--):(U=V,V=V.nextZ,Z--),X?X.nextZ=U:L=U,U.prevZ=X,X=U;w=V}X.nextZ=null,K*=2}while(H>1);return L}function x(L,B,w,V,U){return L=32767*(L-w)*U,B=32767*(B-V)*U,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,L|B<<1}function T(L){var B=L,w=L;do(B.x<w.x||B.x===w.x&&B.y<w.y)&&(w=B),B=B.next;while(B!==L);return w}function S(L,B,w,V,U,X,H,b){return(U-H)*(B-b)-(L-H)*(X-b)>=0&&(L-H)*(V-b)-(w-H)*(B-b)>=0&&(w-H)*(X-b)-(U-H)*(V-b)>=0}function E(L,B){return L.next.i!==B.i&&L.prev.i!==B.i&&!F(L,B)&&(I(L,B)&&I(B,L)&&N(L,B)&&(C(L.prev,L,B.prev)||C(L,B.prev,B))||A(L,B)&&C(L.prev,L,L.next)>0&&C(B.prev,B,B.next)>0)}function C(L,B,w){return(B.y-L.y)*(w.x-B.x)-(B.x-L.x)*(w.y-B.y)}function A(L,B){return L.x===B.x&&L.y===B.y}function P(L,B,w,V){var U=O(C(L,B,w)),X=O(C(L,B,V)),H=O(C(w,V,L)),b=O(C(w,V,B));return!!(U!==X&&H!==b||U===0&&M(L,w,B)||X===0&&M(L,V,B)||H===0&&M(w,L,V)||b===0&&M(w,B,V))}function M(L,B,w){return B.x<=Math.max(L.x,w.x)&&B.x>=Math.min(L.x,w.x)&&B.y<=Math.max(L.y,w.y)&&B.y>=Math.min(L.y,w.y)}function O(L){return L>0?1:L<0?-1:0}function F(L,B){var w=L;do{if(w.i!==L.i&&w.next.i!==L.i&&w.i!==B.i&&w.next.i!==B.i&&P(w,w.next,L,B))return!0;w=w.next}while(w!==L);return!1}function I(L,B){return C(L.prev,L,L.next)<0?C(L,B,L.next)>=0&&C(L,L.prev,B)>=0:C(L,B,L.prev)<0||C(L,L.next,B)<0}function N(L,B){var w=L,V=!1,U=(L.x+B.x)/2,X=(L.y+B.y)/2;do w.y>X!=w.next.y>X&&w.next.y!==w.y&&U<(w.next.x-w.x)*(X-w.y)/(w.next.y-w.y)+w.x&&(V=!V),w=w.next;while(w!==L);return V}function G(L,B){var w=new W(L.i,L.x,L.y),V=new W(B.i,B.x,B.y),U=L.next,X=B.prev;return L.next=B,B.prev=L,w.next=U,U.prev=w,V.next=w,w.prev=V,X.next=V,V.prev=X,V}function Y(L,B,w,V){var U=new W(L,B,w);return V?(U.next=V.next,U.prev=V,V.next.prev=U,V.next=U):(U.prev=U,U.next=U),U}function z(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function W(L,B,w){this.i=L,this.x=B,this.y=w,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.deviation=function(L,B,w,V){var U=B&&B.length,X=U?B[0]*w:L.length,H=Math.abs(D(L,0,X,w));if(U)for(var b=0,Z=B.length;b<Z;b++){var K=B[b]*w,Q=b<Z-1?B[b+1]*w:L.length;H-=Math.abs(D(L,K,Q,w))}var j=0;for(b=0;b<V.length;b+=3){var q=V[b]*w,k=V[b+1]*w,J=V[b+2]*w;j+=Math.abs((L[q]-L[J])*(L[k+1]-L[q+1])-(L[q]-L[k])*(L[J+1]-L[q+1]))}return H===0&&j===0?0:Math.abs((j-H)/H)};function D(L,B,w,V){for(var U=0,X=B,H=w-V;X<w;X+=V)U+=(L[H]-L[X])*(L[X+1]+L[H+1]),H=X;return U}e.flatten=function(L){for(var B=L[0][0].length,w={vertices:[],holes:[],dimensions:B},V=0,U=0;U<L.length;U++){for(var X=0;X<L[U].length;X++)for(var H=0;H<B;H++)w.vertices.push(L[U][X][H]);U>0&&(V+=L[U-1].length,w.holes.push(V))}return w},h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=s||c.strokeColor,i=a||c.strokeAlpha,r=(n&16711680)>>>16,u=(n&65280)>>>8,o=n&255;e.strokeStyle="rgba("+r+","+u+","+o+","+i+")",e.lineWidth=c.lineWidth};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(6),r=t(7),u=new e({Extends:s,initialize:function(l,f,d,v,p){var m="json";if(r(f)){var x=f;f=n(x,"key"),d=n(x,"url"),v=n(x,"xhrSettings"),m=n(x,"extension",m),p=n(x,"dataKey",p)}var T={type:"json",cache:l.cacheManager.json,extension:m,responseType:"text",key:f,url:d,xhrSettings:v,config:p};s.call(this,l,T),r(d)&&(p?this.data=i(d,p):this.data=d,this.state=c.FILE_POPULATED)},onProcess:function(){if(this.state!==c.FILE_POPULATED){this.state=c.FILE_PROCESSING;try{var o=JSON.parse(this.xhrLoader.responseText)}catch(f){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),f}var l=this.config;typeof l=="string"?this.data=i(o,l,o):this.data=o}this.onProcessComplete()}});a.register("json",function(o,l,f,d){if(Array.isArray(o))for(var v=0;v<o.length;v++)this.addFile(new u(this,o[v]));else this.addFile(new u(this,o,l,d,f));return this}),h.exports=u},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),c=t(26),s=function(a,n,i,r,u){for(var o=null,l=null,f=null,d=null,v=c(a,n,i,r,null,u),p=0;p<v.length;p++){var m=v[p];m&&(m.collides?(o=e(m.x,m.y-1,!0,u),l=e(m.x,m.y+1,!0,u),f=e(m.x-1,m.y,!0,u),d=e(m.x+1,m.y,!0,u),m.faceTop=!(o&&o.collides),m.faceBottom=!(l&&l.collides),m.faceLeft=!(f&&f.collides),m.faceRight=!(d&&d.collides)):m.resetFaces())}};h.exports=s},function(h,g,t){var e={};h.exports=e;var c=t(83),s=t(32);(function(){e.create=function(a,n){for(var i=[],r=0;r<a.length;r++){var u=a[r],o={x:u.x,y:u.y,index:r,body:n,isInternal:!1,contact:null,offset:null};o.contact={vertex:o,normalImpulse:0,tangentImpulse:0},i.push(o)}return i},e.fromPath=function(a,n){var i=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,r=[];return a.replace(i,function(u,o,l){r.push({x:parseFloat(o),y:parseFloat(l)})}),e.create(r,n)},e.centre=function(a){for(var n=e.area(a,!0),i={x:0,y:0},r,u,o,l=0;l<a.length;l++)o=(l+1)%a.length,r=c.cross(a[l],a[o]),u=c.mult(c.add(a[l],a[o]),r),i=c.add(i,u);return c.div(i,6*n)},e.mean=function(a){for(var n={x:0,y:0},i=0;i<a.length;i++)n.x+=a[i].x,n.y+=a[i].y;return c.div(n,a.length)},e.area=function(a,n){for(var i=0,r=a.length-1,u=0;u<a.length;u++)i+=(a[r].x-a[u].x)*(a[r].y+a[u].y),r=u;return n?i/2:Math.abs(i)/2},e.inertia=function(a,n){for(var i=0,r=0,u=a,o,l,f=0;f<u.length;f++)l=(f+1)%u.length,o=Math.abs(c.cross(u[l],u[f])),i+=o*(c.dot(u[l],u[l])+c.dot(u[l],u[f])+c.dot(u[f],u[f])),r+=o;return n/6*(i/r)},e.translate=function(a,n,i){var r;if(i)for(r=0;r<a.length;r++)a[r].x+=n.x*i,a[r].y+=n.y*i;else for(r=0;r<a.length;r++)a[r].x+=n.x,a[r].y+=n.y;return a},e.rotate=function(a,n,i){if(n!==0){for(var r=Math.cos(n),u=Math.sin(n),o=0;o<a.length;o++){var l=a[o],f=l.x-i.x,d=l.y-i.y;l.x=i.x+(f*r-d*u),l.y=i.y+(f*u+d*r)}return a}},e.contains=function(a,n){for(var i=0;i<a.length;i++){var r=a[i],u=a[(i+1)%a.length];if((n.x-r.x)*(u.y-r.y)+(n.y-r.y)*(r.x-u.x)>0)return!1}return!0},e.scale=function(a,n,i,r){if(n===1&&i===1)return a;r=r||e.centre(a);for(var u,o,l=0;l<a.length;l++)u=a[l],o=c.sub(u,r),a[l].x=r.x+o.x*n,a[l].y=r.y+o.y*i;return a},e.chamfer=function(a,n,i,r,u){typeof n=="number"?n=[n]:n=n||[8],i=typeof i<"u"?i:-1,r=r||2,u=u||14;for(var o=[],l=0;l<a.length;l++){var f=a[l-1>=0?l-1:a.length-1],d=a[l],v=a[(l+1)%a.length],p=n[l<n.length?l:n.length-1];if(p===0){o.push(d);continue}var m=c.normalise({x:d.y-f.y,y:f.x-d.x}),x=c.normalise({x:v.y-d.y,y:d.x-v.x}),T=Math.sqrt(2*Math.pow(p,2)),S=c.mult(s.clone(m),p),E=c.normalise(c.mult(c.add(m,x),.5)),C=c.sub(d,c.mult(E,T)),A=i;i===-1&&(A=Math.pow(p,.32)*1.75),A=s.clamp(A,r,u),A%2===1&&(A+=1);for(var P=Math.acos(c.dot(m,x)),M=P/A,O=0;O<A;O++)o.push(c.add(c.rotate(S,M*O),C))}return o},e.clockwiseSort=function(a){var n=e.mean(a);return a.sort(function(i,r){return c.angle(n,i)-c.angle(n,r)}),a},e.isConvex=function(a){var n=0,i=a.length,r,u,o,l;if(i<3)return null;for(r=0;r<i;r++)if(u=(r+1)%i,o=(r+2)%i,l=(a[u].x-a[r].x)*(a[o].y-a[u].y),l-=(a[u].y-a[r].y)*(a[o].x-a[u].x),l<0?n|=1:l>0&&(n|=2),n===3)return!1;return n!==0?!0:null},e.hull=function(a){var n=[],i=[],r,u;for(a=a.slice(0),a.sort(function(o,l){var f=o.x-l.x;return f!==0?f:o.y-l.y}),u=0;u<a.length;u+=1){for(r=a[u];i.length>=2&&c.cross3(i[i.length-2],i[i.length-1],r)<=0;)i.pop();i.push(r)}for(u=a.length-1;u>=0;u-=1){for(r=a[u];n.length>=2&&c.cross3(n[n.length-2],n[n.length-1],r)<=0;)n.pop();n.push(r)}return n.pop(),i.pop(),n.concat(i)}})()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(66),s=t(300),a=t(301),n=t(56),i=t(170),r=new e({initialize:function(o,l,f){o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=0),this.type=n.CIRCLE,this.x=o,this.y=l,this._radius=f,this._diameter=f*2},contains:function(u,o){return c(this,u,o)},getPoint:function(u,o){return s(this,u,o)},getPoints:function(u,o,l){return a(this,u,o,l)},getRandomPoint:function(u){return i(this,u)},setTo:function(u,o,l){return this.x=u,this.y=o,this._radius=l,this._diameter=l*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(u,o){return o===void 0&&(o=u),this.x=u,this.y=o,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this._diameter=u*2}},diameter:{get:function(){return this._diameter},set:function(u){this._diameter=u,this._radius=u*.5}},left:{get:function(){return this.x-this._radius},set:function(u){this.x=u+this._radius}},right:{get:function(){return this.x+this._radius},set:function(u){this.x=u-this._radius}},top:{get:function(){return this.y-this._radius},set:function(u){this.y=u+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(u){this.y=u-this._radius}}});h.exports=r},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(e.radius>0&&c>=e.left&&c<=e.right&&s>=e.top&&s<=e.bottom){var a=(e.x-c)*(e.x-c),n=(e.y-s)*(e.y-s);return a+n<=e.radius*e.radius}else return!1};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=s-c;return c+((e-c)%a+a)%a};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(39),s=1e-6,a=new e({initialize:function(f){this.val=new Float32Array(16),f?this.copy(f):this.identity()},clone:function(){return new a(this)},set:function(l){return this.copy(l)},setValues:function(l,f,d,v,p,m,x,T,S,E,C,A,P,M,O,F){var I=this.val;return I[0]=l,I[1]=f,I[2]=d,I[3]=v,I[4]=p,I[5]=m,I[6]=x,I[7]=T,I[8]=S,I[9]=E,I[10]=C,I[11]=A,I[12]=P,I[13]=M,I[14]=O,I[15]=F,this},copy:function(l){var f=l.val;return this.setValues(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])},fromArray:function(l){return this.setValues(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(l,f,d){var v=n.fromQuat(d),p=v.val,m=f.x,x=f.y,T=f.z;return this.setValues(p[0]*m,p[1]*m,p[2]*m,0,p[4]*x,p[5]*x,p[6]*x,0,p[8]*T,p[9]*T,p[10]*T,0,l.x,l.y,l.z,1)},xyz:function(l,f,d){this.identity();var v=this.val;return v[12]=l,v[13]=f,v[14]=d,this},scaling:function(l,f,d){this.zero();var v=this.val;return v[0]=l,v[5]=f,v[10]=d,v[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var l=this.val,f=l[1],d=l[2],v=l[3],p=l[6],m=l[7],x=l[11];return l[1]=l[4],l[2]=l[8],l[3]=l[12],l[4]=f,l[6]=l[9],l[7]=l[13],l[8]=d,l[9]=p,l[11]=l[14],l[12]=v,l[13]=m,l[14]=x,this},getInverse:function(l){return this.copy(l),this.invert()},invert:function(){var l=this.val,f=l[0],d=l[1],v=l[2],p=l[3],m=l[4],x=l[5],T=l[6],S=l[7],E=l[8],C=l[9],A=l[10],P=l[11],M=l[12],O=l[13],F=l[14],I=l[15],N=f*x-d*m,G=f*T-v*m,Y=f*S-p*m,z=d*T-v*x,W=d*S-p*x,D=v*S-p*T,L=E*O-C*M,B=E*F-A*M,w=E*I-P*M,V=C*F-A*O,U=C*I-P*O,X=A*I-P*F,H=N*X-G*U+Y*V+z*w-W*B+D*L;return H?(H=1/H,this.setValues((x*X-T*U+S*V)*H,(v*U-d*X-p*V)*H,(O*D-F*W+I*z)*H,(A*W-C*D-P*z)*H,(T*w-m*X-S*B)*H,(f*X-v*w+p*B)*H,(F*Y-M*D-I*G)*H,(E*D-A*Y+P*G)*H,(m*U-x*w+S*L)*H,(d*w-f*U-p*L)*H,(M*W-O*Y+I*N)*H,(C*Y-E*W-P*N)*H,(x*B-m*V-T*L)*H,(f*V-d*B+v*L)*H,(O*G-M*z-F*N)*H,(E*z-C*G+A*N)*H)):this},adjoint:function(){var l=this.val,f=l[0],d=l[1],v=l[2],p=l[3],m=l[4],x=l[5],T=l[6],S=l[7],E=l[8],C=l[9],A=l[10],P=l[11],M=l[12],O=l[13],F=l[14],I=l[15];return this.setValues(x*(A*I-P*F)-C*(T*I-S*F)+O*(T*P-S*A),-(d*(A*I-P*F)-C*(v*I-p*F)+O*(v*P-p*A)),d*(T*I-S*F)-x*(v*I-p*F)+O*(v*S-p*T),-(d*(T*P-S*A)-x*(v*P-p*A)+C*(v*S-p*T)),-(m*(A*I-P*F)-E*(T*I-S*F)+M*(T*P-S*A)),f*(A*I-P*F)-E*(v*I-p*F)+M*(v*P-p*A),-(f*(T*I-S*F)-m*(v*I-p*F)+M*(v*S-p*T)),f*(T*P-S*A)-m*(v*P-p*A)+E*(v*S-p*T),m*(C*I-P*O)-E*(x*I-S*O)+M*(x*P-S*C),-(f*(C*I-P*O)-E*(d*I-p*O)+M*(d*P-p*C)),f*(x*I-S*O)-m*(d*I-p*O)+M*(d*S-p*x),-(f*(x*P-S*C)-m*(d*P-p*C)+E*(d*S-p*x)),-(m*(C*F-A*O)-E*(x*F-T*O)+M*(x*A-T*C)),f*(C*F-A*O)-E*(d*F-v*O)+M*(d*A-v*C),-(f*(x*F-T*O)-m*(d*F-v*O)+M*(d*T-v*x)),f*(x*A-T*C)-m*(d*A-v*C)+E*(d*T-v*x))},determinant:function(){var l=this.val,f=l[0],d=l[1],v=l[2],p=l[3],m=l[4],x=l[5],T=l[6],S=l[7],E=l[8],C=l[9],A=l[10],P=l[11],M=l[12],O=l[13],F=l[14],I=l[15],N=f*x-d*m,G=f*T-v*m,Y=f*S-p*m,z=d*T-v*x,W=d*S-p*x,D=v*S-p*T,L=E*O-C*M,B=E*F-A*M,w=E*I-P*M,V=C*F-A*O,U=C*I-P*O,X=A*I-P*F;return N*X-G*U+Y*V+z*w-W*B+D*L},multiply:function(l){var f=this.val,d=f[0],v=f[1],p=f[2],m=f[3],x=f[4],T=f[5],S=f[6],E=f[7],C=f[8],A=f[9],P=f[10],M=f[11],O=f[12],F=f[13],I=f[14],N=f[15],G=l.val,Y=G[0],z=G[1],W=G[2],D=G[3];return f[0]=Y*d+z*x+W*C+D*O,f[1]=Y*v+z*T+W*A+D*F,f[2]=Y*p+z*S+W*P+D*I,f[3]=Y*m+z*E+W*M+D*N,Y=G[4],z=G[5],W=G[6],D=G[7],f[4]=Y*d+z*x+W*C+D*O,f[5]=Y*v+z*T+W*A+D*F,f[6]=Y*p+z*S+W*P+D*I,f[7]=Y*m+z*E+W*M+D*N,Y=G[8],z=G[9],W=G[10],D=G[11],f[8]=Y*d+z*x+W*C+D*O,f[9]=Y*v+z*T+W*A+D*F,f[10]=Y*p+z*S+W*P+D*I,f[11]=Y*m+z*E+W*M+D*N,Y=G[12],z=G[13],W=G[14],D=G[15],f[12]=Y*d+z*x+W*C+D*O,f[13]=Y*v+z*T+W*A+D*F,f[14]=Y*p+z*S+W*P+D*I,f[15]=Y*m+z*E+W*M+D*N,this},multiplyLocal:function(l){var f=this.val,d=l.val;return this.setValues(f[0]*d[0]+f[1]*d[4]+f[2]*d[8]+f[3]*d[12],f[0]*d[1]+f[1]*d[5]+f[2]*d[9]+f[3]*d[13],f[0]*d[2]+f[1]*d[6]+f[2]*d[10]+f[3]*d[14],f[0]*d[3]+f[1]*d[7]+f[2]*d[11]+f[3]*d[15],f[4]*d[0]+f[5]*d[4]+f[6]*d[8]+f[7]*d[12],f[4]*d[1]+f[5]*d[5]+f[6]*d[9]+f[7]*d[13],f[4]*d[2]+f[5]*d[6]+f[6]*d[10]+f[7]*d[14],f[4]*d[3]+f[5]*d[7]+f[6]*d[11]+f[7]*d[15],f[8]*d[0]+f[9]*d[4]+f[10]*d[8]+f[11]*d[12],f[8]*d[1]+f[9]*d[5]+f[10]*d[9]+f[11]*d[13],f[8]*d[2]+f[9]*d[6]+f[10]*d[10]+f[11]*d[14],f[8]*d[3]+f[9]*d[7]+f[10]*d[11]+f[11]*d[15],f[12]*d[0]+f[13]*d[4]+f[14]*d[8]+f[15]*d[12],f[12]*d[1]+f[13]*d[5]+f[14]*d[9]+f[15]*d[13],f[12]*d[2]+f[13]*d[6]+f[14]*d[10]+f[15]*d[14],f[12]*d[3]+f[13]*d[7]+f[14]*d[11]+f[15]*d[15])},premultiply:function(l){return this.multiplyMatrices(l,this)},multiplyMatrices:function(l,f){var d=l.val,v=f.val,p=d[0],m=d[4],x=d[8],T=d[12],S=d[1],E=d[5],C=d[9],A=d[13],P=d[2],M=d[6],O=d[10],F=d[14],I=d[3],N=d[7],G=d[11],Y=d[15],z=v[0],W=v[4],D=v[8],L=v[12],B=v[1],w=v[5],V=v[9],U=v[13],X=v[2],H=v[6],b=v[10],Z=v[14],K=v[3],Q=v[7],j=v[11],q=v[15];return this.setValues(p*z+m*B+x*X+T*K,S*z+E*B+C*X+A*K,P*z+M*B+O*X+F*K,I*z+N*B+G*X+Y*K,p*W+m*w+x*H+T*Q,S*W+E*w+C*H+A*Q,P*W+M*w+O*H+F*Q,I*W+N*w+G*H+Y*Q,p*D+m*V+x*b+T*j,S*D+E*V+C*b+A*j,P*D+M*V+O*b+F*j,I*D+N*V+G*b+Y*j,p*L+m*U+x*Z+T*q,S*L+E*U+C*Z+A*q,P*L+M*U+O*Z+F*q,I*L+N*U+G*Z+Y*q)},translate:function(l){return this.translateXYZ(l.x,l.y,l.z)},translateXYZ:function(l,f,d){var v=this.val;return v[12]=v[0]*l+v[4]*f+v[8]*d+v[12],v[13]=v[1]*l+v[5]*f+v[9]*d+v[13],v[14]=v[2]*l+v[6]*f+v[10]*d+v[14],v[15]=v[3]*l+v[7]*f+v[11]*d+v[15],this},scale:function(l){return this.scaleXYZ(l.x,l.y,l.z)},scaleXYZ:function(l,f,d){var v=this.val;return v[0]=v[0]*l,v[1]=v[1]*l,v[2]=v[2]*l,v[3]=v[3]*l,v[4]=v[4]*f,v[5]=v[5]*f,v[6]=v[6]*f,v[7]=v[7]*f,v[8]=v[8]*d,v[9]=v[9]*d,v[10]=v[10]*d,v[11]=v[11]*d,this},makeRotationAxis:function(l,f){var d=Math.cos(f),v=Math.sin(f),p=1-d,m=l.x,x=l.y,T=l.z,S=p*m,E=p*x;return this.setValues(S*m+d,S*x-v*T,S*T+v*x,0,S*x+v*T,E*x+d,E*T-v*m,0,S*T-v*x,E*T+v*m,p*T*T+d,0,0,0,0,1)},rotate:function(l,f){var d=this.val,v=f.x,p=f.y,m=f.z,x=Math.sqrt(v*v+p*p+m*m);if(Math.abs(x)<s)return this;x=1/x,v*=x,p*=x,m*=x;var T=Math.sin(l),S=Math.cos(l),E=1-S,C=d[0],A=d[1],P=d[2],M=d[3],O=d[4],F=d[5],I=d[6],N=d[7],G=d[8],Y=d[9],z=d[10],W=d[11],D=d[12],L=d[13],B=d[14],w=d[15],V=v*v*E+S,U=p*v*E+m*T,X=m*v*E-p*T,H=v*p*E-m*T,b=p*p*E+S,Z=m*p*E+v*T,K=v*m*E+p*T,Q=p*m*E-v*T,j=m*m*E+S;return this.setValues(C*V+O*U+G*X,A*V+F*U+Y*X,P*V+I*U+z*X,M*V+N*U+W*X,C*H+O*b+G*Z,A*H+F*b+Y*Z,P*H+I*b+z*Z,M*H+N*b+W*Z,C*K+O*Q+G*j,A*K+F*Q+Y*j,P*K+I*Q+z*j,M*K+N*Q+W*j,D,L,B,w)},rotateX:function(l){var f=this.val,d=Math.sin(l),v=Math.cos(l),p=f[4],m=f[5],x=f[6],T=f[7],S=f[8],E=f[9],C=f[10],A=f[11];return f[4]=p*v+S*d,f[5]=m*v+E*d,f[6]=x*v+C*d,f[7]=T*v+A*d,f[8]=S*v-p*d,f[9]=E*v-m*d,f[10]=C*v-x*d,f[11]=A*v-T*d,this},rotateY:function(l){var f=this.val,d=Math.sin(l),v=Math.cos(l),p=f[0],m=f[1],x=f[2],T=f[3],S=f[8],E=f[9],C=f[10],A=f[11];return f[0]=p*v-S*d,f[1]=m*v-E*d,f[2]=x*v-C*d,f[3]=T*v-A*d,f[8]=p*d+S*v,f[9]=m*d+E*v,f[10]=x*d+C*v,f[11]=T*d+A*v,this},rotateZ:function(l){var f=this.val,d=Math.sin(l),v=Math.cos(l),p=f[0],m=f[1],x=f[2],T=f[3],S=f[4],E=f[5],C=f[6],A=f[7];return f[0]=p*v+S*d,f[1]=m*v+E*d,f[2]=x*v+C*d,f[3]=T*v+A*d,f[4]=S*v-p*d,f[5]=E*v-m*d,f[6]=C*v-x*d,f[7]=A*v-T*d,this},fromRotationTranslation:function(l,f){var d=l.x,v=l.y,p=l.z,m=l.w,x=d+d,T=v+v,S=p+p,E=d*x,C=d*T,A=d*S,P=v*T,M=v*S,O=p*S,F=m*x,I=m*T,N=m*S;return this.setValues(1-(P+O),C+N,A-I,0,C-N,1-(E+O),M+F,0,A+I,M-F,1-(E+P),0,f.x,f.y,f.z,1)},fromQuat:function(l){var f=l.x,d=l.y,v=l.z,p=l.w,m=f+f,x=d+d,T=v+v,S=f*m,E=f*x,C=f*T,A=d*x,P=d*T,M=v*T,O=p*m,F=p*x,I=p*T;return this.setValues(1-(A+M),E+I,C-F,0,E-I,1-(S+M),P+O,0,C+F,P-O,1-(S+A),0,0,0,0,1)},frustum:function(l,f,d,v,p,m){var x=1/(f-l),T=1/(v-d),S=1/(p-m);return this.setValues(p*2*x,0,0,0,0,p*2*T,0,0,(f+l)*x,(v+d)*T,(m+p)*S,-1,0,0,m*p*2*S,0)},perspective:function(l,f,d,v){var p=1/Math.tan(l/2),m=1/(d-v);return this.setValues(p/f,0,0,0,0,p,0,0,0,0,(v+d)*m,-1,0,0,2*v*d*m,0)},perspectiveLH:function(l,f,d,v){return this.setValues(2*d/l,0,0,0,0,2*d/f,0,0,0,0,-v/(d-v),1,0,0,d*v/(d-v),0)},ortho:function(l,f,d,v,p,m){var x=l-f,T=d-v,S=p-m;return x=x===0?x:1/x,T=T===0?T:1/T,S=S===0?S:1/S,this.setValues(-2*x,0,0,0,0,-2*T,0,0,0,0,2*S,0,(l+f)*x,(v+d)*T,(m+p)*S,1)},lookAtRH:function(l,f,d){var v=this.val;return o.subVectors(l,f),o.getLengthSquared()===0&&(o.z=1),o.normalize(),r.crossVectors(d,o),r.getLengthSquared()===0&&(Math.abs(d.z)===1?o.x+=1e-4:o.z+=1e-4,o.normalize(),r.crossVectors(d,o)),r.normalize(),u.crossVectors(o,r),v[0]=r.x,v[1]=r.y,v[2]=r.z,v[4]=u.x,v[5]=u.y,v[6]=u.z,v[8]=o.x,v[9]=o.y,v[10]=o.z,this},lookAt:function(l,f,d){var v=l.x,p=l.y,m=l.z,x=d.x,T=d.y,S=d.z,E=f.x,C=f.y,A=f.z;if(Math.abs(v-E)<s&&Math.abs(p-C)<s&&Math.abs(m-A)<s)return this.identity();var P=v-E,M=p-C,O=m-A,F=1/Math.sqrt(P*P+M*M+O*O);P*=F,M*=F,O*=F;var I=T*O-S*M,N=S*P-x*O,G=x*M-T*P;F=Math.sqrt(I*I+N*N+G*G),F?(F=1/F,I*=F,N*=F,G*=F):(I=0,N=0,G=0);var Y=M*G-O*N,z=O*I-P*G,W=P*N-M*I;return F=Math.sqrt(Y*Y+z*z+W*W),F?(F=1/F,Y*=F,z*=F,W*=F):(Y=0,z=0,W=0),this.setValues(I,Y,P,0,N,z,M,0,G,W,O,0,-(I*v+N*p+G*m),-(Y*v+z*p+W*m),-(P*v+M*p+O*m),1)},yawPitchRoll:function(l,f,d){this.zero(),n.zero(),i.zero();var v=this.val,p=n.val,m=i.val,x=Math.sin(d),T=Math.cos(d);return v[10]=1,v[15]=1,v[0]=T,v[1]=x,v[4]=-x,v[5]=T,x=Math.sin(f),T=Math.cos(f),p[0]=1,p[15]=1,p[5]=T,p[10]=T,p[9]=-x,p[6]=x,x=Math.sin(l),T=Math.cos(l),m[5]=1,m[15]=1,m[0]=T,m[2]=-x,m[8]=x,m[10]=T,this.multiplyLocal(n),this.multiplyLocal(i),this},setWorldMatrix:function(l,f,d,v,p){return this.yawPitchRoll(l.y,l.x,l.z),n.scaling(d.x,d.y,d.z),i.xyz(f.x,f.y,f.z),this.multiplyLocal(n),this.multiplyLocal(i),v&&this.multiplyLocal(v),p&&this.multiplyLocal(p),this},multiplyToMat4:function(l,f){var d=this.val,v=l.val,p=d[0],m=d[1],x=d[2],T=d[3],S=d[4],E=d[5],C=d[6],A=d[7],P=d[8],M=d[9],O=d[10],F=d[11],I=d[12],N=d[13],G=d[14],Y=d[15],z=v[0],W=v[1],D=v[2],L=v[3],B=v[4],w=v[5],V=v[6],U=v[7],X=v[8],H=v[9],b=v[10],Z=v[11],K=v[12],Q=v[13],j=v[14],q=v[15];return f.setValues(z*p+W*S+D*P+L*I,W*m+W*E+D*M+L*N,D*x+W*C+D*O+L*G,L*T+W*A+D*F+L*Y,B*p+w*S+V*P+U*I,B*m+w*E+V*M+U*N,B*x+w*C+V*O+U*G,B*T+w*A+V*F+U*Y,X*p+H*S+b*P+Z*I,X*m+H*E+b*M+Z*N,X*x+H*C+b*O+Z*G,X*T+H*A+b*F+Z*Y,K*p+Q*S+j*P+q*I,K*m+Q*E+j*M+q*N,K*x+Q*C+j*O+q*G,K*T+Q*A+j*F+q*Y)},fromRotationXYTranslation:function(l,f,d){var v=f.x,p=f.y,m=f.z,x=Math.sin(l.x),T=Math.cos(l.x),S=Math.sin(l.y),E=Math.cos(l.y),C=v,A=p,P=m,M=-x,O=0-M*S,F=0-T*S,I=M*E,N=T*E;return d||(C=E*v+S*m,A=O*v+T*p+I*m,P=F*v+x*p+N*m),this.setValues(E,O,F,0,0,T,x,0,S,I,N,0,C,A,P,1)},getMaxScaleOnAxis:function(){var l=this.val,f=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],d=l[4]*l[4]+l[5]*l[5]+l[6]*l[6],v=l[8]*l[8]+l[9]*l[9]+l[10]*l[10];return Math.sqrt(Math.max(f,d,v))}}),n=new a,i=new a,r=new c,u=new c,o=new c;h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={COMPLETE:t(987),DECODED:t(988),DECODED_ALL:t(989),DESTROY:t(990),DETUNE:t(991),GLOBAL_DETUNE:t(992),GLOBAL_MUTE:t(993),GLOBAL_RATE:t(994),GLOBAL_VOLUME:t(995),LOOP:t(996),LOOPED:t(997),MUTE:t(998),PAN:t(999),PAUSE_ALL:t(1e3),PAUSE:t(1001),PLAY:t(1002),RATE:t(1003),RESUME_ALL:t(1004),RESUME:t(1005),SEEK:t(1006),STOP_ALL:t(1007),STOP:t(1008),UNLOCKED:t(1009),VOLUME:t(1010)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function u(o,l,f,d,v){var p="png",m;if(i(l)){var x=l;l=n(x,"key"),f=n(x,"url"),m=n(x,"normalMap"),d=n(x,"xhrSettings"),p=n(x,"extension",p),v=n(x,"frameConfig")}Array.isArray(f)&&(m=f[1],f=f[0]);var T={type:"image",cache:o.textureManager,extension:p,responseType:"blob",key:l,url:f,xhrSettings:d,config:v};if(s.call(this,o,T),m){var S=new u(o,this.key,m,d,v);S.type="normalMap",this.setLink(S),o.addFile(S)}},onProcess:function(){this.state=c.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var u=this;this.data.onload=function(){s.revokeObjectURL(u.data),u.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(u.data),u.onProcessError()},s.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var u,o=this.linkFile;o&&o.state===c.FILE_COMPLETE?(this.type==="image"?u=this.cache.addImage(this.key,this.data,o.data):u=this.cache.addImage(o.key,o.data,this.data),this.pendingDestroy(u),o.pendingDestroy(u)):o||(u=this.cache.addImage(this.key,this.data),this.pendingDestroy(u))}});a.register("image",function(u,o,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new r(this,u[f]));else this.addFile(new r(this,u,o,l));return this}),h.exports=r},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),c=t(0),s=t(11),a=t(15),n=t(1065),i=new c({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,n],initialize:function(u,o,l,f,d){a.call(this,u,"Sprite"),this._crop=this.resetCropObject(),this.anims=new e(this),this.setTexture(f,d),this.setPosition(o,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(r,u){this.anims.update(r,u)},play:function(r,u){return this.anims.play(r,u)},playReverse:function(r,u){return this.anims.playReverse(r,u)},playAfterDelay:function(r,u){return this.anims.playAfterDelay(r,u)},playAfterRepeat:function(r,u){return this.anims.playAfterRepeat(r,u)},chain:function(r){return this.anims.chain(r)},stop:function(){return this.anims.stop()},stopAfterDelay:function(r){return this.anims.stopAfterDelay(r)},stopAfterRepeat:function(r){return this.anims.stopAfterRepeat(r)},stopOnFrame:function(r){return this.anims.stopOnFrame(r)},toJSON:function(){return s.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});h.exports=i},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){if(!(c>=e.length)){for(var s=e.length-1,a=e[c],n=c;n<s;n++)e[n]=e[n+1];return e.length=s,a}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADDED_TO_SCENE:t(643),DESTROY:t(644),REMOVED_FROM_SCENE:t(645),VIDEO_COMPLETE:t(646),VIDEO_CREATED:t(647),VIDEO_ERROR:t(648),VIDEO_LOOP:t(649),VIDEO_PLAY:t(650),VIDEO_SEEKED:t(651),VIDEO_SEEKING:t(652),VIDEO_STOP:t(653),VIDEO_TIMEOUT:t(654),VIDEO_UNLOCKED:t(655)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){return s===void 0&&(s=0),c===0?e:(e-=s,e=c*Math.floor(e/c),a?(s+e)/c:s+e)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c={};for(var s in e)Array.isArray(e[s])?c[s]=e[s].slice(0):c[s]=e[s];return c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=e.length;if(c<0||c>n||c>=s||s>n||c+s>n){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(a,n){return String(a).localeCompare(n)}function e(a,n){var i=a.length;if(i<=1)return a;for(var r=new Array(i),u=1;u<i;u*=2){c(a,n,u,r);var o=a;a=r,r=o}return a}function c(a,n,i,r){var u=a.length,o=0,l=i*2,f,d,v,p,m;for(f=0;f<u;f+=l)for(d=f+i,v=d+i,d>u&&(d=u),v>u&&(v=u),p=f,m=d;;)if(p<d&&m<v)n(a[p],a[m])<=0?r[o++]=a[p++]:r[o++]=a[m++];else if(p<d)r[o++]=a[p++];else if(m<v)r[o++]=a[m++];else break}var s=function(a,n){n===void 0&&(n=t);var i=e(a,n);return i!==a&&c(i,null,a.length,a),a};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(134),c=t(205),s=function(a,n){var i=e.Power0;if(typeof a=="string")if(e.hasOwnProperty(a))i=e[a];else{var r="";a.indexOf(".")&&(r=a.substr(a.indexOf(".")+1),r.toLowerCase()==="in"?r="easeIn":r.toLowerCase()==="out"?r="easeOut":r.toLowerCase()==="inout"&&(r="easeInOut")),a=c(a.substr(0,a.indexOf(".")+1)+r),e.hasOwnProperty(a)&&(i=e[a])}else typeof a=="function"?i=a:Array.isArray(a)&&a.length;if(!n)return i;var u=n.slice(0);return u.unshift(0),function(o){return u[0]=o,i.apply(this,u)}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),c=function(s,a,n,i,r){var u=s.strokeTint,o=e.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*n);u.TL=o,u.TR=o,u.BL=o,u.BR=o;var l=a.pathData,f=l.length-1,d=a.lineWidth,v=d/2,p=l[0]-i,m=l[1]-r;a.closePath||(f-=2);for(var x=2;x<f;x+=2){var T=l[x]-i,S=l[x+1]-r;s.batchLine(p,m,T,S,v,v,d,x-2,a.closePath?x===f-1:!1),p=T,m=S}};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(115),s=t(476),a=t(477),n=t(56),i=t(47),r=t(181),u=new e({initialize:function(l,f,d,v,p,m){l===void 0&&(l=0),f===void 0&&(f=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),m===void 0&&(m=0),this.type=n.TRIANGLE,this.x1=l,this.y1=f,this.x2=d,this.y2=v,this.x3=p,this.y3=m},contains:function(o,l){return c(this,o,l)},getPoint:function(o,l){return s(this,o,l)},getPoints:function(o,l,f){return a(this,o,l,f)},getRandomPoint:function(o){return r(this,o)},setTo:function(o,l,f,d,v,p){return o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),this.x1=o,this.y1=l,this.x2=f,this.y2=d,this.x3=v,this.y3=p,this},getLineA:function(o){return o===void 0&&(o=new i),o.setTo(this.x1,this.y1,this.x2,this.y2),o},getLineB:function(o){return o===void 0&&(o=new i),o.setTo(this.x2,this.y2,this.x3,this.y3),o},getLineC:function(o){return o===void 0&&(o=new i),o.setTo(this.x3,this.y3,this.x1,this.y1),o},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(o){var l=0;this.x1<=this.x2&&this.x1<=this.x3?l=this.x1-o:this.x2<=this.x1&&this.x2<=this.x3?l=this.x2-o:l=this.x3-o,this.x1-=l,this.x2-=l,this.x3-=l}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(o){var l=0;this.x1>=this.x2&&this.x1>=this.x3?l=this.x1-o:this.x2>=this.x1&&this.x2>=this.x3?l=this.x2-o:l=this.x3-o,this.x1-=l,this.x2-=l,this.x3-=l}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(o){var l=0;this.y1<=this.y2&&this.y1<=this.y3?l=this.y1-o:this.y2<=this.y1&&this.y2<=this.y3?l=this.y2-o:l=this.y3-o,this.y1-=l,this.y2-=l,this.y3-=l}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(o){var l=0;this.y1>=this.y2&&this.y1>=this.y3?l=this.y1-o:this.y2>=this.y1&&this.y2>=this.y3?l=this.y2-o:l=this.y3-o,this.y1-=l,this.y2-=l,this.y3-=l}}});h.exports=u},function(h,g){var t={};h.exports=t,function(){t.create=function(e,c){return{x:e||0,y:c||0}},t.clone=function(e){return{x:e.x,y:e.y}},t.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},t.rotate=function(e,c,s){var a=Math.cos(c),n=Math.sin(c);s||(s={});var i=e.x*a-e.y*n;return s.y=e.x*n+e.y*a,s.x=i,s},t.rotateAbout=function(e,c,s,a){var n=Math.cos(c),i=Math.sin(c);a||(a={});var r=s.x+((e.x-s.x)*n-(e.y-s.y)*i);return a.y=s.y+((e.x-s.x)*i+(e.y-s.y)*n),a.x=r,a},t.normalise=function(e){var c=t.magnitude(e);return c===0?{x:0,y:0}:{x:e.x/c,y:e.y/c}},t.dot=function(e,c){return e.x*c.x+e.y*c.y},t.cross=function(e,c){return e.x*c.y-e.y*c.x},t.cross3=function(e,c,s){return(c.x-e.x)*(s.y-e.y)-(c.y-e.y)*(s.x-e.x)},t.add=function(e,c,s){return s||(s={}),s.x=e.x+c.x,s.y=e.y+c.y,s},t.sub=function(e,c,s){return s||(s={}),s.x=e.x-c.x,s.y=e.y-c.y,s},t.mult=function(e,c){return{x:e.x*c,y:e.y*c}},t.div=function(e,c){return{x:e.x/c,y:e.y/c}},t.perp=function(e,c){return c=c===!0?-1:1,{x:c*-e.y,y:c*e.x}},t.neg=function(e){return{x:-e.x,y:-e.y}},t.angle=function(e,c){return Math.atan2(c.y-e.y,c.x-e.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]}()},function(h,g){var t={};h.exports=t,function(){t.create=function(e){var c={min:{x:0,y:0},max:{x:0,y:0}};return e&&t.update(c,e),c},t.update=function(e,c,s){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var a=0;a<c.length;a++){var n=c[a];n.x>e.max.x&&(e.max.x=n.x),n.x<e.min.x&&(e.min.x=n.x),n.y>e.max.y&&(e.max.y=n.y),n.y<e.min.y&&(e.min.y=n.y)}s&&(s.x>0?e.max.x+=s.x:e.min.x+=s.x,s.y>0?e.max.y+=s.y:e.min.y+=s.y)},t.contains=function(e,c){return c.x>=e.min.x&&c.x<=e.max.x&&c.y>=e.min.y&&c.y<=e.max.y},t.overlaps=function(e,c){return e.min.x<=c.max.x&&e.max.x>=c.min.x&&e.max.y>=c.min.y&&e.min.y<=c.max.y},t.translate=function(e,c){e.min.x+=c.x,e.max.x+=c.x,e.min.y+=c.y,e.max.y+=c.y},t.shift=function(e,c){var s=e.max.x-e.min.x,a=e.max.y-e.min.y;e.min.x=c.x,e.max.x=c.x+s,e.min.y=c.y,e.max.y=c.y+a}}()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),c=t(0),s=t(11),a=t(502),n=new c({Mixins:[s.Alpha,s.Flip,s.Visible],initialize:function(r,u,o,l,f,d,v,p){this.layer=r,this.index=u,this.x=o,this.y=l,this.width=f,this.height=d,this.right,this.bottom,this.baseWidth=v!==void 0?v:f,this.baseHeight=p!==void 0?p:d,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(i,r){return!(i<this.pixelX||r<this.pixelY||i>this.right||r>this.bottom)},copy:function(i){return this.index=i.index,this.alpha=i.alpha,this.properties=i.properties,this.visible=i.visible,this.setFlip(i.flipX,i.flipY),this.tint=i.tint,this.rotation=i.rotation,this.collideUp=i.collideUp,this.collideDown=i.collideDown,this.collideLeft=i.collideLeft,this.collideRight=i.collideRight,this.collisionCallback=i.collisionCallback,this.collisionCallbackContext=i.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(i){var r=this.tilemapLayer;return r?r.tileToWorldX(this.x,i):this.x*this.baseWidth},getRight:function(i){var r=this.tilemapLayer;return r?this.getLeft(i)+this.width*r.scaleX:this.getLeft(i)+this.width},getTop:function(i){var r=this.tilemapLayer;return r?r.tileToWorldY(this.y,i)-(this.height-this.baseHeight)*r.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(i){var r=this.tilemapLayer;return r?this.getTop(i)+this.height*r.scaleY:this.getTop(i)+this.height},getBounds:function(i,r){return r===void 0&&(r=new a),r.x=this.getLeft(),r.y=this.getTop(),r.width=this.getRight()-r.x,r.height=this.getBottom()-r.y,r},getCenterX:function(i){return(this.getLeft(i)+this.getRight(i))/2},getCenterY:function(i){return(this.getTop(i)+this.getBottom(i))/2},intersects:function(i,r,u,o){return!(u<=this.pixelX||o<=this.pixelY||i>=this.right||r>=this.bottom)},isInteresting:function(i,r){return i&&r?this.canCollide||this.hasInterestingFace:i?this.collides:r?this.hasInterestingFace:!1},resetCollision:function(i){if(i===void 0&&(i=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,i){var r=this.tilemapLayer;r&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(i,r,u,o,l){if(r===void 0&&(r=i),u===void 0&&(u=i),o===void 0&&(o=i),l===void 0&&(l=!0),this.collideLeft=i,this.collideRight=r,this.collideUp=u,this.collideDown=o,this.faceLeft=i,this.faceRight=r,this.faceTop=u,this.faceBottom=o,l){var f=this.tilemapLayer;f&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(i,r){return i===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=i,this.collisionCallbackContext=r),this},setSize:function(i,r,u,o){return i!==void 0&&(this.width=i),r!==void 0&&(this.height=r),u!==void 0&&(this.baseWidth=u),o!==void 0&&(this.baseHeight=o),this.updatePixelXY(),this},updatePixelXY:function(){var i=this.layer.orientation;if(i===e.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(i===e.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(i===e.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(i===e.HEXAGONAL){var r=this.layer.hexSideLength,u=(this.baseHeight-r)/2+r;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*u}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var i=this.layer.tilemapLayer;if(i){var r=i.gidMap[this.index];if(r)return r}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var i=this.tilemapLayer;return i?i.tilemap:null}}});h.exports=n},function(h,g,t){var e={};h.exports=e;var c=t(64),s=t(32),a=t(41),n=t(84),i=t(83),r=t(1393);(function(){e.rectangle=function(u,o,l,f,d){d=d||{};var v={label:"Rectangle Body",position:{x:u,y:o},vertices:c.fromPath("L 0 0 L "+l+" 0 L "+l+" "+f+" L 0 "+f)};if(d.chamfer){var p=d.chamfer;v.vertices=c.chamfer(v.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete d.chamfer}return a.create(s.extend({},v,d))},e.trapezoid=function(u,o,l,f,d,v){v=v||{},d*=.5;var p=(1-d*2)*l,m=l*d,x=m+p,T=x+m,S;d<.5?S="L 0 0 L "+m+" "+-f+" L "+x+" "+-f+" L "+T+" 0":S="L 0 0 L "+x+" "+-f+" L "+T+" 0";var E={label:"Trapezoid Body",position:{x:u,y:o},vertices:c.fromPath(S)};if(v.chamfer){var C=v.chamfer;E.vertices=c.chamfer(E.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete v.chamfer}return a.create(s.extend({},E,v))},e.circle=function(u,o,l,f,d){f=f||{};var v={label:"Circle Body",circleRadius:l};d=d||25;var p=Math.ceil(Math.max(10,Math.min(d,l)));return p%2===1&&(p+=1),e.polygon(u,o,p,l,s.extend({},v,f))},e.polygon=function(u,o,l,f,d){if(d=d||{},l<3)return e.circle(u,o,f,d);for(var v=2*Math.PI/l,p="",m=v*.5,x=0;x<l;x+=1){var T=m+x*v,S=Math.cos(T)*f,E=Math.sin(T)*f;p+="L "+S.toFixed(3)+" "+E.toFixed(3)+" "}var C={label:"Polygon Body",position:{x:u,y:o},vertices:c.fromPath(p)};if(d.chamfer){var A=d.chamfer;C.vertices=c.chamfer(C.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete d.chamfer}return a.create(s.extend({},C,d))},e.fromVertices=function(u,o,l,f,d,v,p){var m,x,T,S,E,C;for(f=f||{},x=[],d=typeof d<"u"?d:!1,v=typeof v<"u"?v:.01,p=typeof p<"u"?p:10,r||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(l[0])||(l=[l]),C=0;C<l.length;C+=1)if(S=l[C],T=c.isConvex(S),T||!r)T?S=c.clockwiseSort(S):S=c.hull(S),x.push({position:{x:u,y:o},vertices:S});else{var A=S.map(function(F){return[F.x,F.y]});r.makeCCW(A),v!==!1&&r.removeCollinearPoints(A,v);var P=r.quickDecomp(A);for(E=0;E<P.length;E++){var M=P[E],O=M.map(function(F){return{x:F[0],y:F[1]}});p>0&&c.area(O)<p||x.push({position:c.centre(O),vertices:O})}}for(E=0;E<x.length;E++)x[E]=a.create(s.extend(x[E],f));return d&&e.flagCoincidentParts(x,5),x.length>1?(m=a.create(s.extend({parts:x.slice(0)},f)),a.setPosition(m,{x:u,y:o}),m):x[0]},e.flagCoincidentParts=function(u,o){o===void 0&&(o=5);for(var l=0;l<u.length;l++)for(var f=u[l],d=l+1;d<u.length;d++){var v=u[d];if(n.overlaps(f.bounds,v.bounds))for(var p=f.vertices,m=v.vertices,x=0;x<f.vertices.length;x++)for(var T=0;T<v.vertices.length;T++){var S=i.magnitudeSquared(i.sub(p[(x+1)%p.length],m[T])),E=i.magnitudeSquared(i.sub(p[x],m[(T+1)%m.length]));S<o&&E<o&&(p[x].isInternal=!0,m[T].isInternal=!0)}}return u}})()},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x-e.width*e.originX+e.width*.5};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.width*e.originX;return e.x=c+s-e.width*.5,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y-e.height*e.originY+e.height*.5};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.height*e.originY;return e.y=c+s-e.height*.5,e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={POST_RENDER:t(628),PRE_RENDER:t(629),RENDER:t(630),RESIZE:t(631)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),c=function(s,a,n,i){i===void 0&&(i=s);var r;if(!Array.isArray(a))return r=s.indexOf(a),r!==-1?(e(s,r),n&&n.call(i,a),a):null;for(var u=a.length-1,o=[];u>=0;){var l=a[u];r=s.indexOf(l),r!==-1&&(e(s,r),o.push(l),n&&n.call(i,l)),u--}return o};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(199),s=t(10),a=t(3),n=new e({initialize:function(r){this.type=r,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(i,r){return r===void 0&&(r=32),i.strokePoints(this.getPoints(r))},getBounds:function(i,r){i||(i=new s),r===void 0&&(r=16);var u=this.getLength();r>u&&(r=u/2);var o=Math.max(1,Math.round(u/r));return c(this.getSpacedPoints(o),i)},getDistancePoints:function(i){var r=this.getLength(),u=Math.max(1,r/i);return this.getSpacedPoints(u)},getEndPoint:function(i){return i===void 0&&(i=new a),this.getPointAt(1,i)},getLength:function(){var i=this.getLengths();return i[i.length-1]},getLengths:function(i){if(i===void 0&&(i=this.arcLengthDivisions),this.cacheArcLengths.length===i+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r=[],u,o=this.getPoint(0,this._tmpVec2A),l=0;r.push(0);for(var f=1;f<=i;f++)u=this.getPoint(f/i,this._tmpVec2B),l+=u.distance(o),r.push(l),o.copy(u);return this.cacheArcLengths=r,r},getPointAt:function(i,r){var u=this.getUtoTmapping(i);return this.getPoint(u,r)},getPoints:function(i,r,u){u===void 0&&(u=[]),i||(r?i=this.getLength()/r:i=this.defaultDivisions);for(var o=0;o<=i;o++)u.push(this.getPoint(o/i));return u},getRandomPoint:function(i){return i===void 0&&(i=new a),this.getPoint(Math.random(),i)},getSpacedPoints:function(i,r,u){u===void 0&&(u=[]),i||(r?i=this.getLength()/r:i=this.defaultDivisions);for(var o=0;o<=i;o++){var l=this.getUtoTmapping(o/i,null,i);u.push(this.getPoint(l))}return u},getStartPoint:function(i){return i===void 0&&(i=new a),this.getPointAt(0,i)},getTangent:function(i,r){r===void 0&&(r=new a);var u=1e-4,o=i-u,l=i+u;return o<0&&(o=0),l>1&&(l=1),this.getPoint(o,this._tmpVec2A),this.getPoint(l,r),r.subtract(this._tmpVec2A).normalize()},getTangentAt:function(i,r){var u=this.getUtoTmapping(i);return this.getTangent(u,r)},getTFromDistance:function(i,r){return i<=0?0:this.getUtoTmapping(0,i,r)},getUtoTmapping:function(i,r,u){var o=this.getLengths(u),l=0,f=o.length,d;r?d=Math.min(r,o[f-1]):d=i*o[f-1];for(var v=0,p=f-1,m;v<=p;)if(l=Math.floor(v+(p-v)/2),m=o[l]-d,m<0)v=l+1;else if(m>0)p=l-1;else{p=l;break}if(l=p,o[l]===d)return l/(f-1);var x=o[l],T=o[l+1],S=T-x,E=(d-x)/S;return(l+E)/(f-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD:t(968),COMPLETE:t(969),FILE_COMPLETE:t(970),FILE_KEY_COMPLETE:t(971),FILE_LOAD_ERROR:t(972),FILE_LOAD:t(973),FILE_PROGRESS:t(974),POST_PROCESS:t(975),PROGRESS:t(976),START:t(977)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a,n){n===void 0&&(n=new e);var i=s.x1,r=s.y1,u=s.x2,o=s.y2,l=a.x1,f=a.y1,d=a.x2,v=a.y2,p=(d-l)*(r-f)-(v-f)*(i-l),m=(u-i)*(r-f)-(o-r)*(i-l),x=(v-f)*(u-i)-(d-l)*(o-r);if(x===0)return!1;var T=p/x,S=m/x;return T>=0&&T<=1&&S>=0&&S<=1?(n.x=i+T*(u-i),n.y=r+T*(o-r),!0):!1};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=function(s,a,n){return s=e(s,0,1),(n-a)*s+a};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e&&e.hasOwnProperty(c)?e[c]:s};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(315),s=new e({initialize:function(n,i){this.parent=n,this.events=i,i||(this.events=n.events?n.events:n),this.list={},this.values={},this._frozen=!1,!n.hasOwnProperty("sys")&&this.events&&this.events.once(c.DESTROY,this.destroy,this)},get:function(a){var n=this.list;if(Array.isArray(a)){for(var i=[],r=0;r<a.length;r++)i.push(n[a[r]]);return i}else return n[a]},getAll:function(){var a={};for(var n in this.list)this.list.hasOwnProperty(n)&&(a[n]=this.list[n]);return a},query:function(a){var n={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(a)&&(n[i]=this.list[i]);return n},set:function(a,n){if(this._frozen)return this;if(typeof a=="string")return this.setValue(a,n);for(var i in a)this.setValue(i,a[i]);return this},inc:function(a,n){if(this._frozen)return this;n===void 0&&(n=1);var i=this.get(a);return i===void 0&&(i=0),this.set(a,i+n),this},toggle:function(a){return this._frozen?this:(this.set(a,!this.get(a)),this)},setValue:function(a,n){if(this._frozen)return this;if(this.has(a))this.values[a]=n;else{var i=this,r=this.list,u=this.events,o=this.parent;Object.defineProperty(this.values,a,{enumerable:!0,configurable:!0,get:function(){return r[a]},set:function(l){if(!i._frozen){var f=r[a];r[a]=l,u.emit(c.CHANGE_DATA,o,a,l,f),u.emit(c.CHANGE_DATA_KEY+a,o,l,f)}}}),r[a]=n,u.emit(c.SET_DATA,o,a,n)}return this},each:function(a,n){for(var i=[this.parent,null,void 0],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var u in this.list)i[1]=u,i[2]=this.list[u],a.apply(n,i);return this},merge:function(a,n){n===void 0&&(n=!0);for(var i in a)a.hasOwnProperty(i)&&(n||!n&&!this.has(i))&&this.setValue(i,a[i]);return this},remove:function(a){if(this._frozen)return this;if(Array.isArray(a))for(var n=0;n<a.length;n++)this.removeValue(a[n]);else return this.removeValue(a);return this},removeValue:function(a){if(this.has(a)){var n=this.list[a];delete this.list[a],delete this.values[a],this.events.emit(c.REMOVE_DATA,this.parent,a,n)}return this},pop:function(a){var n=void 0;return!this._frozen&&this.has(a)&&(n=this.list[a],delete this.list[a],delete this.values[a],this.events.emit(c.REMOVE_DATA,this.parent,a,n)),n},has:function(a){return this.list.hasOwnProperty(a)},setFreeze:function(a){return this._frozen=a,this},reset:function(){for(var a in this.list)delete this.list[a],delete this.values[a];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(c.CHANGE_DATA),this.events.off(c.SET_DATA),this.events.off(c.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(a){this._frozen=!!a}},count:{get:function(){var a=0;for(var n in this.list)this.list[n]!==void 0&&a++;return a}}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a){if(this.entries={},this.size=0,Array.isArray(a))for(var n=0;n<a.length;n++)this.set(a[n][0],a[n][1])},set:function(s,a){return this.has(s)||this.size++,this.entries[s]=a,this},get:function(s){if(this.has(s))return this.entries[s]},getArray:function(){var s=[],a=this.entries;for(var n in a)s.push(a[n]);return s},has:function(s){return this.entries.hasOwnProperty(s)},delete:function(s){return this.has(s)&&(delete this.entries[s],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(s){delete this.entries[s]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var s=[],a=this.entries;for(var n in a)s.push(a[n]);return s},dump:function(){var s=this.entries;console.group("Map");for(var a in s)console.log(a,s[a]);console.groupEnd()},each:function(s){var a=this.entries;for(var n in a)if(s(n,a[n])===!1)break;return this},contains:function(s){var a=this.entries;for(var n in a)if(a[n]===s)return!0;return!1},merge:function(s,a){a===void 0&&(a=!1);var n=this.entries,i=s.entries;for(var r in i)n.hasOwnProperty(r)&&a?n[r]=i[r]:this.set(r,i[r]);return this}});h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e<<16|c<<8|s};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ENTER_FULLSCREEN:t(800),FULLSCREEN_FAILED:t(801),FULLSCREEN_UNSUPPORTED:t(802),LEAVE_FULLSCREEN:t(803),ORIENTATION_CHANGE:t(804),RESIZE:t(805)}},function(h,g,t){(function(e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var c={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function s(){if(typeof importScripts=="function")return c;var a=navigator.userAgent;/Windows/.test(a)?c.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(c.iOS=!0,c.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),c.iOSVersion=parseInt(RegExp.$1,10)):c.macOS=!0:/Android/.test(a)?c.android=!0:/Linux/.test(a)?c.linux=!0:/iP[ao]d|iPhone/i.test(a)?(c.iOS=!0,navigator.appVersion.match(/OS (\d+)/),c.iOSVersion=parseInt(RegExp.$1,10),c.iPhone=a.toLowerCase().indexOf("iphone")!==-1,c.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?c.kindle=!0:/CrOS/.test(a)&&(c.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(c.android=!1,c.iOS=!1,c.macOS=!1,c.windows=!0,c.windowsPhone=!0);var n=/Silk/.test(a);return(c.windows||c.macOS||c.linux&&!n||c.chromeOS)&&(c.desktop=!0),(c.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(c.desktop=!1),navigator.standalone&&(c.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(c.cordova=!0),window.ejecta!==void 0&&(c.ejecta=!0)),typeof e<"u"&&e.versions&&e.versions.node&&(c.node=!0),c.node&&typeof e.versions=="object"&&(c.nodeWebkit=!!e.versions["node-webkit"],c.electron=!!e.versions.electron),/Crosswalk/.test(a)&&(c.crosswalk=!0),c.pixelRatio=window.devicePixelRatio||1,c}h.exports=s()}).call(this,t(807))},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD:t(861),ERROR:t(862),LOAD:t(863),READY:t(864),REMOVE:t(865)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(59),s=t(2),a=t(878),n=t(879),i=t(25),r=t(12),u=t(107),o=t(58),l=new e({Extends:o,initialize:function(d){var v=d.game.renderer,p=s(d,"fragShader",a);d.fragShader=r.parseFragmentShaderMaxTextures(p,v.maxTextures),d.vertShader=s(d,"vertShader",n),d.attributes=s(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),o.call(this,d),this._tempMatrix1=new i,this._tempMatrix2=new i,this._tempMatrix3=new i,this.calcMatrix=new i,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){o.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(f,d,v){this.manager.set(this,f);var p=this._tempMatrix1,m=this._tempMatrix2,x=this._tempMatrix3,T=f.frame,S=T.glTexture,E=T.u0,C=T.v0,A=T.u1,P=T.v1,M=T.x,O=T.y,F=T.cutWidth,I=T.cutHeight,N=T.customPivot,G=f.displayOriginX,Y=f.displayOriginY,z=-G+M,W=-Y+O;if(f.isCropped){var D=f._crop;(D.flipX!==f.flipX||D.flipY!==f.flipY)&&T.updateCropUVs(D,f.flipX,f.flipY),E=D.u0,C=D.v0,A=D.u1,P=D.v1,F=D.width,I=D.height,M=D.x,O=D.y,z=-G+M,W=-Y+O}var L=1,B=1;f.flipX&&(N||(z+=-T.realWidth+G*2),L=-1),(f.flipY||T.source.isGLTexture&&!S.flipY)&&(N||(W+=-T.realHeight+Y*2),B=-1),m.applyITRS(f.x,f.y,f.rotation,f.scaleX*L,f.scaleY*B),p.copyFrom(d.matrix),v?(p.multiplyWithOffset(v,-d.scrollX*f.scrollFactorX,-d.scrollY*f.scrollFactorY),m.e=f.x,m.f=f.y):(m.e-=d.scrollX*f.scrollFactorX,m.f-=d.scrollY*f.scrollFactorY),p.multiply(m,x);var w=z+F,V=W+I,U=d.roundPixels,X=x.getXRound(z,W,U),H=x.getYRound(z,W,U),b=x.getXRound(z,V,U),Z=x.getYRound(z,V,U),K=x.getXRound(w,V,U),Q=x.getYRound(w,V,U),j=x.getXRound(w,W,U),q=x.getYRound(w,W,U),k=r.getTintAppendFloatAlpha,J=d.alpha,_=k(f.tintTopLeft,J*f._alphaTL),it=k(f.tintTopRight,J*f._alphaTR),tt=k(f.tintBottomLeft,J*f._alphaBL),$=k(f.tintBottomRight,J*f._alphaBR);this.shouldFlush(6)&&this.flush();var st=this.setGameObject(f,T);this.manager.preBatch(f),this.batchQuad(f,X,H,b,Z,K,Q,j,q,E,C,A,P,_,it,tt,$,f.tintFill,S,st),this.manager.postBatch(f)},batchTexture:function(f,d,v,p,m,x,T,S,E,C,A,P,M,O,F,I,N,G,Y,z,W,D,L,B,w,V,U,X,H,b,Z,K){this.manager.set(this,f);var Q=this._tempMatrix1,j=this._tempMatrix2,q=this._tempMatrix3,k=G/v+U,J=Y/p+X,_=(G+z)/v+U,it=(Y+W)/p+X,tt=T,$=S,st=-I,nt=-N;if(f.isCropped){var rt=f._crop,Rt=rt.width,Dt=rt.height;tt=Rt,$=Dt,T=Rt,S=Dt,G=rt.x,Y=rt.y;var ft=G,lt=Y;P&&(ft=z-rt.x-Rt),M&&(lt=W-rt.y-Dt),k=ft/v+U,J=lt/p+X,_=(ft+Rt)/v+U,it=(lt+Dt)/p+X,st=-I+G,nt=-N+Y}M=M^(!Z&&d.isRenderTexture?1:0),P&&(tt*=-1,st+=T),M&&($*=-1,nt+=S);var Ot=st+tt,Et=nt+$;j.applyITRS(m,x,A,E,C),Q.copyFrom(H.matrix),b?(Q.multiplyWithOffset(b,-H.scrollX*O,-H.scrollY*F),j.e=m,j.f=x):(j.e-=H.scrollX*O,j.f-=H.scrollY*F),Q.multiply(j,q);var Tt=H.roundPixels,Wt=q.getXRound(st,nt,Tt),ue=q.getYRound(st,nt,Tt),fe=q.getXRound(st,Et,Tt),ce=q.getYRound(st,Et,Tt),de=q.getXRound(Ot,Et,Tt),ve=q.getYRound(Ot,Et,Tt),pe=q.getXRound(Ot,nt,Tt),va=q.getYRound(Ot,nt,Tt);K===void 0&&(K=this.renderer.setTexture2D(d)),f&&this.manager.preBatch(f),this.batchQuad(f,Wt,ue,fe,ce,de,ve,pe,va,k,J,_,it,D,L,B,w,V,d,K),f&&this.manager.postBatch(f)},batchTextureFrame:function(f,d,v,p,m,x,T){this.manager.set(this);var S=this._tempMatrix1.copyFrom(x),E=this._tempMatrix2,C=d+f.width,A=v+f.height;T?S.multiply(T,E):E=S;var P=E.getX(d,v),M=E.getY(d,v),O=E.getX(d,A),F=E.getY(d,A),I=E.getX(C,A),N=E.getY(C,A),G=E.getX(C,v),Y=E.getY(C,v),z=this.renderer.setTextureSource(f.source);p=r.getTintAppendFloatAlpha(p,m),this.batchQuad(null,P,M,O,F,I,N,G,Y,f.u0,f.v0,f.u1,f.v1,p,p,p,p,0,f.glTexture,z)},batchFillRect:function(f,d,v,p,m,x){this.renderer.pipelines.set(this);var T=this.calcMatrix;x&&x.multiply(m,T);var S=f+v,E=d+p,C=T.getX(f,d),A=T.getY(f,d),P=T.getX(f,E),M=T.getY(f,E),O=T.getX(S,E),F=T.getY(S,E),I=T.getX(S,d),N=T.getY(S,d),G=this.fillTint;this.batchQuad(null,C,A,P,M,O,F,I,N,0,0,1,1,G.TL,G.TR,G.BL,G.BR,2)},batchFillTriangle:function(f,d,v,p,m,x,T,S){this.renderer.pipelines.set(this);var E=this.calcMatrix;S&&S.multiply(T,E);var C=E.getX(f,d),A=E.getY(f,d),P=E.getX(v,p),M=E.getY(v,p),O=E.getX(m,x),F=E.getY(m,x),I=this.fillTint;this.batchTri(null,C,A,P,M,O,F,0,0,1,1,I.TL,I.TR,I.BL,2)},batchStrokeTriangle:function(f,d,v,p,m,x,T,S,E){var C=this.tempTriangle;C[0].x=f,C[0].y=d,C[0].width=T,C[1].x=v,C[1].y=p,C[1].width=T,C[2].x=m,C[2].y=x,C[2].width=T,C[3].x=f,C[3].y=d,C[3].width=T,this.batchStrokePath(C,T,!1,S,E)},batchFillPath:function(f,d,v){this.renderer.pipelines.set(this);var p=this.calcMatrix;v&&v.multiply(d,p);for(var m=f.length,x=this.polygonCache,T,S,E=this.fillTint.TL,C=this.fillTint.TR,A=this.fillTint.BL,P=0;P<m;++P)S=f[P],x.push(S.x,S.y);T=c(x),m=T.length;for(var M=0;M<m;M+=3){var O=T[M+0]*2,F=T[M+1]*2,I=T[M+2]*2,N=x[O+0],G=x[O+1],Y=x[F+0],z=x[F+1],W=x[I+0],D=x[I+1],L=p.getX(N,G),B=p.getY(N,G),w=p.getX(Y,z),V=p.getY(Y,z),U=p.getX(W,D),X=p.getY(W,D);this.batchTri(null,L,B,w,V,U,X,0,0,1,1,E,C,A,2)}x.length=0},batchStrokePath:function(f,d,v,p,m){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var x=f.length-1,T=0;T<x;T++){var S=f[T],E=f[T+1];this.batchLine(S.x,S.y,E.x,E.y,S.width/2,E.width/2,d,T,!v&&T===x-1,p,m)}},batchLine:function(f,d,v,p,m,x,T,S,E,C,A){this.renderer.pipelines.set(this);var P=this.calcMatrix;A&&A.multiply(C,P);var M=v-f,O=p-d,F=Math.sqrt(M*M+O*O),I=m*(p-d)/F,N=m*(f-v)/F,G=x*(p-d)/F,Y=x*(f-v)/F,z=v-G,W=p-Y,D=f-I,L=d-N,B=v+G,w=p+Y,V=f+I,U=d+N,X=P.getX(z,W),H=P.getY(z,W),b=P.getX(D,L),Z=P.getY(D,L),K=P.getX(B,w),Q=P.getY(B,w),j=P.getX(V,U),q=P.getY(V,U),k=this.strokeTint,J=k.TL,_=k.TR,it=k.BL,tt=k.BR;if(this.batchQuad(null,j,q,b,Z,X,H,K,Q,0,0,1,1,J,_,it,tt,2),!(T<=2)){var $=this.prevQuad,st=this.firstQuad;S>0&&$[4]?this.batchQuad(null,j,q,b,Z,$[0],$[1],$[2],$[3],0,0,1,1,J,_,it,tt,2):(st[0]=j,st[1]=q,st[2]=b,st[3]=Z,st[4]=1),E&&st[4]?this.batchQuad(null,X,H,K,Q,st[0],st[1],st[2],st[3],0,0,1,1,J,_,it,tt,2):($[0]=X,$[1]=H,$[2]=K,$[3]=Q,$[4]=1)}}});h.exports=l},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(18),s=t(17),a=new e({initialize:function(i,r,u,o,l,f,d){this.texture=i,this.name=r,this.source=i.source[u],this.sourceIndex=u,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(f,d,o,l)},setSize:function(n,i,r,u){r===void 0&&(r=0),u===void 0&&(u=0),this.cutX=r,this.cutY=u,this.cutWidth=n,this.cutHeight=i,this.width=n,this.height=i,this.halfWidth=Math.floor(n*.5),this.halfHeight=Math.floor(i*.5),this.centerX=Math.floor(n/2),this.centerY=Math.floor(i/2);var o=this.data,l=o.cut;l.x=r,l.y=u,l.w=n,l.h=i,l.r=r+n,l.b=u+i,o.sourceSize.w=n,o.sourceSize.h=i,o.spriteSourceSize.w=n,o.spriteSourceSize.h=i,o.radius=.5*Math.sqrt(n*n+i*i);var f=o.drawImage;return f.x=r,f.y=u,f.width=n,f.height=i,this.updateUVs()},setTrim:function(n,i,r,u,o,l){var f=this.data,d=f.spriteSourceSize;return f.trim=!0,f.sourceSize.w=n,f.sourceSize.h=i,d.x=r,d.y=u,d.w=o,d.h=l,d.r=r+o,d.b=u+l,this.x=r,this.y=u,this.width=o,this.height=l,this.halfWidth=o*.5,this.halfHeight=l*.5,this.centerX=Math.floor(o/2),this.centerY=Math.floor(l/2),this.updateUVs()},setCropUVs:function(n,i,r,u,o,l,f){var d=this.cutX,v=this.cutY,p=this.cutWidth,m=this.cutHeight,x=this.realWidth,T=this.realHeight;i=c(i,0,x),r=c(r,0,T),u=c(u,0,x-i),o=c(o,0,T-r);var S=d+i,E=v+r,C=u,A=o,P=this.data;if(P.trim){var M=P.spriteSourceSize;u=c(u,0,p-i),o=c(o,0,m-r);var O=i+u,F=r+o,I=!(M.r<i||M.b<r||M.x>O||M.y>F);if(I){var N=Math.max(M.x,i),G=Math.max(M.y,r),Y=Math.min(M.r,O)-N,z=Math.min(M.b,F)-G;C=Y,A=z,l?S=d+(p-(N-M.x)-Y):S=d+(N-M.x),f?E=v+(m-(G-M.y)-z):E=v+(G-M.y),i=N,r=G,u=Y,o=z}else S=0,E=0,C=0,A=0}else l&&(S=d+(p-i-u)),f&&(E=v+(m-r-o));var W=this.source.width,D=this.source.height;return n.u0=Math.max(0,S/W),n.v0=Math.max(0,E/D),n.u1=Math.min(1,(S+C)/W),n.v1=Math.min(1,(E+A)/D),n.x=i,n.y=r,n.cx=S,n.cy=E,n.cw=C,n.ch=A,n.width=u,n.height=o,n.flipX=l,n.flipY=f,n},updateCropUVs:function(n,i,r){return this.setCropUVs(n,n.x,n.y,n.width,n.height,i,r)},setUVs:function(n,i,r,u,o,l){var f=this.data.drawImage;return f.width=n,f.height=i,this.u0=r,this.v0=u,this.u1=o,this.v1=l,this},updateUVs:function(){var n=this.cutX,i=this.cutY,r=this.cutWidth,u=this.cutHeight,o=this.data.drawImage;o.width=r,o.height=u;var l=this.source.width,f=this.source.height;return this.u0=n/l,this.v0=i/f,this.u1=(n+r)/l,this.v1=(i+u)/f,this},updateUVsInverted:function(){var n=this.source.width,i=this.source.height;return this.u0=(this.cutX+this.cutHeight)/n,this.v0=this.cutY/i,this.u1=this.cutX/n,this.v1=(this.cutY+this.cutWidth)/i,this},clone:function(){var n=new a(this.texture,this.name,this.sourceIndex);return n.cutX=this.cutX,n.cutY=this.cutY,n.cutWidth=this.cutWidth,n.cutHeight=this.cutHeight,n.x=this.x,n.y=this.y,n.width=this.width,n.height=this.height,n.halfWidth=this.halfWidth,n.halfHeight=this.halfHeight,n.centerX=this.centerX,n.centerY=this.centerY,n.rotated=this.rotated,n.data=s(!0,n.data,this.data),n.updateUVs(),n},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(208),c=t(0),s=t(1),a=t(79),n=new c({initialize:function(r){this.parent=r,this.list=[],this.position=0,this.addCallback=s,this.removeCallback=s,this._sortKey=""},add:function(i,r){return r?e.Add(this.list,i):e.Add(this.list,i,0,this.addCallback,this)},addAt:function(i,r,u){return u?e.AddAt(this.list,i,r):e.AddAt(this.list,i,r,0,this.addCallback,this)},getAt:function(i){return this.list[i]},getIndex:function(i){return this.list.indexOf(i)},sort:function(i,r){return i?(r===void 0&&(r=function(u,o){return u[i]-o[i]}),a(this.list,r),this):this},getByName:function(i){return e.GetFirst(this.list,"name",i)},getRandom:function(i,r){return e.GetRandom(this.list,i,r)},getFirst:function(i,r,u,o){return e.GetFirst(this.list,i,r,u,o)},getAll:function(i,r,u,o){return e.GetAll(this.list,i,r,u,o)},count:function(i,r){return e.CountAllMatching(this.list,i,r)},swap:function(i,r){e.Swap(this.list,i,r)},moveTo:function(i,r){return e.MoveTo(this.list,i,r)},moveAbove:function(i,r){return e.MoveAbove(this.list,i,r)},moveBelow:function(i,r){return e.MoveBelow(this.list,i,r)},remove:function(i,r){return r?e.Remove(this.list,i):e.Remove(this.list,i,this.removeCallback,this)},removeAt:function(i,r){return r?e.RemoveAt(this.list,i):e.RemoveAt(this.list,i,this.removeCallback,this)},removeBetween:function(i,r,u){return u?e.RemoveBetween(this.list,i,r):e.RemoveBetween(this.list,i,r,this.removeCallback,this)},removeAll:function(i){for(var r=this.list.length;r--;)this.remove(this.list[r],i);return this},bringToTop:function(i){return e.BringToTop(this.list,i)},sendToBack:function(i){return e.SendToBack(this.list,i)},moveUp:function(i){return e.MoveUp(this.list,i),i},moveDown:function(i){return e.MoveDown(this.list,i),i},reverse:function(){return this.list.reverse(),this},shuffle:function(){return e.Shuffle(this.list),this},replace:function(i,r){return e.Replace(this.list,i,r)},exists:function(i){return this.list.indexOf(i)>-1},setAll:function(i,r,u,o){return e.SetAll(this.list,i,r,u,o),this},each:function(i,r){for(var u=[null],o=2;o<arguments.length;o++)u.push(arguments[o]);for(o=0;o<this.list.length;o++)u[0]=this.list[o],i.apply(r,u)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(112),s=t(445),a=t(446),n=t(56),i=t(180),r=new e({initialize:function(o,l,f,d){o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=0),d===void 0&&(d=0),this.type=n.ELLIPSE,this.x=o,this.y=l,this.width=f,this.height=d},contains:function(u,o){return c(this,u,o)},getPoint:function(u,o){return s(this,u,o)},getPoints:function(u,o,l){return a(this,u,o,l)},getRandomPoint:function(u){return i(this,u)},setTo:function(u,o,l,f){return this.x=u,this.y=o,this.width=l,this.height=f,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(u,o){return o===void 0&&(o=u),this.x=u,this.y=o,this},setSize:function(u,o){return o===void 0&&(o=u),this.width=u,this.height=o,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(u){this.x=u+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(u){this.y=u+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});h.exports=r},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(e.width<=0||e.height<=0)return!1;var a=(c-e.x)/e.width,n=(s-e.y)/e.height;return a*=a,n*=n,a+n<.25};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(275),c=t(0),s=t(75),a=t(9),n=t(207),i=t(2),r=t(6),u=t(7),o=t(437),l=t(149),f=t(73),d=new c({Extends:a,initialize:function(p,m,x){a.call(this),x?m&&!Array.isArray(m)&&(m=[m]):Array.isArray(m)?u(m[0])&&(x=m,m=null):u(m)&&(x=m,m=null),this.scene=p,this.children=new l,this.isParent=!0,this.type="Group",this.classType=i(x,"classType",f),this.name=i(x,"name",""),this.active=i(x,"active",!0),this.maxSize=i(x,"maxSize",-1),this.defaultKey=i(x,"defaultKey",null),this.defaultFrame=i(x,"defaultFrame",null),this.runChildUpdate=i(x,"runChildUpdate",!1),this.createCallback=i(x,"createCallback",null),this.removeCallback=i(x,"removeCallback",null),this.createMultipleCallback=i(x,"createMultipleCallback",null),this.internalCreateCallback=i(x,"internalCreateCallback",null),this.internalRemoveCallback=i(x,"internalRemoveCallback",null),m&&this.addMultiple(m),x&&this.createMultiple(x),this.on(s.ADDED_TO_SCENE,this.addedToScene,this),this.on(s.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(v,p,m,x,T,S){if(v===void 0&&(v=0),p===void 0&&(p=0),m===void 0&&(m=this.defaultKey),x===void 0&&(x=this.defaultFrame),T===void 0&&(T=!0),S===void 0&&(S=!0),this.isFull())return null;var E=new this.classType(this.scene,v,p,m,x);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=T,E.setActive(S),this.add(E),E},createMultiple:function(v){if(this.isFull())return[];Array.isArray(v)||(v=[v]);var p=[];if(v[0].key)for(var m=0;m<v.length;m++){var x=this.createFromConfig(v[m]);p=p.concat(x)}return p},createFromConfig:function(v){if(this.isFull())return[];this.classType=i(v,"classType",this.classType);var p=i(v,"key",void 0),m=i(v,"frame",null),x=i(v,"visible",!0),T=i(v,"active",!0),S=[];if(p===void 0)return S;Array.isArray(p)||(p=[p]),Array.isArray(m)||(m=[m]);var E=i(v,"repeat",0),C=i(v,"randomKey",!1),A=i(v,"randomFrame",!1),P=i(v,"yoyo",!1),M=i(v,"quantity",!1),O=i(v,"frameQuantity",1),F=i(v,"max",0),I=o(p,m,{max:F,qty:M||O,random:C,randomB:A,repeat:E,yoyo:P});v.createCallback&&(this.createCallback=v.createCallback),v.removeCallback&&(this.removeCallback=v.removeCallback);for(var N=0;N<I.length;N++){var G=this.create(0,0,I[N].a,I[N].b,x,T);if(!G)break;S.push(G)}var Y=r(v,"setXY.x",0),z=r(v,"setXY.y",0),W=r(v,"setXY.stepX",0),D=r(v,"setXY.stepY",0);e.SetXY(S,Y,z,W,D);var L=r(v,"setRotation.value",0),B=r(v,"setRotation.step",0);e.SetRotation(S,L,B);var w=r(v,"setScale.x",1),V=r(v,"setScale.y",w),U=r(v,"setScale.stepX",0),X=r(v,"setScale.stepY",0);e.SetScale(S,w,V,U,X);var H=r(v,"setOrigin.x",.5),b=r(v,"setOrigin.y",H),Z=r(v,"setOrigin.stepX",0),K=r(v,"setOrigin.stepY",0);e.SetOrigin(S,H,b,Z,K);var Q=r(v,"setAlpha.value",1),j=r(v,"setAlpha.step",0);e.SetAlpha(S,Q,j);var q=r(v,"setDepth.value",0),k=r(v,"setDepth.step",0);e.SetDepth(S,q,k);var J=r(v,"setScrollFactor.x",1),_=r(v,"setScrollFactor.y",J),it=r(v,"setScrollFactor.stepX",0),tt=r(v,"setScrollFactor.stepY",0);e.SetScrollFactor(S,J,_,it,tt);var $=i(v,"hitArea",null),st=i(v,"hitAreaCallback",null);$&&e.SetHitArea(S,$,st);var nt=i(v,"gridAlign",!1);return nt&&e.GridAlign(S,nt),this.createMultipleCallback&&this.createMultipleCallback.call(this,S),S},preUpdate:function(v,p){if(!(!this.runChildUpdate||this.children.size===0))for(var m=this.children.entries.slice(),x=0;x<m.length;x++){var T=m[x];T.active&&T.update(v,p)}},add:function(v,p){return p===void 0&&(p=!1),this.isFull()?this:(this.children.set(v),this.internalCreateCallback&&this.internalCreateCallback.call(this,v),this.createCallback&&this.createCallback.call(this,v),p&&(v.addToDisplayList(this.scene.sys.displayList),v.addToUpdateList()),v.on(s.DESTROY,this.remove,this),this)},addMultiple:function(v,p){if(p===void 0&&(p=!1),Array.isArray(v))for(var m=0;m<v.length;m++)this.add(v[m],p);return this},remove:function(v,p,m){return p===void 0&&(p=!1),m===void 0&&(m=!1),this.children.contains(v)?(this.children.delete(v),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,v),this.removeCallback&&this.removeCallback.call(this,v),v.off(s.DESTROY,this.remove,this),m?v.destroy():p&&(v.removeFromDisplayList(),v.removeFromUpdateList()),this):this},clear:function(v,p){v===void 0&&(v=!1),p===void 0&&(p=!1);for(var m=this.children,x=0;x<m.size;x++){var T=m.entries[x];T.off(s.DESTROY,this.remove,this),p?T.destroy():v&&(T.removeFromDisplayList(),T.removeFromUpdateList())}return this.children.clear(),this},contains:function(v){return this.children.contains(v)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(v,p,m,x){return n(this.children.entries,v,p,m,x)},getFirst:function(v,p,m,x,T,S,E){return this.getHandler(!0,1,v,p,m,x,T,S,E)},getFirstNth:function(v,p,m,x,T,S,E,C){return this.getHandler(!0,v,p,m,x,T,S,E,C)},getLast:function(v,p,m,x,T,S,E){return this.getHandler(!1,1,v,p,m,x,T,S,E)},getLastNth:function(v,p,m,x,T,S,E,C){return this.getHandler(!1,v,p,m,x,T,S,E,C)},getHandler:function(v,p,m,x,T,S,E,C,A){m===void 0&&(m=!1),x===void 0&&(x=!1);var P,M,O=0,F=this.children.entries;if(v)for(M=0;M<F.length;M++)if(P=F[M],P.active===m){if(O++,O===p)break}else P=null;else for(M=F.length-1;M>=0;M--)if(P=F[M],P.active===m){if(O++,O===p)break}else P=null;return P?(typeof T=="number"&&(P.x=T),typeof S=="number"&&(P.y=S),P):x?this.create(T,S,E,C,A):null},get:function(v,p,m,x,T){return this.getFirst(!1,!0,v,p,m,x,T)},getFirstAlive:function(v,p,m,x,T,S){return this.getFirst(!0,v,p,m,x,T,S)},getFirstDead:function(v,p,m,x,T,S){return this.getFirst(!1,v,p,m,x,T,S)},playAnimation:function(v,p){return e.PlayAnimation(this.children.entries,v,p),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(v){v===void 0&&(v=!0);for(var p=0,m=0;m<this.children.size;m++)this.children.entries[m].active===v&&p++;return p},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var v=this.getTotalUsed(),p=this.maxSize===-1?999999999999:this.maxSize;return p-v},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},propertyValueSet:function(v,p,m,x,T){return e.PropertyValueSet(this.children.entries,v,p,m,x,T),this},propertyValueInc:function(v,p,m,x,T){return e.PropertyValueInc(this.children.entries,v,p,m,x,T),this},setX:function(v,p){return e.SetX(this.children.entries,v,p),this},setY:function(v,p){return e.SetY(this.children.entries,v,p),this},setXY:function(v,p,m,x){return e.SetXY(this.children.entries,v,p,m,x),this},incX:function(v,p){return e.IncX(this.children.entries,v,p),this},incY:function(v,p){return e.IncY(this.children.entries,v,p),this},incXY:function(v,p,m,x){return e.IncXY(this.children.entries,v,p,m,x),this},shiftPosition:function(v,p,m){return e.ShiftPosition(this.children.entries,v,p,m),this},angle:function(v,p){return e.Angle(this.children.entries,v,p),this},rotate:function(v,p){return e.Rotate(this.children.entries,v,p),this},rotateAround:function(v,p){return e.RotateAround(this.children.entries,v,p),this},rotateAroundDistance:function(v,p,m){return e.RotateAroundDistance(this.children.entries,v,p,m),this},setAlpha:function(v,p){return e.SetAlpha(this.children.entries,v,p),this},setTint:function(v,p,m,x){return e.SetTint(this.children.entries,v,p,m,x),this},setOrigin:function(v,p,m,x){return e.SetOrigin(this.children.entries,v,p,m,x),this},scaleX:function(v,p){return e.ScaleX(this.children.entries,v,p),this},scaleY:function(v,p){return e.ScaleY(this.children.entries,v,p),this},scaleXY:function(v,p,m,x){return e.ScaleXY(this.children.entries,v,p,m,x),this},setDepth:function(v,p){return e.SetDepth(this.children.entries,v,p),this},setBlendMode:function(v){return e.SetBlendMode(this.children.entries,v),this},setHitArea:function(v,p){return e.SetHitArea(this.children.entries,v,p),this},shuffle:function(){return e.Shuffle(this.children.entries),this},kill:function(v){this.children.contains(v)&&v.setActive(!1)},killAndHide:function(v){this.children.contains(v)&&(v.setActive(!1),v.setVisible(!1))},setVisible:function(v,p,m){return e.SetVisible(this.children.entries,v,p,m),this},toggleVisible:function(){return e.ToggleVisible(this.children.entries),this},destroy:function(v,p){v===void 0&&(v=!1),p===void 0&&(p=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(s.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(p,v),this.scene=void 0,this.children=void 0)}});h.exports=d},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),c=function(s,a,n,i,r,u){for(var o=e.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*i),l=n.pathData,f=n.pathIndexes,d=0;d<f.length;d+=3){var v=f[d]*2,p=f[d+1]*2,m=f[d+2]*2,x=l[v+0]-r,T=l[v+1]-u,S=l[p+0]-r,E=l[p+1]-u,C=l[m+0]-r,A=l[m+1]-u,P=a.getX(x,T),M=a.getY(x,T),O=a.getX(S,E),F=a.getY(S,E),I=a.getX(C,A),N=a.getY(C,A);s.batchTri(n,P,M,O,F,I,N,0,0,1,1,o,o,o,2)}};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=e.x3-e.x1,n=e.y3-e.y1,i=e.x2-e.x1,r=e.y2-e.y1,u=c-e.x1,o=s-e.y1,l=a*a+n*n,f=a*i+n*r,d=a*u+n*o,v=i*i+r*r,p=i*u+r*o,m=l*v-f*f,x=m===0?0:1/m,T=(v*d-f*p)*x,S=(l*p-f*d)*x;return T>=0&&S>=0&&T+S<1};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(10),s=t(3);function a(i,r,u,o){var l=i-u,f=r-o,d=l*l+f*f;return Math.sqrt(d)}var n=new e({initialize:function(r,u,o){this.vertex1=r,this.vertex2=u,this.vertex3=o,this.bounds=new c,this._inCenter=new s},getInCenter:function(i){i===void 0&&(i=!0);var r=this.vertex1,u=this.vertex2,o=this.vertex3,l,f,d,v,p,m;i?(l=r.x,f=r.y,d=u.x,v=u.y,p=o.x,m=o.y):(l=r.vx,f=r.vy,d=u.vx,v=u.vy,p=o.vx,m=o.vy);var x=a(p,m,d,v),T=a(l,f,p,m),S=a(d,v,l,f),E=x+T+S;return this._inCenter.set((l*x+d*T+p*S)/E,(f*x+v*T+m*S)/E)},contains:function(i,r,u){var o=this.vertex1,l=this.vertex2,f=this.vertex3,d=o.vx,v=o.vy,p=l.vx,m=l.vy,x=f.vx,T=f.vy;if(u){var S=u.a,E=u.b,C=u.c,A=u.d,P=u.e,M=u.f;d=o.vx*S+o.vy*C+P,v=o.vx*E+o.vy*A+M,p=l.vx*S+l.vy*C+P,m=l.vx*E+l.vy*A+M,x=f.vx*S+f.vy*C+P,T=f.vx*E+f.vy*A+M}var O=x-d,F=T-v,I=p-d,N=m-v,G=i-d,Y=r-v,z=O*O+F*F,W=O*I+F*N,D=O*G+F*Y,L=I*I+N*N,B=I*G+N*Y,w=z*L-W*W,V=w===0?0:1/w,U=(L*D-W*B)*V,X=(z*B-W*D)*V;return U>=0&&X>=0&&U+X<1},isCounterClockwise:function(i){var r=this.vertex1,u=this.vertex2,o=this.vertex3,l=(u.vx-r.vx)*(o.vy-r.vy)-(u.vy-r.vy)*(o.vx-r.vx);return i<=0?l>=0:l<0},load:function(i,r,u,o,l){return u=this.vertex1.load(i,r,u,o,l),u=this.vertex2.load(i,r,u,o,l),u=this.vertex3.load(i,r,u,o,l),u},transformCoordinatesLocal:function(i,r,u,o){return this.vertex1.transformCoordinatesLocal(i,r,u,o),this.vertex2.transformCoordinatesLocal(i,r,u,o),this.vertex3.transformCoordinatesLocal(i,r,u,o),this},updateBounds:function(){var i=this.vertex1,r=this.vertex2,u=this.vertex3,o=this.bounds;return o.x=Math.min(i.vx,r.vx,u.vx),o.y=Math.min(i.vy,r.vy,u.vy),o.width=Math.max(i.vx,r.vx,u.vx)-o.x,o.height=Math.max(i.vy,r.vy,u.vy)-o.y,this},isInView:function(i,r,u,o,l,f,d,v,p,m,x){var T=this.vertex1.update(l,f,d,v,p,m,x,o),S=this.vertex2.update(l,f,d,v,p,m,x,o),E=this.vertex3.update(l,f,d,v,p,m,x,o);if(T.ta<=0&&S.ta<=0&&E.ta<=0||r&&!this.isCounterClockwise(u))return!1;var C=this.bounds;C.x=Math.min(T.tx,S.tx,E.tx),C.y=Math.min(T.ty,S.ty,E.ty),C.width=Math.max(T.tx,S.tx,E.tx)-C.x,C.height=Math.max(T.ty,S.ty,E.ty)-C.y;var A=i.x+i.width,P=i.y+i.height;return C.width<=0||C.height<=0||i.width<=0||i.height<=0?!1:!(C.right<i.x||C.bottom<i.y||C.x>A||C.y>P)},translate:function(i,r){r===void 0&&(r=0);var u=this.vertex1,o=this.vertex2,l=this.vertex3;return u.x+=i,u.y+=r,o.x+=i,o.y+=r,l.x+=i,l.y+=r,this},x:{get:function(){return this.getInCenter().x},set:function(i){var r=this.getInCenter();this.translate(i-r.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(i){var r=this.getInCenter();this.translate(0,i-r.y)}},alpha:{get:function(){var i=this.vertex1,r=this.vertex2,u=this.vertex3;return(i.alpha+r.alpha+u.alpha)/3},set:function(i){this.vertex1.alpha=i,this.vertex2.alpha=i,this.vertex3.alpha=i}},depth:{get:function(){var i=this.vertex1,r=this.vertex2,u=this.vertex3;return(i.vz+r.vz+u.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(12),s=t(39),a=new e({Extends:s,initialize:function(i,r,u,o,l,f,d,v,p,m){f===void 0&&(f=16777215),d===void 0&&(d=1),v===void 0&&(v=0),p===void 0&&(p=0),m===void 0&&(m=0),s.call(this,i,r,u),this.vx=0,this.vy=0,this.vz=0,this.nx=v,this.ny=p,this.nz=m,this.u=o,this.v=l,this.color=f,this.alpha=d,this.tx=0,this.ty=0,this.ta=0},setUVs:function(n,i){return this.u=n,this.v=i,this},transformCoordinatesLocal:function(n,i,r,u){var o=this.x,l=this.y,f=this.z,d=n.val,v=o*d[0]+l*d[4]+f*d[8]+d[12],p=o*d[1]+l*d[5]+f*d[9]+d[13],m=o*d[2]+l*d[6]+f*d[10]+d[14],x=o*d[3]+l*d[7]+f*d[11]+d[15];this.vx=v/x*i,this.vy=-(p/x)*r,u<=0?this.vz=m/x:this.vz=-(m/x)},update:function(n,i,r,u,o,l,f,d){var v=this.vx*n+this.vy*r+o,p=this.vx*i+this.vy*u+l;return f&&(v=Math.round(v),p=Math.round(p)),this.tx=v,this.ty=p,this.ta=this.alpha*d,this},load:function(n,i,r,u,o){return n[++r]=this.tx,n[++r]=this.ty,n[++r]=this.u,n[++r]=this.v,n[++r]=u,n[++r]=o,i[++r]=c.getTintAppendFloatAlpha(this.color,this.ta),r}});h.exports=a},function(h,g,t){var e={};h.exports=e;var c=t(166),s=t(32),a=t(84),n=t(41);(function(){e.create=function(i){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},i)},e.setModified=function(i,r,u,o){if(c.trigger(i,"compositeModified",i),i.isModified=r,u&&i.parent&&e.setModified(i.parent,r,u,o),o)for(var l=0;l<i.composites.length;l++){var f=i.composites[l];e.setModified(f,r,u,o)}},e.add=function(i,r){var u=[].concat(r);c.trigger(i,"beforeAdd",{object:r});for(var o=0;o<u.length;o++){var l=u[o];switch(l.type){case"body":if(l.parent!==l){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(i,l);break;case"constraint":e.addConstraint(i,l);break;case"composite":e.addComposite(i,l);break;case"mouseConstraint":e.addConstraint(i,l.constraint);break}}return c.trigger(i,"afterAdd",{object:r}),i},e.remove=function(i,r,u){var o=[].concat(r);c.trigger(i,"beforeRemove",{object:r});for(var l=0;l<o.length;l++){var f=o[l];switch(f.type){case"body":e.removeBody(i,f,u);break;case"constraint":e.removeConstraint(i,f,u);break;case"composite":e.removeComposite(i,f,u);break;case"mouseConstraint":e.removeConstraint(i,f.constraint);break}}return c.trigger(i,"afterRemove",{object:r}),i},e.addComposite=function(i,r){return i.composites.push(r),r.parent=i,e.setModified(i,!0,!0,!1),i},e.removeComposite=function(i,r,u){var o=i.composites.indexOf(r);if(o!==-1&&(e.removeCompositeAt(i,o),e.setModified(i,!0,!0,!1)),u)for(var l=0;l<i.composites.length;l++)e.removeComposite(i.composites[l],r,!0);return i},e.removeCompositeAt=function(i,r){return i.composites.splice(r,1),e.setModified(i,!0,!0,!1),i},e.addBody=function(i,r){return i.bodies.push(r),e.setModified(i,!0,!0,!1),i},e.removeBody=function(i,r,u){var o=i.bodies.indexOf(r);if(o!==-1&&(e.removeBodyAt(i,o),e.setModified(i,!0,!0,!1)),u)for(var l=0;l<i.composites.length;l++)e.removeBody(i.composites[l],r,!0);return i},e.removeBodyAt=function(i,r){return i.bodies.splice(r,1),e.setModified(i,!0,!0,!1),i},e.addConstraint=function(i,r){return i.constraints.push(r),e.setModified(i,!0,!0,!1),i},e.removeConstraint=function(i,r,u){var o=i.constraints.indexOf(r);if(o!==-1&&e.removeConstraintAt(i,o),u)for(var l=0;l<i.composites.length;l++)e.removeConstraint(i.composites[l],r,!0);return i},e.removeConstraintAt=function(i,r){return i.constraints.splice(r,1),e.setModified(i,!0,!0,!1),i},e.clear=function(i,r,u){if(u)for(var o=0;o<i.composites.length;o++)e.clear(i.composites[o],r,!0);return r?i.bodies=i.bodies.filter(function(l){return l.isStatic}):i.bodies.length=0,i.constraints.length=0,i.composites.length=0,e.setModified(i,!0,!0,!1),i},e.allBodies=function(i){for(var r=[].concat(i.bodies),u=0;u<i.composites.length;u++)r=r.concat(e.allBodies(i.composites[u]));return r},e.allConstraints=function(i){for(var r=[].concat(i.constraints),u=0;u<i.composites.length;u++)r=r.concat(e.allConstraints(i.composites[u]));return r},e.allComposites=function(i){for(var r=[].concat(i.composites),u=0;u<i.composites.length;u++)r=r.concat(e.allComposites(i.composites[u]));return r},e.get=function(i,r,u){var o,l;switch(u){case"body":o=e.allBodies(i);break;case"constraint":o=e.allConstraints(i);break;case"composite":o=e.allComposites(i).concat(i);break}return o?(l=o.filter(function(f){return f.id.toString()===r.toString()}),l.length===0?null:l[0]):null},e.move=function(i,r,u){return e.remove(i,r),e.add(u,r),i},e.rebase=function(i){for(var r=e.allBodies(i).concat(e.allConstraints(i)).concat(e.allComposites(i)),u=0;u<r.length;u++)r[u].id=s.nextId();return e.setModified(i,!0,!0,!1),i},e.translate=function(i,r,u){for(var o=u?e.allBodies(i):i.bodies,l=0;l<o.length;l++)n.translate(o[l],r);return e.setModified(i,!0,!0,!1),i},e.rotate=function(i,r,u,o){for(var l=Math.cos(r),f=Math.sin(r),d=o?e.allBodies(i):i.bodies,v=0;v<d.length;v++){var p=d[v],m=p.position.x-u.x,x=p.position.y-u.y;n.setPosition(p,{x:u.x+(m*l-x*f),y:u.y+(m*f+x*l)}),n.rotate(p,r)}return e.setModified(i,!0,!0,!1),i},e.scale=function(i,r,u,o,l){for(var f=l?e.allBodies(i):i.bodies,d=0;d<f.length;d++){var v=f[d],p=v.position.x-o.x,m=v.position.y-o.y;n.setPosition(v,{x:o.x+p*r,y:o.y+m*u}),n.scale(v,r,u)}return e.setModified(i,!0,!0,!1),i},e.bounds=function(i){for(var r=e.allBodies(i),u=[],o=0;o<r.length;o+=1){var l=r[o];u.push(l.bounds.min,l.bounds.max)}return a.create(u)}})()},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e>=0&&e<s.width&&c>=0&&c<s.height};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(29),s=t(2),a=new e({initialize:function(i){i===void 0&&(i={}),this.name=s(i,"name","layer"),this.x=s(i,"x",0),this.y=s(i,"y",0),this.width=s(i,"width",0),this.height=s(i,"height",0),this.tileWidth=s(i,"tileWidth",0),this.tileHeight=s(i,"tileHeight",0),this.baseTileWidth=s(i,"baseTileWidth",this.tileWidth),this.baseTileHeight=s(i,"baseTileHeight",this.tileHeight),this.orientation=s(i,"orientation",c.ORTHOGONAL),this.widthInPixels=s(i,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=s(i,"heightInPixels",this.height*this.baseTileHeight),this.alpha=s(i,"alpha",1),this.visible=s(i,"visible",!0),this.properties=s(i,"properties",[]),this.indexes=s(i,"indexes",[]),this.collideIndexes=s(i,"collideIndexes",[]),this.callbacks=s(i,"callbacks",[]),this.bodies=s(i,"bodies",[]),this.data=s(i,"data",[]),this.tilemapLayer=s(i,"tilemapLayer",null),this.hexSideLength=s(i,"hexSideLength",0)}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(29),s=t(2),a=new e({initialize:function(i){i===void 0&&(i={}),this.name=s(i,"name","map"),this.width=s(i,"width",0),this.height=s(i,"height",0),this.infinite=s(i,"infinite",!1),this.tileWidth=s(i,"tileWidth",0),this.tileHeight=s(i,"tileHeight",0),this.widthInPixels=s(i,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=s(i,"heightInPixels",this.height*this.tileHeight),this.format=s(i,"format",null),this.orientation=s(i,"orientation",c.ORTHOGONAL),this.renderOrder=s(i,"renderOrder","right-down"),this.version=s(i,"version","1"),this.properties=s(i,"properties",{}),this.layers=s(i,"layers",[]),this.images=s(i,"images",[]),this.objects=s(i,"objects",{}),this.collision=s(i,"collision",{}),this.tilesets=s(i,"tilesets",[]),this.imageCollections=s(i,"imageCollections",[]),this.tiles=s(i,"tiles",[]),this.hexSideLength=s(i,"hexSideLength",0)}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n,i,r,u,o,l,f){(i===void 0||i<=0)&&(i=32),(r===void 0||r<=0)&&(r=32),u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l={}),f===void 0&&(f={}),this.name=a,this.firstgid=n,this.tileWidth=i,this.tileHeight=r,this.tileMargin=u,this.tileSpacing=o,this.tileProperties=l,this.tileData=f,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(s){return this.containsTileIndex(s)?this.tileProperties[s-this.firstgid]:null},getTileData:function(s){return this.containsTileIndex(s)?this.tileData[s-this.firstgid]:null},getTileCollisionGroup:function(s){var a=this.getTileData(s);return a&&a.objectgroup?a.objectgroup:null},containsTileIndex:function(s){return s>=this.firstgid&&s<this.firstgid+this.total},getTileTextureCoordinates:function(s){return this.containsTileIndex(s)?this.texCoordinates[s-this.firstgid]:null},setImage:function(s){return this.image=s,this.glTexture=s.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(s,a){return s!==void 0&&(this.tileWidth=s),a!==void 0&&(this.tileHeight=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(s,a){return s!==void 0&&(this.tileMargin=s),a!==void 0&&(this.tileSpacing=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(s,a){var n=(a-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(s-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(n%1!==0||i%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),i=Math.floor(i),this.rows=n,this.columns=i,this.total=n*i,this.texCoordinates.length=0;for(var r=this.tileMargin,u=this.tileMargin,o=0;o<this.rows;o++){for(var l=0;l<this.columns;l++)this.texCoordinates.push({x:r,y:u}),r+=this.tileWidth+this.tileSpacing;r=this.tileMargin,u+=this.tileHeight+this.tileSpacing}return this}});h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return s===void 0&&(s=1e-4),Math.abs(e-c)<s};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(15),a=t(1068),n=new e({Extends:s,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.ScrollFactor,c.Size,c.TextureCrop,c.Tint,c.Transform,c.Visible,a],initialize:function(r,u,o,l,f){s.call(this,r,"Image"),this._crop=this.resetCropObject(),this.setTexture(l,f),this.setPosition(u,o),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.hasOwnProperty(c)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),c=function(s,a){var n=e(s);for(var i in a)n.hasOwnProperty(i)||(n[i]=a[i]);return n};h.exports=c},function(h,g,t){var e={};h.exports=e;var c=t(64),s=t(83),a=t(165),n=t(84),i=t(271),r=t(32);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(u){var o=u;o.bodyA&&!o.pointA&&(o.pointA={x:0,y:0}),o.bodyB&&!o.pointB&&(o.pointB={x:0,y:0});var l=o.bodyA?s.add(o.bodyA.position,o.pointA):o.pointA,f=o.bodyB?s.add(o.bodyB.position,o.pointB):o.pointB,d=s.magnitude(s.sub(l,f));o.length=typeof o.length<"u"?o.length:d,o.id=o.id||r.nextId(),o.label=o.label||"Constraint",o.type="constraint",o.stiffness=o.stiffness||(o.length>0?1:.7),o.damping=o.damping||0,o.angularStiffness=o.angularStiffness||0,o.angleA=o.bodyA?o.bodyA.angle:o.angleA,o.angleB=o.bodyB?o.bodyB.angle:o.angleB,o.plugin={};var v={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return o.length===0&&o.stiffness>.1?(v.type="pin",v.anchors=!1):o.stiffness<.9&&(v.type="spring"),o.render=r.extend(v,o.render),o},e.preSolveAll=function(u){for(var o=0;o<u.length;o+=1){var l=u[o],f=l.constraintImpulse;l.isStatic||f.x===0&&f.y===0&&f.angle===0||(l.position.x+=f.x,l.position.y+=f.y,l.angle+=f.angle)}},e.solveAll=function(u,o){for(var l=0;l<u.length;l+=1){var f=u[l],d=!f.bodyA||f.bodyA&&f.bodyA.isStatic,v=!f.bodyB||f.bodyB&&f.bodyB.isStatic;(d||v)&&e.solve(u[l],o)}for(l=0;l<u.length;l+=1)f=u[l],d=!f.bodyA||f.bodyA&&f.bodyA.isStatic,v=!f.bodyB||f.bodyB&&f.bodyB.isStatic,!d&&!v&&e.solve(u[l],o)},e.solve=function(u,o){var l=u.bodyA,f=u.bodyB,d=u.pointA,v=u.pointB;if(!(!l&&!f)){l&&!l.isStatic&&(s.rotate(d,l.angle-u.angleA,d),u.angleA=l.angle),f&&!f.isStatic&&(s.rotate(v,f.angle-u.angleB,v),u.angleB=f.angle);var p=d,m=v;if(l&&(p=s.add(l.position,d)),f&&(m=s.add(f.position,v)),!(!p||!m)){var x=s.sub(p,m),T=s.magnitude(x);T<e._minLength&&(T=e._minLength);var S=(T-u.length)/T,E=u.stiffness<1?u.stiffness*o:u.stiffness,C=s.mult(x,S*E),A=(l?l.inverseMass:0)+(f?f.inverseMass:0),P=(l?l.inverseInertia:0)+(f?f.inverseInertia:0),M=A+P,O,F,I,N,G;if(u.damping){var Y=s.create();I=s.div(x,T),G=s.sub(f&&s.sub(f.position,f.positionPrev)||Y,l&&s.sub(l.position,l.positionPrev)||Y),N=s.dot(I,G)}l&&!l.isStatic&&(F=l.inverseMass/A,l.constraintImpulse.x-=C.x*F,l.constraintImpulse.y-=C.y*F,l.position.x-=C.x*F,l.position.y-=C.y*F,u.damping&&(l.positionPrev.x-=u.damping*I.x*N*F,l.positionPrev.y-=u.damping*I.y*N*F),O=s.cross(d,C)/M*e._torqueDampen*l.inverseInertia*(1-u.angularStiffness),l.constraintImpulse.angle-=O,l.angle-=O),f&&!f.isStatic&&(F=f.inverseMass/A,f.constraintImpulse.x+=C.x*F,f.constraintImpulse.y+=C.y*F,f.position.x+=C.x*F,f.position.y+=C.y*F,u.damping&&(f.positionPrev.x+=u.damping*I.x*N*F,f.positionPrev.y+=u.damping*I.y*N*F),O=s.cross(v,C)/M*e._torqueDampen*f.inverseInertia*(1-u.angularStiffness),f.constraintImpulse.angle+=O,f.angle+=O)}}},e.postSolveAll=function(u){for(var o=0;o<u.length;o++){var l=u[o],f=l.constraintImpulse;if(!(l.isStatic||f.x===0&&f.y===0&&f.angle===0)){a.set(l,!1);for(var d=0;d<l.parts.length;d++){var v=l.parts[d];c.translate(v.vertices,f),d>0&&(v.position.x+=f.x,v.position.y+=f.y),f.angle!==0&&(c.rotate(v.vertices,f.angle,l.position),i.rotate(v.axes,f.angle),d>0&&s.rotateAbout(v.position,f.angle,l.position,v.position)),n.update(v.bounds,v.vertices,l.velocity)}f.angle*=e._warming,f.x*=e._warming,f.y*=e._warming}}},e.pointAWorld=function(u){return{x:(u.bodyA?u.bodyA.position.x:0)+u.pointA.x,y:(u.bodyA?u.bodyA.position.y:0)+u.pointA.y}},e.pointBWorld=function(u){return{x:(u.bodyB?u.bodyB.position.x:0)+u.pointB.x,y:(u.bodyB?u.bodyB.position.y:0)+u.pointB.y}}})()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),c=t(65),s=t(66),a=t(0),n=t(11),i=t(15),r=t(10),u=t(57),o=new a({Extends:i,Mixins:[n.Depth,n.GetBounds,n.Origin,n.Transform,n.ScrollFactor,n.Visible],initialize:function(f,d,v,p,m){p===void 0&&(p=1),m===void 0&&(m=p),i.call(this,f,"Zone"),this.setPosition(d,v),this.width=p,this.height=m,this.blendMode=e.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,f,d){d===void 0&&(d=!0),this.width=l,this.height=f,this.updateDisplayOrigin();var v=this.input;return d&&v&&!v.customHitArea&&(v.hitArea.width=l,v.hitArea.height=f),this},setDisplaySize:function(l,f){return this.displayWidth=l,this.displayHeight=f,this},setCircleDropZone:function(l){return this.setDropZone(new c(0,0,l),s)},setRectangleDropZone:function(l,f){return this.setDropZone(new r(0,0,l,f),u)},setDropZone:function(l,f){return l===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(l,f,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(l,f,d){d.addToRenderList(f)},renderWebGL:function(l,f,d){d.addToRenderList(f)}});h.exports=o},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 2*(e.width+e.height)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var c=e.length-1;c>0;c--){var s=Math.floor(Math.random()*(c+1)),a=e[c];e[c]=e[s],e[s]=a}return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD_ANIMATION:t(724),ANIMATION_COMPLETE:t(725),ANIMATION_COMPLETE_KEY:t(726),ANIMATION_REPEAT:t(727),ANIMATION_RESTART:t(728),ANIMATION_START:t(729),ANIMATION_STOP:t(730),ANIMATION_UPDATE:t(731),PAUSE_ALL:t(732),REMOVE_ANIMATION:t(733),RESUME_ALL:t(734)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(36),a=t(9),n=t(37),i=t(10),r=t(25),u=t(187),o=t(3),l=new e({Extends:a,Mixins:[c.Alpha,c.Visible],initialize:function(d,v,p,m){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),m===void 0&&(m=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new i,this.dirty=!0,this._x=d,this._y=v,this._width=p,this._height=m,this._bounds=new i,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new r,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new o(p/2,m/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(f){this.renderList.push(f)},setOrigin:function(f,d){return f===void 0&&(f=.5),d===void 0&&(d=f),this.originX=f,this.originY=d,this},getScroll:function(f,d,v){v===void 0&&(v=new o);var p=this.width*.5,m=this.height*.5;return v.x=f-p,v.y=d-m,this.useBounds&&(v.x=this.clampX(v.x),v.y=this.clampY(v.y)),v},centerOnX:function(f){var d=this.width*.5;return this.midPoint.x=f,this.scrollX=f-d,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(f){var d=this.height*.5;return this.midPoint.y=f,this.scrollY=f-d,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(f,d){return this.centerOnX(f),this.centerOnY(d),this},centerToBounds:function(){if(this.useBounds){var f=this._bounds,d=this.width*.5,v=this.height*.5;this.midPoint.set(f.centerX,f.centerY),this.scrollX=f.centerX-d,this.scrollY=f.centerY-v}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(f){if(this.disableCull)return f;var d=this.matrix.matrix,v=d[0],p=d[1],m=d[2],x=d[3],T=v*x-p*m;if(!T)return f;var S=d[4],E=d[5],C=this.scrollX,A=this.scrollY,P=this.width,M=this.height,O=this.y,F=O+M,I=this.x,N=I+P,G=this.culledObjects,Y=f.length;T=1/T,G.length=0;for(var z=0;z<Y;++z){var W=f[z];if(!W.hasOwnProperty("width")||W.parentContainer){G.push(W);continue}var D=W.width,L=W.height,B=W.x-C*W.scrollFactorX-D*W.originX,w=W.y-A*W.scrollFactorY-L*W.originY,V=B*v+w*m+S,U=B*p+w*x+E,X=(B+D)*v+(w+L)*m+S,H=(B+D)*p+(w+L)*x+E;X>I&&V<N&&H>O&&U<F&&G.push(W)}return G},getWorldPoint:function(f,d,v){v===void 0&&(v=new o);var p=this.matrix.matrix,m=p[0],x=p[1],T=p[2],S=p[3],E=p[4],C=p[5],A=m*S-x*T;if(!A)return v.x=f,v.y=d,v;A=1/A;var P=S*A,M=-x*A,O=-T*A,F=m*A,I=(T*C-S*E)*A,N=(x*E-m*C)*A,G=Math.cos(this.rotation),Y=Math.sin(this.rotation),z=this.zoomX,W=this.zoomY,D=this.scrollX,L=this.scrollY,B=f+(D*G-L*Y)*z,w=d+(D*Y+L*G)*W;return v.x=B*P+w*O+I,v.y=B*M+w*F+N,v},ignore:function(f){var d=this.id;Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++){var p=f[v];Array.isArray(p)?this.ignore(p):p.isParent?this.ignore(p.getChildren()):p.cameraFilter|=d}return this},preRender:function(){this.renderList.length=0;var f=this.width,d=this.height,v=f*.5,p=d*.5,m=this.zoomX,x=this.zoomY,T=this.matrix,S=f*this.originX,E=d*this.originY,C=this.scrollX,A=this.scrollY;this.useBounds&&(C=this.clampX(C),A=this.clampY(A)),this.roundPixels&&(S=Math.round(S),E=Math.round(E)),this.scrollX=C,this.scrollY=A;var P=C+v,M=A+p;this.midPoint.set(P,M);var O=f/m,F=d/x;this.worldView.setTo(P-O/2,M-F/2,O,F),T.applyITRS(this.x+S,this.y+E,this.rotation,m,x),T.translate(-S,-E)},clampX:function(f){var d=this._bounds,v=this.displayWidth,p=d.x+(v-this.width)/2,m=Math.max(p,p+d.width-v);return f<p?f=p:f>m&&(f=m),f},clampY:function(f){var d=this._bounds,v=this.displayHeight,p=d.y+(v-this.height)/2,m=Math.max(p,p+d.height-v);return f<p?f=p:f>m&&(f=m),f},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(f){return f===void 0&&(f=0),this.rotation=s(f),this},setBackgroundColor:function(f){return f===void 0&&(f="rgba(0,0,0,0)"),this.backgroundColor=u(f),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(f,d,v,p,m){return m===void 0&&(m=!1),this._bounds.setTo(f,d,v,p),this.dirty=!0,this.useBounds=!0,m?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(f){f===void 0&&(f=new i);var d=this._bounds;return f.setTo(d.x,d.y,d.width,d.height),f},setName:function(f){return f===void 0&&(f=""),this.name=f,this},setPosition:function(f,d){return d===void 0&&(d=f),this.x=f,this.y=d,this},setRotation:function(f){return f===void 0&&(f=0),this.rotation=f,this},setRoundPixels:function(f){return this.roundPixels=f,this},setScene:function(f){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=f;var d=f.sys;return this.sceneManager=d.game.scene,this.scaleManager=d.scale,this.cameraManager=d.cameras,this.updateSystem(),this},setScroll:function(f,d){return d===void 0&&(d=f),this.scrollX=f,this.scrollY=d,this},setSize:function(f,d){return d===void 0&&(d=f),this.width=f,this.height=d,this},setViewport:function(f,d,v,p){return this.x=f,this.y=d,this.width=v,this.height=p,this},setZoom:function(f,d){return f===void 0&&(f=1),d===void 0&&(d=f),f===0&&(f=.001),d===0&&(d=.001),this.zoomX=f,this.zoomY=d,this},setMask:function(f,d){return d===void 0&&(d=!0),this.mask=f,this._maskCamera=d?this.cameraManager.default:this,this},clearMask:function(f){return f===void 0&&(f=!1),f&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var f={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(f.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),f},update:function(){},updateSystem:function(){if(this.scaleManager){var f=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,d=this.sceneManager;f&&!this._customViewport?d.customViewports++:!f&&this._customViewport&&d.customViewports--,this.dirty=!0,this._customViewport=f}},destroy:function(){this.emit(n.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(f){this._x=f,this.updateSystem()}},y:{get:function(){return this._y},set:function(f){this._y=f,this.updateSystem()}},width:{get:function(){return this._width},set:function(f){this._width=f,this.updateSystem()}},height:{get:function(){return this._height},set:function(f){this._height=f,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(f){this._scrollX=f,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(f){this._scrollY=f,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(f){this._zoomX=f,this._zoomY=f,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(f){this._zoomX=f,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(f){this._zoomY=f,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(f){this._rotation=f,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});h.exports=l},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(334),c=t(335),s=t(336),a=t(337),n=t(338),i=t(339),r=t(340),u=t(341),o=t(342),l=t(343),f=t(344),d=t(345);h.exports={Power0:r,Power1:u.Out,Power2:a.Out,Power3:o.Out,Power4:l.Out,Linear:r,Quad:u.Out,Cubic:a.Out,Quart:o.Out,Quint:l.Out,Sine:f.Out,Expo:i.Out,Circ:s.Out,Elastic:n.Out,Back:e.Out,Bounce:c.Out,Stepped:d,"Quad.easeIn":u.In,"Cubic.easeIn":a.In,"Quart.easeIn":o.In,"Quint.easeIn":l.In,"Sine.easeIn":f.In,"Expo.easeIn":i.In,"Circ.easeIn":s.In,"Elastic.easeIn":n.In,"Back.easeIn":e.In,"Bounce.easeIn":c.In,"Quad.easeOut":u.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":o.Out,"Quint.easeOut":l.Out,"Sine.easeOut":f.Out,"Expo.easeOut":i.Out,"Circ.easeOut":s.Out,"Elastic.easeOut":n.Out,"Back.easeOut":e.Out,"Bounce.easeOut":c.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":o.InOut,"Quint.easeInOut":l.InOut,"Sine.easeInOut":f.InOut,"Expo.easeInOut":i.InOut,"Circ.easeInOut":s.InOut,"Elastic.easeInOut":n.InOut,"Back.easeInOut":e.InOut,"Bounce.easeInOut":c.InOut}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return(c-e)*s+e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),c={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function s(){var a=navigator.userAgent;return/Edge\/\d+/.test(a)?c.edge=!0:/Chrome\/(\d+)/.test(a)&&!e.windowsPhone?(c.chrome=!0,c.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(a)?(c.firefox=!0,c.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(a)&&e.iOS?c.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)?(c.ie=!0,c.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(a)?c.opera=!0:/Safari/.test(a)&&!e.windowsPhone?c.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a)&&(c.ie=!0,c.trident=!0,c.tridentVersion=parseInt(RegExp.$1,10),c.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(a)&&(c.silk=!0),c}h.exports=s()},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return Math.random()*(c-e)+e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e>0&&(e&e-1)===0&&c>0&&(c&c-1)===0};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){return s===void 0&&(s=0),c===0?e:(e-=s,e=c*Math.ceil(e/c),a?(s+e)/c:s+e)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n,i,r){this.x=0,this.y=0,this.z=0,this.w=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=n||0,this.z=i||0,this.w=r||0)},clone:function(){return new c(this.x,this.y,this.z,this.w)},copy:function(s){return this.x=s.x,this.y=s.y,this.z=s.z||0,this.w=s.w||0,this},equals:function(s){return this.x===s.x&&this.y===s.y&&this.z===s.z&&this.w===s.w},set:function(s,a,n,i){return typeof s=="object"?(this.x=s.x||0,this.y=s.y||0,this.z=s.z||0,this.w=s.w||0):(this.x=s||0,this.y=a||0,this.z=n||0,this.w=i||0),this},add:function(s){return this.x+=s.x,this.y+=s.y,this.z+=s.z||0,this.w+=s.w||0,this},subtract:function(s){return this.x-=s.x,this.y-=s.y,this.z-=s.z||0,this.w-=s.w||0,this},scale:function(s){return this.x*=s,this.y*=s,this.z*=s,this.w*=s,this},length:function(){var s=this.x,a=this.y,n=this.z,i=this.w;return Math.sqrt(s*s+a*a+n*n+i*i)},lengthSq:function(){var s=this.x,a=this.y,n=this.z,i=this.w;return s*s+a*a+n*n+i*i},normalize:function(){var s=this.x,a=this.y,n=this.z,i=this.w,r=s*s+a*a+n*n+i*i;return r>0&&(r=1/Math.sqrt(r),this.x=s*r,this.y=a*r,this.z=n*r,this.w=i*r),this},dot:function(s){return this.x*s.x+this.y*s.y+this.z*s.z+this.w*s.w},lerp:function(s,a){a===void 0&&(a=0);var n=this.x,i=this.y,r=this.z,u=this.w;return this.x=n+a*(s.x-n),this.y=i+a*(s.y-i),this.z=r+a*(s.z-r),this.w=u+a*(s.w-u),this},multiply:function(s){return this.x*=s.x,this.y*=s.y,this.z*=s.z||1,this.w*=s.w||1,this},divide:function(s){return this.x/=s.x,this.y/=s.y,this.z/=s.z||1,this.w/=s.w||1,this},distance:function(s){var a=s.x-this.x,n=s.y-this.y,i=s.z-this.z||0,r=s.w-this.w||0;return Math.sqrt(a*a+n*n+i*i+r*r)},distanceSq:function(s){var a=s.x-this.x,n=s.y-this.y,i=s.z-this.z||0,r=s.w-this.w||0;return a*a+n*n+i*i+r*r},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(s){var a=this.x,n=this.y,i=this.z,r=this.w,u=s.val;return this.x=u[0]*a+u[4]*n+u[8]*i+u[12]*r,this.y=u[1]*a+u[5]*n+u[9]*i+u[13]*r,this.z=u[2]*a+u[6]*n+u[10]*i+u[14]*r,this.w=u[3]*a+u[7]*n+u[11]*i+u[15]*r,this},transformQuat:function(s){var a=this.x,n=this.y,i=this.z,r=s.x,u=s.y,o=s.z,l=s.w,f=l*a+u*i-o*n,d=l*n+o*a-r*i,v=l*i+r*n-u*a,p=-r*a-u*n-o*i;return this.x=f*l+p*-r+d*-o-v*-u,this.y=d*l+p*-u+v*-r-f*-o,this.z=v*l+p*-o+f*-u-d*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});c.prototype.sub=c.prototype.subtract,c.prototype.mul=c.prototype.multiply,c.prototype.div=c.prototype.divide,c.prototype.dist=c.prototype.distance,c.prototype.distSq=c.prototype.distanceSq,c.prototype.len=c.prototype.length,c.prototype.lenSq=c.prototype.lengthSq,h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(91),s=new e({initialize:function(n,i,r,u,o,l,f){u===void 0&&(u=1),o===void 0&&(o=0),l===void 0&&(l=!0),f===void 0&&(f=!1),this.renderer=n,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=u,this.minFilter=o,this.autoClear=l,this.autoResize=!1,this.resize(i,r),f&&this.setAutoResize(!0)},setAutoResize:function(a){return a&&!this.autoResize?(this.renderer.on(c.RESIZE,this.resize,this),this.autoResize=!0):!a&&this.autoResize&&(this.renderer.off(c.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(a,n){var i=a*this.scale,r=n*this.scale;if(i!==this.width||r!==this.height){var u=this.renderer;u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),a*=this.scale,n*=this.scale,a=Math.round(a),n=Math.round(n),a<=0&&(a=1),n<=0&&(n=1),this.texture=u.createTextureFromSource(null,a,n,this.minFilter),this.framebuffer=u.createFramebuffer(a,n,this.texture,!1),this.width=a,this.height=n}return this},bind:function(a,n,i){if(a===void 0&&(a=!1),a&&this.renderer.flush(),n&&i&&this.resize(n,i),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),a&&this.adjustViewport(),this.autoClear){var r=this.renderer.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)}},adjustViewport:function(){var a=this.renderer.gl;a.viewport(0,0,this.width,this.height),a.disable(a.SCISSOR_TEST)},clear:function(){var a=this.renderer,n=a.gl;a.pushFramebuffer(this.framebuffer),n.disable(n.SCISSOR_TEST),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),a.popFramebuffer(),a.resetScissor()},unbind:function(a){a===void 0&&(a=!1);var n=this.renderer;return a&&n.flush(),n.popFramebuffer()},destroy:function(){var a=this.renderer;a.deleteFramebuffer(this.framebuffer),a.deleteTexture(this.texture),a.off(c.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s;if(c)typeof c=="string"?s=document.getElementById(c):typeof c=="object"&&c.nodeType===1&&(s=c);else if(e.parentElement||c===null)return e;return s||(s=document.body),s.appendChild(e),e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(77),s=t(9),a=t(70),n=t(22),i=t(1),r=t(207),u=t(428),o=new e({Extends:s,initialize:function(f){s.call(this),this.game=f,this.jsonCache=f.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,f.events.on(n.BLUR,this.onGameBlur,this),f.events.on(n.FOCUS,this.onGameFocus,this),f.events.on(n.PRE_STEP,this.update,this),f.events.once(n.DESTROY,this.destroy,this)},add:i,addAudioSprite:function(l,f){f===void 0&&(f={});var d=this.add(l,f);d.spritemap=this.jsonCache.get(l).spritemap;for(var v in d.spritemap)if(d.spritemap.hasOwnProperty(v)){var p=c(f),m=d.spritemap[v];p.loop=m.hasOwnProperty("loop")?m.loop:!1,d.addMarker({name:v,start:m.start,duration:m.end-m.start,config:p})}return d},get:function(l){return u(this.sounds,"key",l)},getAll:function(l){return r(this.sounds,"key",l)},play:function(l,f){var d=this.add(l);return d.once(a.COMPLETE,d.destroy,d),f?f.name?(d.addMarker(f),d.play(f.name)):d.play(f):d.play()},playAudioSprite:function(l,f,d){var v=this.addAudioSprite(l);return v.once(a.COMPLETE,v.destroy,v),v.play(f,d)},remove:function(l){var f=this.sounds.indexOf(l);return f!==-1?(l.destroy(),this.sounds.splice(f,1),!0):!1},removeAll:function(){this.sounds.forEach(function(l){l.destroy()}),this.sounds.length=0},removeByKey:function(l){for(var f=0,d=this.sounds.length-1;d>=0;d--){var v=this.sounds[d];v.key===l&&(v.destroy(),this.sounds.splice(d,1),f++)}return f},pauseAll:function(){this.forEachActiveSound(function(l){l.pause()}),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(l){l.resume()}),this.emit(a.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(l){l.stop()}),this.emit(a.STOP_ALL,this)},stopByKey:function(l){var f=0;return this.getAll(l).forEach(function(d){d.stop()&&f++}),f},unlock:i,onBlur:i,onFocus:i,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(l,f){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var d=this.sounds.length-1;d>=0;d--)this.sounds[d].pendingRemove&&this.sounds.splice(d,1);this.sounds.forEach(function(v){v.update(l,f)})},destroy:function(){this.game.events.off(n.BLUR,this.onGameBlur,this),this.game.events.off(n.FOCUS,this.onGameFocus,this),this.game.events.off(n.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(l,f){var d=this;this.sounds.forEach(function(v,p){v&&!v.pendingRemove&&l.call(f||d,v,p,d.sounds)})},setRate:function(l){return this.rate=l,this},rate:{get:function(){return this._rate},set:function(l){this._rate=l,this.forEachActiveSound(function(f){f.calculateRate()}),this.emit(a.GLOBAL_RATE,this,l)}},setDetune:function(l){return this.detune=l,this},detune:{get:function(){return this._detune},set:function(l){this._detune=l,this.forEachActiveSound(function(f){f.calculateRate()}),this.emit(a.GLOBAL_DETUNE,this,l)}}});h.exports=o},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(9),s=t(70),a=t(17),n=t(1),i=new e({Extends:c,initialize:function(u,o,l){c.call(this),this.manager=u,this.key=o,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=a(this.config,l),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(r){return!r||!r.name||typeof r.name!="string"?!1:this.markers[r.name]?(console.error("addMarker "+r.name+" already exists in Sound"),!1):(r=a(!0,{name:"",start:0,duration:this.totalDuration-(r.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},r),this.markers[r.name]=r,!0)},updateMarker:function(r){return!r||!r.name||typeof r.name!="string"?!1:this.markers[r.name]?(this.markers[r.name]=a(!0,this.markers[r.name],r),!0):(console.warn("Audio Marker: "+r.name+" missing in Sound: "+this.key),!1)},removeMarker:function(r){var u=this.markers[r];return u?(this.markers[r]=null,u):null},play:function(r,u){if(r===void 0&&(r=""),typeof r=="object"&&(u=r,r=""),typeof r!="string")return!1;if(!r)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[r])return console.warn("Marker: "+r+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[r],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=a(this.currentConfig,u),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:n,calculateRate:function(){var r=1.0005777895065548,u=this.currentConfig.detune+this.manager.detune,o=Math.pow(r,u);this.totalRate=this.currentConfig.rate*this.manager.rate*o},destroy:function(){this.pendingRemove||(this.emit(s.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(209),c=t(435),s=function(a,n){if(n===void 0&&(n=90),!e(a))return null;if(typeof n!="string"&&(n=(n%360+360)%360),n===90||n===-270||n==="rotateLeft")a=c(a),a.reverse();else if(n===-90||n===270||n==="rotateRight")a.reverse(),a=c(a);else if(Math.abs(n)===180||n==="rotate180"){for(var i=0;i<a.length;i++)a[i].reverse();a.reverse()}return a};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(18),s=t(11),a=t(15),n=t(1043),i=t(1044),r=t(212),u=t(10),o=t(1045),l=new e({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Texture,s.Tint,s.Transform,s.Visible,o],initialize:function(d,v,p,m,x,T,S){x===void 0&&(x=""),S===void 0&&(S=0),a.call(this,d,"BitmapText"),this.font=m;var E=this.scene.sys.cache.bitmapFont.get(m);E||console.warn("Invalid BitmapText key: "+m),this.fontData=E.data,this._text="",this._fontSize=T||this.fontData.size,this._letterSpacing=0,this._align=S,this._bounds=n(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(v,p),this.setOrigin(0,0),this.initPipeline(),this.setText(x)},setLeftAlign:function(){return this._align=l.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=l.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=l.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(f){return this._fontSize=f,this._dirty=!0,this},setLetterSpacing:function(f){return f===void 0&&(f=0),this._letterSpacing=f,this._dirty=!0,this},setText:function(f){return!f&&f!==0&&(f=""),Array.isArray(f)&&(f=f.join(`
`)),f!==this.text&&(this._text=f.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(f,d,v,p){return f===void 0&&(f=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=.5),this.dropShadowX=f,this.dropShadowY=d,this.dropShadowColor=v,this.dropShadowAlpha=p,this},setCharacterTint:function(f,d,v,p,m,x,T){f===void 0&&(f=0),d===void 0&&(d=1),v===void 0&&(v=!1),p===void 0&&(p=-1),m===void 0&&(m=p,x=p,T=p);var S=this.text.length;d===-1&&(d=S),f<0&&(f=S+f),f=c(f,0,S-1);for(var E=c(f+d,f,S),C=this.charColors,A=f;A<E;A++){var P=C[A];if(p===-1)C[A]=null;else{var M=v?1:0;P?(P.tintEffect=M,P.tintTL=p,P.tintTR=m,P.tintBL=x,P.tintBR=T):C[A]={tintEffect:M,tintTL:p,tintTR:m,tintBL:x,tintBR:T}}}return this},setWordTint:function(f,d,v,p,m,x,T){d===void 0&&(d=1);for(var S=this.getTextBounds(),E=S.words,C=typeof f=="number",A=0,P=0;P<E.length;P++){var M=E[P];if((C&&P===f||!C&&M.word===f)&&(this.setCharacterTint(M.i,M.word.length,v,p,m,x,T),A++,A===d))return this}return this},getTextBounds:function(f){var d=this._bounds;return(this._dirty||f||this.scaleX!==d.scaleX||this.scaleY!==d.scaleY)&&(n(this,f,!0,d),this._dirty=!1),d},getCharacterAt:function(f,d,v){for(var p=this.getLocalPoint(f,d,null,v),m=this.getTextBounds(),x=m.characters,T=new u,S=0;S<x.length;S++){var E=x[S];if(T.setTo(E.x,E.t,E.r-E.x,E.b),T.contains(p.x,p.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(f,d,v){if(d===void 0&&(d=this._fontSize),v===void 0&&(v=this._align),f!==this.font){var p=this.scene.sys.cache.bitmapFont.get(f);p&&(this.font=f,this.fontData=p.data,this._fontSize=d,this._align=v,this.fromAtlas=p.fromAtlas===!0,this.setTexture(p.texture,p.frame),n(this,!1,!0,this._bounds))}return this},setMaxWidth:function(f,d){return this._maxWidth=f,this._dirty=!0,d!==void 0&&(this.wordWrapCharCode=d),this},align:{set:function(f){this._align=f,this._dirty=!0},get:function(){return this._align}},text:{set:function(f){this.setText(f)},get:function(){return this._text}},fontSize:{set:function(f){this._fontSize=f,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(f){this._letterSpacing=f,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(f){this._maxWidth=f,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var f=s.ToJSON(this),d={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return f.data=d,f},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});l.ALIGN_LEFT=0,l.ALIGN_CENTER=1,l.ALIGN_RIGHT=2,l.ParseFromAtlas=i,l.ParseXMLBitmapFont=r,h.exports=l},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a){if(this.entries=[],Array.isArray(a))for(var n=0;n<a.length;n++)this.set(a[n])},set:function(s){return this.entries.indexOf(s)===-1&&this.entries.push(s),this},get:function(s,a){for(var n=0;n<this.entries.length;n++){var i=this.entries[n];if(i[s]===a)return i}},getArray:function(){return this.entries.slice(0)},delete:function(s){var a=this.entries.indexOf(s);return a>-1&&this.entries.splice(a,1),this},dump:function(){console.group("Set");for(var s=0;s<this.entries.length;s++){var a=this.entries[s];console.log(a)}console.groupEnd()},each:function(s,a){var n,i=this.entries.slice(),r=i.length;if(a)for(n=0;n<r&&s.call(a,i[n],n)!==!1;n++);else for(n=0;n<r&&s(i[n],n)!==!1;n++);return this},iterate:function(s,a){var n,i=this.entries.length;if(a)for(n=0;n<i&&s.call(a,this.entries[n],n)!==!1;n++);else for(n=0;n<i&&s(this.entries[n],n)!==!1;n++);return this},iterateLocal:function(s){var a,n=[];for(a=1;a<arguments.length;a++)n.push(arguments[a]);var i=this.entries.length;for(a=0;a<i;a++){var r=this.entries[a];r[s].apply(r,n)}return this},clear:function(){return this.entries.length=0,this},contains:function(s){return this.entries.indexOf(s)>-1},union:function(s){var a=new c;return s.entries.forEach(function(n){a.set(n)}),this.entries.forEach(function(n){a.set(n)}),a},intersect:function(s){var a=new c;return this.entries.forEach(function(n){s.contains(n)&&a.set(n)}),a},difference:function(s){var a=new c;return this.entries.forEach(function(n){s.contains(n)||a.set(n)}),a},size:{get:function(){return this.entries.length},set:function(s){return s<this.entries.length?this.entries.length=s:this.entries.length}}});h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(15),a=t(189),n=t(92),i=t(1182),r=new e({Extends:s,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.GetBounds,c.Mask,c.Pipeline,c.ScrollFactor,c.Transform,c.Visible,i],initialize:function(o,l,f,d,v,p,m){d===void 0&&(d=16777215),v===void 0&&(v=128),p===void 0&&(p=1),m===void 0&&(m=.1),s.call(this,o,"PointLight"),this.initPipeline(n.POINTLIGHT_PIPELINE),this.setPosition(l,f),this.color=a(d),this.intensity=p,this.attenuation=m,this.width=v*2,this.height=v*2,this._radius=v},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this.width=u*2,this.height=u*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});h.exports=r},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=c.width/2,a=c.height/2,n=Math.abs(e.x-c.x-s),i=Math.abs(e.y-c.y-a),r=s+e.radius,u=a+e.radius;if(n>r||i>u)return!1;if(n<=s||i<=a)return!0;var o=n-s,l=i-a,f=o*o,d=l*l,v=e.radius*e.radius;return f+d<=v};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.width<=0||e.height<=0||c.width<=0||c.height<=0?!1:!(e.right<c.x||e.bottom<c.y||e.x>c.right||e.y>c.bottom)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),c={},s={};s.register=function(a,n,i,r,u){c[a]={plugin:n,mapping:i,settingsKey:r,configKey:u}},s.getPlugin=function(a){return c[a]},s.install=function(a){var n=a.scene.sys,i=n.settings.input,r=n.game.config;for(var u in c){var o=c[u].plugin,l=c[u].mapping,f=c[u].settingsKey,d=c[u].configKey;e(i,f,r[d])&&(a[l]=new o(a))}},s.remove=function(a){c.hasOwnProperty(a)&&delete c[a]},h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ANY_KEY_DOWN:t(1323),ANY_KEY_UP:t(1324),COMBO_MATCH:t(1325),DOWN:t(1326),KEY_DOWN:t(1327),KEY_UP:t(1328),UP:t(1329)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.url?e.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e.url:c+e.url:!1};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n,i){return e===void 0&&(e=""),c===void 0&&(c=!0),s===void 0&&(s=""),a===void 0&&(a=""),n===void 0&&(n=0),i===void 0&&(i=!1),{responseType:e,async:c,user:s,password:a,timeout:n,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:i}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(243),s=t(73),a=new e({Extends:s,Mixins:[c.Acceleration,c.Angular,c.Bounce,c.Debug,c.Drag,c.Enable,c.Friction,c.Gravity,c.Immovable,c.Mass,c.Pushable,c.Size,c.Velocity],initialize:function(i,r,u,o,l){s.call(this,i,r,u,o,l),this.body=null}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(119),c=function(s,a,n,i){if(n===void 0&&(n=!1),e(s,a,i)){var r=i.data[a][s]||null;return r?r.index===-1?n?r:null:r:null}else return null};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=e.data,i=e.width,r=e.height,u=e.tilemapLayer,o=Math.max(0,c.left),l=Math.min(i,c.right),f=Math.max(0,c.top),d=Math.min(r,c.bottom),v,p,m;if(s===0)for(p=f;p<d;p++)for(v=o;n[p]&&v<l;v++)m=n[p][v],!(!m||m.index===-1||!m.visible||m.alpha===0)&&a.push(m);else if(s===1)for(p=f;p<d;p++)for(v=l;n[p]&&v>=o;v--)m=n[p][v],!(!m||m.index===-1||!m.visible||m.alpha===0)&&a.push(m);else if(s===2)for(p=d;p>=f;p--)for(v=o;n[p]&&v<l;v++)m=n[p][v],!(!m||m.index===-1||!m.visible||m.alpha===0)&&a.push(m);else if(s===3)for(p=d;p>=f;p--)for(v=l;n[p]&&v>=o;v--)m=n[p][v],!(!m||m.index===-1||!m.visible||m.alpha===0)&&a.push(m);return u.tilesDrawn=a.length,u.tilesTotal=i*r,a};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=s.collideIndexes.indexOf(e);c&&a===-1?s.collideIndexes.push(e):!c&&a!==-1&&s.collideIndexes.splice(a,1)};h.exports=t},function(h,g,t){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),c=function(s,a,n){if(!a)return{i:0,layers:s.layers,name:"",opacity:1,visible:!0,x:0,y:0};var i=a.x+e(a,"startx",0)*s.tilewidth+e(a,"offsetx",0),r=a.y+e(a,"starty",0)*s.tileheight+e(a,"offsety",0);return{i:0,layers:a.layers,name:n.name+a.name+"/",opacity:n.opacity*a.opacity,visible:n.visible&&a.visible,x:n.x+i,y:n.y+r}};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a;if(e.hasOwnProperty(c)){var n=typeof e[c];n==="function"?a=function(i,r,u,o,l,f){return e[c](i,r,u,o,l,f)}:a=function(){return e[c]}}else typeof s=="function"?a=s:a=function(){return s};return a};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(265),c=t(13),s=t(99),a=t(80),n=t(162),i=t(583),r=t(263),u=t(6),o=t(264),l=t(266),f=t(268),d=function(v,p,m){m===void 0&&(m=e);for(var x=m.targets?m.targets:r(p),T=i(p),S=n(p,"delay",m.delay),E=n(p,"duration",m.duration),C=u(p,"easeParams",m.easeParams),A=a(u(p,"ease",m.ease),C),P=n(p,"hold",m.hold),M=n(p,"repeat",m.repeat),O=n(p,"repeatDelay",m.repeatDelay),F=s(p,"yoyo",m.yoyo),I=s(p,"flipX",m.flipX),N=s(p,"flipY",m.flipY),G=[],Y=0;Y<T.length;Y++)for(var z=T[Y].key,W=T[Y].value,D=0;D<x.length;D++){var L=o(z,W),B=f(x[D],D,z,L.getEnd,L.getStart,L.getActive,a(u(W,"ease",A),u(W,"easeParams",C)),n(W,"delay",S),n(W,"duration",E),s(W,"yoyo",F),n(W,"hold",P),n(W,"repeat",M),n(W,"repeatDelay",O),s(W,"flipX",I),s(W,"flipY",N));G.push(B)}var w=new l(v,G,x);w.offset=c(p,"offset",null),w.completeDelay=c(p,"completeDelay",0),w.loop=Math.round(c(p,"loop",0)),w.loopDelay=Math.round(c(p,"loopDelay",0)),w.paused=s(p,"paused",!1),w.useFrames=s(p,"useFrames",!1);for(var V=u(p,"callbackScope",w),U=[w,null],X=l.TYPES,H=0;H<X.length;H++){var b=X[H],Z=u(p,b,!1);if(Z){var K=u(p,b+"Scope",V),Q=u(p,b+"Params",[]);w.setCallback(b,Z,U.concat(Q),K)}}return w};h.exports=d},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(102),s=t(2),a=t(132),n=t(185),i=new e({initialize:function(u){this.parent=u,this.animationManager=u.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(r){var u=this.parent;if(r===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,u;Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var l=r[o];this.nextAnim===null?this.nextAnim=l:this.nextAnimsQueue.push(l)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(r){this.isPlaying&&this.stop();var u=this.animationManager,o=typeof r=="string"?r:s(r,"key",null),l=this.exists(o)?this.get(o):u.get(o);if(!l)console.warn("Missing animation: "+o);else{this.currentAnim=l;var f=l.getTotalFrames(),d=s(r,"frameRate",l.frameRate),v=s(r,"duration",l.duration);l.calculateDuration(this,f,v,d),this.delay=s(r,"delay",l.delay),this.repeat=s(r,"repeat",l.repeat),this.repeatDelay=s(r,"repeatDelay",l.repeatDelay),this.yoyo=s(r,"yoyo",l.yoyo),this.showOnStart=s(r,"showOnStart",l.showOnStart),this.hideOnComplete=s(r,"hideOnComplete",l.hideOnComplete),this.skipMissedFrames=s(r,"skipMissedFrames",l.skipMissedFrames),this.timeScale=s(r,"timeScale",this.timeScale);var p=s(r,"startFrame",0);p>l.getTotalFrames()&&(p=0);var m=l.frames[p];p===0&&!this.forward&&(m=l.getLastFrame()),this.currentFrame=m}return this.parent},pause:function(r){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),r!==void 0&&this.setCurrentFrame(r),this.parent},resume:function(r){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),r!==void 0&&this.setCurrentFrame(r),this.parent},playAfterDelay:function(r,u){if(!this.isPlaying)this.delayCounter=u,this.play(r,!0);else{var o=this.nextAnim,l=this.nextAnimsQueue;o&&l.unshift(o),this.nextAnim=r,this._pendingStop=1,this._pendingStopValue=u}return this.parent},playAfterRepeat:function(r,u){if(u===void 0&&(u=1),!this.isPlaying)this.play(r);else{var o=this.nextAnim,l=this.nextAnimsQueue;o&&l.unshift(o),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this.nextAnim=r,this._pendingStop=2,this._pendingStopValue=u}return this.parent},play:function(r,u){u===void 0&&(u=!1);var o=this.currentAnim,l=this.parent,f=typeof r=="string"?r:r.key;if(u&&this.isPlaying&&o.key===f)return l;if(o&&this.isPlaying){var d=this.animationManager.getMix(o.key,r);if(d>0)return this.playAfterDelay(r,d)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(r)},playReverse:function(r,u){u===void 0&&(u=!1);var o=typeof r=="string"?r:r.key;return u&&this.isPlaying&&this.currentAnim.key===o?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(r))},startAnimation:function(r){this.load(r);var u=this.currentAnim,o=this.parent;return u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,u.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),o},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(r,u){var o=this.currentAnim,l=this.currentFrame,f=this.parent,d=l.textureFrame;f.emit(r,o,l,f,d),u&&f.emit(u+o.key,o,l,f,d)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var r=this.currentFrame;if(!r)return 0;var u=r.progress;return this.inReverse&&(u*=-1),u},setProgress:function(r){return this.forward||(r=1-r),this.setCurrentFrame(this.currentAnim.getFrameByProgress(r)),this.parent},setRepeat:function(r){return this.repeatCounter=r===-1?Number.MAX_VALUE:r,this.parent},globalRemove:function(r,u){u===void 0&&(u=this.currentAnim),this.isPlaying&&u.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(r,u){r===void 0&&(r=!1),u===void 0&&(u=!1);var o=this.currentAnim,l=this.parent;return o?(u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),o.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!r,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(o.frames[0]),this.parent):l},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var r=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(r)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var r=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(r)}return this.parent},stopAfterDelay:function(r){return this._pendingStop=1,this._pendingStopValue=r,this.parent},stopAfterRepeat:function(r){return r===void 0&&(r=1),this.repeatCounter!==-1&&r>this.repeatCounter&&(r=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=r,this.parent},stopOnFrame:function(r){return this._pendingStop=3,this._pendingStopValue=r,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(r,u){var o=this.currentAnim;if(!(!this.isPlaying||!o||o.paused)){if(this.accumulator+=u*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=u,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?o.nextFrame(this):o.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var l=0;do this.forward?o.nextFrame(this):o.previousFrame(this),l++;while(this.isPlaying&&this.accumulator>this.nextTick&&l<60)}}},setCurrentFrame:function(r){var u=this.parent;return this.currentFrame=r,u.texture=r.frame.texture,u.frame=r.frame,u.isCropped&&u.frame.updateCropUVs(u._crop,u.flipX,u.flipY),r.setAlpha&&(u.alpha=r.alpha),u.setSizeToFrame(),u._originComponent&&(r.frame.customPivot?u.setOrigin(r.frame.pivotX,r.frame.pivotY):u.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===r&&this.stop()),u},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(r){return this.anims?this.anims.get(r):null},exists:function(r){return this.anims?this.anims.has(r):!1},create:function(r){var u=r.key,o=!1;return u&&(o=this.get(u),o||(o=new n(this,u,r),this.anims||(this.anims=new c),this.anims.set(u,o))),o},generateFrameNames:function(r,u){return this.animationManager.generateFrameNames(r,u)},generateFrameNumbers:function(r,u){return this.animationManager.generateFrameNumbers(r,u)},remove:function(r){var u=this.get(r);return u&&(this.currentAnim===u&&this.stop(),this.anims.delete(r)),u},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});h.exports=i},function(h,g,t){var e={};h.exports=e;var c=t(166);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(s,a){for(var n=a*a*a,i=0;i<s.length;i++){var r=s[i],u=r.speed*r.speed+r.angularSpeed*r.angularSpeed;if(r.force.x!==0||r.force.y!==0){e.set(r,!1);continue}var o=Math.min(r.motion,u),l=Math.max(r.motion,u);r.motion=e._minBias*o+(1-e._minBias)*l,r.sleepThreshold>0&&r.motion<e._motionSleepThreshold*n?(r.sleepCounter+=1,r.sleepCounter>=r.sleepThreshold&&e.set(r,!0)):r.sleepCounter>0&&(r.sleepCounter-=1)}},e.afterCollisions=function(s,a){for(var n=a*a*a,i=0;i<s.length;i++){var r=s[i];if(r.isActive){var u=r.collision,o=u.bodyA.parent,l=u.bodyB.parent;if(!(o.isSleeping&&l.isSleeping||o.isStatic||l.isStatic)&&(o.isSleeping||l.isSleeping)){var f=o.isSleeping&&!o.isStatic?o:l,d=f===o?l:o;!f.isStatic&&d.motion>e._motionWakeThreshold*n&&e.set(f,!1)}}}},e.set=function(s,a){var n=s.isSleeping;a?(s.isSleeping=!0,s.sleepCounter=s.sleepThreshold,s.positionImpulse.x=0,s.positionImpulse.y=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.speed=0,s.angularSpeed=0,s.motion=0,n||c.trigger(s,"sleepStart")):(s.isSleeping=!1,s.sleepCounter=0,n&&c.trigger(s,"sleepEnd"))}})()},function(h,g,t){var e={};h.exports=e;var c=t(32);(function(){e.on=function(s,a,n){for(var i=a.split(" "),r,u=0;u<i.length;u++)r=i[u],s.events=s.events||{},s.events[r]=s.events[r]||[],s.events[r].push(n);return n},e.off=function(s,a,n){if(!a){s.events={};return}typeof a=="function"&&(n=a,a=c.keys(s.events).join(" "));for(var i=a.split(" "),r=0;r<i.length;r++){var u=s.events[i[r]],o=[];if(n&&u)for(var l=0;l<u.length;l++)u[l]!==n&&o.push(u[l]);s.events[i[r]]=o}},e.trigger=function(s,a,n){var i,r,u,o,l=s.events;if(l&&c.keys(l).length>0){n||(n={}),i=a.split(" ");for(var f=0;f<i.length;f++)if(r=i[f],u=l[r],u){o=c.clone(n,!1),o.name=r,o.source=s;for(var d=0;d<u.length;d++)u[d].apply(s,[o])}}}})()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(175),c=t(92),s=t(74),a={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(n){n===void 0&&(n=c.MULTI_PIPELINE);var i=this.scene.sys.renderer;if(!i)return!1;var r=i.pipelines;if(this.postPipelines=[],this.pipelineData={},r){var u=r.get(n);if(u)return this.defaultPipeline=u,this.pipeline=u,!0}return!1},setPipeline:function(n,i,r){var u=this.scene.sys.renderer;if(!u)return this;var o=u.pipelines;if(o){var l=o.get(n);l&&(this.pipeline=l),i&&(this.pipelineData=r?e(i):i)}return this},setPostPipeline:function(n,i,r){var u=this.scene.sys.renderer;if(!u)return this;var o=u.pipelines;if(o){Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++){var f=o.getPostPipeline(n[l],this);f&&this.postPipelines.push(f)}i&&(this.pipelineData=r?e(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(n,i){var r=this.pipelineData;return i===void 0?delete r[n]:r[n]=i,this},getPostPipeline:function(n){for(var i=this.postPipelines,r=[],u=0;u<i.length;u++){var o=i[u];(typeof n=="string"&&o.name===n||o instanceof n)&&r.push(o)}return r.length===1?r[0]:r},resetPipeline:function(n,i){return n===void 0&&(n=!1),i===void 0&&(i=!1),this.pipeline=this.defaultPipeline,n&&(this.postPipelines=[],this.hasPostPipeline=!1),i&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(n){n===void 0&&(n=!1);for(var i=this.postPipelines,r=0;r<i.length;r++)i[r].destroy();this.postPipelines=[],this.hasPostPipeline=!1,n&&(this.pipelineData={})},removePostPipeline:function(n){for(var i=this.postPipelines,r=i.length-1;r>=0;r--){var u=i[r];(typeof n=="string"&&u.name===n||typeof n!="string"&&u instanceof n)&&(u.destroy(),s(i,r))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DEFAULT:0,LINEAR:0,NEAREST:1};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a,n){return n===void 0&&(n=new e),n.x=s.x+s.radius*Math.cos(a),n.y=s.y+s.radius*Math.sin(a),n};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){a===void 0&&(a=new e);var n=2*Math.PI*Math.random(),i=Math.random()+Math.random(),r=i>1?2-i:i,u=r*Math.cos(n),o=r*Math.sin(n);return a.x=s.x+u*s.radius,a.y=s.y+o*s.radius,a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(130),c=t(4),s=function(a,n,i){if(i===void 0&&(i=new c),n<=0||n>=1)return i.x=a.x,i.y=a.y,i;var r=e(a)*n;return n>.5?(r-=a.width+a.height,r<=a.width?(i.x=a.right-r,i.y=a.bottom):(i.x=a.x,i.y=a.bottom-(r-a.width))):r<=a.width?(i.x=a.x+r,i.y=a.y):(i.x=a.right,i.y=a.y+(r-a.width)),i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),c=t(4),s=function(a,n,i,r){r===void 0&&(r=[]),!n&&i>0&&(n=e(a)/i);for(var u=a.x1,o=a.y1,l=a.x2,f=a.y2,d=0;d<n;d++){var v=d/n,p=u+(l-u)*v,m=o+(f-o)*v;r.push(new c(p,m))}return r};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){a===void 0&&(a=new e);var n=Math.random();return a.x=s.x1+n*(s.x2-s.x1),a.y=s.y1+n*(s.y2-s.y1),a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){return a===void 0&&(a=new e),a.x=s.x+Math.random()*s.width,a.y=s.y+Math.random()*s.height,a};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c,s,a;if(typeof e!="object"||e===null)return e;c=Array.isArray(e)?[]:{};for(a in e)s=e[a],c[a]=t(s);return c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(c.textureKey=e.texture.key,c.frameKey=e.frame.name),c};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),c=function(s,a,n,i,r,u,o,l){l===void 0&&(l=new e);var f=Math.sin(r),d=Math.cos(r),v=d*u,p=f*u,m=-f*o,x=d*o,T=1/(v*x+m*-p);return l.x=x*T*s+-m*T*a+(i*m-n*x)*T,l.y=v*T*a+-p*T*s+(-i*v+n*p)*T,l};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c===void 0&&(c=1);for(var s=null,a=0;a<c;a++)s=e.shift(),e.push(s);return s};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c===void 0&&(c=1);for(var s=null,a=0;a<c;a++)s=e.pop(),e.unshift(s);return s};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){a===void 0&&(a=new e);var n=Math.random()*Math.PI*2,i=Math.sqrt(Math.random());return a.x=s.x+i*Math.cos(n)*s.width/2,a.y=s.y+i*Math.sin(n)*s.height/2,a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){a===void 0&&(a=new e);var n=s.x2-s.x1,i=s.y2-s.y1,r=s.x3-s.x1,u=s.y3-s.y1,o=Math.random(),l=Math.random();return o+l>=1&&(o=1-o,l=1-l),a.x=s.x1+(n*o+r*l),a.y=s.y1+(i*o+u*l),a};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n){var i=a+Math.atan2(e.y-s,e.x-c);return e.x=c+n*Math.cos(i),e.y=s+n*Math.sin(i),e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e=Math.max(0,Math.min(1,(e-c)/(s-c))),e*e*e*(e*(e*6-15)+10)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e<=c?0:e>=s?1:(e=(e-c)/(s-c),e*e*(3-2*e))};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=t(0),s=t(132),a=t(318),n=t(319),i=t(6),r=t(320),u=new c({initialize:function(l,f,d){this.manager=l,this.key=f,this.type="frame",this.frames=this.getFrames(l.textureManager,i(d,"frames",[]),i(d,"defaultTextureKey",null),i(d,"sortFrames",!0)),this.frameRate=i(d,"frameRate",null),this.duration=i(d,"duration",null),this.msPerFrame,this.skipMissedFrames=i(d,"skipMissedFrames",!0),this.delay=i(d,"delay",0),this.repeat=i(d,"repeat",0),this.repeatDelay=i(d,"repeatDelay",0),this.yoyo=i(d,"yoyo",!1),this.showOnStart=i(d,"showOnStart",!1),this.hideOnComplete=i(d,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(s.PAUSE_ALL,this.pause,this),this.manager.on(s.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(o,l,f,d){f===null&&d===null?(o.frameRate=24,o.duration=24/l*1e3):f&&d===null?(o.duration=f,o.frameRate=l/(f/1e3)):(o.frameRate=d,o.duration=l/d*1e3),o.msPerFrame=1e3/o.frameRate},addFrame:function(o){return this.addFrameAt(this.frames.length,o)},addFrameAt:function(o,l){var f=this.getFrames(this.manager.textureManager,l);if(f.length>0){if(o===0)this.frames=f.concat(this.frames);else if(o===this.frames.length)this.frames=this.frames.concat(f);else{var d=this.frames.slice(0,o),v=this.frames.slice(o);this.frames=d.concat(f,v)}this.updateFrameSequence()}return this},checkFrame:function(o){return o>=0&&o<this.frames.length},getFirstTick:function(o){o.accumulator=0,o.nextTick=o.msPerFrame+o.currentFrame.duration},getFrameAt:function(o){return this.frames[o]},getFrames:function(o,l,f,d){d===void 0&&(d=!0);var v=[],p,m,x=1,T,S;if(typeof l=="string"){S=l;var E=o.get(S),C=E.getFrameNames();d&&r(C),l=[],C.forEach(function(I){l.push({key:S,frame:I})})}if(!Array.isArray(l)||l.length===0)return v;for(T=0;T<l.length;T++){var A=l[T],P=i(A,"key",f);if(P){var M=i(A,"frame",0),O=o.getFrame(P,M);m=new n(P,M,x,O),m.duration=i(A,"duration",0),m.isFirst=!p,p&&(p.nextFrame=m,m.prevFrame=p),v.push(m),p=m,x++}}if(v.length>0){m.isLast=!0,m.nextFrame=v[0],v[0].prevFrame=m;var F=1/(v.length-1);for(T=0;T<v.length;T++)v[T].progress=T*F}return v},getNextTick:function(o){o.accumulator-=o.nextTick,o.nextTick=o.msPerFrame+o.currentFrame.duration},getFrameByProgress:function(o){return o=e(o,0,1),a(o,this.frames,"progress")},nextFrame:function(o){var l=o.currentFrame;l.isLast?o.yoyo?this.handleYoyoFrame(o,!1):o.repeatCounter>0?o.inReverse&&o.forward?o.forward=!1:this.repeatAnimation(o):o.complete():this.updateAndGetNextTick(o,l.nextFrame)},handleYoyoFrame:function(o,l){if(l||(l=!1),o.inReverse===!l&&o.repeatCounter>0){(o.repeatDelay===0||o.pendingRepeat)&&(o.forward=l),this.repeatAnimation(o);return}if(o.inReverse!==l&&o.repeatCounter===0){o.complete();return}o.forward=l;var f=l?o.currentFrame.nextFrame:o.currentFrame.prevFrame;this.updateAndGetNextTick(o,f)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(o){var l=o.currentFrame;l.isFirst?o.yoyo?this.handleYoyoFrame(o,!0):o.repeatCounter>0?o.inReverse&&!o.forward?this.repeatAnimation(o):(o.forward=!0,this.repeatAnimation(o)):o.complete():this.updateAndGetNextTick(o,l.prevFrame)},updateAndGetNextTick:function(o,l){o.setCurrentFrame(l),this.getNextTick(o)},removeFrame:function(o){var l=this.frames.indexOf(o);return l!==-1&&this.removeFrameAt(l),this},removeFrameAt:function(o){return this.frames.splice(o,1),this.updateFrameSequence(),this},repeatAnimation:function(o){if(o._pendingStop===2){if(o._pendingStopValue===0)return o.stop();o._pendingStopValue--}o.repeatDelay>0&&!o.pendingRepeat?(o.pendingRepeat=!0,o.accumulator-=o.nextTick,o.nextTick+=o.repeatDelay):(o.repeatCounter--,o.forward?o.setCurrentFrame(o.currentFrame.nextFrame):o.setCurrentFrame(o.currentFrame.prevFrame),o.isPlaying&&(this.getNextTick(o),o.handleRepeat()))},toJSON:function(){var o={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(l){o.frames.push(l.toJSON())}),o},updateFrameSequence:function(){for(var o=this.frames.length,l=1/(o-1),f,d=0;d<o;d++)f=this.frames[d],f.index=d+1,f.isFirst=!1,f.isLast=!1,f.progress=d*l,d===0?(f.isFirst=!0,o===1?(f.isLast=!0,f.nextFrame=f,f.prevFrame=f):(f.isLast=!1,f.prevFrame=this.frames[o-1],f.nextFrame=this.frames[d+1])):d===o-1&&o>1?(f.isLast=!0,f.prevFrame=this.frames[o-2],f.nextFrame=this.frames[0]):o>1&&(f.prevFrame=this.frames[d-1],f.nextFrame=this.frames[d+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(s.PAUSE_ALL,this.pause,this),this.manager.off(s.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var o=0;o<this.frames.length;o++)this.frames[o].destroy();this.frames=[],this.manager=null}});h.exports=u},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){c===void 0&&(c=0),s===void 0&&(s=" "),a===void 0&&(a=3),e=e.toString();var n=0;if(c+1>=e.length)switch(a){case 1:e=new Array(c+1-e.length).join(s)+e;break;case 3:var i=Math.ceil((n=c-e.length)/2),r=n-i;e=new Array(r+1).join(s)+e+new Array(i+1).join(s);break;default:e=e+new Array(c+1-e.length).join(s);break}return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(327),c=t(189),s=t(331),a=t(332),n=function(i){var r=typeof i;switch(r){case"string":return i.substr(0,3).toLowerCase()==="rgb"?a(i):e(i);case"number":return c(i);case"object":return s(i)}};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103);function c(a,n,i,r){var u=(a+n*6)%6,o=Math.min(u,4-u,1);return Math.round(255*(r-r*i*Math.max(0,o)))}var s=function(a,n,i,r){n===void 0&&(n=1),i===void 0&&(i=1);var u=c(5,a,n,i),o=c(3,a,n,i),l=c(1,a,n,i);return r?r.setTo?r.setTo(u,o,l,r.alpha,!1):(r.r=u,r.g=o,r.b=l,r.color=e(u,o,l),r):{r:u,g:o,b:l,color:e(u,o,l)}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),c=t(330),s=function(a){var n=c(a);return new e(n.r,n.g,n.b,n.a)};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e.x=c-e.width/2,e.y=s-e.height/2,e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),c=t(136),s=t(31),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function n(){var r=new ArrayBuffer(4),u=new Uint8Array(r),o=new Uint32Array(r);return u[0]=161,u[1]=178,u[2]=195,u[3]=212,o[0]===3569595041?!0:o[0]===2712847316?!1:null}function i(){if(typeof importScripts=="function")return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch{a.localStorage=!1}a.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,a.fileSystem=!!window.requestFileSystem;var r=!1,u=function(){if(window.WebGLRenderingContext)try{var o=s.createWebGL(this),l=o.getContext("webgl")||o.getContext("experimental-webgl"),f=s.create2D(this),d=f.getContext("2d"),v=d.createImageData(1,1);return r=v.data instanceof Uint8ClampedArray,s.remove(o),s.remove(f),!!l}catch{return!1}return!1};return a.webGL=u(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,c.firefox&&c.firefoxVersion<21&&(a.getUserMedia=!1),!e.iOS&&(c.ie||c.firefox||c.chrome)&&(a.canvasBitBltShift=!0),(c.safari||c.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(a.littleEndian=n()),a.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&a.littleEndian!==null&&r,a}h.exports=i()},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="",e=function(){var c=function(i){for(var r=["i","webkitI","msI","mozI","oI"],u=0;u<r.length;u++){var o=r[u]+"mageSmoothingEnabled";if(o in i)return o}return null},s=function(i){return t===""&&(t=c(i)),t&&(i[t]=!0),i},a=function(i){return t===""&&(t=c(i)),t&&(i[t]=!1),i},n=function(i){return t!==null?i[t]:null};return{disable:a,enable:s,getPrefix:c,isEnabled:n}};h.exports=e()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),c=t(17),s={Angle:t(812),Distance:t(821),Easing:t(826),Fuzzy:t(827),Interpolation:t(830),Pow2:t(835),Snap:t(837),RandomDataGenerator:t(839),Average:t(840),Bernstein:t(356),Between:t(195),CatmullRom:t(194),CeilTo:t(841),Clamp:t(18),DegToRad:t(36),Difference:t(842),Euler:t(843),Factorial:t(357),FloatBetween:t(137),FloorTo:t(844),FromPercent:t(98),GetSpeed:t(845),IsEven:t(846),IsEvenStrict:t(847),Linear:t(135),MaxAdd:t(848),Median:t(849),MinSub:t(850),Percent:t(851),RadToDeg:t(196),RandomXY:t(852),RandomXYZ:t(853),RandomXYZW:t(854),Rotate:t(362),RotateAround:t(308),RotateAroundDistance:t(182),RotateTo:t(855),RoundAwayFromZero:t(363),RoundTo:t(856),SinCosTableGenerator:t(857),SmootherStep:t(183),SmoothStep:t(184),ToXY:t(858),TransformXY:t(177),Within:t(859),Wrap:t(68),Vector2:t(3),Vector3:t(39),Vector4:t(140),Matrix3:t(364),Matrix4:t(69),Quaternion:t(365),RotateVec3:t(860)};s=c(!1,s,e),h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n){var i=(a-c)*.5,r=(n-s)*.5,u=e*e,o=e*u;return(2*s-2*a+i+r)*o+(-3*s+3*a-2*i-r)*u+i*e+s};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return Math.floor(Math.random()*(c-e+1)+e)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),c=function(s){return s*e.RAD_TO_DEG};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(s){return this._matrix=s,this._dirty=!0,this},reset:function(){var s=this._matrix;return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=0,s[6]=1,s[7]=0,s[8]=0,s[9]=0,s[10]=0,s[11]=0,s[12]=1,s[13]=0,s[14]=0,s[15]=0,s[16]=0,s[17]=0,s[18]=1,s[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var s=new Float32Array(this._matrix);s[4]/=255,s[9]/=255,s[14]/=255,s[19]/=255,this._data=s,this._dirty=!1}return this._data},brightness:function(s,a){s===void 0&&(s=0),a===void 0&&(a=!1);var n=s;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],a)},saturate:function(s,a){s===void 0&&(s=0),a===void 0&&(a=!1);var n=s*2/3+1,i=(n-1)*-.5;return this.multiply([n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0],a)},desaturate:function(s){return s===void 0&&(s=!1),this.saturate(-1,s)},hue:function(s,a){s===void 0&&(s=0),a===void 0&&(a=!1),s=s/180*Math.PI;var n=Math.cos(s),i=Math.sin(s),r=.213,u=.715,o=.072;return this.multiply([r+n*(1-r)+i*-r,u+n*-u+i*-u,o+n*-o+i*(1-o),0,0,r+n*-r+i*.143,u+n*(1-u)+i*.14,o+n*-o+i*-.283,0,0,r+n*-r+i*-(1-r),u+n*-u+i*u,o+n*(1-o)+i*o,0,0,0,0,0,1,0],a)},grayscale:function(s,a){return s===void 0&&(s=1),a===void 0&&(a=!1),this.saturate(-s,a)},blackWhite:function(s){return s===void 0&&(s=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],s)},contrast:function(s,a){s===void 0&&(s=0),a===void 0&&(a=!1);var n=s+1,i=-.5*(n-1);return this.multiply([n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0],a)},negative:function(s){return s===void 0&&(s=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],s)},desaturateLuminance:function(s){return s===void 0&&(s=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],s)},sepia:function(s){return s===void 0&&(s=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],s)},night:function(s,a){return s===void 0&&(s=.1),a===void 0&&(a=!1),this.multiply([s*-2,-s,0,0,0,-s,0,s,0,0,0,s,s*2,0,0,0,0,0,1,0],a)},lsd:function(s){return s===void 0&&(s=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],s)},brown:function(s){return s===void 0&&(s=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],s)},vintagePinhole:function(s){return s===void 0&&(s=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],s)},kodachrome:function(s){return s===void 0&&(s=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],s)},technicolor:function(s){return s===void 0&&(s=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],s)},polaroid:function(s){return s===void 0&&(s=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],s)},shiftToBGR:function(s){return s===void 0&&(s=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],s)},multiply:function(s,a){a||this.reset();for(var n=this._matrix,i=[],r=0;r<20;r++)i[r]=n[r];return n[0]=i[0]*s[0]+i[1]*s[5]+i[2]*s[10]+i[3]*s[15],n[1]=i[0]*s[1]+i[1]*s[6]+i[2]*s[11]+i[3]*s[16],n[2]=i[0]*s[2]+i[1]*s[7]+i[2]*s[12]+i[3]*s[17],n[3]=i[0]*s[3]+i[1]*s[8]+i[2]*s[13]+i[3]*s[18],n[4]=i[0]*s[4]+i[1]*s[9]+i[2]*s[14]+i[3]*s[19]+i[4],n[5]=i[5]*s[0]+i[6]*s[5]+i[7]*s[10]+i[8]*s[15],n[6]=i[5]*s[1]+i[6]*s[6]+i[7]*s[11]+i[8]*s[16],n[7]=i[5]*s[2]+i[6]*s[7]+i[7]*s[12]+i[8]*s[17],n[8]=i[5]*s[3]+i[6]*s[8]+i[7]*s[13]+i[8]*s[18],n[9]=i[5]*s[4]+i[6]*s[9]+i[7]*s[14]+i[8]*s[19]+i[9],n[10]=i[10]*s[0]+i[11]*s[5]+i[12]*s[10]+i[13]*s[15],n[11]=i[10]*s[1]+i[11]*s[6]+i[12]*s[11]+i[13]*s[16],n[12]=i[10]*s[2]+i[11]*s[7]+i[12]*s[12]+i[13]*s[17],n[13]=i[10]*s[3]+i[11]*s[8]+i[12]*s[13]+i[13]*s[18],n[14]=i[10]*s[4]+i[11]*s[9]+i[12]*s[14]+i[13]*s[19]+i[14],n[15]=i[15]*s[0]+i[16]*s[5]+i[17]*s[10]+i[18]*s[15],n[16]=i[15]*s[1]+i[16]*s[6]+i[17]*s[11]+i[18]*s[16],n[17]=i[15]*s[2]+i[16]*s[7]+i[17]*s[12]+i[18]*s[17],n[18]=i[15]*s[3]+i[16]*s[8]+i[17]*s[13]+i[18]*s[18],n[19]=i[15]*s[4]+i[16]*s[9]+i[17]*s[14]+i[18]*s[19]+i[19],this._dirty=!0,this}});h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=t(14),s=function(a,n){if(n===void 0&&(n=new e),a.length===0)return n;for(var i=Number.MAX_VALUE,r=Number.MAX_VALUE,u=c.MIN_SAFE_INTEGER,o=c.MIN_SAFE_INTEGER,l,f,d,v=0;v<a.length;v++)l=a[v],Array.isArray(l)?(f=l[0],d=l[1]):(f=l.x,d=l.y),i=Math.min(i,f),r=Math.min(r,d),u=Math.max(u,f),o=Math.max(o,d);return n.x=i,n.y=r,n.width=u-i,n.height=o-r,n};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(1),s=new e({initialize:function(n,i,r){this._rgb=[0,0,0],this.onChangeCallback=c,this.dirty=!1,this.set(n,i,r)},set:function(a,n,i){return a===void 0&&(a=0),n===void 0&&(n=0),i===void 0&&(i=0),this._rgb=[a,n,i],this.onChange(),this},equals:function(a,n,i){var r=this._rgb;return r.r===a&&r.g===n&&r.b===i},onChange:function(){this.dirty=!0;var a=this._rgb;this.onChangeCallback.call(this,a[0],a[1],a[2])},r:{get:function(){return this._rgb[0]},set:function(a){this._rgb[0]=a,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(a){this._rgb[1]=a,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(a){this._rgb[2]=a,this.onChange()}},destroy:function(){this.onChangeCallback=null}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={CENTER:t(403),ORIENTATION:t(404),SCALE_MODE:t(405),ZOOM:t(406)};h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){e.parentNode&&e.parentNode.removeChild(e)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(144),s=t(197),a=t(20),n=t(419),i=t(420),r=t(33),u=t(1),o=t(421),l=new e({initialize:function(d,v){this.scene=d,this.game,this.renderer,this.config=v,this.settings=o.create(v),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=u},init:function(f){this.settings.status=c.INIT,this.sceneUpdate=u,this.game=f,this.renderer=f.renderer,this.canvas=f.canvas,this.context=f.context;var d=f.plugins;this.plugins=d,d.addToScene(this,s.Global,[s.CoreScene,i(this),n(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},step:function(f,d){var v=this.events;v.emit(a.PRE_UPDATE,f,d),v.emit(a.UPDATE,f,d),this.sceneUpdate.call(this.scene,f,d),v.emit(a.POST_UPDATE,f,d)},render:function(f){var d=this.displayList;d.depthSort(),this.events.emit(a.PRE_RENDER,f),this.cameras.render(f,d),this.events.emit(a.RENDER,f)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(f){var d=this.events,v=this.settings;return this.settings.active&&(v.status=c.PAUSED,v.active=!1,d.emit(a.PAUSE,this,f)),this},resume:function(f){var d=this.events,v=this.settings;return this.settings.active||(v.status=c.RUNNING,v.active=!0,d.emit(a.RESUME,this,f)),this},sleep:function(f){var d=this.events,v=this.settings;return v.status=c.SLEEPING,v.active=!1,v.visible=!1,d.emit(a.SLEEP,this,f),this},wake:function(f){var d=this.events,v=this.settings;return v.status=c.RUNNING,v.active=!0,v.visible=!0,d.emit(a.WAKE,this,f),v.isTransition&&d.emit(a.TRANSITION_WAKE,v.transitionFrom,v.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===c.SLEEPING},isActive:function(){return this.settings.status===c.RUNNING},isPaused:function(){return this.settings.status===c.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(f){return this.settings.visible=f,this},setActive:function(f,d){return f?this.resume(d):this.pause(d)},start:function(f){var d=this.events,v=this.settings;f&&(v.data=f),v.status=c.START,v.active=!0,v.visible=!0,d.emit(a.START,this),d.emit(a.READY,this,f)},shutdown:function(f){var d=this.events,v=this.settings;d.off(a.TRANSITION_INIT),d.off(a.TRANSITION_START),d.off(a.TRANSITION_COMPLETE),d.off(a.TRANSITION_OUT),v.status=c.SHUTDOWN,v.active=!1,v.visible=!1,this.renderer===r.WEBGL&&this.renderer.resetTextures(!0),d.emit(a.SHUTDOWN,this,f)},destroy:function(){var f=this.events,d=this.settings;d.status=c.DESTROYED,d.active=!1,d.visible=!1,f.emit(a.DESTROY,this),f.removeAllListeners();for(var v=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],p=0;p<v.length;p++)this[v[p]]=null}});h.exports=l},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e&&e[0].toUpperCase()+e.slice(1)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),c=t(0),s=t(109),a=t(424),n="Texture.frame missing: ",i=new c({initialize:function(u,o,l,f,d){Array.isArray(l)||(l=[l]),this.manager=u,this.key=o,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var v=0;v<l.length;v++)this.source.push(new a(this,l[v],f,d))},add:function(r,u,o,l,f,d){if(this.has(r))return null;var v=new s(this,r,u,o,l,f,d);return this.frames[r]=v,this.firstFrame==="__BASE"&&(this.firstFrame=r),this.frameTotal++,v},remove:function(r){if(this.has(r)){var u=this.get(r);return u.destroy(),delete this.frames[r],!0}return!1},has:function(r){return this.frames[r]},get:function(r){r||(r=this.firstFrame);var u=this.frames[r];return u||(console.warn(n+r),u=this.frames[this.firstFrame]),u},getTextureSourceIndex:function(r){for(var u=0;u<this.source.length;u++)if(this.source[u]===r)return u;return-1},getFramesFromTextureSource:function(r,u){u===void 0&&(u=!1);var o=[];for(var l in this.frames)if(!(l==="__BASE"&&!u)){var f=this.frames[l];f.sourceIndex===r&&o.push(f)}return o},getFrameNames:function(r){r===void 0&&(r=!1);var u=Object.keys(this.frames);if(!r){var o=u.indexOf("__BASE");o!==-1&&u.splice(o,1)}return u},getSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var u=this.frames[r];return u?u.source.image:(console.warn(n+r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var u=this.frames[r],o;return u?o=u.sourceIndex:(console.warn(n+r),o=this.frames.__BASE.sourceIndex),this.dataSource[o].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var u=0;u<r.length;u++){var o=this.source[u];this.dataSource.push(new a(this,r[u],o.width,o.height))}},setFilter:function(r){var u;for(u=0;u<this.source.length;u++)this.source[u].setFilter(r);for(u=0;u<this.dataSource.length;u++)this.dataSource[u].setFilter(r)},destroy:function(){var r;for(r=0;r<this.source.length;r++)this.source[r].destroy();for(r=0;r<this.dataSource.length;r++)this.dataSource[r].destroy();for(var u in this.frames){var o=this.frames[u];o.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var l=this.manager.game.renderer;l&&l.type===e.WEBGL&&l.resetTextures(!0),this.manager=null}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),c=function(s,a,n,i,r){i===void 0&&(i=0),r===void 0&&(r=s.length);var u=[];if(e(s,i,r))for(var o=i;o<r;o++){var l=s[o];(!a||a&&n===void 0&&l.hasOwnProperty(a)||a&&n!==void 0&&l[a]===n)&&u.push(l)}return u};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Matrix:t(1013),Add:t(1021),AddAt:t(1022),BringToTop:t(1023),CountAllMatching:t(1024),Each:t(1025),EachInRange:t(1026),FindClosestInSorted:t(318),GetAll:t(207),GetFirst:t(428),GetRandom:t(210),MoveDown:t(1027),MoveTo:t(1028),MoveUp:t(1029),MoveAbove:t(1030),MoveBelow:t(1031),NumberArray:t(322),NumberArrayStep:t(1032),QuickSelect:t(436),Range:t(437),Remove:t(93),RemoveAt:t(1033),RemoveBetween:t(1034),RemoveRandomElement:t(1035),Replace:t(1036),RotateLeft:t(178),RotateRight:t(179),SafeRange:t(78),SendToBack:t(1037),SetAll:t(1038),Shuffle:t(131),SortByDigits:t(320),SpliceOne:t(74),StableSort:t(79),Swap:t(1039)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(!Array.isArray(e)||e.length<2||!Array.isArray(e[0]))return!1;for(var c=e[0].length,s=1;s<e.length;s++)if(e[s].length!==c)return!1;return!0};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){c===void 0&&(c=0),s===void 0&&(s=e.length);var a=c+Math.floor(Math.random()*s);return e[a]===void 0?null:e[a]};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(9),s=t(438),a=new e({Extends:c,initialize:function(){c.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(n){return this._pending.push(n),this._toProcess++,n},remove:function(n){return this._destroy.push(n),this._toProcess++,n},removeAll:function(){for(var n=this._active,i=this._destroy,r=n.length;r--;)i.push(n[r]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var n=this._destroy,i=this._active,r,u;for(r=0;r<n.length;r++){u=n[r];var o=i.indexOf(u);o!==-1&&(i.splice(o,1),this.emit(s.PROCESS_QUEUE_REMOVE,u))}for(n.length=0,n=this._pending,r=0;r<n.length;r++)u=n[r],(!this.checkQueue||this.checkQueue&&i.indexOf(u)===-1)&&(i.push(u),this.emit(s.PROCESS_QUEUE_ADD,u));return n.length=0,this._toProcess=0,i},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(c,s){return parseInt(c.getAttribute(s),10)}var e=function(c,s,a,n,i){a===void 0&&(a=0),n===void 0&&(n=0);var r=s.cutX,u=s.cutY,o=s.source.width,l=s.source.height,f=s.sourceIndex,d={},v=c.getElementsByTagName("info")[0],p=c.getElementsByTagName("common")[0];d.font=v.getAttribute("face"),d.size=t(v,"size"),d.lineHeight=t(p,"lineHeight")+n,d.chars={};var m=c.getElementsByTagName("char"),x=s!==void 0&&s.trimmed;if(x)var T=s.height,S=s.width;for(var E=0;E<m.length;E++){var C=m[E],A=t(C,"id"),P=String.fromCharCode(A),M=t(C,"x"),O=t(C,"y"),F=t(C,"width"),I=t(C,"height");x&&(M<S&&(S=M),O<T&&(T=O)),x&&T!==0&&S!==0&&(M-=s.x,O-=s.y);var N=(r+M)/o,G=(u+O)/l,Y=(r+M+F)/o,z=(u+O+I)/l;if(d.chars[A]={x:M,y:O,width:F,height:I,centerX:Math.floor(F/2),centerY:Math.floor(I/2),xOffset:t(C,"xoffset"),yOffset:t(C,"yoffset"),xAdvance:t(C,"xadvance")+a,data:{},kerning:{},u0:N,v0:G,u1:Y,v1:z},i&&F!==0&&I!==0){var W=i.add(P,f,M,O,F,I);W&&W.setUVs(F,I,N,G,Y,z)}}var D=c.getElementsByTagName("kerning");for(E=0;E<D.length;E++){var L=D[E],B=t(L,"first"),w=t(L,"second"),V=t(L,"amount");d.chars[w].kerning[B]=V}return d};h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1049),c=t(440),s=t(0),a=t(11),n=t(109),i=t(15),r=t(110),u=new s({Extends:i,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,e],initialize:function(l,f,d,v,p){i.call(this,l,"Blitter"),this.setTexture(v,p),this.setPosition(f,d),this.initPipeline(),this.children=new r,this.renderList=[],this.dirty=!1},create:function(o,l,f,d,v){d===void 0&&(d=!0),v===void 0&&(v=this.children.length),f===void 0?f=this.frame:f instanceof n||(f=this.texture.get(f));var p=new c(this,o,l,f,d);return this.children.addAt(p,v,!1),this.dirty=!0,p},createFromCallback:function(o,l,f,d){for(var v=this.createMultiple(l,f,d),p=0;p<v.length;p++){var m=v[p];o.call(this,m,p)}return v},createMultiple:function(o,l,f){l===void 0&&(l=this.frame.name),f===void 0&&(f=!0),Array.isArray(l)||(l=[l]);var d=[],v=this;return l.forEach(function(p){for(var m=0;m<o;m++)d.push(v.create(0,0,p,f))}),d},childCanRender:function(o){return o.visible&&o.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(208),c=t(35),s=t(0),a=t(11),n=t(75),i=t(15),r=t(10),u=t(1052),o=t(441),l=t(3),f=new s({Extends:i,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,u],initialize:function(v,p,m,x){i.call(this,v,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this.tempTransformMatrix=new a.TransformMatrix,this._sortKey="",this._sysEvents=v.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(p,m),this.clearAlpha(),this.setBlendMode(c.SKIP_CHECK),x&&this.add(x)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(d){return d===void 0&&(d=!0),this.exclusive=d,this},getBounds:function(d){if(d===void 0&&(d=new r),d.setTo(this.x,this.y,0,0),this.parentContainer){var v=this.parentContainer.getBoundsTransformMatrix(),p=v.transformPoint(this.x,this.y);d.setTo(p.x,p.y,0,0)}if(this.list.length>0){var m=this.list,x=new r,T=!1;d.setEmpty();for(var S=0;S<m.length;S++){var E=m[S];E.getBounds&&(E.getBounds(x),T?o(x,d,d):(d.setTo(x.x,x.y,x.width,x.height),T=!0))}}return d},addHandler:function(d){d.once(n.DESTROY,this.remove,this),this.exclusive&&(d.parentContainer&&d.parentContainer.remove(d),d.removeFromDisplayList(),d.parentContainer=this)},removeHandler:function(d){d.off(n.DESTROY,this.remove),this.exclusive&&(d.parentContainer=null,d.addToDisplayList())},pointToContainer:function(d,v){v===void 0&&(v=new l),this.parentContainer?this.parentContainer.pointToContainer(d,v):v=new l(d.x,d.y);var p=this.tempTransformMatrix;return p.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),p.invert(),p.transformPoint(d.x,d.y,v),v},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(d){return e.Add(this.list,d,this.maxSize,this.addHandler,this),this},addAt:function(d,v){return e.AddAt(this.list,d,v,this.maxSize,this.addHandler,this),this},getAt:function(d){return this.list[d]},getIndex:function(d){return this.list.indexOf(d)},sort:function(d,v){return d?(v===void 0&&(v=function(p,m){return p[d]-m[d]}),e.StableSort(this.list,v),this):this},getByName:function(d){return e.GetFirst(this.list,"name",d)},getRandom:function(d,v){return e.GetRandom(this.list,d,v)},getFirst:function(d,v,p,m){return e.GetFirst(this.list,d,v,p,m)},getAll:function(d,v,p,m){return e.GetAll(this.list,d,v,p,m)},count:function(d,v,p,m){return e.CountAllMatching(this.list,d,v,p,m)},swap:function(d,v){return e.Swap(this.list,d,v),this},moveTo:function(d,v){return e.MoveTo(this.list,d,v),this},moveAbove:function(d,v){return e.MoveAbove(this.list,d,v),this},moveBelow:function(d,v){return e.MoveBelow(this.list,d,v),this},remove:function(d,v){var p=e.Remove(this.list,d,this.removeHandler,this);if(v&&p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)p[m].destroy()}return this},removeAt:function(d,v){var p=e.RemoveAt(this.list,d,this.removeHandler,this);return v&&p&&p.destroy(),this},removeBetween:function(d,v,p){var m=e.RemoveBetween(this.list,d,v,this.removeHandler,this);if(p)for(var x=0;x<m.length;x++)m[x].destroy();return this},removeAll:function(d){var v=e.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(d)for(var p=0;p<v.length;p++)v[p].destroy();return this},bringToTop:function(d){return e.BringToTop(this.list,d),this},sendToBack:function(d){return e.SendToBack(this.list,d),this},moveUp:function(d){return e.MoveUp(this.list,d),this},moveDown:function(d){return e.MoveDown(this.list,d),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return e.Shuffle(this.list),this},replace:function(d,v,p){var m=e.Replace(this.list,d,v);return m&&(this.addHandler(v),this.removeHandler(d),p&&d.destroy()),this},exists:function(d){return this.list.indexOf(d)>-1},setAll:function(d,v,p,m){return e.SetAll(this.list,d,v,p,m),this},each:function(d,v){var p=[null],m,x=this.list.slice(),T=x.length;for(m=2;m<arguments.length;m++)p.push(arguments[m]);for(m=0;m<T;m++)p[0]=x[m],d.apply(v,p);return this},iterate:function(d,v){var p=[null],m;for(m=2;m<arguments.length;m++)p.push(arguments[m]);for(m=0;m<this.list.length;m++)p[0]=this.list[m],d.apply(v,p);return this},setScrollFactor:function(d,v,p){return v===void 0&&(v=d),p===void 0&&(p=!1),this.scrollFactorX=d,this.scrollFactorY=v,p&&(e.SetAll(this.list,"scrollFactorX",d),e.SetAll(this.list,"scrollFactorY",v)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});h.exports=f},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),c=t(0),s=t(1057),a=new c({Extends:e,Mixins:[s],initialize:function(i,r,u,o,l,f,d){e.call(this,i,r,u,o,l,f,d),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(n,i){return this.cropWidth=n,this.cropHeight=i,this},setDisplayCallback:function(n){return this.displayCallback=n,this},setScrollX:function(n){return this.scrollX=n,this},setScrollY:function(n){return this.scrollY=n,this}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(133),c=t(0),s=t(217),a=t(303),n=t(304),i=t(305),r=t(309),u=t(167),o=t(312),l=t(313),f=t(314),d=t(111),v=t(15),p=t(2),m=t(6),x=t(14),T=t(1063),S=new c({Extends:v,Mixins:[a,n,i,r,u,l,f,o,T],initialize:function(C,A){var P=m(A,"x",0),M=m(A,"y",0);v.call(this,C,"Graphics"),this.setPosition(P,M),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(A)},setDefaultStyles:function(E){return m(E,"lineStyle",null)&&(this.defaultStrokeWidth=m(E,"lineStyle.width",1),this.defaultStrokeColor=m(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(E,"fillStyle",null)&&(this.defaultFillColor=m(E,"fillStyle.color",16777215),this.defaultFillAlpha=m(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,C,A){return A===void 0&&(A=1),this.commandBuffer.push(s.LINE_STYLE,E,C,A),this._lineWidth=E,this},fillStyle:function(E,C){return C===void 0&&(C=1),this.commandBuffer.push(s.FILL_STYLE,E,C),this},fillGradientStyle:function(E,C,A,P,M,O,F,I){return M===void 0&&(M=1),O===void 0&&(O=M),F===void 0&&(F=M),I===void 0&&(I=M),this.commandBuffer.push(s.GRADIENT_FILL_STYLE,M,O,F,I,E,C,A,P),this},lineGradientStyle:function(E,C,A,P,M,O){return O===void 0&&(O=1),this.commandBuffer.push(s.GRADIENT_LINE_STYLE,E,O,C,A,P,M),this},beginPath:function(){return this.commandBuffer.push(s.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(s.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(s.FILL_PATH),this},fill:function(){return this.commandBuffer.push(s.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(s.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(s.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,C,A){return this.beginPath(),this.arc(E,C,A,0,x.PI2),this.fillPath(),this},strokeCircle:function(E,C,A){return this.beginPath(),this.arc(E,C,A,0,x.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,C,A,P){return this.commandBuffer.push(s.FILL_RECT,E,C,A,P),this},strokeRect:function(E,C,A,P){var M=this._lineWidth/2,O=E-M,F=E+M;return this.beginPath(),this.moveTo(E,C),this.lineTo(E,C+P),this.strokePath(),this.beginPath(),this.moveTo(E+A,C),this.lineTo(E+A,C+P),this.strokePath(),this.beginPath(),this.moveTo(O,C),this.lineTo(F+A,C),this.strokePath(),this.beginPath(),this.moveTo(O,C+P),this.lineTo(F+A,C+P),this.strokePath(),this},fillRoundedRect:function(E,C,A,P,M){M===void 0&&(M=20);var O=M,F=M,I=M,N=M;return typeof M!="number"&&(O=p(M,"tl",20),F=p(M,"tr",20),I=p(M,"bl",20),N=p(M,"br",20)),this.beginPath(),this.moveTo(E+O,C),this.lineTo(E+A-F,C),this.arc(E+A-F,C+F,F,-x.TAU,0),this.lineTo(E+A,C+P-N),this.arc(E+A-N,C+P-N,N,0,x.TAU),this.lineTo(E+I,C+P),this.arc(E+I,C+P-I,I,x.TAU,Math.PI),this.lineTo(E,C+O),this.arc(E+O,C+O,O,-Math.PI,-x.TAU),this.fillPath(),this},strokeRoundedRect:function(E,C,A,P,M){M===void 0&&(M=20);var O=M,F=M,I=M,N=M;return typeof M!="number"&&(O=p(M,"tl",20),F=p(M,"tr",20),I=p(M,"bl",20),N=p(M,"br",20)),this.beginPath(),this.moveTo(E+O,C),this.lineTo(E+A-F,C),this.moveTo(E+A-F,C),this.arc(E+A-F,C+F,F,-x.TAU,0),this.lineTo(E+A,C+P-N),this.moveTo(E+A,C+P-N),this.arc(E+A-N,C+P-N,N,0,x.TAU),this.lineTo(E+I,C+P),this.moveTo(E+I,C+P),this.arc(E+I,C+P-I,I,x.TAU,Math.PI),this.lineTo(E,C+O),this.moveTo(E,C+O),this.arc(E+O,C+O,O,-Math.PI,-x.TAU),this.strokePath(),this},fillPointShape:function(E,C){return this.fillPoint(E.x,E.y,C)},fillPoint:function(E,C,A){return!A||A<1?A=1:(E-=A/2,C-=A/2),this.commandBuffer.push(s.FILL_RECT,E,C,A,A),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,C,A,P,M,O){return this.commandBuffer.push(s.FILL_TRIANGLE,E,C,A,P,M,O),this},strokeTriangle:function(E,C,A,P,M,O){return this.commandBuffer.push(s.STROKE_TRIANGLE,E,C,A,P,M,O),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,C,A,P){return this.beginPath(),this.moveTo(E,C),this.lineTo(A,P),this.strokePath(),this},lineTo:function(E,C){return this.commandBuffer.push(s.LINE_TO,E,C),this},moveTo:function(E,C){return this.commandBuffer.push(s.MOVE_TO,E,C),this},strokePoints:function(E,C,A,P){C===void 0&&(C=!1),A===void 0&&(A=!1),P===void 0&&(P=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var M=1;M<P;M++)this.lineTo(E[M].x,E[M].y);return C&&this.lineTo(E[0].x,E[0].y),A&&this.closePath(),this.strokePath(),this},fillPoints:function(E,C,A,P){C===void 0&&(C=!1),A===void 0&&(A=!1),P===void 0&&(P=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var M=1;M<P;M++)this.lineTo(E[M].x,E[M].y);return C&&this.lineTo(E[0].x,E[0].y),A&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,C){C===void 0&&(C=32);var A=E.getPoints(C);return this.strokePoints(A,!0)},strokeEllipse:function(E,C,A,P,M){M===void 0&&(M=32);var O=new d(E,C,A,P),F=O.getPoints(M);return this.strokePoints(F,!0)},fillEllipseShape:function(E,C){C===void 0&&(C=32);var A=E.getPoints(C);return this.fillPoints(A,!0)},fillEllipse:function(E,C,A,P,M){M===void 0&&(M=32);var O=new d(E,C,A,P),F=O.getPoints(M);return this.fillPoints(F,!0)},arc:function(E,C,A,P,M,O,F){return O===void 0&&(O=!1),F===void 0&&(F=0),this.commandBuffer.push(s.ARC,E,C,A,P,M,O,F),this},slice:function(E,C,A,P,M,O,F){return O===void 0&&(O=!1),F===void 0&&(F=0),this.commandBuffer.push(s.BEGIN_PATH),this.commandBuffer.push(s.MOVE_TO,E,C),this.commandBuffer.push(s.ARC,E,C,A,P,M,O,F),this.commandBuffer.push(s.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(s.SAVE),this},restore:function(){return this.commandBuffer.push(s.RESTORE),this},translateCanvas:function(E,C){return this.commandBuffer.push(s.TRANSLATE,E,C),this},scaleCanvas:function(E,C){return this.commandBuffer.push(s.SCALE,E,C),this},rotateCanvas:function(E){return this.commandBuffer.push(s.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,C,A){var P=this.scene.sys,M=P.game.renderer;C===void 0&&(C=P.scale.width),A===void 0&&(A=P.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,C,A),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var O,F;if(typeof E=="string")if(P.textures.exists(E)){O=P.textures.get(E);var I=O.getSourceImage();I instanceof HTMLCanvasElement&&(F=I.getContext("2d"))}else O=P.textures.createCanvas(E,C,A),F=O.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(F=E.getContext("2d"));return F&&(this.renderCanvas(M,this,S.TargetCamera,null,F,!1),O&&O.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new e,h.exports=S},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a,n){n===void 0&&(n=new e);var i=s.width/2,r=s.height/2;return n.x=s.x+i*Math.cos(a),n.y=s.y+r*Math.sin(a),n};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),c=t(0),s=t(11),a=t(176),n=t(101),i=t(9),r=t(75),u=t(110),o=t(1071),l=t(20),f=t(79),d=new c({Extends:u,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.Visible,i,o],initialize:function(p,m){u.call(this,p),i.call(this),this.scene=p,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=p.sys,this.events=p.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(e.SKIP_CHECK),m&&this.add(m),p.sys.queueDepthSort()},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},setState:function(v){return this.state=v,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(v,p){return this.data||(this.data=new n(this)),this.data.set(v,p),this},incData:function(v,p){return this.data||(this.data=new n(this)),this.data.inc(v,p),this},toggleData:function(v){return this.data||(this.data=new n(this)),this.data.toggle(v),this},getData:function(v){return this.data||(this.data=new n(this)),this.data.get(v)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(v){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&v.id)},getIndexList:function(){for(var v=this,p=this.parentContainer,m=[];p&&(m.unshift(p.getIndex(v)),v=p,p.parentContainer);)p=p.parentContainer;return m.unshift(this.displayList.getIndex(v)),m},addChildCallback:function(v){v.displayList&&v.displayList!==this&&v.removeFromDisplayList(),v.displayList||(this.queueDepthSort(),v.displayList=this,v.emit(r.ADDED_TO_SCENE,v,this.scene),this.events.emit(l.ADDED_TO_SCENE,v,this.scene))},removeChildCallback:function(v){this.queueDepthSort(),v.displayList=null,v.emit(r.REMOVED_FROM_SCENE,v,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,v,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(f(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(v,p){return v._depth-p._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(r.DESTROY,this);for(var v=this.list.length;v--;)this.list[v].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});h.exports=d},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(15),a=t(450),n=t(110),i=t(452),r=t(1075),u=new e({Extends:s,Mixins:[c.Depth,c.Mask,c.Pipeline,c.Transform,c.Visible,r],initialize:function(l,f,d,v){if(s.call(this,l,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],d!==null&&(typeof d=="object"||Array.isArray(d))&&(v=d,d=null),this.setTexture(f,d),this.initPipeline(),this.emitters=new n(this),this.wells=new n(this),v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++)this.createEmitter(v[p])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(o,l){return this.texture=this.scene.sys.textures.get(o),this.setFrame(l)},setFrame:function(o){this.frame=this.texture.get(o);var l=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),f=[];return l.forEach(function(d){f.push(d.name)}),this.frameNames=f,this.defaultFrame=this.frame,this},setEmitterFrames:function(o,l){Array.isArray(o)||(o=[o]);var f=l.frames;f.length=0;for(var d=0;d<o.length;d++){var v=o[d];this.frameNames.indexOf(v)!==-1&&f.push(this.texture.get(v))}return f.length>0?l.defaultFrame=f[0]:l.defaultFrame=this.defaultFrame,this},addEmitter:function(o){return this.emitters.add(o)},createEmitter:function(o){return this.addEmitter(new i(this,o))},removeEmitter:function(o){return this.emitters.remove(o,!0)},addGravityWell:function(o){return this.wells.add(o)},createGravityWell:function(o){return this.addGravityWell(new a(o))},emitParticle:function(o,l,f){for(var d=this.emitters.list,v=0;v<d.length;v++){var p=d[v];p.active&&p.emitParticle(o,l,f)}return this},emitParticleAt:function(o,l,f){return this.emitParticle(f,o,l)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(o,l){l*=this.timeScale;for(var f=this.emitters.list,d=0;d<f.length;d++){var v=f[d];v.active&&v.preUpdate(o,l)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),c=t(133),s=t(31),a=t(0),n=t(11),i=t(33),r=t(109),u=t(15),o=t(1),l=t(92),f=t(1079),d=t(141),v=t(12),p=t(222),m=new a({Extends:u,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,f],initialize:function(T,S,E,C,A,P,M){S===void 0&&(S=0),E===void 0&&(E=0),C===void 0&&(C=32),A===void 0&&(A=32),u.call(this,T,"RenderTexture"),this.renderer=T.sys.renderer,this.textureManager=T.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,P===void 0?(this.canvas=s.create2D(this,C,A),this.texture=T.sys.textures.addCanvas(p(),this.canvas),this.frame=this.texture.get()):(this.texture=T.sys.textures.get(P),this.frame=this.texture.get(M),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new c(0,0,C,A),this.renderTarget=null;var O=this.renderer;O?O.type===i.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new d(O,C,A,1,0,!1)):O.type===i.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=o,this.camera.setScene(T),this.setPosition(S,E),P===void 0&&this.setSize(C,A),this.setOrigin(0,0),this.initPipeline(l.SINGLE_PIPELINE)},setSize:function(x,T){return this.resize(x,T)},resize:function(x,T){T===void 0&&(T=x);var S=this.frame;if(x!==this.width||T!==this.height){if(S.name==="__BASE"){this.canvas.width=x,this.canvas.height=T,this.texture.width=x,this.texture.height=T;var E=this.renderTarget;E&&(E.resize(x,T),S.glTexture=E.texture,S.source.isRenderTexture=!0,S.source.isGLTexture=!0,S.source.glTexture=E.texture),this.camera.setSize(x,T),S.source.width=x,S.source.height=T,S.setSize(x,T),this.width=x,this.height=T}}else{var C=this.texture.getSourceImage();S.cutX+x>C.width&&(x=C.width-S.cutX),S.cutY+T>C.height&&(T=C.height-S.cutY),S.setSize(x,T,S.cutX,S.cutY)}this.updateDisplayOrigin();var A=this.input;return A&&!A.customHitArea&&(A.hitArea.width=x,A.hitArea.height=T),this},setGlobalTint:function(x){return this.globalTint=x,this},setGlobalAlpha:function(x){return this.globalAlpha=x,this},saveTexture:function(x){return this.textureManager.renameTexture(this.texture.key,x),this._saved=!0,this.texture},fill:function(x,T,S,E,C,A){var P=this.frame,M=this.camera,O=this.renderer;T===void 0&&(T=1),S===void 0&&(S=0),E===void 0&&(E=0),C===void 0&&(C=P.cutWidth),A===void 0&&(A=P.cutHeight);var F=(x>>16&255)/255,I=(x>>8&255)/255,N=(x&255)/255,G=this.renderTarget;if(M.preRender(),G){G.bind(!0);var Y=this.pipeline;Y.manager.set(Y);var z=G.width,W=G.height,D=O.width,L=O.height,B=D/z,w=L/W;Y.drawFillRect(S*B,E*w,C*B,A*w,v.getTintFromFloats(N,I,F,1),T),G.unbind(!0)}else{var V=this.context;O.setContext(V),V.fillStyle="rgba("+F+","+I+","+N+","+T+")",V.fillRect(S+P.cutX,E+P.cutY,C,A),O.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var x=this.renderTarget;if(x)x.clear();else{var T=this.context;T.save(),T.setTransform(1,0,0,1,0,0),T.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),T.restore()}this.dirty=!1}return this},erase:function(x,T,S){return this._eraseMode=!0,this.draw(x,T,S,1,16777215),this._eraseMode=!1,this},draw:function(x,T,S,E,C){return this.beginDraw(),this.batchDraw(x,T,S,E,C),this.endDraw(),this},drawFrame:function(x,T,S,E,C,A){return this.beginDraw(),this.batchDrawFrame(x,T,S,E,C,A),this.endDraw(),this},beginDraw:function(){var x=this.camera,T=this.renderer,S=this.renderTarget;return x.preRender(),S?T.beginCapture(S.width,S.height):T.setContext(this.context),this},batchDraw:function(x,T,S,E,C){return E===void 0&&(E=this.globalAlpha),C===void 0?C=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):C=(C>>16)+(C&65280)+((C&255)<<16),Array.isArray(x)||(x=[x]),this.batchList(x,T,S,E,C),this},batchDrawFrame:function(x,T,S,E,C,A){S===void 0&&(S=0),E===void 0&&(E=0),C===void 0&&(C=this.globalAlpha),A===void 0?A=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):A=(A>>16)+(A&65280)+((A&255)<<16);var P=this.textureManager.getFrame(x,T);return P&&(this.renderTarget?this.pipeline.batchTextureFrame(P,S,E,A,C,this.camera.matrix,null):this.batchTextureFrame(P,S+this.frame.cutX,E+this.frame.cutY,C,A)),this},endDraw:function(x){x===void 0&&(x=this._eraseMode);var T=this.renderer,S=this.renderTarget;if(S){var E=T.endCapture(),C=T.pipelines.setUtility();C.blitFrame(E,S,1,!1,!1,x),T.resetScissor(),T.resetViewport()}else T.setContext();return this.dirty=!0,this},batchList:function(x,T,S,E,C){for(var A=0;A<x.length;A++){var P=x[A];!P||P===this||(P.renderWebGL||P.renderCanvas?this.drawGameObject(P,T,S):P.isParent||P.list?this.batchGroup(P.getChildren(),T,S):typeof P=="string"?this.batchTextureFrameKey(P,null,T,S,E,C):P instanceof r?this.batchTextureFrame(P,T,S,E,C):Array.isArray(P)&&this.batchList(P,T,S,E,C))}},batchGroup:function(x,T,S){T===void 0&&(T=0),S===void 0&&(S=0),T+=this.frame.cutX,S+=this.frame.cutY;for(var E=0;E<x.length;E++){var C=x[E];if(C.willRender(this.camera)){var A=C.x+T,P=C.y+S;this.drawGameObject(C,A,P)}}},batchGameObjectWebGL:function(x,T,S){T===void 0&&(T=x.x),S===void 0&&(S=x.y);var E=x.x,C=x.y;x.setPosition(T+this.frame.cutX,S+this.frame.cutY),x.renderDirect?x.renderDirect(this.renderer,x,this.camera):x.renderWebGL(this.renderer,x,this.camera),x.setPosition(E,C)},batchGameObjectCanvas:function(x,T,S){T===void 0&&(T=x.x),S===void 0&&(S=x.y);var E=x.x,C=x.y;if(this._eraseMode){var A=x.blendMode;x.blendMode=e.ERASE}x.setPosition(T+this.frame.cutX,S+this.frame.cutY),x.renderCanvas(this.renderer,x,this.camera,null),x.setPosition(E,C),this._eraseMode&&(x.blendMode=A)},batchTextureFrameKey:function(x,T,S,E,C,A){var P=this.textureManager.getFrame(x,T);P&&this.batchTextureFrame(P,S,E,C,A)},batchTextureFrame:function(x,T,S,E,C){T===void 0&&(T=0),S===void 0&&(S=0),T+=this.frame.cutX,S+=this.frame.cutY;var A=this.renderTarget;if(A)this.pipeline.batchTextureFrame(x,T,S,C,E,this.camera.matrix,null);else{var P=this.context,M=x.canvasData,O=x.source.image,F=this.camera.matrix;P.save(),P.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",P.globalAlpha=E,F.setToContext(P),P.drawImage(O,M.x,M.y,M.width,M.height,T,S,M.width,M.height),P.restore()}},snapshotArea:function(x,T,S,E,C,A,P){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,C,!1,x,T,S,E,A,P):this.renderer.snapshotCanvas(this.canvas,C,!1,x,T,S,E,A,P),this},snapshot:function(x,T,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,x,!1,0,0,this.width,this.height,T,S):this.renderer.snapshotCanvas(this.canvas,x,!1,0,0,this.width,this.height,T,S),this},snapshotPixel:function(x,T,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!0,x,T):this.renderer.snapshotCanvas(this.canvas,S,!0,x,T),this},preDestroy:function(){this._saved||(s.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});h.exports=m},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var c=Math.random()*16|0,s=e==="x"?c:c&3|8;return s.toString(16)})};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),c=t(0),s=t(11),a=t(15),n=t(92),i=t(1085),r=t(3),u=new c({Extends:a,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Flip,s.Mask,s.Pipeline,s.Size,s.Texture,s.Transform,s.Visible,s.ScrollFactor,i],initialize:function(l,f,d,v,p,m,x,T,S){v===void 0&&(v="__DEFAULT"),m===void 0&&(m=2),x===void 0&&(x=!0),a.call(this,l,"Rope"),this.anims=new e(this),this.points=m,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=v==="__DEFAULT",this.dirty=!1,this.horizontal=x,this._flipX=!1,this._flipY=!1,this._perp=new r,this.debugCallback=null,this.debugGraphic=null,this.setTexture(v,p),this.setPosition(f,d),this.setSizeToFrame(),this.initPipeline(n.ROPE_PIPELINE),Array.isArray(m)&&this.resizeArrays(m.length),this.setPoints(m,T,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,l){var f=this.anims.currentFrame;this.anims.update(o,l),this.anims.currentFrame!==f&&(this.updateUVs(),this.updateVertices())},play:function(o,l,f){return this.anims.play(o,l,f),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(o,l,f){return o===void 0&&(o=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(o,l,f))},setVertical:function(o,l,f){return o===void 0&&(o=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(o,l,f)):this},setTintFill:function(o){return o===void 0&&(o=!1),this.tintFill=o,this},setAlphas:function(o,l){var f=this.points.length;if(f<1)return this;var d=this.alphas;o===void 0?o=[1]:!Array.isArray(o)&&l===void 0&&(o=[o]);var v,p=0;if(l!==void 0)for(v=0;v<f;v++)p=v*2,d[p]=o,d[p+1]=l;else if(o.length===f)for(v=0;v<f;v++)p=v*2,d[p]=o[v],d[p+1]=o[v];else{var m=o[0];for(v=0;v<f;v++)p=v*2,o.length>p&&(m=o[p]),d[p]=m,o.length>p+1&&(m=o[p+1]),d[p+1]=m}return this},setColors:function(o){var l=this.points.length;if(l<1)return this;var f=this.colors;o===void 0?o=[16777215]:Array.isArray(o)||(o=[o]);var d,v=0;if(o.length===l)for(d=0;d<l;d++)v=d*2,f[v]=o[d],f[v+1]=o[d];else{var p=o[0];for(d=0;d<l;d++)v=d*2,o.length>v&&(p=o[v]),f[v]=p,o.length>v+1&&(p=o[v+1]),f[v+1]=p}return this},setPoints:function(o,l,f){if(o===void 0&&(o=2),typeof o=="number"){var d=o;d<2&&(d=2),o=[];var v,p,m;if(this.horizontal)for(m=-this.frame.halfWidth,p=this.frame.width/(d-1),v=0;v<d;v++)o.push({x:m+v*p,y:0});else for(m=-this.frame.halfHeight,p=this.frame.height/(d-1),v=0;v<d;v++)o.push({x:0,y:m+v*p})}var x=o.length,T=this.points.length;return x<1?(console.warn("Rope: Not enough points given"),this):(x===1&&(o.unshift({x:0,y:0}),x++),T!==x&&this.resizeArrays(x),this.points=o,this.updateUVs(),l!=null&&this.setColors(l),f!=null&&this.setAlphas(f),this)},updateUVs:function(){for(var o=this.uv,l=this.points.length,f=this.frame.u0,d=this.frame.v0,v=this.frame.u1,p=this.frame.v1,m=(v-f)/(l-1),x=(p-d)/(l-1),T=0;T<l;T++){var S=T*4,E,C,A,P;this.horizontal?(this._flipX?(E=v-T*m,A=v-T*m):(E=f+T*m,A=f+T*m),this._flipY?(C=p,P=d):(C=d,P=p)):(this._flipX?(E=f,A=v):(E=v,A=f),this._flipY?(C=p-T*x,P=p-T*x):(C=d+T*x,P=d+T*x)),o[S+0]=E,o[S+1]=C,o[S+2]=A,o[S+3]=P}return this},resizeArrays:function(o){var l=this.colors,f=this.alphas;this.vertices=new Float32Array(o*4),this.uv=new Float32Array(o*4),l=new Uint32Array(o*2),f=new Float32Array(o*2);for(var d=0;d<o*2;d++)l[d]=16777215,f[d]=1;return this.colors=l,this.alphas=f,this.dirty=!0,this},updateVertices:function(){var o=this._perp,l=this.points,f=this.vertices,d=l.length;if(this.dirty=!1,!(d<1)){for(var v,p=l[0],m=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,x=0;x<d;x++){var T=l[x],S=x*4;x<d-1?v=l[x+1]:v=T,o.x=v.y-p.y,o.y=-(v.x-p.x);var E=o.length();o.x/=E,o.y/=E,o.x*=m,o.y*=m,f[S]=T.x+o.x,f[S+1]=T.y+o.y,f[S+2]=T.x-o.x,f[S+3]=T.y-o.y,p=T}return this}},setDebug:function(o,l){return this.debugGraphic=o,!o&&!l?this.debugCallback=null:l?this.debugCallback=l:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(o,l,f){var d=o.debugGraphic,v=f[0],p=f[1],m=f[2],x=f[3];d.lineBetween(v,p,m,x);for(var T=4;T<l;T+=4){var S=f[T+0],E=f[T+1],C=f[T+2],A=f[T+3];d.lineBetween(v,p,S,E),d.lineBetween(m,x,C,A),d.lineBetween(m,x,S,E),d.lineBetween(S,E,C,A),v=S,p=E,m=C,x=A}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(o){return this._flipX=o,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(o){return this._flipY=o,this.updateUVs()}}});h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),c=t(31),s=t(0),a=t(11),n=t(22),i=t(15),r=t(458),u=t(6),o=t(202),l=t(1088),f=t(459),d=new s({Extends:i,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,l],initialize:function(p,m,x,T,S){m===void 0&&(m=0),x===void 0&&(x=0),i.call(this,p,"Text"),this.renderer=p.sys.renderer,this.setPosition(m,x),this.setOrigin(0,0),this.initPipeline(),this.canvas=c.create(this),this.context=this.canvas.getContext("2d"),this.style=new f(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=p.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(T),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),p.sys.game.events.on(n.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",e(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(v){var p=this.style;if(p.wordWrapCallback){var m=p.wordWrapCallback.call(p.wordWrapCallbackScope,v,this);return Array.isArray(m)&&(m=m.join(`
`)),m}else return p.wordWrapWidth?p.wordWrapUseAdvanced?this.advancedWordWrap(v,this.context,this.style.wordWrapWidth):this.basicWordWrap(v,this.context,this.style.wordWrapWidth):v},advancedWordWrap:function(v,p,m){for(var x="",T=v.replace(/ +/gi," ").split(this.splitRegExp),S=T.length,E=0;E<S;E++){var C=T[E],A="";C=C.replace(/^ *|\s*$/gi,"");var P=p.measureText(C).width;if(P<m){x+=C+`
`;continue}for(var M=m,O=C.split(" "),F=0;F<O.length;F++){var I=O[F],N=I+" ",G=p.measureText(N).width;if(G>M){if(F===0){for(var Y=N;Y.length&&(Y=Y.slice(0,-1),G=p.measureText(Y).width,!(G<=M)););if(!Y.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var z=I.substr(Y.length);O[F]=z,A+=Y}var W=O[F].length?F:F+1,D=O.slice(W).join(" ").replace(/[ \n]*$/gi,"");T[E+1]=D+" "+(T[E+1]||""),S=T.length;break}else A+=N,M-=G}x+=A.replace(/[ \n]*$/gi,"")+`
`}return x=x.replace(/[\s|\n]*$/gi,""),x},basicWordWrap:function(v,p,m){for(var x="",T=v.split(this.splitRegExp),S=T.length-1,E=p.measureText(" ").width,C=0;C<=S;C++){for(var A=m,P=T[C].split(" "),M=P.length-1,O=0;O<=M;O++){var F=P[O],I=p.measureText(F).width,N=I;O<M&&(N+=E),N>A&&O>0&&(x+=`
`,A=m),x+=F,O<M?(x+=" ",A-=N):A-=I}C<S&&(x+=`
`)}return x},getWrappedText:function(v){v===void 0&&(v=this._text),this.style.syncFont(this.canvas,this.context);var p=this.runWordWrap(v);return p.split(this.splitRegExp)},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this._text&&(this._text=v.toString(),this.updateText()),this},setStyle:function(v){return this.style.setStyle(v)},setFont:function(v){return this.style.setFont(v)},setFontFamily:function(v){return this.style.setFontFamily(v)},setFontSize:function(v){return this.style.setFontSize(v)},setFontStyle:function(v){return this.style.setFontStyle(v)},setFixedSize:function(v,p){return this.style.setFixedSize(v,p)},setBackgroundColor:function(v){return this.style.setBackgroundColor(v)},setFill:function(v){return this.style.setFill(v)},setColor:function(v){return this.style.setColor(v)},setStroke:function(v,p){return this.style.setStroke(v,p)},setShadow:function(v,p,m,x,T,S){return this.style.setShadow(v,p,m,x,T,S)},setShadowOffset:function(v,p){return this.style.setShadowOffset(v,p)},setShadowColor:function(v){return this.style.setShadowColor(v)},setShadowBlur:function(v){return this.style.setShadowBlur(v)},setShadowStroke:function(v){return this.style.setShadowStroke(v)},setShadowFill:function(v){return this.style.setShadowFill(v)},setWordWrapWidth:function(v,p){return this.style.setWordWrapWidth(v,p)},setWordWrapCallback:function(v,p){return this.style.setWordWrapCallback(v,p)},setAlign:function(v){return this.style.setAlign(v)},setResolution:function(v){return this.style.setResolution(v)},setLineSpacing:function(v){return this.lineSpacing=v,this.updateText()},setPadding:function(v,p,m,x){if(typeof v=="object"){var T=v,S=u(T,"x",null);S!==null?(v=S,m=S):(v=u(T,"left",0),m=u(T,"right",v));var E=u(T,"y",null);E!==null?(p=E,x=E):(p=u(T,"top",0),x=u(T,"bottom",p))}else v===void 0&&(v=0),p===void 0&&(p=v),m===void 0&&(m=v),x===void 0&&(x=p);return this.padding.left=v,this.padding.top=p,this.padding.right=m,this.padding.bottom=x,this.updateText()},setMaxLines:function(v){return this.style.setMaxLines(v)},updateText:function(){var v=this.canvas,p=this.context,m=this.style,x=m.resolution,T=m.metrics;m.syncFont(v,p);var S=this._text;(m.wordWrapWidth||m.wordWrapCallback)&&(S=this.runWordWrap(this._text));var E=S.split(this.splitRegExp),C=r(this,T,E),A=this.padding,P;m.fixedWidth===0?(this.width=C.width+A.left+A.right,P=C.width):(this.width=m.fixedWidth,P=this.width-A.left-A.right,P<C.width&&(P=C.width)),m.fixedHeight===0?this.height=C.height+A.top+A.bottom:this.height=m.fixedHeight;var M=this.width,O=this.height;this.updateDisplayOrigin(),M*=x,O*=x,M=Math.max(M,1),O=Math.max(O,1),v.width!==M||v.height!==O?(v.width=M,v.height=O,this.frame.setSize(M,O),m.syncFont(v,p)):p.clearRect(0,0,M,O),p.save(),p.scale(x,x),m.backgroundColor&&(p.fillStyle=m.backgroundColor,p.fillRect(0,0,M,O)),m.syncStyle(v,p),p.textBaseline="alphabetic",p.translate(A.left,A.top);for(var F,I,N=0;N<C.lines;N++){if(F=m.strokeThickness/2,I=m.strokeThickness/2+N*C.lineHeight+T.ascent,N>0&&(I+=C.lineSpacing*N),m.rtl)F=M-F;else if(m.align==="right")F+=P-C.lineWidths[N];else if(m.align==="center")F+=(P-C.lineWidths[N])/2;else if(m.align==="justify"){var G=.85;if(C.lineWidths[N]/C.width>=G){var Y=C.width-C.lineWidths[N],z=p.measureText(" ").width,W=E[N].trim(),D=W.split(" ");Y+=(E[N].length-W.length)*z;for(var L=Math.floor(Y/z),B=0;L>0;)D[B]+=" ",B=(B+1)%(D.length-1||1),--L;E[N]=D.join(" ")}}this.autoRound&&(F=Math.round(F),I=Math.round(I)),m.strokeThickness&&(this.style.syncShadow(p,m.shadowStroke),p.strokeText(E[N],F,I)),m.color&&(this.style.syncShadow(p,m.shadowFill),p.fillText(E[N],F,I))}p.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(v,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var w=this.input;return w&&!w.customHitArea&&(w.hitArea.width=this.width,w.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(v){this.setText(v)}},toJSON:function(){var v=a.ToJSON(this),p={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return v.data=p,v},preDestroy:function(){this.style.rtl&&o(this.canvas),c.remove(this.canvas),this.texture.destroy()}});h.exports=d},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),c=t(0),s=t(11),a=t(22),n=t(15),i=t(361),r=t(192),u=t(1091),o=t(3),l=8,f=new c({Extends:n,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,u],initialize:function(v,p,m,x,T,S,E){var C=v.sys.renderer;n.call(this,v,"TileSprite");var A=v.sys.textures.get(S),P=A.get(E);!x||!T?(x=P.width,T=P.height):(x=Math.floor(x),T=Math.floor(T)),this._tilePosition=new o,this._tileScale=new o(1,1),this.dirty=!1,this.renderer=C,this.canvas=e.create(this,x,T),this.context=this.canvas.getContext("2d"),this.displayTexture=A,this.displayFrame=P,this._crop=this.resetCropObject(),this.texture=v.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=i(P.width),this.potHeight=i(P.height),this.fillCanvas=e.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(p,m),this.setSize(x,T),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),v.sys.game.events.on(a.CONTEXT_RESTORED,function(M){if(M){var O=M.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=M.createTexture2D(0,O.LINEAR,O.LINEAR,O.REPEAT,O.REPEAT,O.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(d,v){return this.displayTexture=this.scene.sys.textures.get(d),this.setFrame(v)},setFrame:function(d){var v=this.displayTexture.get(d);return this.potWidth=i(v.width),this.potHeight=i(v.height),this.canvas.width=0,!v.cutWidth||!v.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this.displayFrame=v,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(d,v){return d!==void 0&&(this.tilePositionX=d),v!==void 0&&(this.tilePositionY=v),this},setTileScale:function(d,v){return d===void 0&&(d=this.tileScaleX),v===void 0&&(v=d),this.tileScaleX=d,this.tileScaleY=v,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var d=this.displayFrame;if(d.source.isRenderTexture||d.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var v=this.fillContext,p=this.fillCanvas,m=this.potWidth,x=this.potHeight;(!this.renderer||!this.renderer.gl)&&(m=d.cutWidth,x=d.cutHeight),v.clearRect(0,0,m,x),p.width=m,p.height=x,v.drawImage(d.source.image,d.cutX,d.cutY,d.cutWidth,d.cutHeight,0,0,m,x),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(p,this.fillPattern):this.fillPattern=v.createPattern(p,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var d=this.canvas;if((d.width!==this.width||d.height!==this.height)&&(d.width=this.width,d.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var v=this.context;this.scene.sys.game.config.antialias||r.disable(v);var p=this._tileScale.x,m=this._tileScale.y,x=this._tilePosition.x,T=this._tilePosition.y;v.clearRect(0,0,this.width,this.height),v.save(),v.scale(p,m),v.translate(-x,-T),v.fillStyle=this.fillPattern,v.fillRect(x,T,this.width/p,this.height/m),v.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),e.remove(this.canvas),e.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(d){this._tilePosition.x=d,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(d){this._tilePosition.y=d,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(d){this._tileScale.x=d,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(d){this._tileScale.y=d,this.dirty=!0}}});h.exports=f},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(18),s=t(11),a=t(75),n=t(22),i=t(51),r=t(15),u=t(70),o=t(222),l=t(1094),f=t(14),d=new e({Extends:r,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,l],initialize:function(p,m,x,T){r.call(this,p,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=o(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=f.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(m,x),this.initPipeline(),T&&this.changeSource(T,!1);var S=p.sys.game.events;S.on(n.PAUSE,this.globalPause,this),S.on(n.RESUME,this.globalResume,this);var E=p.sys.sound;E&&E.on(u.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(v,p,m){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var x=this.video;if(!x)return console.warn("Video not loaded"),this;v===void 0&&(v=x.loop);var T=this.scene.sys.sound;T&&T.mute&&this.setMute(!0),isNaN(p)||(this._markerIn=p),!isNaN(m)&&m>p&&(this._markerOut=m),x.loop=v;var S=this._callbacks,E=x.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(x.addEventListener("playing",S.play,!0),x.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),x.addEventListener("ended",S.end,!0),x.addEventListener("timeupdate",S.time,!0),x.addEventListener("seeking",S.seeking,!0),x.addEventListener("seeked",S.seeked,!0),this},changeSource:function(v,p,m,x,T){p===void 0&&(p=!0);var S=this.video;S&&this.stop();var E=this.scene.sys.cache.video.get(v);return E?(this.video=E,this._cacheKey=v,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,p&&this.play(m,x,T)):this.video=null,this},addMarker:function(v,p,m){return!isNaN(p)&&p>=0&&!isNaN(m)&&(this.markers[v]=[p,m]),this},playMarker:function(v,p){var m=this.markers[v];return m&&this.play(p,m[0],m[1]),this},removeMarker:function(v){return delete this.markers[v],this},snapshot:function(v,p){return v===void 0&&(v=this.width),p===void 0&&(p=this.height),this.snapshotArea(0,0,this.width,this.height,v,p)},snapshotArea:function(v,p,m,x,T,S){v===void 0&&(v=0),p===void 0&&(p=0),m===void 0&&(m=this.width),x===void 0&&(x=this.height),T===void 0&&(T=m),S===void 0&&(S=x);var E=this.video,C=this.snapshotTexture;return C?(C.setSize(T,S),E&&C.context.drawImage(E,v,p,m,x,0,0,T,S)):(C=this.scene.sys.textures.createCanvas(o(),T,S),this.snapshotTexture=C,E&&C.context.drawImage(E,v,p,m,x,0,0,T,S)),C.update()},saveSnapshotTexture:function(v){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,v):this.snapshotTexture=this.scene.sys.textures.createCanvas(v,this.width,this.height),this.snapshotTexture},loadURL:function(v,p,m){m===void 0&&(m=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var x=document.createElement("video");return x.controls=!1,m&&(x.muted=!0,x.defaultMuted=!0,x.setAttribute("autoplay","autoplay")),x.setAttribute("playsinline","playsinline"),x.setAttribute("preload","auto"),x.addEventListener("error",this._callbacks.error,!0),x.src=v,x.load(),this.video=x,this},loadMediaStream:function(v,p,m){m===void 0&&(m=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var x=document.createElement("video");x.controls=!1,m&&(x.muted=!0,x.defaultMuted=!0,x.setAttribute("autoplay","autoplay")),x.setAttribute("playsinline","playsinline"),x.setAttribute("preload","auto"),x.addEventListener("error",this._callbacks.error,!0);try{x.srcObject=v}catch{x.src=window.URL.createObjectURL(v)}return x.load(),this.video=x,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(v){this.scene.sys.input.once(i.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(a.VIDEO_ERROR,this,v)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(v){this.stop(),this.emit(a.VIDEO_ERROR,this,v)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(a.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(a.VIDEO_PLAY,this)},completeHandler:function(){this.emit(a.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(a.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var v=this.video;if(v){var p=v.currentTime;p!==this._lastUpdate&&(this._lastUpdate=p,this.updateTexture(),p>=this._markerOut&&(v.loop?(v.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=p,this.emit(a.VIDEO_LOOP,this)):(this.emit(a.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(a.VIDEO_TIMEOUT,this))},updateTexture:function(){var v=this.video,p=v.videoWidth,m=v.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,v,p,m),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,p,m),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,p,m);else{var x=this.videoTextureSource;x.source!==v&&(x.source=v,x.width=p,x.height=m),x.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(v){var p=this.video;if(p){var m=p.duration;if(m!==1/0&&!isNaN(m)){var x=m*v;this.setCurrentTime(x)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(v){var p=this.video;if(p){if(typeof v=="string"){var m=v[0],x=parseFloat(v.substr(1));m==="+"?v=p.currentTime+x:m==="-"&&(v=p.currentTime-x)}p.currentTime=v,this._lastUpdate=v}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(a.VIDEO_SEEKED,this);var v=this.video;v&&this.updateTexture()},getProgress:function(){var v=this.video;if(v){var p=v.currentTime,m=v.duration;if(m!==1/0&&!isNaN(m))return p/m}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(v){v===void 0&&(v=!0),this._codeMuted=v;var p=this.video;return p&&(p.muted=this._systemMuted?!0:v),this},isMuted:function(){return this._codeMuted},globalMute:function(v,p){this._systemMuted=p;var m=this.video;m&&(m.muted=this._codeMuted?!0:p)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(v){v===void 0&&(v=!0);var p=this.video;return this._codePaused=v,p&&(v?p.paused||p.pause():v||p.paused&&!this._systemPaused&&p.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(v){return v===void 0&&(v=1),this.video&&(this.video.volume=c(v,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(v){return this.video&&(this.video.playbackRate=v),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(v){return v===void 0&&(v=!0),this.video&&(this.video.loop=v),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(v,p){return p===void 0&&(p=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,v),this._key=v,this.flipY=p,this.videoTextureSource&&this.videoTextureSource.setFlipY(p),this.videoTexture},stop:function(){var v=this.video;if(v){var p=this._callbacks;for(var m in p)v.removeEventListener(m,p[m],!0);v.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var v=this.video;if(v){for(v.parentNode&&v.parentNode.removeChild(v);v.hasChildNodes();)v.removeChild(v.firstChild);v.removeAttribute("autoplay"),v.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var v=this.scene.sys.game.events;v.off(n.PAUSE,this.globalPause,this),v.off(n.RESUME,this.globalResume,this);var p=this.scene.sys.sound;p&&p.off(u.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});h.exports=d},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(228),s=t(470),a=t(56),n=new e({initialize:function(r){this.type=a.POLYGON,this.area=0,this.points=[],r&&this.setTo(r)},contains:function(i,r){return c(this,i,r)},setTo:function(i){if(this.area=0,this.points=[],typeof i=="string"&&(i=i.split(" ")),!Array.isArray(i))return this;for(var r,u=Number.MAX_VALUE,o=0;o<i.length;o++)r={x:0,y:0},typeof i[o]=="number"||typeof i[o]=="string"?(r.x=parseFloat(i[o]),r.y=parseFloat(i[o+1]),o++):Array.isArray(i[o])?(r.x=i[o][0],r.y=i[o][1]):(r.x=i[o].x,r.y=i[o].y),this.points.push(r),r.y<u&&(u=r.y);return this.calculateArea(u),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var i=0,r,u,o=0;o<this.points.length-1;o++)r=this.points[o],u=this.points[o+1],i+=(u.x-r.x)*(r.y+u.y);return r=this.points[0],u=this.points[this.points.length-1],i+=(r.x-u.x)*(u.y+r.y),this.area=-i*.5,this.area},getPoints:function(i,r,u){return s(this,i,r,u)}});h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){for(var a=!1,n=-1,i=e.points.length-1;++n<e.points.length;i=n){var r=e.points[n].x,u=e.points[n].y,o=e.points[i].x,l=e.points[i].y;(u<=s&&s<l||l<=s&&s<u)&&c<(o-r)*(s-u)/(l-u)+r&&(a=!a)}return a};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(15),a=t(2),n=t(17),i=t(478),r=t(1176),u=t(25),o=new e({Extends:s,Mixins:[c.ComputedSize,c.Depth,c.GetBounds,c.Mask,c.Origin,c.ScrollFactor,c.Transform,c.Visible,r],initialize:function(f,d,v,p,m,x,T,S){v===void 0&&(v=0),p===void 0&&(p=0),m===void 0&&(m=128),x===void 0&&(x=128),s.call(this,f,"Shader"),this.blendMode=-1,this.shader;var E=f.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(v,p),this.setSize(m,x),this.setOrigin(.5,.5),this.setShader(d,T,S)},willRender:function(l){return this.renderToTexture?!0:!(s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&l.id)},setRenderToTexture:function(l,f){if(f===void 0&&(f=!1),!this.renderToTexture){var d=this.width,v=this.height,p=this.renderer;this.glTexture=p.createTextureFromSource(null,d,v,0),this.glTexture.flipY=f,this.framebuffer=p.createFramebuffer(d,v,this.glTexture,!1),this._rendererWidth=d,this._rendererHeight=v,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),l&&(this.texture=this.scene.sys.textures.addGLTexture(l,this.glTexture,d,v))}return this.shader&&(p.pipelines.clear(),this.load(),this.flush(),p.pipelines.rebind()),this},setShader:function(l,f,d){if(f===void 0&&(f=[]),typeof l=="string"){var v=this.scene.sys.cache.shader;if(!v.has(l))return console.warn("Shader missing: "+l),this;this.shader=v.get(l)}else this.shader=l;var p=this.gl,m=this.renderer;this.program&&p.deleteProgram(this.program);var x=m.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);p.uniformMatrix4fv(p.getUniformLocation(x,"uViewMatrix"),!1,this.viewMatrix),p.uniformMatrix4fv(p.getUniformLocation(x,"uProjectionMatrix"),!1,this.projectionMatrix),p.uniform2f(p.getUniformLocation(x,"uResolution"),this.width,this.height),this.program=x;var T=new Date,S={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[T.getFullYear(),T.getMonth(),T.getDate(),T.getHours()*60*60+T.getMinutes()*60+T.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=n(!0,{},this.shader.uniforms,S):this.uniforms=S;for(var E=0;E<4;E++)f[E]&&this.setSampler2D("iChannel"+E,f[E],E,d);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(l){return this.pointer=l,this},projOrtho:function(l,f,d,v){var p=-1e3,m=1e3,x=1/(l-f),T=1/(d-v),S=1/(p-m),E=this.projectionMatrix;E[0]=-2*x,E[5]=-2*T,E[10]=2*S,E[12]=(l+f)*x,E[13]=(v+d)*T,E[14]=(m+p)*S;var C=this.program,A=this.gl,P=this.renderer;P.setProgram(C),A.uniformMatrix4fv(A.getUniformLocation(C,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=f,this._rendererHeight=d},initUniforms:function(){var l=this.gl,f=this.renderer.glFuncMap,d=this.program;this._textureCount=0;for(var v in this.uniforms){var p=this.uniforms[v],m=p.type,x=f[m];p.uniformLocation=l.getUniformLocation(d,v),m!=="sampler2D"&&(p.glMatrix=x.matrix,p.glValueLength=x.length,p.glFunc=x.func)}},setSampler2DBuffer:function(l,f,d,v,p,m){p===void 0&&(p=0),m===void 0&&(m={});var x=this.uniforms[l];return x.value=f,m.width=d,m.height=v,x.textureData=m,this._textureCount=p,this.initSampler2D(x),this},setSampler2D:function(l,f,d,v){d===void 0&&(d=0);var p=this.scene.sys.textures;if(p.exists(f)){var m=p.getFrame(f);if(m.glTexture&&m.glTexture.isRenderTexture)return this.setSampler2DBuffer(l,m.glTexture,m.width,m.height,d,v);var x=this.uniforms[l],T=m.source;x.textureKey=f,x.source=T.image,x.value=m.glTexture,T.isGLTexture&&(v||(v={}),v.width=T.width,v.height=T.height),v&&(x.textureData=v),this._textureCount=d,this.initSampler2D(x)}return this},setUniform:function(l,f){return i(this.uniforms,l,f),this},getUniform:function(l){return a(this.uniforms,l,null)},setChannel0:function(l,f){return this.setSampler2D("iChannel0",l,0,f)},setChannel1:function(l,f){return this.setSampler2D("iChannel1",l,1,f)},setChannel2:function(l,f){return this.setSampler2D("iChannel2",l,2,f)},setChannel3:function(l,f){return this.setSampler2D("iChannel3",l,3,f)},initSampler2D:function(l){if(l.value){var f=this.gl;f.activeTexture(f.TEXTURE0+this._textureCount),f.bindTexture(f.TEXTURE_2D,l.value);var d=l.textureData;if(d&&!l.value.isRenderTexture){var v=f[a(d,"magFilter","linear").toUpperCase()],p=f[a(d,"minFilter","linear").toUpperCase()],m=f[a(d,"wrapS","repeat").toUpperCase()],x=f[a(d,"wrapT","repeat").toUpperCase()],T=f[a(d,"format","rgba").toUpperCase()];if(d.repeat&&(m=f.REPEAT,x=f.REPEAT),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!!d.flipY),d.width){var S=a(d,"width",512),E=a(d,"height",2),C=a(d,"border",0);f.texImage2D(f.TEXTURE_2D,0,T,S,E,C,T,f.UNSIGNED_BYTE,null)}else f.texImage2D(f.TEXTURE_2D,0,T,f.RGBA,f.UNSIGNED_BYTE,l.source);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,v),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,p),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,m),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,x)}this.renderer.setProgram(this.program),f.uniform1i(l.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var l=this.gl,f=this.uniforms,d,v,p,m,x,T=0;for(var S in f)d=f[S],p=d.glFunc,v=d.glValueLength,m=d.uniformLocation,x=d.value,x!==null&&(v===1?d.glMatrix?p.call(l,m,d.transpose,x):p.call(l,m,x):v===2?p.call(l,m,x.x,x.y):v===3?p.call(l,m,x.x,x.y,x.z):v===4?p.call(l,m,x.x,x.y,x.z,x.w):d.type==="sampler2D"&&(l.activeTexture(l.TEXTURE0+T),l.bindTexture(l.TEXTURE_2D,x),l.uniform1i(m,T),T++))},load:function(l){var f=this.gl,d=this.width,v=this.height,p=this.renderer,m=this.program,x=this.viewMatrix;if(!this.renderToTexture){var T=-this._displayOriginX,S=-this._displayOriginY;x[0]=l[0],x[1]=l[1],x[4]=l[2],x[5]=l[3],x[8]=l[4],x[9]=l[5],x[12]=x[0]*T+x[4]*S,x[13]=x[1]*T+x[5]*S}f.useProgram(m),f.uniformMatrix4fv(f.getUniformLocation(m,"uViewMatrix"),!1,x),f.uniform2f(f.getUniformLocation(m,"uResolution"),this.width,this.height);var E=this.uniforms,C=E.resolution;C.value.x=d,C.value.y=v,E.time.value=p.game.loop.getDuration();var A=this.pointer;if(A){var P=E.mouse,M=A.x/d,O=1-A.y/v;P.value.x=M.toFixed(2),P.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var l=this.width,f=this.height,d=this.program,v=this.gl,p=this.vertexBuffer,m=this.renderer,x=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(m.setFramebuffer(this.framebuffer),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT)),v.bindBuffer(v.ARRAY_BUFFER,p);var T=v.getAttribLocation(d,"inPosition");T!==-1&&(v.enableVertexAttribArray(T),v.vertexAttribPointer(T,2,v.FLOAT,!1,x,0));var S=this.vertexViewF32;S[3]=f,S[4]=l,S[5]=f,S[8]=l,S[9]=f,S[10]=l;var E=6;v.bufferSubData(v.ARRAY_BUFFER,0,this.bytes.subarray(0,E*x)),v.drawArrays(v.TRIANGLES,0,E),this.renderToTexture&&m.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var l=this.gl;l.deleteProgram(this.program),l.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});h.exports=o},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(36),a=t(116),n=t(15),i=t(479),r=t(480),u=t(19),o=t(69),l=t(1179),f=t(79),d=t(39),v=t(117),p=new e({Extends:n,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Mask,c.Pipeline,c.Size,c.Texture,c.Transform,c.Visible,c.ScrollFactor,l],initialize:function(x,T,S,E,C,A,P,M,O,F,I,N){T===void 0&&(T=0),S===void 0&&(S=0),E===void 0&&(E="__WHITE"),n.call(this,x,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new d,this.modelScale=new d(1,1,1),this.modelRotation=new d,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new o,this.viewPosition=new d,this.viewMatrix=new o,this.projectionMatrix=new o,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var G=x.sys.renderer;this.setPosition(T,S),this.setTexture(E,C),this.setSize(G.width,G.height),this.initPipeline(),this.setPerspective(G.width,G.height),A&&this.addVertices(A,P,M,O,F,I,N)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(m){return this.viewPosition.addScale(d.LEFT,m),this.dirtyCache[10]=1,this},panY:function(m){return this.viewPosition.y+=d.DOWN.y*m,this.dirtyCache[10]=1,this},panZ:function(m){return this.viewPosition.z+=m,this.dirtyCache[10]=1,this},setPerspective:function(m,x,T,S,E){return T===void 0&&(T=45),S===void 0&&(S=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(s(T),m/x,S,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(m,x,T,S){return m===void 0&&(m=this.scene.sys.renderer.getAspectRatio()),x===void 0&&(x=1),T===void 0&&(T=-1e3),S===void 0&&(S=1e3),this.projectionMatrix.ortho(-m,m,-x,x,T,S),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(m){m.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(m,x,T,S,E,C,A,P,M){var O=this.scene.sys.cache.obj.get(m);return O&&r(O,this,x,T,S,E,C,A,P,M),this},sortByDepth:function(m,x){return m.depth-x.depth},depthSort:function(){return f(this.faces,this.sortByDepth),this},addVertex:function(m,x,T,S,E,C,A){var P=new v(m,x,T,S,E,C,A);return this.vertices.push(P),P},addFace:function(m,x,T){var S=new a(m,x,T);return this.faces.push(S),this.dirtyCache[9]=-1,S},addVertices:function(m,x,T,S,E,C,A){var P=i(m,x,T,S,E,C,A);return P&&(this.faces=this.faces.concat(P.faces),this.vertices=this.vertices.concat(P.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(m){return this.faces[m]},getFaceAt:function(m,x,T){T===void 0&&(T=this.scene.sys.cameras.main);for(var S=u(this,T).calc,E=this.faces,C=[],A=0;A<E.length;A++){var P=E[A];P.contains(m,x,S)&&C.push(P)}return f(C,this.sortByDepth)},setDebug:function(m,x){return this.debugGraphic=m,!m&&!x?this.debugCallback=null:x?this.debugCallback=x:this.debugCallback=this.renderDebug,this},isDirty:function(){var m=this.modelPosition,x=this.modelRotation,T=this.modelScale,S=this.dirtyCache,E=m.x,C=m.y,A=m.z,P=x.x,M=x.y,O=x.z,F=T.x,I=T.y,N=T.z,G=this.getFaceCount(),Y=S[0],z=S[1],W=S[2],D=S[3],L=S[4],B=S[5],w=S[6],V=S[7],U=S[8],X=S[9];return S[0]=E,S[1]=C,S[2]=A,S[3]=P,S[4]=M,S[5]=O,S[6]=F,S[7]=I,S[8]=N,S[9]=G,Y!==E||z!==C||W!==A||D!==P||L!==M||B!==O||w!==F||V!==I||U!==N||X!==G},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var m=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!m[10]&&!this.isDirty())){var x=this.width,T=this.height,S=this.viewMatrix,E=this.viewPosition;m[10]&&(S.identity(),S.translate(E),S.invert(),m[10]=0);var C=this.transformMatrix;C.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var A=E.z,P=this.faces,M=0;M<P.length;M++)P[M].transformCoordinatesLocal(C,x,T,A);this.depthSort()}},renderDebug:function(m,x){for(var T=m.debugGraphic,S=0;S<x.length;S++){var E=x[S],C=E.vertex1.tx,A=E.vertex1.ty,P=E.vertex2.tx,M=E.vertex2.ty,O=E.vertex3.tx,F=E.vertex3.ty;T.strokeTriangle(C,A,P,M,O,F)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});h.exports=p},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(50),c=function(s,a){return e(s.x,s.y,a.x,a.y)<=s.radius+a.radius};h.exports=c},function(h,g,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=t(233),s=function(a,n,i){if(i===void 0&&(i=[]),c(a,n)){var r=a.x1,u=a.y1,o=a.x2,l=a.y2,f=n.x,d=n.y,v=n.radius,p=o-r,m=l-u,x=r-f,T=u-d,S=p*p+m*m,E=2*(p*x+m*T),C=x*x+T*T-v*v,A=E*E-4*S*C,P,M;if(A===0){var O=-E/(2*S);P=r+O*p,M=u+O*m,O>=0&&O<=1&&i.push(new e(P,M))}else if(A>0){var F=(-E-Math.sqrt(A))/(2*S);P=r+F*p,M=u+F*m,F>=0&&F<=1&&i.push(new e(P,M));var I=(-E+Math.sqrt(A))/(2*S);P=r+I*p,M=u+I*m,I>=0&&I<=1&&i.push(new e(P,M))}}return i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),c=t(4),s=new c,a=function(n,i,r){if(r===void 0&&(r=s),e(i,n.x1,n.y1))return r.x=n.x1,r.y=n.y1,!0;if(e(i,n.x2,n.y2))return r.x=n.x2,r.y=n.y2,!0;var u=n.x2-n.x1,o=n.y2-n.y1,l=i.x-n.x1,f=i.y-n.y1,d=u*u+o*o,v=u,p=o;if(d>0){var m=(l*u+f*o)/d;v*=m,p*=m}r.x=n.x1+v,r.y=n.y1+p;var x=v*v+p*p;return x<=d&&v*u+p*o>=0&&e(i,r.x,r.y)};h.exports=a},function(h,g,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=t(96),s=t(488),a=function(n,i,r){if(r===void 0&&(r=[]),s(n,i))for(var u=i.getLineA(),o=i.getLineB(),l=i.getLineC(),f=i.getLineD(),d=[new e,new e,new e,new e],v=[c(u,n,d[0]),c(o,n,d[1]),c(l,n,d[2]),c(f,n,d[3])],p=0;p<4;p++)v[p]&&r.push(d[p]);return r};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s===void 0&&(s=!1),a===void 0&&(a=[]);for(var n=e.x3-e.x1,i=e.y3-e.y1,r=e.x2-e.x1,u=e.y2-e.y1,o=n*n+i*i,l=n*r+i*u,f=r*r+u*u,d=o*f-l*l,v=d===0?0:1/d,p,m,x,T,S,E,C=e.x1,A=e.y1,P=0;P<c.length&&(x=c[P].x-C,T=c[P].y-A,S=n*x+i*T,E=r*x+u*T,p=(f*S-l*E)*v,m=(o*E-l*S)*v,!(p>=0&&m>=0&&p+m<1&&(a.push({x:c[P].x,y:c[P].y}),s)));P++);return a};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=Math.cos(a),i=Math.sin(a),r=e.x1-c,u=e.y1-s;return e.x1=r*n-u*i+c,e.y1=r*i+u*n+s,r=e.x2-c,u=e.y2-s,e.x2=r*n-u*i+c,e.y2=r*i+u*n+s,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.height===0?NaN:e.width/e.height};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=Math.cos(a),i=Math.sin(a),r=e.x1-c,u=e.y1-s;return e.x1=r*n-u*i+c,e.y1=r*i+u*n+s,r=e.x2-c,u=e.y2-s,e.x2=r*n-u*i+c,e.y2=r*i+u*n+s,r=e.x3-c,u=e.y3-s,e.x3=r*n-u*i+c,e.y3=r*i+u*n+s,e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BUTTON_DOWN:t(1310),BUTTON_UP:t(1311),CONNECTED:t(1312),DISCONNECTED:t(1313),GAMEPAD_BUTTON_DOWN:t(1314),GAMEPAD_BUTTON_UP:t(1315)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),c=t(156),s=function(a,n){var i=a===void 0?c():e({},a);if(n)for(var r in n)n[r]!==void 0&&(i[r]=n[r]);return i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=t(408),u=new e({Extends:s,initialize:function(l,f,d,v){var p="xml";if(i(f)){var m=f;f=n(m,"key"),d=n(m,"url"),v=n(m,"xhrSettings"),p=n(m,"extension",p)}var x={type:"xml",cache:l.cacheManager.xml,extension:p,responseType:"text",key:f,url:d,xhrSettings:v};s.call(this,l,x)},onProcess:function(){this.state=c.FILE_PROCESSING,this.data=r(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});a.register("xml",function(o,l,f){if(Array.isArray(o))for(var d=0;d<o.length;d++)this.addFile(new u(this,o[d]));else this.addFile(new u(this,o,l,f));return this}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d){var v="text",p="txt",m=o.cacheManager.text;if(i(l)){var x=l;l=n(x,"key"),f=n(x,"url"),d=n(x,"xhrSettings"),p=n(x,"extension",p),v=n(x,"type",v),m=n(x,"cache",m)}var T={type:v,cache:m,extension:p,responseType:"text",key:l,url:f,xhrSettings:d};s.call(this,o,T)},onProcess:function(){this.state=c.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",function(u,o,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new r(this,u[f]));else this.addFile(new r(this,u,o,l));return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Acceleration:t(1368),Angular:t(1369),Bounce:t(1370),Debug:t(1371),Drag:t(1372),Enable:t(1373),Friction:t(1374),Gravity:t(1375),Immovable:t(1376),Mass:t(1377),OverlapCirc:t(523),OverlapRect:t(244),Pushable:t(1378),Size:t(1379),Velocity:t(1380)}},function(h,g){var t=function(e,c,s,a,n,i,r){i===void 0&&(i=!0),r===void 0&&(r=!1);var u=[],o=[],l=e.treeMinMax;if(l.minX=c,l.minY=s,l.maxX=c+a,l.maxY=s+n,r&&(o=e.staticTree.search(l)),i&&e.useTree)u=e.tree.search(l);else if(i){var f=e.bodies,d={position:{x:c,y:s},left:c,top:s,right:c+a,bottom:s+n,isCircle:!1},v=e.intersects;f.iterate(function(p){v(p,d)&&u.push(p)})}return o.concat(u)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={COLLIDE:t(1381),OVERLAP:t(1382),PAUSE:t(1383),RESUME:t(1384),TILE_COLLIDE:t(1385),TILE_OVERLAP:t(1386),WORLD_BOUNDS:t(1387),WORLD_STEP:t(1388)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),c=function(s,a,n,i){var r=0,u=s.deltaAbsX()+a.deltaAbsX()+i;return s._dx===0&&a._dx===0?(s.embedded=!0,a.embedded=!0):s._dx>a._dx?(r=s.right-a.x,r>u&&!n||s.checkCollision.right===!1||a.checkCollision.left===!1?r=0:(s.touching.none=!1,s.touching.right=!0,a.touching.none=!1,a.touching.left=!0,a.physicsType===e.STATIC_BODY&&!n&&(s.blocked.none=!1,s.blocked.right=!0),s.physicsType===e.STATIC_BODY&&!n&&(a.blocked.none=!1,a.blocked.left=!0))):s._dx<a._dx&&(r=s.x-a.width-a.x,-r>u&&!n||s.checkCollision.left===!1||a.checkCollision.right===!1?r=0:(s.touching.none=!1,s.touching.left=!0,a.touching.none=!1,a.touching.right=!0,a.physicsType===e.STATIC_BODY&&!n&&(s.blocked.none=!1,s.blocked.left=!0),s.physicsType===e.STATIC_BODY&&!n&&(a.blocked.none=!1,a.blocked.right=!0))),s.overlapX=r,a.overlapX=r,r};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),c=function(s,a,n,i){var r=0,u=s.deltaAbsY()+a.deltaAbsY()+i;return s._dy===0&&a._dy===0?(s.embedded=!0,a.embedded=!0):s._dy>a._dy?(r=s.bottom-a.y,r>u&&!n||s.checkCollision.down===!1||a.checkCollision.up===!1?r=0:(s.touching.none=!1,s.touching.down=!0,a.touching.none=!1,a.touching.up=!0,a.physicsType===e.STATIC_BODY&&!n&&(s.blocked.none=!1,s.blocked.down=!0),s.physicsType===e.STATIC_BODY&&!n&&(a.blocked.none=!1,a.blocked.up=!0))):s._dy<a._dy&&(r=s.y-a.bottom,-r>u&&!n||s.checkCollision.up===!1||a.checkCollision.down===!1?r=0:(s.touching.none=!1,s.touching.up=!0,a.touching.none=!1,a.touching.down=!0,a.physicsType===e.STATIC_BODY&&!n&&(s.blocked.none=!1,s.blocked.up=!0),s.physicsType===e.STATIC_BODY&&!n&&(a.blocked.none=!1,a.blocked.down=!0))),s.overlapY=r,a.overlapY=r,r};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return!(c.right<=e.left||c.bottom<=e.top||c.position.x>=e.right||c.position.y>=e.bottom)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Bounce:t(1495),Collision:t(1496),Force:t(1497),Friction:t(1498),Gravity:t(1499),Mass:t(1500),Sensor:t(1501),SetBody:t(1502),Sleep:t(1503),Static:t(1520),Transform:t(1521),Velocity:t(1522)}},function(h,g){var t={};h.exports=t,function(){t.create=function(e,c){var s=e.bodyA,a=e.bodyB,n={id:t.id(s,a),bodyA:s,bodyB:a,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:s.isSensor||a.isSensor,timeCreated:c,timeUpdated:c,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(n,e,c),n},t.update=function(e,c,s){if(e.collision=c,c.collided){var a=c.supports,n=e.activeContacts,i=c.parentA,r=c.parentB;e.inverseMass=i.inverseMass+r.inverseMass,e.friction=Math.min(i.friction,r.friction),e.frictionStatic=Math.max(i.frictionStatic,r.frictionStatic),e.restitution=Math.max(i.restitution,r.restitution),e.slop=Math.max(i.slop,r.slop);for(var u=0;u<a.length;u++)n[u]=a[u].contact;var o=a.length;o<n.length&&(n.length=o),e.separation=c.depth,t.setActive(e,!0,s)}else e.isActive===!0&&t.setActive(e,!1,s)},t.setActive=function(e,c,s){c?(e.isActive=!0,e.timeUpdated=s):(e.isActive=!1,e.activeContacts.length=0)},t.id=function(e,c){return e.id<c.id?"A"+e.id+"B"+c.id:"A"+c.id+"B"+e.id}}()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CalculateFacesAt:t(252),CalculateFacesWithin:t(63),CheckIsoBounds:t(541),Copy:t(1420),CreateFromTiles:t(1421),CullBounds:t(543),CullTiles:t(544),Fill:t(1422),FilterTiles:t(1423),FindByIndex:t(1424),FindTile:t(1425),ForEachTile:t(1426),GetCullTilesFunction:t(1427),GetTileAt:t(158),GetTileAtWorldXY:t(1428),GetTilesWithin:t(26),GetTilesWithinShape:t(1429),GetTilesWithinWorldXY:t(529),GetTileToWorldXFunction:t(1430),GetTileToWorldXYFunction:t(1431),GetTileToWorldYFunction:t(1432),GetWorldToTileXFunction:t(1433),GetWorldToTileXYFunction:t(1434),GetWorldToTileYFunction:t(1435),HasTileAt:t(562),HasTileAtWorldXY:t(1436),HexagonalCullBounds:t(546),HexagonalCullTiles:t(545),HexagonalTileToWorldXY:t(550),HexagonalTileToWorldY:t(554),HexagonalWorldToTileXY:t(556),HexagonalWorldToTileY:t(560),IsInLayerBounds:t(119),IsometricCullTiles:t(547),IsometricTileToWorldXY:t(551),IsometricWorldToTileXY:t(557),PutTileAt:t(257),PutTileAtWorldXY:t(1437),PutTilesAt:t(1438),Randomize:t(1439),RemoveTileAt:t(563),RemoveTileAtWorldXY:t(1440),RenderDebug:t(1441),ReplaceByIndex:t(542),RunCull:t(159),SetCollision:t(1442),SetCollisionBetween:t(1443),SetCollisionByExclusion:t(1444),SetCollisionByProperty:t(1445),SetCollisionFromCollisionGroup:t(1446),SetLayerCollisionIndex:t(160),SetTileCollision:t(72),SetTileIndexCallback:t(1447),SetTileLocationCallback:t(1448),Shuffle:t(1449),StaggeredCullBounds:t(549),StaggeredCullTiles:t(548),StaggeredTileToWorldXY:t(552),StaggeredTileToWorldY:t(555),StaggeredWorldToTileXY:t(558),StaggeredWorldToTileY:t(561),SwapByIndex:t(1450),TileToWorldX:t(253),TileToWorldXY:t(553),TileToWorldY:t(254),WeightedRandomize:t(1451),WorldToTileX:t(255),WorldToTileXY:t(559),WorldToTileY:t(256)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),c=function(s,a,n){var i=e(s,a,!0,n),r=e(s,a-1,!0,n),u=e(s,a+1,!0,n),o=e(s-1,a,!0,n),l=e(s+1,a,!0,n),f=i&&i.collides;return f&&(i.faceTop=!0,i.faceBottom=!0,i.faceLeft=!0,i.faceRight=!0),r&&r.collides&&(f&&(i.faceTop=!1),r.faceBottom=!f),u&&u.collides&&(f&&(i.faceBottom=!1),u.faceTop=!f),o&&o.collides&&(f&&(i.faceLeft=!1),o.faceRight=!f),l&&l.collides&&(f&&(i.faceRight=!1),l.faceLeft=!f),i&&!i.collides&&i.resetFaces(),i};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=s.baseTileWidth,n=s.tilemapLayer,i=0;return n&&(c||(c=n.scene.cameras.main),i=n.x+c.scrollX*(1-n.scrollFactorX),a*=n.scaleX),i+e*a};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=s.baseTileHeight,n=s.tilemapLayer,i=0;return n&&(c||(c=n.scene.cameras.main),i=n.y+c.scrollY*(1-n.scrollFactorY),a*=n.scaleY),i+e*a};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){c===void 0&&(c=!0);var n=a.baseTileWidth,i=a.tilemapLayer;return i&&(s||(s=i.scene.cameras.main),e=e-(i.x+s.scrollX*(1-i.scrollFactorX)),n*=i.scaleX),c?Math.floor(e/n):e/n};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){c===void 0&&(c=!0);var n=a.baseTileHeight,i=a.tilemapLayer;return i&&(s||(s=i.scene.cameras.main),e=e-(i.y+s.scrollY*(1-i.scrollFactorY)),n*=i.scaleY),c?Math.floor(e/n):e/n};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(85),c=t(119),s=t(252),a=t(72),n=function(i,r,u,o,l){if(o===void 0&&(o=!0),!c(r,u,l))return null;var f=l.data[u][r],d=f&&f.collides;if(i instanceof e)l.data[u][r]===null&&(l.data[u][r]=new e(l,i.index,r,u,l.tileWidth,l.tileHeight)),l.data[u][r].copy(i);else{var v=i;l.data[u][r]===null?l.data[u][r]=new e(l,v,r,u,l.tileWidth,l.tileHeight):l.data[u][r].index=v}var p=l.data[u][r],m=l.collideIndexes.indexOf(p.index)!==-1;return a(p,m),o&&d!==p.collides&&s(r,u,l),p};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),c=function(s){return s=s.toLowerCase(),s==="isometric"?e.ISOMETRIC:s==="staggered"?e.STAGGERED:s==="hexagonal"?e.HEXAGONAL:e.ORTHOGONAL};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),c=t(120),s=t(121),a=t(85),n=function(i,r,u,o,l){for(var f=new c({tileWidth:u,tileHeight:o}),d=new s({name:i,tileWidth:u,tileHeight:o,format:e.ARRAY_2D,layers:[f]}),v=[],p=r.length,m=0,x=0;x<r.length;x++){v[x]=[];for(var T=r[x],S=0;S<T.length;S++){var E=parseInt(T[S],10);isNaN(E)||E===-1?v[x][S]=l?null:new a(f,-1,S,x,u,o):v[x][S]=new a(f,E,S,x,u,o)}m===0&&(m=T.length)}return d.width=f.width=m,d.height=f.height=p,d.widthInPixels=f.widthInPixels=m*u,d.heightInPixels=f.heightInPixels=p*o,f.data=v,d};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(571),c=t(261),s=function(i){return{x:i.x,y:i.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"],n=function(i,r,u){r===void 0&&(r=0),u===void 0&&(u=0);var o=e(i,a);if(o.x+=r,o.y+=u,i.gid){var l=c(i.gid);o.gid=l.gid,o.flippedHorizontal=l.flippedHorizontal,o.flippedVertical=l.flippedVertical,o.flippedAntiDiagonal=l.flippedAntiDiagonal}else i.polyline?o.polyline=i.polyline.map(s):i.polygon?o.polygon=i.polygon.map(s):i.ellipse?o.ellipse=i.ellipse:i.text?o.text=i.text:i.point?o.point=!0:o.rectangle=!0;return o};h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=2147483648,e=1073741824,c=536870912,s=function(a){var n=Boolean(a&t),i=Boolean(a&e),r=Boolean(a&c);a=a&~(t|e|c);var u=0,o=!1;return n&&i&&r?(u=Math.PI/2,o=!0):n&&i&&!r?(u=Math.PI,o=!1):n&&!i&&r?(u=Math.PI/2,o=!1):n&&!i&&!r?(u=0,o=!0):!n&&i&&r?(u=3*Math.PI/2,o=!1):!n&&i&&!r?(u=Math.PI,o=!0):!n&&!i&&r?(u=3*Math.PI/2,o=!0):!n&&!i&&!r&&(u=0,o=!1),{gid:a,flippedHorizontal:n,flippedVertical:i,flippedAntiDiagonal:r,rotation:u,flipped:o}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),c=t(121),s=t(564),a=t(580),n=function(i,r,u,o,l,f,d,v){u===void 0&&(u=32),o===void 0&&(o=32),l===void 0&&(l=10),f===void 0&&(f=10),v===void 0&&(v=!1);var p=null;if(Array.isArray(d)){var m=r!==void 0?r:"map";p=s(m,e.ARRAY_2D,d,u,o,v)}else if(r!==void 0){var x=i.cache.tilemap.get(r);x?p=s(r,x.format,x.data,u,o,v):console.warn("No map data found for key "+r)}return p===null&&(p=new c({tileWidth:u,tileHeight:o,width:l,height:f})),new a(i,p)};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),c=function(s){var a=e(s,"targets",null);return a===null||(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a])),a};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(n){return!!n.getActive&&typeof n.getActive=="function"}function e(n){return!!n.getStart&&typeof n.getStart=="function"}function c(n){return!!n.getEnd&&typeof n.getEnd=="function"}function s(n){return e(n)||c(n)||t(n)}var a=function(n,i){var r,u=function(E,C,A){return A},o=function(E,C,A){return A},l=null,f=typeof i;if(f==="number")u=function(){return i};else if(f==="string"){var d=i[0],v=parseFloat(i.substr(2));switch(d){case"+":u=function(E,C,A){return A+v};break;case"-":u=function(E,C,A){return A-v};break;case"*":u=function(E,C,A){return A*v};break;case"/":u=function(E,C,A){return A/v};break;default:u=function(){return parseFloat(i)}}}else if(f==="function")u=i;else if(f==="object")if(s(i))t(i)&&(l=i.getActive),c(i)&&(u=i.getEnd),e(i)&&(o=i.getStart);else if(i.hasOwnProperty("value"))r=a(n,i.value);else{var p=i.hasOwnProperty("to"),m=i.hasOwnProperty("from"),x=i.hasOwnProperty("start");if(p&&(m||x)){if(r=a(n,i.to),x){var T=a(n,i.start);r.getActive=T.getEnd}if(m){var S=a(n,i.from);r.getStart=S.getEnd}}}return r||(r={getActive:l,getEnd:u,getStart:o}),r};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(9),s=t(267),a=t(16),n=t(5),i=t(100),r=t(14),u=new e({Extends:c,initialize:function(l,f,d){c.call(this),this.parent=l,this.parentIsTimeline=l.hasOwnProperty("isTimeline"),this.data=f,this.totalData=f.length,this.targets=d,this.totalTargets=d.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=i.PENDING_ADD,this._pausedState=i.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(o){return o===void 0&&(o=0),this.data[o].current},setTimeScale:function(o){return this.timeScale=o,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===i.ACTIVE},isPaused:function(){return this.state===i.PAUSED},hasTarget:function(o){return this.targets.indexOf(o)!==-1},updateTo:function(o,l,f){f===void 0&&(f=!1);for(var d=0;d<this.totalData;d++){var v=this.data[d];v.key===o&&(v.end=l,f&&(v.start=v.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===i.ACTIVE?this.seek(0):this.state===i.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===i.PENDING_ADD?this:this.play()},calcDuration:function(){for(var o=0,l=r.MAX_SAFE_INTEGER,f=this.data,d=0;d<this.totalData;d++){var v=f[d];v.t1=v.duration+v.hold,v.yoyo&&(v.t1+=v.duration),v.t2=v.t1+v.repeatDelay,v.totalDuration=v.delay+v.t1,v.repeat===-1?v.totalDuration+=v.t2*999999999999:v.repeat>0&&(v.totalDuration+=v.t2*v.repeat),v.totalDuration>o&&(o=v.totalDuration),v.delay<l&&(l=v.delay)}this.duration=Math.max(o,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=l},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=i.PENDING_ADD,this._pausedState=i.INIT,!1;for(var o=this.data,l=this.totalTargets,f=0;f<this.totalData;f++){var d=o[f],v=d.target,p=d.gen,m=d.key,x=d.index;d.delay=p.delay(v,m,0,x,l,this),d.duration=Math.max(p.duration(v,m,0,x,l,this),.001),d.hold=p.hold(v,m,0,x,l,this),d.repeat=p.repeat(v,m,0,x,l,this),d.repeatDelay=p.repeatDelay(v,m,0,x,l,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=i.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(s.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=i.LOOP_DELAY):(this.state=i.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=i.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=i.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===i.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=i.PAUSED,this)},play:function(o){o===void 0&&(o=!1);var l=this.state;return l===i.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=i.ACTIVE,this):l===i.ACTIVE||l===i.PENDING_ADD&&this._pausedState===i.PENDING_ADD?this:!this.parentIsTimeline&&(l===i.PENDING_REMOVE||l===i.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(o),this.calculatedOffset===0?this.state=i.ACTIVE:(this.countdown=this.calculatedOffset,this.state=i.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(o),this.state=i.ACTIVE,this.makeActive()),this)},resetTweenData:function(o){for(var l=this.data,f=this.totalData,d=this.totalTargets,v=0;v<f;v++){var p=l[v],m=p.target,x=p.key,T=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=p.repeat===-1?999999999999:p.repeat,o?(p.start=p.getStartValue(m,x,p.start,T,d,this),p.end=p.getEndValue(m,x,p.end,T,d,this),p.current=p.start,p.state=i.PLAYING_FORWARD):p.state=i.PENDING_RENDER,p.delay>0&&(p.elapsed=p.delay,p.state=i.DELAY),p.getActiveValue&&(m[x]=p.getActiveValue(p.target,p.key,p.start))}},resume:function(){return this.state===i.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(o,l){l===void 0&&(l=16.6),this.state===i.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var f=this.data,d=this.totalTargets,v=0;v<this.totalData;v++){var p=f[v],m=p.target,x=p.gen,T=p.key,S=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=p.repeat===-1?999999999999:p.repeat,p.delay=x.delay(m,T,0,S,d,this),p.duration=Math.max(x.duration(m,T,0,S,d,this),.001),p.hold=x.hold(m,T,0,S,d,this),p.repeat=x.repeat(m,T,0,S,d,this),p.repeatDelay=x.repeatDelay(m,T,0,S,d,this),p.current=p.start,p.state=i.PLAYING_FORWARD,this.updateTweenData(this,p,0,S,d),p.delay>0&&(p.elapsed=p.delay,p.state=i.DELAY)}this.calcDuration();var E=!1;this.state===i.PAUSED&&(E=!0,this.state=i.ACTIVE),this.isSeeking=!0;do this.update(0,l);while(this.totalProgress<o);return this.isSeeking=!1,E&&(this.state=i.PAUSED),this},setCallback:function(o,l,f,d){return this.callbacks[o]={func:l,scope:d,params:f},this},complete:function(o){return o===void 0&&(o=0),o?(this.state=i.COMPLETE_DELAY,this.countdown=o):(this.state=i.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(o){return this.state===i.ACTIVE&&o!==void 0&&this.seek(o),this.state!==i.REMOVED&&((this.state===i.PAUSED||this.state===i.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(s.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=i.PENDING_REMOVE),this},update:function(o,l){if(this.state===i.PAUSED)return!1;switch(this.useFrames&&(l=1*this.parent.timeScale),l*=this.timeScale,this.elapsed+=l,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=l,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case i.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=l,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(s.TWEEN_START,this.callbacks.onStart)));for(var f=!1,d=0;d<this.totalData;d++){var v=this.data[d];this.updateTweenData(this,v,l)&&(f=!0)}f||this.nextState();break;case i.LOOP_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=i.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop));break;case i.OFFSET_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=i.ACTIVE);break;case i.COMPLETE_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=i.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===i.PENDING_REMOVE},dispatchTweenDataEvent:function(o,l,f){this.isSeeking||(this.emit(o,this,f.key,f.target,f.current,f.previous),l&&(l.params[1]=f.target,l.func.apply(l.scope,l.params)))},dispatchTweenEvent:function(o,l){this.isSeeking||(this.emit(o,this,this.targets),l&&(l.params[1]=this.targets,l.func.apply(l.scope,l.params)))},setStateFromEnd:function(o,l,f){return l.yoyo?(l.elapsed=f,l.progress=f/l.duration,l.flipX&&l.target.toggleFlipX(),l.flipY&&l.target.toggleFlipY(),this.dispatchTweenDataEvent(s.TWEEN_YOYO,o.callbacks.onYoyo,l),l.start=l.getStartValue(l.target,l.key,l.start,l.index,o.totalTargets,o),i.PLAYING_BACKWARD):l.repeatCounter>0?(l.repeatCounter--,l.elapsed=f,l.progress=f/l.duration,l.flipX&&l.target.toggleFlipX(),l.flipY&&l.target.toggleFlipY(),l.start=l.getStartValue(l.target,l.key,l.start,l.index,o.totalTargets,o),l.end=l.getEndValue(l.target,l.key,l.start,l.index,o.totalTargets,o),l.repeatDelay>0?(l.elapsed=l.repeatDelay-f,l.current=l.start,l.target[l.key]=l.current,i.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,o.callbacks.onRepeat,l),i.PLAYING_FORWARD)):i.COMPLETE},setStateFromStart:function(o,l,f){return l.repeatCounter>0?(l.repeatCounter--,l.elapsed=f,l.progress=f/l.duration,l.flipX&&l.target.toggleFlipX(),l.flipY&&l.target.toggleFlipY(),l.end=l.getEndValue(l.target,l.key,l.start,l.index,o.totalTargets,o),l.repeatDelay>0?(l.elapsed=l.repeatDelay-f,l.current=l.start,l.target[l.key]=l.current,i.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,o.callbacks.onRepeat,l),i.PLAYING_FORWARD)):i.COMPLETE},updateTweenData:function(o,l,f){var d=l.target;switch(l.state){case i.PLAYING_FORWARD:case i.PLAYING_BACKWARD:if(!d){l.state=i.COMPLETE;break}var v=l.elapsed,p=l.duration,m=0;v+=f,v>p&&(m=v-p,v=p);var x=l.state===i.PLAYING_FORWARD,T=v/p;if(l.elapsed=v,l.progress=T,l.previous=l.current,T===1)x?(l.current=l.end,d[l.key]=l.end,l.hold>0?(l.elapsed=l.hold-m,l.state=i.HOLD_DELAY):l.state=this.setStateFromEnd(o,l,m)):(l.current=l.start,d[l.key]=l.start,l.state=this.setStateFromStart(o,l,m));else{var S=x?l.ease(T):l.ease(1-T);l.current=l.start+(l.end-l.start)*S,d[l.key]=l.current}this.dispatchTweenDataEvent(s.TWEEN_UPDATE,o.callbacks.onUpdate,l);break;case i.DELAY:l.elapsed-=f,l.elapsed<=0&&(l.elapsed=Math.abs(l.elapsed),l.state=i.PENDING_RENDER);break;case i.REPEAT_DELAY:l.elapsed-=f,l.elapsed<=0&&(l.elapsed=Math.abs(l.elapsed),l.state=i.PLAYING_FORWARD,this.dispatchTweenDataEvent(s.TWEEN_REPEAT,o.callbacks.onRepeat,l));break;case i.HOLD_DELAY:l.elapsed-=f,l.elapsed<=0&&(l.state=this.setStateFromEnd(o,l,Math.abs(l.elapsed)));break;case i.PENDING_RENDER:d?(l.start=l.getStartValue(d,l.key,d[l.key],l.index,o.totalTargets,o),l.end=l.getEndValue(d,l.key,l.start,l.index,o.totalTargets,o),l.current=l.start,d[l.key]=l.start,l.state=i.PLAYING_FORWARD):l.state=i.COMPLETE;break}return l.state!==i.COMPLETE}});u.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],n.register("tween",function(o){return this.scene.sys.tweens.add(o)}),a.register("tween",function(o){return this.scene.sys.tweens.create(o)}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={TIMELINE_COMPLETE:t(1466),TIMELINE_LOOP:t(1467),TIMELINE_PAUSE:t(1468),TIMELINE_RESUME:t(1469),TIMELINE_START:t(1470),TIMELINE_UPDATE:t(1471),TWEEN_ACTIVE:t(1472),TWEEN_COMPLETE:t(1473),TWEEN_LOOP:t(1474),TWEEN_REPEAT:t(1475),TWEEN_START:t(1476),TWEEN_STOP:t(1477),TWEEN_UPDATE:t(1478),TWEEN_YOYO:t(1479)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n,i,r,u,o,l,f,d,v,p,m){return{target:e,index:c,key:s,getActiveValue:i,getEndValue:a,getStartValue:n,ease:r,duration:0,totalDuration:0,delay:0,yoyo:l,hold:0,repeat:0,repeatDelay:0,flipX:p,flipY:m,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:u,duration:o,hold:f,repeat:d,repeatDelay:v},state:0}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),c=function(s){return e(s,-Math.PI,Math.PI)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),c=function(s){return e(s,-180,180)};h.exports=c},function(h,g,t){var e={};h.exports=e;var c=t(83),s=t(32);(function(){e.fromVertices=function(a){for(var n={},i=0;i<a.length;i++){var r=(i+1)%a.length,u=c.normalise({x:a[r].y-a[i].y,y:a[i].x-a[r].x}),o=u.y===0?1/0:u.x/u.y;o=o.toFixed(3).toString(),n[o]=u}return s.values(n)},e.rotate=function(a,n){if(n!==0)for(var i=Math.cos(n),r=Math.sin(n),u=0;u<a.length;u++){var o=a[u],l;l=o.x*i-o.y*r,o.y=o.x*r+o.y*i,o.x=l}}})()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AFTER_ADD:t(1504),AFTER_REMOVE:t(1505),AFTER_UPDATE:t(1506),BEFORE_ADD:t(1507),BEFORE_REMOVE:t(1508),BEFORE_UPDATE:t(1509),COLLISION_ACTIVE:t(1510),COLLISION_END:t(1511),COLLISION_START:t(1512),DRAG_END:t(1513),DRAG:t(1514),DRAG_START:t(1515),PAUSE:t(1516),RESUME:t(1517),SLEEP_END:t(1518),SLEEP_START:t(1519)}},function(h,g,t){var e={};h.exports=e;var c=t(274),s=t(250),a=t(84);(function(){e.collisions=function(n,i){for(var r=[],u=i.pairs.table,o=i.metrics,l=0;l<n.length;l++){var f=n[l][0],d=n[l][1];if(!((f.isStatic||f.isSleeping)&&(d.isStatic||d.isSleeping))&&e.canCollide(f.collisionFilter,d.collisionFilter)&&(o.midphaseTests+=1,a.overlaps(f.bounds,d.bounds)))for(var v=f.parts.length>1?1:0;v<f.parts.length;v++)for(var p=f.parts[v],m=d.parts.length>1?1:0;m<d.parts.length;m++){var x=d.parts[m];if(p===f&&x===d||a.overlaps(p.bounds,x.bounds)){var T=s.id(p,x),S=u[T],E;S&&S.isActive?E=S.collision:E=null;var C=c.collides(p,x,E);o.narrowphaseTests+=1,C.reused&&(o.narrowReuseCount+=1),C.collided&&(r.push(C),o.narrowDetections+=1)}}}return r},e.canCollide=function(n,i){return n.group===i.group&&n.group!==0?n.group>0:(n.mask&i.category)!==0&&(i.mask&n.category)!==0}})()},function(h,g,t){var e={};h.exports=e;var c=t(64),s=t(83);(function(){e.collides=function(a,n,i){var r,u,o,l,f=!1;if(i){var d=a.parent,v=n.parent,p=d.speed*d.speed+d.angularSpeed*d.angularSpeed+v.speed*v.speed+v.angularSpeed*v.angularSpeed;f=i&&i.collided&&p<.2,l=i}else l={collided:!1,bodyA:a,bodyB:n};if(i&&f){var m=l.axisBody,x=m===a?n:a,T=[m.axes[i.axisNumber]];if(o=e._overlapAxes(m.vertices,x.vertices,T),l.reused=!0,o.overlap<=0)return l.collided=!1,l}else{if(r=e._overlapAxes(a.vertices,n.vertices,a.axes),r.overlap<=0||(u=e._overlapAxes(n.vertices,a.vertices,n.axes),u.overlap<=0))return l.collided=!1,l;r.overlap<u.overlap?(o=r,l.axisBody=a):(o=u,l.axisBody=n),l.axisNumber=o.axisNumber}l.bodyA=a.id<n.id?a:n,l.bodyB=a.id<n.id?n:a,l.collided=!0,l.depth=o.overlap,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent,a=l.bodyA,n=l.bodyB,s.dot(o.axis,s.sub(n.position,a.position))<0?l.normal={x:o.axis.x,y:o.axis.y}:l.normal={x:-o.axis.x,y:-o.axis.y},l.tangent=s.perp(l.normal),l.penetration=l.penetration||{},l.penetration.x=l.normal.x*l.depth,l.penetration.y=l.normal.y*l.depth;var S=e._findSupports(a,n,l.normal),E=[];if(c.contains(a.vertices,S[0])&&E.push(S[0]),c.contains(a.vertices,S[1])&&E.push(S[1]),E.length<2){var C=e._findSupports(n,a,s.neg(l.normal));c.contains(n.vertices,C[0])&&E.push(C[0]),E.length<2&&c.contains(n.vertices,C[1])&&E.push(C[1])}return E.length<1&&(E=[S[0]]),l.supports=E,l},e._overlapAxes=function(a,n,i){for(var r=s._temp[0],u=s._temp[1],o={overlap:Number.MAX_VALUE},l,f,d=0;d<i.length;d++){if(f=i[d],e._projectToAxis(r,a,f),e._projectToAxis(u,n,f),l=Math.min(r.max-u.min,u.max-r.min),l<=0)return o.overlap=l,o;l<o.overlap&&(o.overlap=l,o.axis=f,o.axisNumber=d)}return o},e._projectToAxis=function(a,n,i){for(var r=s.dot(n[0],i),u=r,o=1;o<n.length;o+=1){var l=s.dot(n[o],i);l>u?u=l:l<r&&(r=l)}a.min=r,a.max=u},e._findSupports=function(a,n,i){for(var r=Number.MAX_VALUE,u=s._temp[0],o=n.vertices,l=a.position,f,d,v,p,m=0;m<o.length;m++)d=o[m],u.x=d.x-l.x,u.y=d.y-l.y,f=-s.dot(i,u),f<r&&(r=f,v=d);var x=v.index-1>=0?v.index-1:o.length-1;d=o[x],u.x=d.x-l.x,u.y=d.y-l.y,r=-s.dot(i,u),p=d;var T=(v.index+1)%o.length;return d=o[T],u.x=d.x-l.x,u.y=d.y-l.y,f=-s.dot(i,u),f<r&&(p=d),[v,p]}})()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AlignTo:t(601),Angle:t(602),Call:t(603),GetFirst:t(604),GetLast:t(605),GridAlign:t(606),IncAlpha:t(678),IncX:t(679),IncXY:t(680),IncY:t(681),PlaceOnCircle:t(682),PlaceOnEllipse:t(683),PlaceOnLine:t(684),PlaceOnRectangle:t(685),PlaceOnTriangle:t(686),PlayAnimation:t(687),PropertyValueInc:t(46),PropertyValueSet:t(27),RandomCircle:t(688),RandomEllipse:t(689),RandomLine:t(690),RandomRectangle:t(691),RandomTriangle:t(692),Rotate:t(693),RotateAround:t(694),RotateAroundDistance:t(695),ScaleX:t(696),ScaleXY:t(697),ScaleY:t(698),SetAlpha:t(699),SetBlendMode:t(700),SetDepth:t(701),SetHitArea:t(702),SetOrigin:t(703),SetRotation:t(704),SetScale:t(705),SetScaleX:t(706),SetScaleY:t(707),SetScrollFactor:t(708),SetScrollFactorX:t(709),SetScrollFactorY:t(710),SetTint:t(711),SetVisible:t(712),SetX:t(713),SetXY:t(714),SetY:t(715),ShiftPosition:t(716),Shuffle:t(717),SmootherStep:t(718),SmoothStep:t(719),Spread:t(720),ToggleVisible:t(721),WrapInRectangle:t(722)}},function(h,g,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),c=[];c[e.BOTTOM_CENTER]=t(277),c[e.BOTTOM_LEFT]=t(278),c[e.BOTTOM_RIGHT]=t(279),c[e.LEFT_BOTTOM]=t(280),c[e.LEFT_CENTER]=t(281),c[e.LEFT_TOP]=t(282),c[e.RIGHT_BOTTOM]=t(283),c[e.RIGHT_CENTER]=t(284),c[e.RIGHT_TOP]=t(285),c[e.TOP_CENTER]=t(286),c[e.TOP_LEFT]=t(287),c[e.TOP_RIGHT]=t(288);var s=function(a,n,i,r,u){return c[i](a,n,r,u)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),c=t(87),s=t(88),a=t(52),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),s(i,c(r)+u),a(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),c=t(43),s=t(53),a=t(52),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),s(i,c(r)-u),a(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),c=t(44),s=t(54),a=t(52),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),s(i,c(r)+u),a(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),c=t(43),s=t(55),a=t(54),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,c(r)-u),s(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),c=t(43),s=t(90),a=t(54),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,c(r)-u),s(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),c=t(45),s=t(54),a=t(52),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),s(i,e(r)-u),a(i,c(r)-o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),c=t(44),s=t(55),a=t(53),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,c(r)+u),s(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),c=t(44),s=t(90),a=t(53),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,c(r)+u),s(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),c=t(45),s=t(53),a=t(52),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),s(i,e(r)+u),a(i,c(r)-o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(87),c=t(45),s=t(55),a=t(88),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,e(r)+u),s(i,c(r)-o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),c=t(45),s=t(55),a=t(53),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,e(r)-u),s(i,c(r)-o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),c=t(45),s=t(55),a=t(54),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,e(r)+u),s(i,c(r)-o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),c=[];c[e.BOTTOM_CENTER]=t(290),c[e.BOTTOM_LEFT]=t(291),c[e.BOTTOM_RIGHT]=t(292),c[e.CENTER]=t(293),c[e.LEFT_CENTER]=t(295),c[e.RIGHT_CENTER]=t(296),c[e.TOP_CENTER]=t(297),c[e.TOP_LEFT]=t(298),c[e.TOP_RIGHT]=t(299),c[e.LEFT_BOTTOM]=c[e.BOTTOM_LEFT],c[e.LEFT_TOP]=c[e.TOP_LEFT],c[e.RIGHT_BOTTOM]=c[e.BOTTOM_RIGHT],c[e.RIGHT_TOP]=c[e.TOP_RIGHT];var s=function(a,n,i,r,u){return c[i](a,n,r,u)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),c=t(87),s=t(55),a=t(88),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,c(r)+u),s(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),c=t(43),s=t(55),a=t(53),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,c(r)-u),s(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),c=t(44),s=t(55),a=t(54),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,c(r)+u),s(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(294),c=t(87),s=t(89),a=function(n,i,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),e(n,c(i)+r,s(i)+u),n};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(88),c=t(90),s=function(a,n,i){return e(a,n),c(a,i)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),c=t(43),s=t(90),a=t(53),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,c(r)-u),s(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),c=t(44),s=t(90),a=t(54),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),a(i,c(r)+u),s(i,e(r)+o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(87),c=t(45),s=t(88),a=t(52),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),s(i,e(r)+u),a(i,c(r)-o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),c=t(45),s=t(53),a=t(52),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),s(i,e(r)-u),a(i,c(r)-o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),c=t(45),s=t(54),a=t(52),n=function(i,r,u,o){return u===void 0&&(u=0),o===void 0&&(o=0),s(i,e(r)+u),a(i,c(r)-o),i};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(169),c=t(98),s=t(14),a=t(4),n=function(i,r,u){u===void 0&&(u=new a);var o=c(r,0,s.PI2);return e(i,o,u)};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(302),c=t(169),s=t(98),a=t(14),n=function(i,r,u,o){o===void 0&&(o=[]),!r&&u>0&&(r=e(i)/u);for(var l=0;l<r;l++){var f=s(l/r,0,a.PI2);o.push(c(i,f))}return o};h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 2*(Math.PI*e.radius)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=2,s={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a){return a===void 0&&(a=1),this.alpha=a,this},alpha:{get:function(){return this._alpha},set:function(a){var n=e(a,0,1);this._alpha=n,n===0?this.renderFlags&=~c:this.renderFlags|=c}}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),c={_blendMode:e.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(s){typeof s=="string"&&(s=e[s]),s|=0,s>=-1&&(this._blendMode=s)}},setBlendMode:function(s){return this.blendMode=s,this}};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(171),c=t(130),s=function(a,n,i,r){r===void 0&&(r=[]),!n&&i>0&&(n=c(a)/i);for(var u=0;u<n;u++){var o=u/n;r.push(e(a,o))}return r};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a,n){return n===void 0&&(n=new e),n.x=s.x1+(s.x2-s.x1)*a,n.y=s.y1+(s.y2-s.y1)*a,n};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=Math.cos(a),i=Math.sin(a),r=e.x-c,u=e.y-s;return e.x=r*n-u*i+c,e.y=r*i+u*n+s,e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(310),c=t(311),s={mask:null,setMask:function(a){return this.mask=a,this},clearMask:function(a){return a===void 0&&(a=!1),a&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(a){return a===void 0&&(this.texture||this.shader)&&(a=this),new e(this.scene,a)},createGeometryMask:function(a){return a===void 0&&this.type==="Graphics"&&(a=this),new c(this.scene,a)}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(22),s=t(91),a=new e({initialize:function(i,r){var u=i.sys.renderer;this.renderer=u,this.bitmapMask=r,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),i.sys.game.events.on(c.CONTEXT_RESTORED,this.createMask,this),u&&u.on(s.RESIZE,this.createMask,this)},createMask:function(){var n=this.renderer;if(!(!n||!n.gl)){this.mainTexture&&this.clearMask();var i=n.width,r=n.height,u=(i&i-1)===0&&(r&r-1)===0,o=n.gl,l=u?o.REPEAT:o.CLAMP_TO_EDGE,f=o.LINEAR;this.mainTexture=n.createTexture2D(0,f,f,l,l,o.RGBA,null,i,r),this.maskTexture=n.createTexture2D(0,f,f,l,l,o.RGBA,null,i,r),this.mainFramebuffer=n.createFramebuffer(i,r,this.mainTexture,!0),this.maskFramebuffer=n.createFramebuffer(i,r,this.maskTexture,!0)}},clearMask:function(){var n=this.renderer;!n||!n.gl||!this.mainTexture||(n.deleteTexture(this.mainTexture),n.deleteTexture(this.maskTexture),n.deleteFramebuffer(this.mainFramebuffer),n.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(n){this.bitmapMask=n},preRenderWebGL:function(n,i,r){n.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,r)},postRenderWebGL:function(n,i){n.pipelines.BITMAPMASK_PIPELINE.endMask(this,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(s.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n){this.geometryMask=n,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(s){return this.geometryMask=s,this},setInvertAlpha:function(s){return s===void 0&&(s=!0),this.invertAlpha=s,this},preRenderWebGL:function(s,a,n){var i=s.gl;s.flush(),s.maskStack.length===0&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),s.maskCount=0),s.currentCameraMask.mask!==this&&(s.currentMask.mask=this),s.maskStack.push({mask:this,camera:n}),this.applyStencil(s,n,!0),s.maskCount++},applyStencil:function(s,a,n){var i=s.gl,r=this.geometryMask,u=s.maskCount;i.colorMask(!1,!1,!1,!1),n?(i.stencilFunc(i.EQUAL,u,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,u+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),r.renderWebGL(s,r,a),s.flush(),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),n?this.invertAlpha?i.stencilFunc(i.NOTEQUAL,u+1,255):i.stencilFunc(i.EQUAL,u+1,255):this.invertAlpha?i.stencilFunc(i.NOTEQUAL,u,255):i.stencilFunc(i.EQUAL,u,255)},postRenderWebGL:function(s){var a=s.gl;s.maskStack.pop(),s.maskCount--,s.flush();var n=s.currentMask;if(s.maskStack.length===0)n.mask=null,a.disable(a.STENCIL_TEST);else{var i=s.maskStack[s.maskStack.length-1];i.mask.applyStencil(s,i.camera,!1),s.currentCameraMask.mask!==i.mask?(n.mask=i.mask,n.camera=i.camera):n.mask=null}},preRenderCanvas:function(s,a,n){var i=this.geometryMask;s.currentContext.save(),i.renderCanvas(s,i,n,null,null,!0),s.currentContext.clip()},postRenderCanvas:function(s){s.currentContext.restore()},destroy:function(){this.geometryMask=null}});h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,c){return c===void 0&&(c=e),this.scrollFactorX=e,this.scrollFactorY=c,this}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),c=t(25),s=t(177),a=t(269),n=t(270),i=t(3),r=4,u={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(o){this._scaleX=o,this._scaleY=o,o===0?this.renderFlags&=~r:this.renderFlags|=r}},scaleX:{get:function(){return this._scaleX},set:function(o){this._scaleX=o,o===0?this.renderFlags&=~r:this.renderFlags|=r}},scaleY:{get:function(){return this._scaleY},set:function(o){this._scaleY=o,o===0?this.renderFlags&=~r:this.renderFlags|=r}},angle:{get:function(){return n(this._rotation*e.RAD_TO_DEG)},set:function(o){this.rotation=n(o)*e.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(o){this._rotation=a(o)}},setPosition:function(o,l,f,d){return o===void 0&&(o=0),l===void 0&&(l=o),f===void 0&&(f=0),d===void 0&&(d=0),this.x=o,this.y=l,this.z=f,this.w=d,this},copyPosition:function(o){return o.x!==void 0&&(this.x=o.x),o.y!==void 0&&(this.y=o.y),o.z!==void 0&&(this.z=o.z),o.w!==void 0&&(this.w=o.w),this},setRandomPosition:function(o,l,f,d){return o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=this.scene.sys.scale.width),d===void 0&&(d=this.scene.sys.scale.height),this.x=o+Math.random()*f,this.y=l+Math.random()*d,this},setRotation:function(o){return o===void 0&&(o=0),this.rotation=o,this},setAngle:function(o){return o===void 0&&(o=0),this.angle=o,this},setScale:function(o,l){return o===void 0&&(o=1),l===void 0&&(l=o),this.scaleX=o,this.scaleY=l,this},setX:function(o){return o===void 0&&(o=0),this.x=o,this},setY:function(o){return o===void 0&&(o=0),this.y=o,this},setZ:function(o){return o===void 0&&(o=0),this.z=o,this},setW:function(o){return o===void 0&&(o=0),this.w=o,this},getLocalTransformMatrix:function(o){return o===void 0&&(o=new c),o.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(o,l){o===void 0&&(o=new c),l===void 0&&(l=new c);var f=this.parentContainer;if(!f)return this.getLocalTransformMatrix(o);for(o.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);f;)l.applyITRS(f.x,f.y,f._rotation,f._scaleX,f._scaleY),l.multiply(o,o),f=f.parentContainer;return o},getLocalPoint:function(o,l,f,d){f||(f=new i),d||(d=this.scene.sys.cameras.main);var v=d.scrollX,p=d.scrollY,m=o+v*this.scrollFactorX-v,x=l+p*this.scrollFactorY-p;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(m,x,f):s(m,x,this.x,this.y,this.rotation,this.scaleX,this.scaleY,f),this._originComponent&&(f.x+=this._displayOriginX,f.y+=this._displayOriginY),f},getParentRotation:function(){for(var o=0,l=this.parentContainer;l;)o+=l.rotation,l=l.parentContainer;return o}};h.exports=u},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(c){c?(this._visible=!0,this.renderFlags|=t):(this._visible=!1,this.renderFlags&=~t)}},setVisible:function(c){return this.visible=c,this}};h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CHANGE_DATA:t(638),CHANGE_DATA_KEY:t(639),DESTROY:t(640),REMOVE_DATA:t(641),SET_DATA:t(642)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(130),c=t(4),s=function(a,n,i,r){if(r===void 0&&(r=[]),!n&&!i)return r;n?i=Math.round(e(a)/n):n=e(a)/i;for(var u=a.x,o=a.y,l=0,f=0;f<i;f++)switch(r.push(new c(u,o)),l){case 0:u+=n,u>=a.right&&(l=1,o+=u-a.right,u=a.right);break;case 1:o+=n,o>=a.bottom&&(l=2,u-=o-a.bottom,o=a.bottom);break;case 2:u-=n,u<=a.left&&(l=3,o-=a.left-u,u=a.left);break;case 3:o-=n,o<=a.top&&(l=0,o=a.top);break}return r};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){c===void 0&&(c=1),s===void 0&&(s=[]);var a=Math.round(e.x1),n=Math.round(e.y1),i=Math.round(e.x2),r=Math.round(e.y2),u=Math.abs(i-a),o=Math.abs(r-n),l=a<i?1:-1,f=n<r?1:-1,d=u-o;s.push({x:a,y:n});for(var v=1;!(a===i&&n===r);){var p=d<<1;p>-o&&(d-=o,a+=l),p<u&&(d+=u,n+=f),v%c===0&&s.push({x:a,y:n}),v++}return s};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(c.length){if(c.length===1)return c[0]}else return NaN;var a=1,n,i;if(s){if(e<c[0][s])return c[0];for(;c[a][s]<e;)a++}else for(;c[a]<e;)a++;return a>c.length&&(a=c.length),s?(n=c[a-1][s],i=c[a][s],i-e<=e-n?c[a]:c[a-1]):(n=c[a-1],i=c[a],i-e<=e-n?i:n)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n,i,r,u){u===void 0&&(u=!1),this.textureKey=a,this.textureFrame=n,this.index=i,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=u},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c=/\D/g;return e.sort(function(s,a){return parseInt(s.replace(c,""),10)-parseInt(a.replace(c,""),10)}),e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(185),c=t(0),s=t(102),a=t(9),n=t(132),i=t(22),r=t(2),u=t(6),o=t(186),l=t(322),f=new c({Extends:a,initialize:function(v){a.call(this),this.game=v,this.textureManager=null,this.globalTimeScale=1,this.anims=new s,this.mixes=new s,this.paused=!1,this.name="AnimationManager",v.events.once(i.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(i.DESTROY,this.destroy,this)},addMix:function(d,v,p){var m=this.anims,x=this.mixes,T=typeof d=="string"?d:d.key,S=typeof v=="string"?v:v.key;if(m.has(T)&&m.has(S)){var E=x.get(T);E||(E={}),E[S]=p,x.set(T,E)}return this},removeMix:function(d,v){var p=this.mixes,m=typeof d=="string"?d:d.key,x=p.get(m);if(x)if(v){var T=typeof v=="string"?v:v.key;x.hasOwnProperty(T)&&delete x[T]}else v||p.delete(m);return this},getMix:function(d,v){var p=this.mixes,m=typeof d=="string"?d:d.key,x=typeof v=="string"?v:v.key,T=p.get(m);return T&&T.hasOwnProperty(x)?T[x]:0},add:function(d,v){return this.anims.has(d)?(console.warn("Animation key exists: "+d),this):(v.key=d,this.anims.set(d,v),this.emit(n.ADD_ANIMATION,d,v),this)},exists:function(d){return this.anims.has(d)},createFromAseprite:function(d,v){var p=[],m=this.game.cache.json.get(d);if(!m)return p;var x=this,T=u(m,"meta",null),S=u(m,"frames",null);if(T&&S){var E=u(T,"frameTags",[]);E.forEach(function(C){var A=[],P=r(C,"name",null),M=r(C,"from",0),O=r(C,"to",0),F=r(C,"direction","forward");if(P&&(!v||v&&v.indexOf(P)>-1)){for(var I=[],N=Number.MAX_SAFE_INTEGER,G=M;G<=O;G++){var Y=G.toString(),z=S[Y];if(z){var W=r(z,"duration",Number.MAX_SAFE_INTEGER);W<N&&(N=W),I.push({frame:Y,duration:W})}}I.forEach(function(w){A.push({key:d,frame:w.frame,duration:N-w.duration})});var D=N*A.length;F==="reverse"&&(A=A.reverse());var L={key:P,frames:A,duration:D,yoyo:F==="pingpong"},B=x.create(L);B&&p.push(B)}})}return p},create:function(d){var v=d.key,p=!1;return v&&(p=this.get(v),p||(p=new e(this,v,d),this.anims.set(v,p),this.emit(n.ADD_ANIMATION,v,p))),p},fromJSON:function(d,v){v===void 0&&(v=!1),v&&this.anims.clear(),typeof d=="string"&&(d=JSON.parse(d));var p=[];if(d.hasOwnProperty("anims")&&Array.isArray(d.anims)){for(var m=0;m<d.anims.length;m++)p.push(this.create(d.anims[m]));d.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=d.globalTimeScale)}else d.hasOwnProperty("key")&&d.type==="frame"&&p.push(this.create(d));return p},generateFrameNames:function(d,v){var p=u(v,"prefix",""),m=u(v,"start",0),x=u(v,"end",0),T=u(v,"suffix",""),S=u(v,"zeroPad",0),E=u(v,"outputArray",[]),C=u(v,"frames",!1),A=this.textureManager.get(d);if(!A)return E;var P;if(v)for(C||(C=l(m,x)),P=0;P<C.length;P++){var M=p+o(C[P],S,"0",1)+T;A.has(M)?E.push({key:d,frame:M}):console.warn("generateFrameNames: Frame missing: "+M+" from texture: "+d)}else for(C=A.getFrameNames(),P=0;P<C.length;P++)E.push({key:d,frame:C[P]});return E},generateFrameNumbers:function(d,v){var p=u(v,"start",0),m=u(v,"end",-1),x=u(v,"first",!1),T=u(v,"outputArray",[]),S=u(v,"frames",!1),E=this.textureManager.get(d);if(!E)return T;x&&E.has(x)&&T.push({key:d,frame:x}),S||(m===-1&&(m=E.frameTotal-2),S=l(p,m));for(var C=0;C<S.length;C++)E.has(S[C])?T.push({key:d,frame:S[C]}):console.warn("generateFrameNumbers: Frame "+C+" missing from texture: "+d);return T},get:function(d){return this.anims.get(d)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(n.PAUSE_ALL)),this},play:function(d,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++)v[p].anims.play(d);return this},staggerPlay:function(d,v,p,m){p===void 0&&(p=0),m===void 0&&(m=!0),Array.isArray(v)||(v=[v]);var x=v.length;m||x--;for(var T=0;T<v.length;T++){var S=p<0?Math.abs(p)*(x-T):p*T;v[T].anims.playAfterDelay(d,S)}return this},remove:function(d){var v=this.get(d);return v&&(this.emit(n.REMOVE_ANIMATION,d,v),this.anims.delete(d),this.removeMix(d)),v},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(n.RESUME_ALL)),this},toJSON:function(d){var v={anims:[],globalTimeScale:this.globalTimeScale};return d!==void 0&&d!==""?v.anims.push(this.anims.get(d).toJSON()):this.anims.each(function(p,m){v.anims.push(m.toJSON())}),v},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});h.exports=f},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=[],i,r=!1;if((s||a)&&(r=!0,s||(s=""),a||(a="")),c<e)for(i=e;i>=c;i--)r?n.push(s+i.toString()+a):n.push(i);else for(i=e;i<=c;i++)r?n.push(s+i.toString()+a):n.push(i);return n};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(102),s=t(9),a=t(324),n=new e({initialize:function(){this.entries=new c,this.events=new s},add:function(i,r){return this.entries.set(i,r),this.events.emit(a.ADD,this,i,r),this},has:function(i){return this.entries.has(i)},exists:function(i){return this.entries.has(i)},get:function(i){return this.entries.get(i)},remove:function(i){var r=this.get(i);return r&&(this.entries.delete(i),this.events.emit(a.REMOVE,this,i,r.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD:t(736),REMOVE:t(737)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(323),c=t(0),s=t(22),a=new c({initialize:function(i){this.game=i,this.binary=new e,this.bitmapFont=new e,this.json=new e,this.physics=new e,this.shader=new e,this.audio=new e,this.video=new e,this.text=new e,this.html=new e,this.obj=new e,this.tilemap=new e,this.xml=new e,this.custom={},this.game.events.once(s.DESTROY,this.destroy,this)},addCustom:function(n){return this.custom.hasOwnProperty(n)||(this.custom[n]=new e),this.custom[n]},destroy:function(){for(var n=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],i=0;i<n.length;i++)this[n[i]].destroy(),this[n[i]]=null;for(var r in this.custom)this.custom[r].destroy();this.custom=null,this.game=null}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(133),c=t(190),s=t(18),a=t(0),n=t(11),i=t(333),r=t(37),u=t(135),o=t(10),l=t(3),f=new a({Extends:e,Mixins:[n.Flip,n.Tint,n.Pipeline],initialize:function(v,p,m,x){e.call(this,v,p,m,x),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new i.Fade(this),this.flashEffect=new i.Flash(this),this.shakeEffect=new i.Shake(this),this.panEffect=new i.Pan(this),this.rotateToEffect=new i.RotateTo(this),this.zoomEffect=new i.Zoom(this),this.lerp=new l(1,1),this.followOffset=new l,this.deadzone=null,this._follow=null},setDeadzone:function(d,v){if(d===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=d,this.deadzone.height=v):this.deadzone=new o(0,0,d,v),this._follow){var p=this.width/2,m=this.height/2,x=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y;this.midPoint.set(x,T),this.scrollX=x-p,this.scrollY=T-m}c(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(d,v,p,m,x,T){return this.fadeEffect.start(!1,d,v,p,m,!0,x,T)},fadeOut:function(d,v,p,m,x,T){return this.fadeEffect.start(!0,d,v,p,m,!0,x,T)},fadeFrom:function(d,v,p,m,x,T,S){return this.fadeEffect.start(!1,d,v,p,m,x,T,S)},fade:function(d,v,p,m,x,T,S){return this.fadeEffect.start(!0,d,v,p,m,x,T,S)},flash:function(d,v,p,m,x,T,S){return this.flashEffect.start(d,v,p,m,x,T,S)},shake:function(d,v,p,m,x){return this.shakeEffect.start(d,v,p,m,x)},pan:function(d,v,p,m,x,T,S){return this.panEffect.start(d,v,p,m,x,T,S)},rotateTo:function(d,v,p,m,x,T,S){return this.rotateToEffect.start(d,v,p,m,x,T,S)},zoomTo:function(d,v,p,m,x,T){return this.zoomEffect.start(d,v,p,m,x,T)},preRender:function(){this.renderList.length=0;var d=this.width,v=this.height,p=d*.5,m=v*.5,x=this.zoom,T=this.matrix,S=d*this.originX,E=v*this.originY,C=this._follow,A=this.deadzone,P=this.scrollX,M=this.scrollY;A&&c(A,this.midPoint.x,this.midPoint.y);var O=!1;if(C&&!this.panEffect.isRunning){var F=C.x-this.followOffset.x,I=C.y-this.followOffset.y;A?(F<A.x?P=u(P,P-(A.x-F),this.lerp.x):F>A.right&&(P=u(P,P+(F-A.right),this.lerp.x)),I<A.y?M=u(M,M-(A.y-I),this.lerp.y):I>A.bottom&&(M=u(M,M+(I-A.bottom),this.lerp.y))):(P=u(P,F-S,this.lerp.x),M=u(M,I-E,this.lerp.y)),O=!0}this.useBounds&&(P=this.clampX(P),M=this.clampY(M)),this.roundPixels&&(S=Math.round(S),E=Math.round(E),P=Math.round(P),M=Math.round(M)),this.scrollX=P,this.scrollY=M;var N=P+p,G=M+m;this.midPoint.set(N,G);var Y=d/x,z=v/x,W=N-Y/2,D=G-z/2;this.roundPixels&&(W=Math.round(W),D=Math.round(D)),this.worldView.setTo(W,D,Y,z),T.applyITRS(this.x+S,this.y+E,this.rotation,x,x),T.translate(-S,-E),this.shakeEffect.preRender(),O&&this.emit(r.FOLLOW_UPDATE,this,C)},setLerp:function(d,v){return d===void 0&&(d=1),v===void 0&&(v=d),this.lerp.set(d,v),this},setFollowOffset:function(d,v){return d===void 0&&(d=0),v===void 0&&(v=0),this.followOffset.set(d,v),this},startFollow:function(d,v,p,m,x,T){v===void 0&&(v=!1),p===void 0&&(p=1),m===void 0&&(m=p),x===void 0&&(x=0),T===void 0&&(T=x),this._follow=d,this.roundPixels=v,p=s(p,0,1),m=s(m,0,1),this.lerp.set(p,m),this.followOffset.set(x,T);var S=this.width/2,E=this.height/2,C=d.x-x,A=d.y-T;return this.midPoint.set(C,A),this.scrollX=C-S,this.scrollY=A-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(d,v){this.visible&&(this.rotateToEffect.update(d,v),this.panEffect.update(d,v),this.zoomEffect.update(d,v),this.shakeEffect.update(d,v),this.flashEffect.update(d,v),this.fadeEffect.update(d,v))},destroy:function(){this.resetFX(),e.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});h.exports=f},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),c=function(s){var a=new e;s=s.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(o,l,f,d){return l+l+f+f+d+d});var n=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s);if(n){var i=parseInt(n[1],16),r=parseInt(n[2],16),u=parseInt(n[3],16);a.setTo(i,r,u)}return a};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){return a<<24|e<<16|c<<8|s};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){a===void 0&&(a={h:0,s:0,v:0}),e/=255,c/=255,s/=255;var n=Math.min(e,c,s),i=Math.max(e,c,s),r=i-n,u=0,o=i===0?0:r/i,l=i;return i!==n&&(i===e?u=(c-s)/r+(c<s?6:0):i===c?u=(s-e)/r+2:i===s&&(u=(e-c)/r+4),u/=6),a.hasOwnProperty("_h")?(a._h=u,a._s=o,a._v=l):(a.h=u,a.s=o,a.v=l),a};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),c=function(s){return new e(s.r,s.g,s.b,s.a)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),c=function(s){var a=new e,n=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(s.toLowerCase());if(n){var i=parseInt(n[1],10),r=parseInt(n[2],10),u=parseInt(n[3],10),o=n[4]!==void 0?parseFloat(n[4]):1;a.setTo(i,r,u,o*255)}return a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Fade:t(761),Flash:t(762),Pan:t(763),Shake:t(796),RotateTo:t(797),Zoom:t(798)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:t(764),Out:t(765),InOut:t(766)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:t(767),Out:t(768),InOut:t(769)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:t(770),Out:t(771),InOut:t(772)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:t(773),Out:t(774),InOut:t(775)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:t(776),Out:t(777),InOut:t(778)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:t(779),Out:t(780),InOut:t(781)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=t(782)},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:t(783),Out:t(784),InOut:t(785)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:t(786),Out:t(787),InOut:t(788)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:t(789),Out:t(790),InOut:t(791)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:t(792),Out:t(793),InOut:t(794)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=t(795)},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(33),s=t(347),a=t(2),n=t(6),i=t(7),r=t(193),u=t(1),o=t(197),l=t(187),f=new e({initialize:function(v){v===void 0&&(v={});var p=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],m="#ffffff";this.width=n(v,"width",1024),this.height=n(v,"height",768),this.zoom=n(v,"zoom",1),this.parent=n(v,"parent",void 0),this.scaleMode=n(v,"scaleMode",0),this.expandParent=n(v,"expandParent",!0),this.autoRound=n(v,"autoRound",!1),this.autoCenter=n(v,"autoCenter",0),this.resizeInterval=n(v,"resizeInterval",500),this.fullscreenTarget=n(v,"fullscreenTarget",null),this.minWidth=n(v,"minWidth",0),this.maxWidth=n(v,"maxWidth",0),this.minHeight=n(v,"minHeight",0),this.maxHeight=n(v,"maxHeight",0);var x=n(v,"scale",null);x&&(this.width=n(x,"width",this.width),this.height=n(x,"height",this.height),this.zoom=n(x,"zoom",this.zoom),this.parent=n(x,"parent",this.parent),this.scaleMode=n(x,"mode",this.scaleMode),this.expandParent=n(x,"expandParent",this.expandParent),this.autoRound=n(x,"autoRound",this.autoRound),this.autoCenter=n(x,"autoCenter",this.autoCenter),this.resizeInterval=n(x,"resizeInterval",this.resizeInterval),this.fullscreenTarget=n(x,"fullscreenTarget",this.fullscreenTarget),this.minWidth=n(x,"min.width",this.minWidth),this.maxWidth=n(x,"max.width",this.maxWidth),this.minHeight=n(x,"min.height",this.minHeight),this.maxHeight=n(x,"max.height",this.maxHeight)),this.renderType=n(v,"type",c.AUTO),this.canvas=n(v,"canvas",null),this.context=n(v,"context",null),this.canvasStyle=n(v,"canvasStyle",null),this.customEnvironment=n(v,"customEnvironment",!1),this.sceneConfig=n(v,"scene",null),this.seed=n(v,"seed",[(Date.now()*Math.random()).toString()]),r.RND=new r.RandomDataGenerator(this.seed),this.gameTitle=n(v,"title",""),this.gameURL=n(v,"url","https://phaser.io"),this.gameVersion=n(v,"version",""),this.autoFocus=n(v,"autoFocus",!0),this.domCreateContainer=n(v,"dom.createContainer",!1),this.domBehindCanvas=n(v,"dom.behindCanvas",!1),this.domPointerEvents=n(v,"dom.pointerEvents","none"),this.inputKeyboard=n(v,"input.keyboard",!0),this.inputKeyboardEventTarget=n(v,"input.keyboard.target",window),this.inputKeyboardCapture=n(v,"input.keyboard.capture",[]),this.inputMouse=n(v,"input.mouse",!0),this.inputMouseEventTarget=n(v,"input.mouse.target",null),this.inputMousePreventDefaultDown=n(v,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=n(v,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=n(v,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=n(v,"input.mouse.preventDefaultWheel",!0),this.inputTouch=n(v,"input.touch",s.input.touch),this.inputTouchEventTarget=n(v,"input.touch.target",null),this.inputTouchCapture=n(v,"input.touch.capture",!0),this.inputActivePointers=n(v,"input.activePointers",1),this.inputSmoothFactor=n(v,"input.smoothFactor",0),this.inputWindowEvents=n(v,"input.windowEvents",!0),this.inputGamepad=n(v,"input.gamepad",!1),this.inputGamepadEventTarget=n(v,"input.gamepad.target",window),this.disableContextMenu=n(v,"disableContextMenu",!1),this.audio=n(v,"audio",{}),this.hideBanner=n(v,"banner",null)===!1,this.hidePhaser=n(v,"banner.hidePhaser",!1),this.bannerTextColor=n(v,"banner.text",m),this.bannerBackgroundColor=n(v,"banner.background",p),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=n(v,"fps",null);var T=n(v,"render",v);this.pipeline=n(T,"pipeline",null),this.antialias=n(T,"antialias",!0),this.antialiasGL=n(T,"antialiasGL",!0),this.mipmapFilter=n(T,"mipmapFilter","LINEAR"),this.desynchronized=n(T,"desynchronized",!1),this.roundPixels=n(T,"roundPixels",!1),this.pixelArt=n(T,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=n(T,"transparent",!1),this.clearBeforeRender=n(T,"clearBeforeRender",!0),this.preserveDrawingBuffer=n(T,"preserveDrawingBuffer",!1),this.premultipliedAlpha=n(T,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=n(T,"failIfMajorPerformanceCaveat",!1),this.powerPreference=n(T,"powerPreference","default"),this.batchSize=n(T,"batchSize",4096),this.maxTextures=n(T,"maxTextures",-1),this.maxLights=n(T,"maxLights",10);var S=n(v,"backgroundColor",0);this.backgroundColor=l(S),this.transparent&&(this.backgroundColor=l(0),this.backgroundColor.alpha=0),this.preBoot=n(v,"callbacks.preBoot",u),this.postBoot=n(v,"callbacks.postBoot",u),this.physics=n(v,"physics",{}),this.defaultPhysicsSystem=n(this.physics,"default",!1),this.loaderBaseURL=n(v,"loader.baseURL",""),this.loaderPath=n(v,"loader.path","");var E=s.os.android?6:32;this.loaderMaxParallelDownloads=n(v,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=n(v,"loader.crossOrigin",void 0),this.loaderResponseType=n(v,"loader.responseType",""),this.loaderAsync=n(v,"loader.async",!0),this.loaderUser=n(v,"loader.user",""),this.loaderPassword=n(v,"loader.password",""),this.loaderTimeout=n(v,"loader.timeout",0),this.loaderWithCredentials=n(v,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var C=n(v,"plugins",null),A=o.DefaultScene;C&&(Array.isArray(C)?this.defaultPlugins=C:i(C)&&(this.installGlobalPlugins=a(C,"global",[]),this.installScenePlugins=a(C,"scene",[]),Array.isArray(C.default)?A=C.default:Array.isArray(C.defaultMerge)&&(A=A.concat(C.defaultMerge)))),this.defaultPlugins=A;var P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=n(v,"images.default",P+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=n(v,"images.missing",P+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=n(v,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=c.WEBGL:window.FORCE_CANVAS&&(this.renderType=c.CANVAS))}});h.exports=f},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={os:t(105),browser:t(136),features:t(191),input:t(808),audio:t(809),video:t(810),fullscreen:t(811),canvasFeatures:t(348)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),c={supportInverseAlpha:!1,supportNewBlendModes:!1};function s(){var i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",u=new Image;return u.onload=function(){var o=new Image;o.onload=function(){var l=e.create(o,6,1),f=l.getContext("2d");if(f.globalCompositeOperation="multiply",f.drawImage(u,0,0),f.drawImage(o,2,0),!f.getImageData(2,0,1,1))return!1;var d=f.getImageData(2,0,1,1).data;e.remove(o),c.supportNewBlendModes=d[0]===255&&d[1]===0&&d[2]===0},o.src=i+"/wCKxvRF"+r},u.src=i+"AP804Oa6"+r,!1}function a(){var i=e.create(this,2,1),r=i.getContext("2d");r.fillStyle="rgba(10, 20, 30, 0.5)",r.fillRect(0,0,1,1);var u=r.getImageData(0,0,1,1);if(u===null)return!1;r.putImageData(u,1,0);var o=r.getImageData(1,0,1,1);return o.data[0]===u.data[0]&&o.data[1]===u.data[1]&&o.data[2]===u.data[2]&&o.data[3]===u.data[3]}function n(){return typeof importScripts!="function"&&document!==void 0&&(c.supportNewBlendModes=s(),c.supportInverseAlpha=a()),c}h.exports=n()},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){return Math.atan2(a-c,s-e)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return Math.atan2(c.y-e.y,c.x-e.x)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};h.exports=t},function(h,g){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.x-c.x,a=e.y-c.y;return Math.sqrt(s*s+a*a)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=e-s,i=c-a;return n*n+i*i};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return s===void 0&&(s=1e-4),e>c-s};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return s===void 0&&(s=1e-4),e<c+s};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(357),c=function(s,a){return e(s)/e(a)/e(s-a)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(e===0)return 1;for(var c=e;--e;)c*=e;return c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(n,i){var r=1-n;return r*r*r*i}function e(n,i){var r=1-n;return 3*r*r*n*i}function c(n,i){return 3*(1-n)*n*n*i}function s(n,i){return n*n*n*i}var a=function(n,i,r,u,o){return t(n,i)+e(n,r)+c(n,u)+s(n,o)};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(a,n){var i=1-a;return i*i*n}function e(a,n){return 2*(1-a)*a*n}function c(a,n){return a*a*n}var s=function(a,n,i,r){return t(a,n)+e(a,i)+c(a,r)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(184),c=function(s,a,n){return a+(n-a)*e(s,0,1)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c=Math.log(e)/.6931471805599453;return 1<<Math.ceil(c)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.x,a=e.y;return e.x=s*Math.cos(c)-a*Math.sin(c),e.y=s*Math.sin(c)+a*Math.cos(c),e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>0?Math.ceil(e):Math.floor(e)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a){this.val=new Float32Array(9),a?this.copy(a):this.identity()},clone:function(){return new c(this)},set:function(s){return this.copy(s)},copy:function(s){var a=this.val,n=s.val;return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],this},fromMat4:function(s){var a=s.val,n=this.val;return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[4],n[4]=a[5],n[5]=a[6],n[6]=a[8],n[7]=a[9],n[8]=a[10],this},fromArray:function(s){var a=this.val;return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a[4]=s[4],a[5]=s[5],a[6]=s[6],a[7]=s[7],a[8]=s[8],this},identity:function(){var s=this.val;return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=1,s[5]=0,s[6]=0,s[7]=0,s[8]=1,this},transpose:function(){var s=this.val,a=s[1],n=s[2],i=s[5];return s[1]=s[3],s[2]=s[6],s[3]=a,s[5]=s[7],s[6]=n,s[7]=i,this},invert:function(){var s=this.val,a=s[0],n=s[1],i=s[2],r=s[3],u=s[4],o=s[5],l=s[6],f=s[7],d=s[8],v=d*u-o*f,p=-d*r+o*l,m=f*r-u*l,x=a*v+n*p+i*m;return x?(x=1/x,s[0]=v*x,s[1]=(-d*n+i*f)*x,s[2]=(o*n-i*u)*x,s[3]=p*x,s[4]=(d*a-i*l)*x,s[5]=(-o*a+i*r)*x,s[6]=m*x,s[7]=(-f*a+n*l)*x,s[8]=(u*a-n*r)*x,this):null},adjoint:function(){var s=this.val,a=s[0],n=s[1],i=s[2],r=s[3],u=s[4],o=s[5],l=s[6],f=s[7],d=s[8];return s[0]=u*d-o*f,s[1]=i*f-n*d,s[2]=n*o-i*u,s[3]=o*l-r*d,s[4]=a*d-i*l,s[5]=i*r-a*o,s[6]=r*f-u*l,s[7]=n*l-a*f,s[8]=a*u-n*r,this},determinant:function(){var s=this.val,a=s[0],n=s[1],i=s[2],r=s[3],u=s[4],o=s[5],l=s[6],f=s[7],d=s[8];return a*(d*u-o*f)+n*(-d*r+o*l)+i*(f*r-u*l)},multiply:function(s){var a=this.val,n=a[0],i=a[1],r=a[2],u=a[3],o=a[4],l=a[5],f=a[6],d=a[7],v=a[8],p=s.val,m=p[0],x=p[1],T=p[2],S=p[3],E=p[4],C=p[5],A=p[6],P=p[7],M=p[8];return a[0]=m*n+x*u+T*f,a[1]=m*i+x*o+T*d,a[2]=m*r+x*l+T*v,a[3]=S*n+E*u+C*f,a[4]=S*i+E*o+C*d,a[5]=S*r+E*l+C*v,a[6]=A*n+P*u+M*f,a[7]=A*i+P*o+M*d,a[8]=A*r+P*l+M*v,this},translate:function(s){var a=this.val,n=s.x,i=s.y;return a[6]=n*a[0]+i*a[3]+a[6],a[7]=n*a[1]+i*a[4]+a[7],a[8]=n*a[2]+i*a[5]+a[8],this},rotate:function(s){var a=this.val,n=a[0],i=a[1],r=a[2],u=a[3],o=a[4],l=a[5],f=Math.sin(s),d=Math.cos(s);return a[0]=d*n+f*u,a[1]=d*i+f*o,a[2]=d*r+f*l,a[3]=d*u-f*n,a[4]=d*o-f*i,a[5]=d*l-f*r,this},scale:function(s){var a=this.val,n=s.x,i=s.y;return a[0]=n*a[0],a[1]=n*a[1],a[2]=n*a[2],a[3]=i*a[3],a[4]=i*a[4],a[5]=i*a[5],this},fromQuat:function(s){var a=s.x,n=s.y,i=s.z,r=s.w,u=a+a,o=n+n,l=i+i,f=a*u,d=a*o,v=a*l,p=n*o,m=n*l,x=i*l,T=r*u,S=r*o,E=r*l,C=this.val;return C[0]=1-(p+x),C[3]=d+E,C[6]=v-S,C[1]=d-E,C[4]=1-(f+x),C[7]=m+T,C[2]=v+S,C[5]=m-T,C[8]=1-(f+p),this},normalFromMat4:function(s){var a=s.val,n=this.val,i=a[0],r=a[1],u=a[2],o=a[3],l=a[4],f=a[5],d=a[6],v=a[7],p=a[8],m=a[9],x=a[10],T=a[11],S=a[12],E=a[13],C=a[14],A=a[15],P=i*f-r*l,M=i*d-u*l,O=i*v-o*l,F=r*d-u*f,I=r*v-o*f,N=u*v-o*d,G=p*E-m*S,Y=p*C-x*S,z=p*A-T*S,W=m*C-x*E,D=m*A-T*E,L=x*A-T*C,B=P*L-M*D+O*W+F*z-I*Y+N*G;return B?(B=1/B,n[0]=(f*L-d*D+v*W)*B,n[1]=(d*z-l*L-v*Y)*B,n[2]=(l*D-f*z+v*G)*B,n[3]=(u*D-r*L-o*W)*B,n[4]=(i*L-u*z+o*Y)*B,n[5]=(r*z-i*D-o*G)*B,n[6]=(E*N-C*I+A*F)*B,n[7]=(C*O-S*N-A*M)*B,n[8]=(S*I-E*O+A*P)*B,this):null}});h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(364),s=t(1),a=t(39),n=1e-6,i=new Int8Array([1,2,0]),r=new Float32Array([0,0,0]),u=new a(1,0,0),o=new a(0,1,0),l=new a,f=new c,d=new e({initialize:function(p,m,x,T){this.onChangeCallback=s,this.set(p,m,x,T)},x:{get:function(){return this._x},set:function(v){this._x=v,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(v){this._y=v,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(v){this._z=v,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(v){this._w=v,this.onChangeCallback(this)}},copy:function(v){return this.set(v)},set:function(v,p,m,x,T){return T===void 0&&(T=!0),typeof v=="object"?(this._x=v.x||0,this._y=v.y||0,this._z=v.z||0,this._w=v.w||0):(this._x=v||0,this._y=p||0,this._z=m||0,this._w=x||0),T&&this.onChangeCallback(this),this},add:function(v){return this._x+=v.x,this._y+=v.y,this._z+=v.z,this._w+=v.w,this.onChangeCallback(this),this},subtract:function(v){return this._x-=v.x,this._y-=v.y,this._z-=v.z,this._w-=v.w,this.onChangeCallback(this),this},scale:function(v){return this._x*=v,this._y*=v,this._z*=v,this._w*=v,this.onChangeCallback(this),this},length:function(){var v=this.x,p=this.y,m=this.z,x=this.w;return Math.sqrt(v*v+p*p+m*m+x*x)},lengthSq:function(){var v=this.x,p=this.y,m=this.z,x=this.w;return v*v+p*p+m*m+x*x},normalize:function(){var v=this.x,p=this.y,m=this.z,x=this.w,T=v*v+p*p+m*m+x*x;return T>0&&(T=1/Math.sqrt(T),this._x=v*T,this._y=p*T,this._z=m*T,this._w=x*T),this.onChangeCallback(this),this},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w},lerp:function(v,p){p===void 0&&(p=0);var m=this.x,x=this.y,T=this.z,S=this.w;return this.set(m+p*(v.x-m),x+p*(v.y-x),T+p*(v.z-T),S+p*(v.w-S))},rotationTo:function(v,p){var m=v.x*p.x+v.y*p.y+v.z*p.z;return m<-.999999?(l.copy(u).cross(v).length()<n&&l.copy(o).cross(v),l.normalize(),this.setAxisAngle(l,Math.PI)):m>.999999?this.set(0,0,0,1):(l.copy(v).cross(p),this._x=l.x,this._y=l.y,this._z=l.z,this._w=1+m,this.normalize())},setAxes:function(v,p,m){var x=f.val;return x[0]=p.x,x[3]=p.y,x[6]=p.z,x[1]=m.x,x[4]=m.y,x[7]=m.z,x[2]=-v.x,x[5]=-v.y,x[8]=-v.z,this.fromMat3(f).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(v,p){p=p*.5;var m=Math.sin(p);return this.set(m*v.x,m*v.y,m*v.z,Math.cos(p))},multiply:function(v){var p=this.x,m=this.y,x=this.z,T=this.w,S=v.x,E=v.y,C=v.z,A=v.w;return this.set(p*A+T*S+m*C-x*E,m*A+T*E+x*S-p*C,x*A+T*C+p*E-m*S,T*A-p*S-m*E-x*C)},slerp:function(v,p){var m=this.x,x=this.y,T=this.z,S=this.w,E=v.x,C=v.y,A=v.z,P=v.w,M=m*E+x*C+T*A+S*P;M<0&&(M=-M,E=-E,C=-C,A=-A,P=-P);var O=1-p,F=p;if(1-M>n){var I=Math.acos(M),N=Math.sin(I);O=Math.sin((1-p)*I)/N,F=Math.sin(p*I)/N}return this.set(O*m+F*E,O*x+F*C,O*T+F*A,O*S+F*P)},invert:function(){var v=this.x,p=this.y,m=this.z,x=this.w,T=v*v+p*p+m*m+x*x,S=T?1/T:0;return this.set(-v*S,-p*S,-m*S,x*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(v){v*=.5;var p=this.x,m=this.y,x=this.z,T=this.w,S=Math.sin(v),E=Math.cos(v);return this.set(p*E+T*S,m*E+x*S,x*E-m*S,T*E-p*S)},rotateY:function(v){v*=.5;var p=this.x,m=this.y,x=this.z,T=this.w,S=Math.sin(v),E=Math.cos(v);return this.set(p*E-x*S,m*E+T*S,x*E+p*S,T*E-m*S)},rotateZ:function(v){v*=.5;var p=this.x,m=this.y,x=this.z,T=this.w,S=Math.sin(v),E=Math.cos(v);return this.set(p*E+m*S,m*E-p*S,x*E+T*S,T*E-x*S)},calculateW:function(){var v=this.x,p=this.y,m=this.z;return this.w=-Math.sqrt(1-v*v-p*p-m*m),this},setFromEuler:function(v,p){var m=v.x/2,x=v.y/2,T=v.z/2,S=Math.cos(m),E=Math.cos(x),C=Math.cos(T),A=Math.sin(m),P=Math.sin(x),M=Math.sin(T);switch(v.order){case"XYZ":{this.set(A*E*C+S*P*M,S*P*C-A*E*M,S*E*M+A*P*C,S*E*C-A*P*M,p);break}case"YXZ":{this.set(A*E*C+S*P*M,S*P*C-A*E*M,S*E*M-A*P*C,S*E*C+A*P*M,p);break}case"ZXY":{this.set(A*E*C-S*P*M,S*P*C+A*E*M,S*E*M+A*P*C,S*E*C-A*P*M,p);break}case"ZYX":{this.set(A*E*C-S*P*M,S*P*C+A*E*M,S*E*M-A*P*C,S*E*C+A*P*M,p);break}case"YZX":{this.set(A*E*C+S*P*M,S*P*C+A*E*M,S*E*M-A*P*C,S*E*C-A*P*M,p);break}case"XZY":{this.set(A*E*C-S*P*M,S*P*C-A*E*M,S*E*M+A*P*C,S*E*C+A*P*M,p);break}}return this},setFromRotationMatrix:function(v){var p=v.val,m=p[0],x=p[4],T=p[8],S=p[1],E=p[5],C=p[9],A=p[2],P=p[6],M=p[10],O=m+E+M,F;return O>0?(F=.5/Math.sqrt(O+1),this.set((P-C)*F,(T-A)*F,(S-x)*F,.25/F)):m>E&&m>M?(F=2*Math.sqrt(1+m-E-M),this.set(.25*F,(x+S)/F,(T+A)/F,(P-C)/F)):E>M?(F=2*Math.sqrt(1+E-m-M),this.set((x+S)/F,.25*F,(C+P)/F,(T-A)/F)):(F=2*Math.sqrt(1+M-m-E),this.set((T+A)/F,(C+P)/F,.25*F,(S-x)/F)),this},fromMat3:function(v){var p=v.val,m=p[0]+p[4]+p[8],x;if(m>0)x=Math.sqrt(m+1),this.w=.5*x,x=.5/x,this._x=(p[7]-p[5])*x,this._y=(p[2]-p[6])*x,this._z=(p[3]-p[1])*x;else{var T=0;p[4]>p[0]&&(T=1),p[8]>p[T*3+T]&&(T=2);var S=i[T],E=i[S];x=Math.sqrt(p[T*3+T]-p[S*3+S]-p[E*3+E]+1),r[T]=.5*x,x=.5/x,r[S]=(p[S*3+T]+p[T*3+S])*x,r[E]=(p[E*3+T]+p[T*3+E])*x,this._x=r[0],this._y=r[1],this._z=r[2],this._w=(p[E*3+S]-p[S*3+E])*x}return this.onChangeCallback(this),this}});h.exports=d},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(367),c=t(31),s=t(33),a=t(191),n=function(i){var r=i.config;if((r.customEnvironment||r.canvas)&&r.renderType===s.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!r.customEnvironment&&!r.canvas&&r.renderType!==s.HEADLESS)if(r.renderType===s.CANVAS||r.renderType!==s.CANVAS&&!a.webGL)if(a.canvas)r.renderType=s.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else r.renderType=s.WEBGL;r.antialias||c.disableSmoothing();var u=i.scale.baseSize,o=u.width,l=u.height;if(r.canvas?(i.canvas=r.canvas,i.canvas.width=o,i.canvas.height=l):i.canvas=c.create(i,o,l,r.renderType),r.canvasStyle&&(i.canvas.style=r.canvasStyle),r.antialias||e.setCrisp(i.canvas),r.renderType!==s.HEADLESS){var f,d;f=t(368),d=t(371),r.renderType===s.WEBGL?i.renderer=new d(i):(i.renderer=new f(i),i.context=i.renderer.gameContext)}};h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCrisp:function(e){var c=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return c.forEach(function(s){e.style["image-rendering"]=s}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(37),c=t(369),s=t(0),a=t(33),n=t(9),i=t(91),r=t(370),u=t(104),o=t(106),l=t(25),f=new s({Extends:n,initialize:function(v){n.call(this);var p=v.config;this.config={clearBeforeRender:p.clearBeforeRender,backgroundColor:p.backgroundColor,antialias:p.antialias,roundPixels:p.roundPixels},this.game=v,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=v.canvas;var m={alpha:v.config.transparent,desynchronized:v.config.desynchronized};this.gameContext=p.context?p.context:this.gameCanvas.getContext("2d",m),this.currentContext=this.gameContext,this.antialias=v.config.antialias,this.blendModes=r(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(o.READY,this.boot,this)},boot:function(){var d=this.game,v=d.scale.baseSize;this.width=v.width,this.height=v.height,this.isBooted=!0,d.scale.on(u.RESIZE,this.onResize,this),this.resize(v.width,v.height)},onResize:function(d,v){(v.width!==this.width||v.height!==this.height)&&this.resize(v.width,v.height)},resize:function(d,v){this.width=d,this.height=v,this.emit(i.RESIZE,d,v)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(d){return this.currentContext.globalCompositeOperation=d,this},setContext:function(d){return this.currentContext=d||this.gameContext,this},setAlpha:function(d){return this.currentContext.globalAlpha=d,this},preRender:function(){var d=this.gameContext,v=this.config,p=this.width,m=this.height;d.globalAlpha=1,d.globalCompositeOperation="source-over",d.setTransform(1,0,0,1,0,0),v.clearBeforeRender&&(d.clearRect(0,0,p,m),v.transparent||(d.fillStyle=v.backgroundColor.rgba,d.fillRect(0,0,p,m))),d.save(),this.drawCount=0,this.emit(i.PRE_RENDER)},render:function(d,v,p){var m=v.length;this.emit(i.RENDER,d,p);var x=p.x,T=p.y,S=p.width,E=p.height,C=p.renderToTexture?p.context:d.sys.context;C.save(),this.game.scene.customViewports&&(C.beginPath(),C.rect(x,T,S,E),C.clip()),this.currentContext=C;var A=p.mask;A&&A.preRenderCanvas(this,null,p._maskCamera),p.transparent||(C.fillStyle=p.backgroundColor.rgba,C.fillRect(x,T,S,E)),C.globalAlpha=p.alpha,C.globalCompositeOperation="source-over",this.drawCount+=m,p.renderToTexture&&p.emit(e.PRE_RENDER,p),p.matrix.copyToContext(C);for(var P=0;P<m;P++){var M=v[P];M.mask&&M.mask.preRenderCanvas(this,M,p),M.renderCanvas(this,M,p),M.mask&&M.mask.postRenderCanvas(this,M,p)}C.setTransform(1,0,0,1,0,0),C.globalCompositeOperation="source-over",C.globalAlpha=1,p.flashEffect.postRenderCanvas(C),p.fadeEffect.postRenderCanvas(C),p.dirty=!1,A&&A.postRenderCanvas(this),C.restore(),p.renderToTexture&&(p.emit(e.POST_RENDER,p),p.renderToGame&&d.sys.context.drawImage(p.canvas,x,T))},postRender:function(){var d=this.gameContext;d.restore(),this.emit(i.POST_RENDER);var v=this.snapshotState;v.callback&&(c(this.gameCanvas,v),v.callback=null)},snapshotCanvas:function(d,v,p,m,x,T,S,E,C){p===void 0&&(p=!1),this.snapshotArea(m,x,T,S,v,E,C);var A=this.snapshotState;return A.getPixel=p,c(this.canvas,A),A.callback=null,this},snapshot:function(d,v,p){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,d,v,p)},snapshotArea:function(d,v,p,m,x,T,S){var E=this.snapshotState;return E.callback=x,E.type=T,E.encoder=S,E.getPixel=!1,E.x=d,E.y=v,E.width=Math.min(p,this.gameCanvas.width),E.height=Math.min(m,this.gameCanvas.height),this},snapshotPixel:function(d,v,p){return this.snapshotArea(d,v,1,1,p),this.snapshotState.getPixel=!0,this},batchSprite:function(d,v,p,m){var x=p.alpha*d.alpha;if(x!==0){var T=this.currentContext,S=this._tempMatrix1,E=this._tempMatrix2,C=v.canvasData,A=C.x,P=C.y,M=v.cutWidth,O=v.cutHeight,F=v.customPivot,I=v.source.resolution,N=d.displayOriginX,G=d.displayOriginY,Y=-N+v.x,z=-G+v.y;if(d.isCropped){var W=d._crop;(W.flipX!==d.flipX||W.flipY!==d.flipY)&&v.updateCropUVs(W,d.flipX,d.flipY),M=W.cw,O=W.ch,A=W.cx,P=W.cy,Y=-N+W.x,z=-G+W.y,d.flipX&&(Y>=0?Y=-(Y+M):Y<0&&(Y=Math.abs(Y)-M)),d.flipY&&(z>=0?z=-(z+O):z<0&&(z=Math.abs(z)-O))}var D=1,L=1;d.flipX&&(F||(Y+=-v.realWidth+N*2),D=-1),d.flipY&&(F||(z+=-v.realHeight+G*2),L=-1),E.applyITRS(d.x,d.y,d.rotation,d.scaleX*D,d.scaleY*L),S.copyFrom(p.matrix),m?(S.multiplyWithOffset(m,-p.scrollX*d.scrollFactorX,-p.scrollY*d.scrollFactorY),E.e=d.x,E.f=d.y):(E.e-=p.scrollX*d.scrollFactorX,E.f-=p.scrollY*d.scrollFactorY),S.multiply(E),T.save(),S.setToContext(T),T.globalCompositeOperation=this.blendModes[d.blendMode],T.globalAlpha=x,T.imageSmoothingEnabled=!(!this.antialias||v.source.scaleMode),d.mask&&d.mask.preRenderCanvas(this,d,p),T.drawImage(v.source.image,A,P,M,O,Y,z,M/I,O/I),d.mask&&d.mask.postRenderCanvas(this,d,p),T.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});h.exports=f},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),c=t(38),s=t(2),a=function(n,i){var r=s(i,"callback"),u=s(i,"type","image/png"),o=s(i,"encoder",.92),l=Math.abs(Math.round(s(i,"x",0))),f=Math.abs(Math.round(s(i,"y",0))),d=s(i,"width",n.width),v=s(i,"height",n.height),p=s(i,"getPixel",!1);if(p){var m=n.getContext("2d"),x=m.getImageData(l,f,1,1),T=x.data;r.call(null,new c(T[0],T[1],T[2],T[3]/255))}else if(l!==0||f!==0||d!==n.width||v!==n.height){var S=e.createWebGL(this,d,v),E=S.getContext("2d");E.drawImage(n,l,f,d,v,0,0,d,v);var C=new Image;C.onerror=function(){r.call(null),e.remove(S)},C.onload=function(){r.call(null,C),e.remove(S)},C.src=S.toDataURL(u,o)}else{var A=new Image;A.onerror=function(){r.call(null)},A.onload=function(){r.call(null,A)},A.src=n.toDataURL(u,o)}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),c=t(348),s=function(){var a=[],n=c.supportNewBlendModes,i="source-over";return a[e.NORMAL]=i,a[e.ADD]="lighter",a[e.MULTIPLY]=n?"multiply":i,a[e.SCREEN]=n?"screen":i,a[e.OVERLAY]=n?"overlay":i,a[e.DARKEN]=n?"darken":i,a[e.LIGHTEN]=n?"lighten":i,a[e.COLOR_DODGE]=n?"color-dodge":i,a[e.COLOR_BURN]=n?"color-burn":i,a[e.HARD_LIGHT]=n?"hard-light":i,a[e.SOFT_LIGHT]=n?"soft-light":i,a[e.DIFFERENCE]=n?"difference":i,a[e.EXCLUSION]=n?"exclusion":i,a[e.HUE]=n?"hue":i,a[e.SATURATION]=n?"saturation":i,a[e.COLOR]=n?"color":i,a[e.LUMINOSITY]=n?"luminosity":i,a[e.ERASE]="destination-out",a[e.SOURCE_IN]="source-in",a[e.SOURCE_OUT]="source-out",a[e.SOURCE_ATOP]="source-atop",a[e.DESTINATION_OVER]="destination-over",a[e.DESTINATION_IN]="destination-in",a[e.DESTINATION_OUT]="destination-out",a[e.DESTINATION_ATOP]="destination-atop",a[e.LIGHTER]="lighter",a[e.COPY]="copy",a[e.XOR]="xor",a};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),c=t(37),s=t(0),a=t(33),n=t(9),i=t(91),r=t(22),u=t(138),o=t(69),l=t(1),f=t(372),d=t(141),v=t(104),p=t(106),m=t(12),x=t(383),T=new s({Extends:n,initialize:function(E){n.call(this);var C=E.config,A={alpha:C.transparent,desynchronized:C.desynchronized,depth:!1,antialias:C.antialiasGL,premultipliedAlpha:C.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:C.failIfMajorPerformanceCaveat,powerPreference:C.powerPreference,preserveDrawingBuffer:C.preserveDrawingBuffer};this.config={clearBeforeRender:C.clearBeforeRender,antialias:C.antialias,backgroundColor:C.backgroundColor,contextCreation:A,roundPixels:C.roundPixels,maxTextures:C.maxTextures,maxTextureSize:C.maxTextureSize,batchSize:C.batchSize,maxLights:C.maxLights,mipmapFilter:C.mipmapFilter},this.game=E,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=l,this.contextRestoredHandler=l,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(S){var E,C=this.game,A=this.canvas,P=S.backgroundColor;if(C.config.context?E=C.config.context:E=A.getContext("webgl",S.contextCreation)||A.getContext("experimental-webgl",S.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var M=this;this.contextLostHandler=function(B){M.contextLost=!0,M.game.events.emit(r.CONTEXT_LOST,M),B.preventDefault()},this.contextRestoredHandler=function(){M.contextLost=!1,M.init(M.config),M.game.events.emit(r.CONTEXT_RESTORED,M)},A.addEventListener("webglcontextlost",this.contextLostHandler,!1),A.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),C.context=E;for(var O=0;O<=27;O++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var F=E.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var I="WEBGL_compressed_texture_",N="WEBKIT_"+I;this.compression.ETC1=E.getExtension(I+"etc1")||E.getExtension(N+"etc1"),this.compression.PVRTC=E.getExtension(I+"pvrtc")||E.getExtension(N+"pvrtc"),this.compression.S3TC=E.getExtension(I+"s3tc")||E.getExtension(N+"s3tc"),this.supportedExtensions=F;var G="ANGLE_instanced_arrays";this.instancedArraysExtension=F.indexOf(G)>-1?E.getExtension(G):null;var Y="OES_vertex_array_object";this.vaoExtension=F.indexOf(Y)>-1?E.getExtension(Y):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(P.redGL,P.greenGL,P.blueGL,P.alphaGL),this.mipmapFilter=E[S.mipmapFilter],this.maxTextures=m.checkShaderMax(E,S.maxTextures),this.textureIndexes=[];var z=this.tempTextures;if(Array.isArray(z))for(var W=0;O<this.maxTextures;W++)E.deleteTexture(z[W]);else z=new Array(this.maxTextures);for(var D=0;D<this.maxTextures;D++){var L=E.createTexture();E.activeTexture(E.TEXTURE0+D),E.bindTexture(E.TEXTURE_2D,L),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),z[D]=L,this.textureIndexes.push(D)}return this.tempTextures=z,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new f(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=new o().identity(),C.textures.once(p.READY,this.boot,this),this},boot:function(){var S=this.game,E=this.pipelines,C=S.scale.baseSize;this.width=C.width,this.height=C.height,this.isBooted=!0,this.renderTarget=new d(this,this.width,this.height,1,0,!0,!0),E.boot(S.config.pipeline),this.blankTexture=S.textures.getFrame("__DEFAULT"),this.whiteTexture=S.textures.getFrame("__WHITE");var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,null),A.enable(A.SCISSOR_TEST),S.scale.on(v.RESIZE,this.onResize,this),this.resize(C.width,C.height)},onResize:function(S,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(S,E){S===void 0&&(S=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,S,E),this.setProjectionMatrix(S,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,E){var C=this.gl;return this.width=S,this.height=E,this.setProjectionMatrix(S,E),C.viewport(0,0,S,E),this.drawingBufferHeight=C.drawingBufferHeight,C.scissor(0,C.drawingBufferHeight-E,S,E),this.defaultScissor[2]=S,this.defaultScissor[3]=E,this.emit(i.RESIZE,S,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,E){return(S!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=E,this.projectionMatrix.ortho(0,S,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,E,C,A,P){P===void 0&&(P=this.drawingBufferHeight);var M=this.scissorStack,O=[S,E,C,A];return M.push(O),this.setScissor(S,E,C,A,P),this.currentScissor=O,O},setScissor:function(S,E,C,A,P){P===void 0&&(P=this.drawingBufferHeight);var M=this.gl,O=this.currentScissor,F=C>0&&A>0;if(O&&F){var I=O[0],N=O[1],G=O[2],Y=O[3];F=I!==S||N!==E||G!==C||Y!==A}F&&(this.flush(),M.scissor(S,P-E-A,C,A))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var E=this.currentScissor;if(E){var C=E[0],A=E[1],P=E[2],M=E[3];P>0&&M>0&&S.scissor(C,this.drawingBufferHeight-A-M,P,M)}},popScissor:function(){var S=this.scissorStack;S.pop();var E=S[S.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var S=this.currentMask.mask,E=this.currentCameraMask.mask;return S&&S.isStencil||E&&E.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,E){E===void 0&&(E=!1);var C=this.gl,A=this.blendModes[S];return E||S!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),C.enable(C.BLEND),C.blendEquation(A.equation),A.func.length>2?C.blendFuncSeparate(A.func[0],A.func[1],A.func[2],A.func[3]):C.blendFunc(A.func[0],A.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,E){var C=this.blendModes.push({func:S,equation:E});return C-1},updateBlendMode:function(S,E,C){return this.blendModes[S]&&(this.blendModes[S].func=E,C&&(this.blendModes[S].equation=C)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S.glTexture,!0),0;var E=this.gl,C=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,C<this.maxTextures?(S.glIndex=C,E.activeTexture(E.TEXTURE0+C),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},isNewNormalMap:function(S,E){return this.textureZero!==S||this.normalTexture!==E},setTextureZero:function(S,E){if(this.textureZero!==S){E&&this.flush();var C=this.gl;C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,S),this.textureZero=S}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(S){if(this.normalTexture!==S){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.normalTexture=S,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var S=this.gl,E=this.tempTextures,C=0;C<E.length;C++)S.activeTexture(S.TEXTURE0+C),S.bindTexture(S.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(S){if(S===void 0&&(S=!1),!this.isTextureClean){this.flush();var E=this.gl,C=this.tempTextures;if(S){for(var A=0;A<C.length;A++)E.activeTexture(E.TEXTURE0+A),E.bindTexture(E.TEXTURE_2D,C[A]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,C[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S,!0),0;var E=this.gl,C=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,C<this.maxTextures?(S.glIndex=C,E.activeTexture(E.TEXTURE0+C),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},pushFramebuffer:function(S,E,C,A){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,E,C,A))},setFramebuffer:function(S,E,C,A){if(E===void 0&&(E=!1),C===void 0&&(C=!1),A===void 0&&(A=!0),S===this.currentFramebuffer)return this;var P=this.gl,M=this.width,O=this.height;return S&&S.renderTexture&&A?(M=S.renderTexture.width,O=S.renderTexture.height):this.flush(),P.bindFramebuffer(P.FRAMEBUFFER,S),A&&P.viewport(0,0,M,O),E&&(S?(this.drawingBufferHeight=O,this.pushScissor(0,0,M,O)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,C&&this.resetTextures(),this},popFramebuffer:function(S,E,C){S===void 0&&(S=!1),E===void 0&&(E=!1),C===void 0&&(C=!0);var A=this.fboStack;A.pop();var P=A[A.length-1];return P||(P=null),this.setFramebuffer(P,S,E,C),P},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,E,C,A){var P=this.gl,M=P.NEAREST,O=P.NEAREST,F=P.CLAMP_TO_EDGE,I=null;E=S?S.width:E,C=S?S.height:C;var N=u(E,C);return N&&(F=P.REPEAT),A===a.ScaleModes.LINEAR&&this.config.antialias&&(M=N?this.mipmapFilter:P.LINEAR,O=P.LINEAR),!S&&typeof E=="number"&&typeof C=="number"?I=this.createTexture2D(0,M,O,F,F,P.RGBA,null,E,C):I=this.createTexture2D(0,M,O,F,F,P.RGBA,S),I},createTexture2D:function(S,E,C,A,P,M,O,F,I,N,G,Y){N=N??!0,G===void 0&&(G=!1),Y===void 0&&(Y=!1);var z=this.gl,W=z.createTexture();z.activeTexture(z.TEXTURE0);var D=z.getParameter(z.TEXTURE_BINDING_2D);return z.bindTexture(z.TEXTURE_2D,W),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,E),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,C),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,P),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,A),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,Y),O==null?z.texImage2D(z.TEXTURE_2D,S,M,F,I,0,M,z.UNSIGNED_BYTE,null):(G||(F=O.width,I=O.height),z.texImage2D(z.TEXTURE_2D,S,M,M,z.UNSIGNED_BYTE,O)),u(F,I)&&z.generateMipmap(z.TEXTURE_2D),D&&z.bindTexture(z.TEXTURE_2D,D),W.isAlphaPremultiplied=N,W.isRenderTexture=!1,W.width=F,W.height=I,W.glIndex=0,W.glIndexCounter=-1,W},createFramebuffer:function(S,E,C,A){var P=this.gl,M=P.createFramebuffer(),O=0;if(this.setFramebuffer(M),A){var F=P.createRenderbuffer();P.bindRenderbuffer(P.RENDERBUFFER,F),P.renderbufferStorage(P.RENDERBUFFER,P.DEPTH_STENCIL,S,E),P.framebufferRenderbuffer(P.FRAMEBUFFER,P.DEPTH_STENCIL_ATTACHMENT,P.RENDERBUFFER,F)}if(C.isRenderTexture=!0,C.isAlphaPremultiplied=!1,P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,C,0),O=P.checkFramebufferStatus(P.FRAMEBUFFER),O!==P.FRAMEBUFFER_COMPLETE){var I={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+I[O])}return M.renderTexture=C,this.setFramebuffer(null),this.resetTextures(),M},createProgram:function(S,E){var C=this.gl,A=C.createProgram(),P=C.createShader(C.VERTEX_SHADER),M=C.createShader(C.FRAGMENT_SHADER);if(C.shaderSource(P,S),C.shaderSource(M,E),C.compileShader(P),C.compileShader(M),!C.getShaderParameter(P,C.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+C.getShaderInfoLog(P));if(!C.getShaderParameter(M,C.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+C.getShaderInfoLog(M));if(C.attachShader(A,P),C.attachShader(A,M),C.linkProgram(A),!C.getProgramParameter(A,C.LINK_STATUS))throw new Error(`Link Program failed:
`+C.getProgramInfoLog(A));return C.useProgram(A),A},createVertexBuffer:function(S,E){var C=this.gl,A=C.createBuffer();return C.bindBuffer(C.ARRAY_BUFFER,A),C.bufferData(C.ARRAY_BUFFER,S,E),C.bindBuffer(C.ARRAY_BUFFER,null),A},createIndexBuffer:function(S,E){var C=this.gl,A=C.createBuffer();return C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,A),C.bufferData(C.ELEMENT_ARRAY_BUFFER,S,E),C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,null),A},deleteTexture:function(S,E){return E&&this.resetTextures(!0),S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){return S&&(this.gl.deleteFramebuffer(S),e(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)),this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var E=S.x,C=S.y,A=S.width,P=S.height,M=S.backgroundColor;if(S.emit(c.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(E,C,A,P),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),M.alphaGL>0){var O=this.pipelines.setMulti();O.drawFillRect(E,C,A,P,m.getTintFromFloats(M.blueGL,M.greenGL,M.redGL,1),M.alphaGL)}},getCurrentStencilMask:function(){var S=null,E=this.maskStack,C=this.currentCameraMask;return E.length>0?S=E[E.length-1]:C.mask&&C.mask.isStencil&&(S=C),S},postRenderCamera:function(S){var E=S.flashEffect,C=S.fadeEffect;if(E.isRunning||C.isRunning||C.isComplete){var A=this.pipelines.setMulti();E.postRenderWebGL(A,m.getTintFromFloats),C.postRenderWebGL(A,m.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(c.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;S.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(i.PRE_RENDER)}},render:function(S,E,C){if(!this.contextLost){var A=E.length;if(this.emit(i.RENDER,S,C),this.preRenderCamera(C),A===0){this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(C);return}this.currentType="";for(var P=this.currentMask,M=0;M<A;M++){this.finalType=M===A-1;var O=E[M],F=O.mask;P=this.currentMask,P.mask&&P.mask!==F&&P.mask.postRenderWebGL(this,P.camera),F&&P.mask!==F&&F.preRenderWebGL(this,O,C),O.blendMode!==this.currentBlendMode&&this.setBlendMode(O.blendMode);var I=O.type;I!==this.currentType&&(this.newType=!0,this.currentType=I),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[M+1].type===this.currentType,O.renderWebGL(this,O,C),this.newType=!1}P=this.currentMask,P.mask&&P.mask.postRenderWebGL(this,P.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(C)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(i.POST_RENDER);var S=this.snapshotState;S.callback&&(x(this.canvas,S),S.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(S,E,C){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,E,C)},snapshotArea:function(S,E,C,A,P,M,O){var F=this.snapshotState;return F.callback=P,F.type=M,F.encoder=O,F.getPixel=!1,F.x=S,F.y=E,F.width=Math.min(C,this.gl.drawingBufferWidth),F.height=Math.min(A,this.gl.drawingBufferHeight),this},snapshotPixel:function(S,E,C){return this.snapshotArea(S,E,1,1,C),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,E,C,A,P,M,O,F,I,N,G){P===void 0&&(P=!1),M===void 0&&(M=0),O===void 0&&(O=0),F===void 0&&(F=E),I===void 0&&(I=C);var Y=this.currentFramebuffer;this.snapshotArea(M,O,F,I,A,N,G);var z=this.snapshotState;return z.getPixel=P,z.isFramebuffer=!0,z.bufferWidth=E,z.bufferHeight=C,this.setFramebuffer(S),x(this.canvas,z),this.setFramebuffer(Y),z.callback=null,z.isFramebuffer=!1,this},canvasToTexture:function(S,E,C,A){return C===void 0&&(C=!1),A===void 0&&(A=!1),E?this.updateCanvasTexture(S,E,A):this.createCanvasTexture(S,C,A)},createCanvasTexture:function(S,E,C){E===void 0&&(E=!1),C===void 0&&(C=!1);var A=this.gl,P=A.NEAREST,M=A.NEAREST,O=S.width,F=S.height,I=A.CLAMP_TO_EDGE,N=u(O,F);return!E&&N&&(I=A.REPEAT),this.config.antialias&&(P=N?this.mipmapFilter:A.LINEAR,M=A.LINEAR),this.createTexture2D(0,P,M,I,I,A.RGBA,S,O,F,!0,!1,C)},updateCanvasTexture:function(S,E,C){C===void 0&&(C=!1);var A=this.gl,P=S.width,M=S.height;if(P>0&&M>0){A.activeTexture(A.TEXTURE0);var O=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,E),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,C),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,S),E.width=P,E.height=M,O&&A.bindTexture(A.TEXTURE_2D,O)}return E},createVideoTexture:function(S,E,C){E===void 0&&(E=!1),C===void 0&&(C=!1);var A=this.gl,P=A.NEAREST,M=A.NEAREST,O=S.videoWidth,F=S.videoHeight,I=A.CLAMP_TO_EDGE,N=u(O,F);return!E&&N&&(I=A.REPEAT),this.config.antialias&&(P=N?this.mipmapFilter:A.LINEAR,M=A.LINEAR),this.createTexture2D(0,P,M,I,I,A.RGBA,S,O,F,!0,!0,C)},updateVideoTexture:function(S,E,C){C===void 0&&(C=!1);var A=this.gl,P=S.videoWidth,M=S.videoHeight;if(P>0&&M>0){A.activeTexture(A.TEXTURE0);var O=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,E),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,C),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,S),E.width=P,E.height=M,O&&A.bindTexture(A.TEXTURE_2D,O)}return E},setTextureFilter:function(S,E){var C=this.gl,A=[C.LINEAR,C.NEAREST][E];C.activeTexture(C.TEXTURE0);var P=C.getParameter(C.TEXTURE_BINDING_2D);return C.bindTexture(C.TEXTURE_2D,S),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,A),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,A),P&&C.bindTexture(C.TEXTURE_2D,P),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var S=this.gl,E=this.tempTextures,C=0;C<E.length;C++)S.deleteTexture(E[C]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});h.exports=T},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(92),s=t(102),a=t(373),n=t(376),i=t(377),r=t(108),u=t(378),o=t(379),l=t(380),f=t(381),d=new e({initialize:function(p){this.game=p.game,this.renderer=p,this.classes=new s([[c.UTILITY_PIPELINE,f],[c.MULTI_PIPELINE,r],[c.BITMAPMASK_PIPELINE,a],[c.SINGLE_PIPELINE,l],[c.ROPE_PIPELINE,o],[c.LIGHT_PIPELINE,i],[c.POINTLIGHT_PIPELINE,u],[c.GRAPHICS_PIPELINE,n]]),this.postPipelineClasses=new s,this.pipelines=new s,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(v){var p,m,x=this,T=this.game;if(this.classes.each(function(E,C){p=x.add(E,new C({game:T})),E===c.UTILITY_PIPELINE&&(x.UTILITY_PIPELINE=p,x.fullFrame1=p.fullFrame1,x.fullFrame2=p.fullFrame2,x.halfFrame1=p.halfFrame1,x.halfFrame2=p.halfFrame2)}),this.MULTI_PIPELINE=this.get(c.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(c.BITMAPMASK_PIPELINE),v)for(m in v){var S=v[m];p=new S(T),p.isPostFX?this.postPipelineClasses.set(m,S):this.has(m)||(this.classes.set(m,S),this.add(m,p))}},add:function(v,p){if(p.isPostFX){console.warn(v+" is a Post Pipeline. Use `addPostPipeline` instead");return}var m=this.pipelines,x=this.renderer;return m.has(v)?console.warn("Pipeline exists: "+v):(p.name=v,p.manager=this,m.set(v,p)),p.hasBooted||p.boot(),x.width!==0&&x.height!==0&&p.resize(x.width,x.height),p},addPostPipeline:function(v,p){this.postPipelineClasses.has(v)||this.postPipelineClasses.set(v,p)},flush:function(){this.current&&this.current.flush()},has:function(v){var p=this.pipelines;return typeof v=="string"?p.has(v):!!p.contains(v)},get:function(v){var p=this.pipelines;if(typeof v=="string")return p.get(v);if(p.contains(v))return v},getPostPipeline:function(v,p){var m=this.postPipelineClasses,x;if(typeof v=="string"?x=m.get(v):typeof v=="function"?m.contains(v)&&(x=v):typeof v=="object"&&(x=m.get(v.name)),x){var T=new x(this.game);return p&&(T.gameObject=p),T}},remove:function(v,p,m){p===void 0&&(p=!0),m===void 0&&(m=!0),this.pipelines.delete(v),p&&this.classes.delete(v),m&&this.postPipelineClasses.delete(v)},set:function(v,p,m){if(!v.isPostFX)return this.isCurrent(v,m)||(this.flush(),this.current&&this.current.unbind(),this.current=v,v.bind(m)),v.updateProjectionMatrix(),v.onBind(p),v},preBatch:function(v){if(v.hasPostPipeline){this.flush();for(var p=v.postPipelines,m=p.length-1;m>=0;m--){var x=p[m];x.active&&x.preBatch(v)}}},postBatch:function(v){if(v.hasPostPipeline){this.flush();for(var p=v.postPipelines,m=0;m<p.length;m++){var x=p[m];x.active&&x.postBatch(v)}}},preBatchCamera:function(v){if(v.hasPostPipeline){this.flush();for(var p=v.postPipelines,m=p.length-1;m>=0;m--){var x=p[m];x.active&&x.preBatch(v)}}},postBatchCamera:function(v){if(v.hasPostPipeline){this.flush();for(var p=v.postPipelines,m=0;m<p.length;m++){var x=p[m];x.active&&x.postBatch(v)}}},isCurrent:function(v,p){var m=this.renderer,x=this.current;return x&&!p&&(p=x.currentShader),!(x!==v||p.program!==m.currentProgram)},copyFrame:function(v,p,m,x,T){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(v,p,m,x,T),this},copyToGame:function(v){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(v),this},drawFrame:function(v,p,m,x){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(v,p,m,x),this},blendFrames:function(v,p,m,x,T){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(v,p,m,x,T),this},blendFramesAdditive:function(v,p,m,x,T){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(v,p,m,x,T),this},clearFrame:function(v,p){return this.UTILITY_PIPELINE.clearFrame(v,p),this},blitFrame:function(v,p,m,x,T,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(v,p,m,x,T,S),this},copyFrameRect:function(v,p,m,x,T,S,E,C){return this.UTILITY_PIPELINE.copyFrameRect(v,p,m,x,T,S,E,C),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(v){return this.UTILITY_PIPELINE.bind(v)},rebind:function(v){v===void 0&&this.previous&&(v=this.previous);var p=this.renderer,m=p.gl;m.disable(m.DEPTH_TEST),m.disable(m.CULL_FACE),p.hasActiveStencilMask()?m.clear(m.DEPTH_BUFFER_BIT):(m.disable(m.STENCIL_TEST),m.clear(m.DEPTH_BUFFER_BIT|m.STENCIL_BUFFER_BIT)),m.viewport(0,0,p.width,p.height),p.currentProgram=null,p.setBlendMode(0,!0);var x=this.pipelines.entries;for(var T in x)x[T].glReset=!0;v&&(this.current=v,v.rebind()),p.resetTextures()},clear:function(){var v=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,v.currentProgram=null,v.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});h.exports=d},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(2),s=t(866),a=t(867),n=t(107),i=t(58),r=new e({Extends:i,initialize:function(o){o.fragShader=c(o,"fragShader",s),o.vertShader=c(o,"vertShader",a),o.batchSize=c(o,"batchSize",1),o.vertices=c(o,"vertices",[-1,1,-1,-7,7,1]),o.attributes=c(o,"attributes",[{name:"inPosition",size:2,type:n.FLOAT}]),i.call(this,o)},boot:function(){i.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(u,o){i.prototype.resize.call(this,u,o),this.set2f("uResolution",u,o)},beginMask:function(u,o,l){var f=this.gl;if(u.bitmapMask&&f){var d=this.renderer;d.flush(),d.pushFramebuffer(u.mainFramebuffer),f.disable(f.STENCIL_TEST),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),d.currentCameraMask.mask!==u&&(d.currentMask.mask=u,d.currentMask.camera=l)}},endMask:function(u,o){var l=this.gl,f=this.renderer,d=u.bitmapMask;if(d&&l){f.flush(),f.pushFramebuffer(u.maskFramebuffer),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),f.setBlendMode(0,!0),d.renderWebGL(f,d,o),f.flush(),f.popFramebuffer(),f.popFramebuffer();var v=f.getCurrentStencilMask();v?(l.enable(l.STENCIL_TEST),v.mask.applyStencil(f,v.camera,!0)):f.currentMask.mask=null,f.pipelines.set(this),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,u.maskTexture),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.mainTexture),this.set1i("uInvertMaskAlpha",u.invertAlpha),l.drawArrays(this.topology,0,3),f.resetTextures()}}});h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AFTER_FLUSH:t(868),BEFORE_FLUSH:t(869),BIND:t(870),BOOT:t(871),DESTROY:t(872),REBIND:t(873),RESIZE:t(874)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(2),s=t(107),a=new e({initialize:function(i,r,u,o,l){this.pipeline=i,this.name=r,this.renderer=i.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(u,o),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(l),this.createUniforms()},createAttributes:function(n){var i=0,r=0,u=[];this.vertexComponentCount=0;for(var o=0;o<n.length;o++){var l=n[o],f=l.name,d=c(l,"size",1),v=c(l,"type",s.FLOAT),p=v.enum,m=v.size,x=!!l.normalized;u.push({name:f,size:d,type:p,normalized:x,offset:r,enabled:!1,location:-1}),m===4?i+=d:i++,r+=d*m}this.vertexSize=r,this.vertexComponentCount=i,this.attributes=u},bind:function(n,i){return n===void 0&&(n=!1),i===void 0&&(i=!1),i&&this.pipeline.flush(),this.renderer.setProgram(this.program),n&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(n){n===void 0&&(n=!1);for(var i=this.gl,r=this.vertexSize,u=this.attributes,o=this.program,l=0;l<u.length;l++){var f=u[l],d=f.size,v=f.type,p=f.offset,m=f.enabled,x=f.location,T=!!f.normalized;if(n){var S=i.getAttribLocation(o,f.name);S>=0?(i.enableVertexAttribArray(S),i.vertexAttribPointer(S,d,v,T,r,p),f.enabled=!0,f.location=S):S!==-1&&i.disableVertexAttribArray(S)}else m?i.vertexAttribPointer(x,d,v,T,r,p):!m&&x>-1&&(i.disableVertexAttribArray(x),f.location=-1)}return this},createUniforms:function(){var n=this.gl,i=this.program,r=this.uniforms,u,o,l,f=n.getProgramParameter(i,n.ACTIVE_UNIFORMS);for(u=0;u<f;u++){var d=n.getActiveUniform(i,u);if(d){o=d.name,l=n.getUniformLocation(i,o),l!==null&&(r[o]={name:o,location:l,value1:null,value2:null,value3:null,value4:null});var v=o.indexOf("[");v>0&&(o=o.substr(0,v),r.hasOwnProperty(o)||(l=n.getUniformLocation(i,o),l!==null&&(r[o]={name:o,location:l,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(n){return this.uniforms.hasOwnProperty(n)},resetUniform:function(n){var i=this.uniforms[n];return i&&(i.value1=null,i.value2=null,i.value3=null,i.value4=null),this},setUniform1:function(n,i,r,u){var o=this.uniforms[i];return o?((u||o.value1!==r)&&(o.value1=r,this.renderer.setProgram(this.program),n.call(this.gl,o.location,r),this.pipeline.currentShader=this),this):this},setUniform2:function(n,i,r,u,o){var l=this.uniforms[i];return l?((o||l.value1!==r||l.value2!==u)&&(l.value1=r,l.value2=u,this.renderer.setProgram(this.program),n.call(this.gl,l.location,r,u),this.pipeline.currentShader=this),this):this},setUniform3:function(n,i,r,u,o,l){var f=this.uniforms[i];return f?((l||f.value1!==r||f.value2!==u||f.value3!==o)&&(f.value1=r,f.value2=u,f.value3=o,this.renderer.setProgram(this.program),n.call(this.gl,f.location,r,u,o),this.pipeline.currentShader=this),this):this},setUniform4:function(n,i,r,u,o,l,f){var d=this.uniforms[i];return d?((f||d.value1!==r||d.value2!==u||d.value3!==o||d.value4!==l)&&(d.value1=r,d.value2=u,d.value3=o,d.value4=l,this.renderer.setProgram(this.program),n.call(this.gl,d.location,r,u,o,l),this.pipeline.currentShader=this),this):this},set1f:function(n,i){return this.setUniform1(this.gl.uniform1f,n,i)},set2f:function(n,i,r){return this.setUniform2(this.gl.uniform2f,n,i,r)},set3f:function(n,i,r,u){return this.setUniform3(this.gl.uniform3f,n,i,r,u)},set4f:function(n,i,r,u,o){return this.setUniform4(this.gl.uniform4f,n,i,r,u,o)},set1fv:function(n,i){return this.setUniform1(this.gl.uniform1fv,n,i,!0)},set2fv:function(n,i){return this.setUniform1(this.gl.uniform2fv,n,i,!0)},set3fv:function(n,i){return this.setUniform1(this.gl.uniform3fv,n,i,!0)},set4fv:function(n,i){return this.setUniform1(this.gl.uniform4fv,n,i,!0)},set1iv:function(n,i){return this.setUniform1(this.gl.uniform1iv,n,i,!0)},set2iv:function(n,i){return this.setUniform1(this.gl.uniform2iv,n,i,!0)},set3iv:function(n,i){return this.setUniform1(this.gl.uniform3iv,n,i,!0)},set4iv:function(n,i){return this.setUniform1(this.gl.uniform4iv,n,i,!0)},set1i:function(n,i){return this.setUniform1(this.gl.uniform1i,n,i)},set2i:function(n,i,r){return this.setUniform2(this.gl.uniform2i,n,i,r)},set3i:function(n,i,r,u){return this.setUniform3(this.gl.uniform3i,n,i,r,u)},set4i:function(n,i,r,u,o){return this.setUniform4(this.gl.uniform4i,n,i,r,u,o)},setMatrix2fv:function(n,i,r){return this.setUniform2(this.gl.uniformMatrix2fv,n,i,r,!0)},setMatrix3fv:function(n,i,r){return this.setUniform2(this.gl.uniformMatrix3fv,n,i,r,!0)},setMatrix4fv:function(n,i,r){return this.setUniform2(this.gl.uniformMatrix4fv,n,i,r,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(59),s=t(2),a=t(875),n=t(876),i=t(25),r=t(107),u=t(58),o=new e({Extends:u,initialize:function(f){f.fragShader=s(f,"fragShader",a),f.vertShader=s(f,"vertShader",n),f.attributes=s(f,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),u.call(this,f),this.calcMatrix=new i,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(l,f,d,v,p,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(p,x);var T=l+d,S=f+v,E=x.getX(l,f),C=x.getY(l,f),A=x.getX(l,S),P=x.getY(l,S),M=x.getX(T,S),O=x.getY(T,S),F=x.getX(T,f),I=x.getY(T,f),N=this.fillTint;this.batchQuad(E,C,A,P,M,O,F,I,N.TL,N.TR,N.BL,N.BR)},batchFillTriangle:function(l,f,d,v,p,m,x,T){this.renderer.pipelines.set(this);var S=this.calcMatrix;T&&T.multiply(x,S);var E=S.getX(l,f),C=S.getY(l,f),A=S.getX(d,v),P=S.getY(d,v),M=S.getX(p,m),O=S.getY(p,m),F=this.fillTint;this.batchTri(E,C,A,P,M,O,F.TL,F.TR,F.BL)},batchStrokeTriangle:function(l,f,d,v,p,m,x,T,S){var E=this.tempTriangle;E[0].x=l,E[0].y=f,E[0].width=x,E[1].x=d,E[1].y=v,E[1].width=x,E[2].x=p,E[2].y=m,E[2].width=x,E[3].x=l,E[3].y=f,E[3].width=x,this.batchStrokePath(E,x,!1,T,S)},batchFillPath:function(l,f,d){this.renderer.pipelines.set(this);var v=this.calcMatrix;d&&d.multiply(f,v);for(var p=l.length,m=this.polygonCache,x,T,S=this.fillTint.TL,E=this.fillTint.TR,C=this.fillTint.BL,A=0;A<p;++A)T=l[A],m.push(T.x,T.y);x=c(m),p=x.length;for(var P=0;P<p;P+=3){var M=x[P+0]*2,O=x[P+1]*2,F=x[P+2]*2,I=m[M+0],N=m[M+1],G=m[O+0],Y=m[O+1],z=m[F+0],W=m[F+1],D=v.getX(I,N),L=v.getY(I,N),B=v.getX(G,Y),w=v.getY(G,Y),V=v.getX(z,W),U=v.getY(z,W);this.batchTri(D,L,B,w,V,U,S,E,C)}m.length=0},batchStrokePath:function(l,f,d,v,p){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var m=l.length-1,x=0;x<m;x++){var T=l[x],S=l[x+1];this.batchLine(T.x,T.y,S.x,S.y,T.width/2,S.width/2,f,x,!d&&x===m-1,v,p)}},batchLine:function(l,f,d,v,p,m,x,T,S,E,C){this.renderer.pipelines.set(this);var A=this.calcMatrix;C&&C.multiply(E,A);var P=d-l,M=v-f,O=Math.sqrt(P*P+M*M),F=p*(v-f)/O,I=p*(l-d)/O,N=m*(v-f)/O,G=m*(l-d)/O,Y=d-N,z=v-G,W=l-F,D=f-I,L=d+N,B=v+G,w=l+F,V=f+I,U=A.getX(Y,z),X=A.getY(Y,z),H=A.getX(W,D),b=A.getY(W,D),Z=A.getX(L,B),K=A.getY(L,B),Q=A.getX(w,V),j=A.getY(w,V),q=this.strokeTint,k=q.TL,J=q.TR,_=q.BL,it=q.BR;if(this.batchQuad(Q,j,H,b,U,X,Z,K,k,J,_,it),!(x<=2)){var tt=this.prevQuad,$=this.firstQuad;T>0&&tt[4]?this.batchQuad(Q,j,H,b,tt[0],tt[1],tt[2],tt[3],k,J,_,it):($[0]=Q,$[1]=j,$[2]=H,$[3]=b,$[4]=1),S&&$[4]?this.batchQuad(U,X,Z,K,$[0],$[1],$[2],$[3],k,J,_,it):(tt[0]=U,tt[1]=X,tt[2]=Z,tt[3]=K,tt[4]=1)}},batchVert:function(l,f,d){var v=this.vertexViewF32,p=this.vertexViewU32,m=this.vertexCount*this.currentShader.vertexComponentCount-1;v[++m]=l,v[++m]=f,p[++m]=d,this.vertexCount++},batchQuad:function(l,f,d,v,p,m,x,T,S,E,C,A){var P=!1;return this.shouldFlush(6)&&(this.flush(),P=!0),this.batchVert(l,f,S),this.batchVert(d,v,C),this.batchVert(p,m,A),this.batchVert(l,f,S),this.batchVert(p,m,A),this.batchVert(x,T,E),P},batchTri:function(l,f,d,v,p,m,x,T,S){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(l,f,x),this.batchVert(d,v,T),this.batchVert(p,m,S),E},destroy:function(){return u.prototype.destroy.call(this),this.polygonCache=null,this}});h.exports=o},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(2),s=t(877),a=t(108),n=t(3),i=t(58),r=10,u=new n,o=new e({Extends:a,initialize:function(f){r=f.game.renderer.config.maxLights;for(var d=c(f,"fragShader",s),v=[],p=1;p<=r;p++)v.push({name:"lights"+p,fragShader:d.replace("%LIGHT_COUNT%",p.toString())});f.shaders=v,a.call(this,f),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){i.prototype.boot.call(this);var l=this.gl,f=l.createTexture();l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,f),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:f};for(var d=0;d<this.shaders.length;d++)this["lightShader"+(d+1)]=this.shaders[d]},onRender:function(l,f){var d=l.sys.lights;if(this.lightsActive=!1,!(!d||!d.active)){var v=d.getLights(f),p=v.length;if(p!==0){this.lightsActive=!0,this.setShader(this["lightShader"+p],!0);var m,x=this.renderer,T=x.height,S=f.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",f.x,f.y,f.rotation,f.zoom),this.set3f("uAmbientLightColor",d.ambientColor.r,d.ambientColor.g,d.ambientColor.b),m=0;m<p;m++){var E=v[m].light,C=E.color,A="uLights["+m+"].";S.transformPoint(E.x,E.y,u),this.set2f(A+"position",u.x-f.scrollX*E.scrollFactorX*f.zoom,T-(u.y-f.scrollY*E.scrollFactorY*f.zoom)),this.set3f(A+"color",C.r,C.g,C.b),this.set1f(A+"intensity",E.intensity),this.set1f(A+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(l){if(l!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var f=this.inverseRotationMatrix;if(l){var d=-l,v=Math.cos(d),p=Math.sin(d);f[1]=p,f[3]=-p,f[0]=f[4]=v}else f[0]=f[4]=1,f[1]=f[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,f),this.currentNormalMapRotation=l}},setTexture2D:function(l,f){var d=this.renderer;l===void 0&&(l=d.tempTextures[0]);var v=this.getNormalMap(f);d.isNewNormalMap(l,v)&&(this.flush(),d.setTextureZero(l),d.setNormalMap(v));var p=f?f.rotation:0;return this.setNormalMapRotation(p),this.currentUnit=0,0},setGameObject:function(l,f){f===void 0&&(f=l.frame);var d=this.renderer,v=f.glTexture,p=this.getNormalMap(l);return d.isNewNormalMap()&&(this.flush(),d.setTextureZero(v),d.setNormalMap(p)),this.setNormalMapRotation(l.rotation),this.currentUnit=0,0},getNormalMap:function(l){var f;return l?l.displayTexture?f=l.displayTexture.dataSource[l.displayFrame.sourceIndex]:l.texture?f=l.texture.dataSource[l.frame.sourceIndex]:l.tileset&&(Array.isArray(l.tileset)?f=l.tileset[0].image.dataSource[0]:f=l.tileset.image.dataSource[0]):f=this.defaultNormalMap,f||(f=this.defaultNormalMap),f.glTexture},batchSprite:function(l,f,d){this.lightsActive&&a.prototype.batchSprite.call(this,l,f,d)},batchTexture:function(l,f,d,v,p,m,x,T,S,E,C,A,P,M,O,F,I,N,G,Y,z,W,D,L,B,w,V,U,X,H,b,Z){this.lightsActive&&a.prototype.batchTexture.call(this,l,f,d,v,p,m,x,T,S,E,C,A,P,M,O,F,I,N,G,Y,z,W,D,L,B,w,V,U,X,H,b,Z)},batchTextureFrame:function(l,f,d,v,p,m,x){this.lightsActive&&a.prototype.batchTextureFrame.call(this,l,f,d,v,p,m,x)}});o.LIGHT_COUNT=r,h.exports=o},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(2),s=t(880),a=t(881),n=t(58),i=new e({Extends:n,initialize:function(u){u.vertShader=c(u,"vertShader",a),u.fragShader=c(u,"fragShader",s),u.attributes=c(u,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),n.call(this,u)},onRender:function(r,u){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",u.zoom)},batchPointLight:function(r,u,o,l,f,d,v,p,m,x,T,S){var E=r.color,C=r.intensity,A=r.radius,P=r.attenuation,M=E.r*C,O=E.g*C,F=E.b*C,I=u.alpha*r.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(o,l,T,S,A,P,M,O,F,I),this.batchLightVert(f,d,T,S,A,P,M,O,F,I),this.batchLightVert(v,p,T,S,A,P,M,O,F,I),this.batchLightVert(o,l,T,S,A,P,M,O,F,I),this.batchLightVert(v,p,T,S,A,P,M,O,F,I),this.batchLightVert(m,x,T,S,A,P,M,O,F,I)},batchLightVert:function(r,u,o,l,f,d,v,p,m,x){var T=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++S]=r,T[++S]=u,T[++S]=o,T[++S]=l,T[++S]=f,T[++S]=d,T[++S]=v,T[++S]=p,T[++S]=m,T[++S]=x,this.vertexCount++}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(2),s=t(108),a=new e({Extends:s,initialize:function(i){i.topology=5,i.batchSize=c(i,"batchSize",256),s.call(this,i)}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(2),s=t(108),a=t(882),n=t(883),i=t(58),r=new e({Extends:s,initialize:function(o){o.fragShader=c(o,"fragShader",a),o.vertShader=c(o,"vertShader",n),o.forceZero=!0,s.call(this,o)},boot:function(){i.prototype.boot.call(this),this.set1i("uMainSampler",0)}});h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(884),c=t(35),s=t(0),a=t(198),n=t(885),i=t(886),r=t(2),u=t(887),o=t(382),l=t(58),f=new s({Extends:l,initialize:function(v){v.renderTarget=r(v,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),v.vertShader=r(v,"vertShader",o),v.shaders=r(v,"shaders",[{name:"Copy",fragShader:i},{name:"AddBlend",fragShader:e},{name:"LinearBlend",fragShader:u},{name:"ColorMatrix",fragShader:n}]),v.attributes=r(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),v.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],v.batchSize=1,l.call(this,v),this.colorMatrix=new a,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){l.prototype.boot.call(this);var d=this.shaders,v=this.renderTargets;this.copyShader=d[0],this.addShader=d[1],this.linearShader=d[2],this.colorMatrixShader=d[3],this.fullFrame1=v[0],this.fullFrame2=v[1],this.halfFrame1=v[2],this.halfFrame2=v[3]},copyFrame:function(d,v,p,m,x){p===void 0&&(p=1),m===void 0&&(m=!0),x===void 0&&(x=!0);var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,d.texture),v?(T.viewport(0,0,v.width,v.height),T.bindFramebuffer(T.FRAMEBUFFER,v.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,v.texture,0)):T.viewport(0,0,d.width,d.height),m&&(x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blitFrame:function(d,v,p,m,x,T){p===void 0&&(p=1),m===void 0&&(m=!0),x===void 0&&(x=!0),T===void 0&&(T=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,d.texture),d.height>v.height)S.viewport(0,0,d.width,d.height),this.setTargetUVs(d,v);else{var E=v.height-d.height;S.viewport(0,E,d.width,d.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,v.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,v.texture,0),m&&(x?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),T){var C=this.renderer.currentBlendMode;this.renderer.setBlendMode(c.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),T&&this.renderer.setBlendMode(C),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(d,v,p,m,x,T,S,E){S===void 0&&(S=!0),E===void 0&&(E=!0);var C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,d.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,d.texture,0),S&&(E?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,v.texture),C.copyTexSubImage2D(C.TEXTURE_2D,0,0,0,p,m,x,T),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},copyToGame:function(d){var v=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,d.texture),v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW),v.drawArrays(v.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(d,v,p,m){p===void 0&&(p=!0),m===void 0&&(m=this.colorMatrix);var x=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",m.getData()),this.set1f("uAlpha",m.alpha),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,d.texture),v?(x.viewport(0,0,v.width,v.height),x.bindFramebuffer(x.FRAMEBUFFER,v.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,v.texture,0)):x.viewport(0,0,d.width,d.height),p?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),x.bindFramebuffer(x.FRAMEBUFFER,null),x.bindTexture(x.TEXTURE_2D,null)},blendFrames:function(d,v,p,m,x,T){m===void 0&&(m=1),x===void 0&&(x=!0),T===void 0&&(T=this.linearShader);var S=this.gl;this.setShader(T),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",m),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,d.texture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,v.texture),p?(S.bindFramebuffer(S.FRAMEBUFFER,p.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,p.texture,0),S.viewport(0,0,p.width,p.height)):S.viewport(0,0,d.width,d.height),x?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(d,v,p,m,x){this.blendFrames(d,v,p,m,x,this.addShader)},clearFrame:function(d,v){v===void 0&&(v=!0);var p=this.gl;p.viewport(0,0,d.width,d.height),p.bindFramebuffer(p.FRAMEBUFFER,d.framebuffer),v?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT);var m=this.renderer.currentFramebuffer;p.bindFramebuffer(p.FRAMEBUFFER,m)},setUVs:function(d,v,p,m,x,T,S,E){var C=this.vertexViewF32;C[2]=d,C[3]=v,C[6]=p,C[7]=m,C[10]=x,C[11]=T,C[14]=d,C[15]=v,C[18]=x,C[19]=T,C[22]=S,C[23]=E},setTargetUVs:function(d,v){var p=v.height/d.height;p>.5?p=.5-(p-.5):p=.5+(.5-p),this.setUVs(0,p,0,1+p,1,1+p,1,p)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});h.exports=f},function(h,g){h.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),c=t(38),s=t(2),a=function(n,i){var r=n.getContext("experimental-webgl"),u=s(i,"callback"),o=s(i,"type","image/png"),l=s(i,"encoder",.92),f=s(i,"x",0),d=s(i,"y",0),v=s(i,"getPixel",!1),p=s(i,"isFramebuffer",!1),m=p?s(i,"bufferWidth",1):r.drawingBufferWidth,x=p?s(i,"bufferHeight",1):r.drawingBufferHeight;if(v){var T=new Uint8Array(4),S=p?d:x-d;r.readPixels(f,S,1,1,r.RGBA,r.UNSIGNED_BYTE,T),u.call(null,new c(T[0],T[1],T[2],T[3]/255))}else{var E=s(i,"width",m),C=s(i,"height",x),A=E*C*4,P=new Uint8Array(A);r.readPixels(f,x-d-C,E,C,r.RGBA,r.UNSIGNED_BYTE,P);for(var M=e.createWebGL(this,E,C),O=M.getContext("2d"),F=O.getImageData(0,0,E,C),I=F.data,N=0;N<C;N++)for(var G=0;G<E;G++){var Y=((C-N-1)*E+G)*4,z=(N*E+G)*4;I[z+0]=P[Y+0],I[z+1]=P[Y+1],I[z+2]=P[Y+2],I[z+3]=P[Y+3]}O.putImageData(F,0,0);var W=new Image;W.onerror=function(){u.call(null),e.remove(M)},W.onload=function(){u.call(null,W),e.remove(M)},W.src=M.toDataURL(o,l)}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),c=function(s){var a=s.config;if(!a.hideBanner){var n="WebGL";a.renderType===e.CANVAS?n="Canvas":a.renderType===e.HEADLESS&&(n="Headless");var i=a.audio,r=s.device.audio,u;if(r.webAudio&&!i.disableWebAudio?u="Web Audio":i.noAudio||!r.webAudio&&!r.audioData?u="No Audio":u="HTML5 Audio",s.device.browser.ie)window.console&&console.log("Phaser v"+e.VERSION+" / https://phaser.io");else{var o="",l=[o];if(Array.isArray(a.bannerBackgroundColor)){var f;a.bannerBackgroundColor.forEach(function(v){o=o.concat("%c "),l.push("background: "+v),f=v}),l[l.length-1]="color: "+a.bannerTextColor+"; background: "+f}else o=o.concat("%c "),l.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor);l.push("background: transparent"),a.gameTitle&&(o=o.concat(a.gameTitle),a.gameVersion&&(o=o.concat(" v"+a.gameVersion)),a.hidePhaser||(o=o.concat(" / ")));var d="";a.hidePhaser||(o=o.concat("Phaser v"+e.VERSION+d+" ("+n+" | "+u+")")),o=o.concat(" %c "+a.gameURL),l[0]=o,console.log.apply(console,l)}}};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(6),s=t(1),a=t(386),n=new e({initialize:function(r,u){this.game=r,this.raf=new a,this.started=!1,this.running=!1,this.minFps=c(u,"min",5),this.targetFps=c(u,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=c(u,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=c(u,"deltaHistory",10),this.panicMax=c(u,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=c(u,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var i=window.performance.now();this.time=i,this.lastTime=i,this.nextFpsUpdate=i+1e3,this.framesThisSecond=0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=Math.min(this._target,this.deltaHistory[r]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(i){if(this.started)return this;this.started=!0,this.running=!0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=i,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var i=window.performance.now();this.now=i;var r=i-this.lastTime;r<0&&(r=0),this.rawDelta=r;var u=this.deltaIndex,o=this.deltaHistory,l=this.deltaSmoothingMax,f=r,d=r;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,f=Math.min(f,this._target)),f>this._min&&(f=o[u],f=Math.min(f,this._min)),o[u]=f,this.deltaIndex++,this.deltaIndex>l&&(this.deltaIndex=0),d=0;for(var v=0;v<l;v++)d+=o[v];d/=l}this.delta=d,this.time+=this.rawDelta,i>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=i+1e3,this.framesThisSecond=0),this.framesThisSecond++;var p=d/this._target;this.callback(i,d,p),this.lastTime=i,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(i){this.running||(i&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=s,this.raf=null,this.game=null}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(1),s=new e({initialize:function(){this.isRunning=!1,this.callback=c,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var n=this;this.step=function i(){var r=window.performance.now();n.lastTime=n.tick,n.tick=r,n.callback(r),n.timeOutID=window.requestAnimationFrame(i)},this.stepTimeout=function i(){var r=Date.now(),u=Math.min(Math.max(n.target*2+n.tick-r,0),n.target);n.lastTime=n.tick,n.tick=r,n.callback(r),n.timeOutID=window.setTimeout(i,u)}},start:function(a,n,i){this.isRunning||(this.callback=a,this.isSetTimeOut=n,this.target=i,this.isRunning=!0,this.timeOutID=n?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=c}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(22),c=function(s){var a,n=s.events;if(document.hidden!==void 0)a="visibilitychange";else{var i=["webkit","moz","ms"];i.forEach(function(u){document[u+"Hidden"]!==void 0&&(document.hidden=function(){return document[u+"Hidden"]},a=u+"visibilitychange")})}var r=function(u){document.hidden||u.type==="pause"?n.emit(e.HIDDEN):n.emit(e.VISIBLE)};a&&document.addEventListener(a,r,!1),window.onblur=function(){n.emit(e.BLUR)},window.onfocus=function(){n.emit(e.FOCUS)},window.focus&&s.config.autoFocus&&window.focus()};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(389),c=t(31),s=t(6),a=function(n){var i=s(n,"data",[]),r=s(n,"canvas",null),u=s(n,"palette",e),o=s(n,"pixelWidth",1),l=s(n,"pixelHeight",o),f=s(n,"resizeCanvas",!0),d=s(n,"clearCanvas",!0),v=s(n,"preRender",null),p=s(n,"postRender",null),m=Math.floor(Math.abs(i[0].length*o)),x=Math.floor(Math.abs(i.length*l));r||(r=c.create2D(this,m,x),f=!1,d=!1),f&&(r.width=m,r.height=x);var T=r.getContext("2d");d&&T.clearRect(0,0,m,x),v&&v(r,T);for(var S=0;S<i.length;S++)for(var E=i[S],C=0;C<E.length;C++){var A=E[C];A!=="."&&A!==" "&&(T.fillStyle=u[A],T.fillRect(C*o,S*l,o,l))}return p&&p(r,T),r};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(358),s=t(94),a=t(3),n=new e({Extends:s,initialize:function(r,u,o,l){s.call(this,"CubicBezierCurve"),Array.isArray(r)&&(l=new a(r[6],r[7]),o=new a(r[4],r[5]),u=new a(r[2],r[3]),r=new a(r[0],r[1])),this.p0=r,this.p1=u,this.p2=o,this.p3=l},getStartPoint:function(i){return i===void 0&&(i=new a),i.copy(this.p0)},getResolution:function(i){return i},getPoint:function(i,r){r===void 0&&(r=new a);var u=this.p0,o=this.p1,l=this.p2,f=this.p3;return r.set(c(i,u.x,o.x,l.x,f.x),c(i,u.y,o.y,l.y,f.y))},draw:function(i,r){r===void 0&&(r=32);var u=this.getPoints(r);i.beginPath(),i.moveTo(this.p0.x,this.p0.y);for(var o=1;o<u.length;o++)i.lineTo(u[o].x,u[o].y);return i.strokePath(),i},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});n.fromJSON=function(i){var r=i.points,u=new a(r[0],r[1]),o=new a(r[2],r[3]),l=new a(r[4],r[5]),f=new a(r[6],r[7]);return new n(u,o,l,f)},h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(94),s=t(36),a=t(6),n=t(196),i=t(3),r=new e({Extends:c,initialize:function(o,l,f,d,v,p,m,x){if(typeof o=="object"){var T=o;o=a(T,"x",0),l=a(T,"y",0),f=a(T,"xRadius",0),d=a(T,"yRadius",f),v=a(T,"startAngle",0),p=a(T,"endAngle",360),m=a(T,"clockwise",!1),x=a(T,"rotation",0)}else d===void 0&&(d=f),v===void 0&&(v=0),p===void 0&&(p=360),m===void 0&&(m=!1),x===void 0&&(x=0);c.call(this,"EllipseCurve"),this.p0=new i(o,l),this._xRadius=f,this._yRadius=d,this._startAngle=s(v),this._endAngle=s(p),this._clockwise=m,this._rotation=s(x)},getStartPoint:function(u){return u===void 0&&(u=new i),this.getPoint(0,u)},getResolution:function(u){return u*2},getPoint:function(u,o){o===void 0&&(o=new i);for(var l=Math.PI*2,f=this._endAngle-this._startAngle,d=Math.abs(f)<Number.EPSILON;f<0;)f+=l;for(;f>l;)f-=l;f<Number.EPSILON&&(d?f=0:f=l),this._clockwise&&!d&&(f===l?f=-l:f=f-l);var v=this._startAngle+u*f,p=this.p0.x+this._xRadius*Math.cos(v),m=this.p0.y+this._yRadius*Math.sin(v);if(this._rotation!==0){var x=Math.cos(this._rotation),T=Math.sin(this._rotation),S=p-this.p0.x,E=m-this.p0.y;p=S*x-E*T+this.p0.x,m=S*T+E*x+this.p0.y}return o.set(p,m)},setXRadius:function(u){return this.xRadius=u,this},setYRadius:function(u){return this.yRadius=u,this},setWidth:function(u){return this.xRadius=u/2,this},setHeight:function(u){return this.yRadius=u/2,this},setStartAngle:function(u){return this.startAngle=u,this},setEndAngle:function(u){return this.endAngle=u,this},setClockwise:function(u){return this.clockwise=u,this},setRotation:function(u){return this.rotation=u,this},x:{get:function(){return this.p0.x},set:function(u){this.p0.x=u}},y:{get:function(){return this.p0.y},set:function(u){this.p0.y=u}},xRadius:{get:function(){return this._xRadius},set:function(u){this._xRadius=u}},yRadius:{get:function(){return this._yRadius},set:function(u){this._yRadius=u}},startAngle:{get:function(){return n(this._startAngle)},set:function(u){this._startAngle=s(u)}},endAngle:{get:function(){return n(this._endAngle)},set:function(u){this._endAngle=s(u)}},clockwise:{get:function(){return this._clockwise},set:function(u){this._clockwise=u}},angle:{get:function(){return n(this._rotation)},set:function(u){this._rotation=s(u)}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=u}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:n(this._startAngle),endAngle:n(this._endAngle),clockwise:this._clockwise,rotation:n(this._rotation)}}});r.fromJSON=function(u){return new r(u)},h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(94),s=t(199),a=t(10),n=t(3),i=new e({Extends:c,initialize:function(u,o){c.call(this,"LineCurve"),Array.isArray(u)&&(o=new n(u[2],u[3]),u=new n(u[0],u[1])),this.p0=u,this.p1=o,this.arcLengthDivisions=1},getBounds:function(r){return r===void 0&&(r=new a),s([this.p0,this.p1],r)},getStartPoint:function(r){return r===void 0&&(r=new n),r.copy(this.p0)},getResolution:function(r){return r===void 0&&(r=1),r},getPoint:function(r,u){return u===void 0&&(u=new n),r===1?u.copy(this.p1):(u.copy(this.p1).subtract(this.p0).scale(r).add(this.p0),u)},getPointAt:function(r,u){return this.getPoint(r,u)},getTangent:function(r,u){return u===void 0&&(u=new n),u.copy(this.p1).subtract(this.p0).normalize(),u},getUtoTmapping:function(r,u,o){var l;if(u){var f=this.getLengths(o),d=f[f.length-1],v=Math.min(u,d);l=v/d}else l=r;return l},draw:function(r){return r.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});i.fromJSON=function(r){var u=r.points,o=new n(u[0],u[1]),l=new n(u[2],u[3]);return new i(o,l)},h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(3),s=new e({initialize:function(n,i){this.active=!1,this.p0=new c(n,i)},getPoint:function(a,n){return n===void 0&&(n=new c),n.copy(this.p0)},getPointAt:function(a,n){return this.getPoint(a,n)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(94),s=t(359),a=t(3),n=new e({Extends:c,initialize:function(r,u,o){c.call(this,"QuadraticBezier"),Array.isArray(r)&&(o=new a(r[4],r[5]),u=new a(r[2],r[3]),r=new a(r[0],r[1])),this.p0=r,this.p1=u,this.p2=o},getStartPoint:function(i){return i===void 0&&(i=new a),i.copy(this.p0)},getResolution:function(i){return i},getPoint:function(i,r){r===void 0&&(r=new a);var u=this.p0,o=this.p1,l=this.p2;return r.set(s(i,u.x,o.x,l.x),s(i,u.y,o.y,l.y))},draw:function(i,r){r===void 0&&(r=32);var u=this.getPoints(r);i.beginPath(),i.moveTo(this.p0.x,this.p0.y);for(var o=1;o<u.length;o++)i.lineTo(u[o].x,u[o].y);return i.strokePath(),i},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});n.fromJSON=function(i){var r=i.points,u=new a(r[0],r[1]),o=new a(r[2],r[3]),l=new a(r[4],r[5]);return new n(u,o,l)},h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(194),c=t(0),s=t(94),a=t(3),n=new c({Extends:s,initialize:function(r){r===void 0&&(r=[]),s.call(this,"SplineCurve"),this.points=[],this.addPoints(r)},addPoints:function(i){for(var r=0;r<i.length;r++){var u=new a;typeof i[r]=="number"?(u.x=i[r],u.y=i[r+1],r++):Array.isArray(i[r])?(u.x=i[r][0],u.y=i[r][1]):(u.x=i[r].x,u.y=i[r].y),this.points.push(u)}return this},addPoint:function(i,r){var u=new a(i,r);return this.points.push(u),u},getStartPoint:function(i){return i===void 0&&(i=new a),i.copy(this.points[0])},getResolution:function(i){return i*this.points.length},getPoint:function(i,r){r===void 0&&(r=new a);var u=this.points,o=(u.length-1)*i,l=Math.floor(o),f=o-l,d=u[l===0?l:l-1],v=u[l],p=u[l>u.length-2?u.length-1:l+1],m=u[l>u.length-3?u.length-1:l+2];return r.set(e(f,d.x,v.x,p.x,m.x),e(f,d.y,v.y,p.y,m.y))},toJSON:function(){for(var i=[],r=0;r<this.points.length;r++)i.push(this.points[r].x),i.push(this.points[r].y);return{type:this.type,points:i}}});n.fromJSON=function(i){return new n(i.points)},h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n,i,r){(!n||n==="")&&(n=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!i||i==="")&&(i=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),r===void 0&&(r=null),this.key=a,this.fragmentSrc=n,this.vertexSrc=i,this.uniforms=r}});h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38);e.ColorSpectrum=t(909),e.ColorToRGBA=t(910),e.ComponentToHex=t(398),e.GetColor=t(103),e.GetColor32=t(328),e.HexStringToColor=t(327),e.HSLToColor=t(911),e.HSVColorWheel=t(912),e.HSVToRGB=t(188),e.HueToComponent=t(399),e.IntegerToColor=t(189),e.IntegerToRGB=t(330),e.Interpolate=t(913),e.ObjectToColor=t(331),e.RandomRGB=t(914),e.RGBStringToColor=t(332),e.RGBToHSV=t(329),e.RGBToString=t(915),e.ValueToColor=t(187),h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c=e.toString(16);return c.length===1?"0"+c:c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return s<0&&(s+=1),s>1&&(s-=1),s<.16666666666666666?e+(c-e)*6*s:s<.5?c:s<.6666666666666666?e+(c-e)*(.6666666666666666-s)*6:e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),c=function(s){if(document.readyState==="complete"||document.readyState==="interactive"){s();return}var a=function(){document.removeEventListener("deviceready",a,!0),document.removeEventListener("DOMContentLoaded",a,!0),window.removeEventListener("load",a,!0),s()};document.body?e.cordova?document.addEventListener("deviceready",a,!1):(document.addEventListener("DOMContentLoaded",a,!0),window.addEventListener("load",a,!0)):window.setTimeout(a,20)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(!e)return window.innerHeight;var c=Math.abs(window.orientation),s={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),s.w=c===90?a.offsetHeight:window.innerWidth,s.h=c===90?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,Math.abs(window.orientation)!==90?s.h:s.w};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(201),c=function(s,a){var n=window.screen,i=n?n.orientation||n.mozOrientation||n.msOrientation:!1;if(i&&typeof i.type=="string")return i.type;if(typeof i=="string")return i;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?e.ORIENTATION.PORTRAIT:e.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return e.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return e.ORIENTATION.LANDSCAPE}else return a>s?e.ORIENTATION.PORTRAIT:e.ORIENTATION.LANDSCAPE};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c;return e!==""&&(typeof e=="string"?c=document.getElementById(e):e&&e.nodeType===1&&(c=e)),c||(c=document.body),c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c="";try{if(window.DOMParser){var s=new DOMParser;c=s.parseFromString(e,"text/xml")}else c=new ActiveXObject("Microsoft.XMLDOM"),c.loadXML(e)}catch{c=null}return!c||!c.documentElement||c.getElementsByTagName("parsererror").length?null:c};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(203),s=t(9),a=t(51),n=t(22),i=t(410),r=t(411),u=t(412),o=t(413),l=t(25),f=t(177),d=new e({initialize:function(p,m){this.game=p,this.scaleManager,this.canvas,this.config=m,this.enabled=!0,this.events=new s,this.isOver=!0,this.defaultCursor="",this.keyboard=m.inputKeyboard?new i(this):null,this.mouse=m.inputMouse?new r(this):null,this.touch=m.inputTouch?new o(this):null,this.pointers=[],this.pointersTotal=m.inputActivePointers,m.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var x=0;x<=this.pointersTotal;x++){var T=new u(this,x);T.smoothFactor=m.inputSmoothFactor,this.pointers.push(T)}this.mousePointer=m.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new l,this._tempMatrix2=new l,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],p.events.once(n.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(a.MANAGER_BOOT),this.game.events.on(n.PRE_RENDER,this.preRender,this),this.game.events.once(n.DESTROY,this.destroy,this)},setCanvasOver:function(v){this.isOver=!0,this.events.emit(a.GAME_OVER,v)},setCanvasOut:function(v){this.isOver=!1,this.events.emit(a.GAME_OUT,v)},preRender:function(){var v=this.game.loop.now,p=this.game.loop.delta,m=this.game.scene.getScenes(!0,!0);this.time=v,this.events.emit(a.MANAGER_UPDATE);for(var x=0;x<m.length;x++){var T=m[x];if(T.sys.input&&T.sys.input.updatePoll(v,p)&&this.globalTopOnly)return}},setDefaultCursor:function(v){this.defaultCursor=v,this.canvas.style.cursor!==v&&(this.canvas.style.cursor=v)},setCursor:function(v){v.cursor&&(this.canvas.style.cursor=v.cursor)},resetCursor:function(v){v.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(v){v===void 0&&(v=1);var p=[];this.pointersTotal+v>10&&(v=10-this.pointersTotal);for(var m=0;m<v;m++){var x=this.pointers.length,T=new u(this,x);T.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(T),this.pointersTotal++,p.push(T)}return p},updateInputPlugins:function(v,p){var m=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var x=0;x<m.length;x++){var T=m[x];if(T.sys.input){var S=T.sys.input.update(v,p);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(v){for(var p=this.pointers,m=[],x=0;x<v.changedTouches.length;x++)for(var T=v.changedTouches[x],S=1;S<this.pointersTotal;S++){var E=p[S];if(!E.active){E.touchstart(T,v),this.activePointer=E,m.push(E);break}}this.updateInputPlugins(c.TOUCH_START,m)},onTouchMove:function(v){for(var p=this.pointers,m=[],x=0;x<v.changedTouches.length;x++)for(var T=v.changedTouches[x],S=1;S<this.pointersTotal;S++){var E=p[S];if(E.active&&E.identifier===T.identifier){E.touchmove(T,v),this.activePointer=E,m.push(E);break}}this.updateInputPlugins(c.TOUCH_MOVE,m)},onTouchEnd:function(v){for(var p=this.pointers,m=[],x=0;x<v.changedTouches.length;x++)for(var T=v.changedTouches[x],S=1;S<this.pointersTotal;S++){var E=p[S];if(E.active&&E.identifier===T.identifier){E.touchend(T,v),m.push(E);break}}this.updateInputPlugins(c.TOUCH_END,m)},onTouchCancel:function(v){for(var p=this.pointers,m=[],x=0;x<v.changedTouches.length;x++)for(var T=v.changedTouches[x],S=1;S<this.pointersTotal;S++){var E=p[S];if(E.active&&E.identifier===T.identifier){E.touchcancel(T,v),m.push(E);break}}this.updateInputPlugins(c.TOUCH_CANCEL,m)},onMouseDown:function(v){var p=this.mousePointer;p.down(v),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(c.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(v){var p=this.mousePointer;p.move(v),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(c.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(v){var p=this.mousePointer;p.up(v),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(c.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(v){var p=this.mousePointer;p.wheel(v),this.activePointer=p,this.updateInputPlugins(c.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(v){var p=this.mouse.locked;this.mousePointer.locked=p,this.events.emit(a.POINTERLOCK_CHANGE,v,p)},inputCandidate:function(v,p){var m=v.input;if(!m||!m.enabled||!m.alwaysEnabled&&!v.willRender(p))return!1;var x=!0,T=v.parentContainer;if(T)do{if(!T.willRender(p)){x=!1;break}T=T.parentContainer}while(T);return x},hitTest:function(v,p,m,x){x===void 0&&(x=this._tempHitTest);var T=this._tempPoint,S=m.scrollX,E=m.scrollY;x.length=0;var C=v.x,A=v.y;m.getWorldPoint(C,A,T),v.worldX=T.x,v.worldY=T.y;for(var P={x:0,y:0},M=this._tempMatrix,O=this._tempMatrix2,F=0;F<p.length;F++){var I=p[F];if(this.inputCandidate(I,m)){var N=T.x+S*I.scrollFactorX-S,G=T.y+E*I.scrollFactorY-E;I.parentContainer?(I.getWorldTransformMatrix(M,O),M.applyInverse(N,G,P)):f(N,G,I.x,I.y,I.rotation,I.scaleX,I.scaleY,P),this.pointWithinHitArea(I,P.x,P.y)&&x.push(I)}}return x},pointWithinHitArea:function(v,p,m){p+=v.displayOriginX,m+=v.displayOriginY;var x=v.input;return x&&x.hitAreaCallback(x.hitArea,p,m,v)?(x.localX=p,x.localY=m,!0):!1},pointWithinInteractiveObject:function(v,p,m){return v.hitArea?(p+=v.gameObject.displayOriginX,m+=v.gameObject.displayOriginY,v.localX=p,v.localY=m,v.hitAreaCallback(v.hitArea,p,m,v)):!1},transformPointer:function(v,p,m,x){var T=v.position,S=v.prevPosition;S.x=T.x,S.y=T.y;var E=this.scaleManager.transformX(p),C=this.scaleManager.transformY(m),A=v.smoothFactor;!x||A===0?(T.x=E,T.y=C):(T.x=E*A+S.x*(1-A),T.y=C*A+S.y*(1-A))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(n.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var v=0;v<this.pointers.length;v++)this.pointers[v].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});h.exports=d},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),c=t(0),s=t(22),a=t(51),n=t(143),i=t(1),r=new c({initialize:function(o){this.manager=o,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=i,this.onKeyUp=i,o.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputKeyboard,this.target=u.inputKeyboardEventTarget,this.addCapture(u.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(s.POST_STEP,this.postUpdate,this)},startListeners:function(){var u=this;this.onKeyDown=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(a.MANAGER_PROCESS);var f=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!f&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}},this.onKeyUp=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(a.MANAGER_PROCESS);var f=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!f&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}};var o=this.target;o&&(o.addEventListener("keydown",this.onKeyDown,!1),o.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var u=this.target;u.removeEventListener("keydown",this.onKeyDown,!1),u.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var o=this.captures,l=0;l<u.length;l++){var f=u[l];typeof f=="string"&&(f=n[f.trim().toUpperCase()]),o.indexOf(f)===-1&&o.push(f)}this.preventDefault=o.length>0},removeCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var o=this.captures,l=0;l<u.length;l++){var f=u[l];typeof f=="string"&&(f=n[f.toUpperCase()]),e(o,f)}this.preventDefault=o.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(s.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(191),s=t(51),a=t(1),n=new e({initialize:function(r){this.manager=r,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,this.isTop=!0,r.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var i=this.manager.config;this.enabled=i.inputMouse,this.target=i.inputMouseEventTarget,this.passive=i.inputMousePassive,this.preventDefaultDown=i.inputMousePreventDefaultDown,this.preventDefaultUp=i.inputMousePreventDefaultUp,this.preventDefaultMove=i.inputMousePreventDefaultMove,this.preventDefaultWheel=i.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,i.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(i){return i.preventDefault(),!1}),this},requestPointerLock:function(){if(c.pointerLock){var i=this.target;i.requestPointerLock=i.requestPointerLock||i.mozRequestPointerLock||i.webkitRequestPointerLock,i.requestPointerLock()}},releasePointerLock:function(){c.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var i=this.target;if(i){var r=this,u=this.manager,o=u.canvas,l=window&&window.focus&&u.game.config.autoFocus;this.onMouseMove=function(d){!d.defaultPrevented&&r.enabled&&u&&u.enabled&&(u.onMouseMove(d),r.preventDefaultMove&&d.preventDefault())},this.onMouseDown=function(d){l&&window.focus(),!d.defaultPrevented&&r.enabled&&u&&u.enabled&&(u.onMouseDown(d),r.preventDefaultDown&&d.target===o&&d.preventDefault())},this.onMouseDownWindow=function(d){!d.defaultPrevented&&r.enabled&&u&&u.enabled&&d.target!==o&&u.onMouseDown(d)},this.onMouseUp=function(d){!d.defaultPrevented&&r.enabled&&u&&u.enabled&&(u.onMouseUp(d),r.preventDefaultUp&&d.target===o&&d.preventDefault())},this.onMouseUpWindow=function(d){!d.defaultPrevented&&r.enabled&&u&&u.enabled&&d.target!==o&&u.onMouseUp(d)},this.onMouseOver=function(d){!d.defaultPrevented&&r.enabled&&u&&u.enabled&&u.setCanvasOver(d)},this.onMouseOut=function(d){!d.defaultPrevented&&r.enabled&&u&&u.enabled&&u.setCanvasOut(d)},this.onMouseWheel=function(d){!d.defaultPrevented&&r.enabled&&u&&u.enabled&&u.onMouseWheel(d),r.preventDefaultWheel&&d.target===o&&d.preventDefault()};var f={passive:!0};if(i.addEventListener("mousemove",this.onMouseMove),i.addEventListener("mousedown",this.onMouseDown),i.addEventListener("mouseup",this.onMouseUp),i.addEventListener("mouseover",this.onMouseOver,f),i.addEventListener("mouseout",this.onMouseOut,f),this.preventDefaultWheel?i.addEventListener("wheel",this.onMouseWheel,{passive:!1}):i.addEventListener("wheel",this.onMouseWheel,f),window&&u.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,f),window.top.addEventListener("mouseup",this.onMouseUpWindow,f)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,f),window.addEventListener("mouseup",this.onMouseUpWindow,f),this.isTop=!1}c.pointerLock&&(this.pointerLockChange=function(d){var v=r.target;r.locked=document.pointerLockElement===v||document.mozPointerLockElement===v||document.webkitPointerLockElement===v,u.onPointerLockChange(d)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var i=this.target;i.removeEventListener("mousemove",this.onMouseMove),i.removeEventListener("mousedown",this.onMouseDown),i.removeEventListener("mouseup",this.onMouseUp),i.removeEventListener("mouseover",this.onMouseOver),i.removeEventListener("mouseout",this.onMouseOut),window&&(i=this.isTop?window.top:window,i.removeEventListener("mousedown",this.onMouseDownWindow),i.removeEventListener("mouseup",this.onMouseUpWindow)),c.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(349),c=t(0),s=t(50),a=t(124),n=t(360),i=t(3),r=t(105),u=new c({initialize:function(l,f){this.manager=l,this.id=f,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new i,this.prevPosition=new i,this.midPoint=new i(-1,-1),this.velocity=new i,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=f===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(o){var l=o.getWorldPoint(this.x,this.y);return this.worldX=l.x,this.worldY=l.y,this},positionToCamera:function(o,l){return o.getWorldPoint(this.x,this.y,l)},updateMotion:function(){var o=this.position.x,l=this.position.y,f=this.midPoint.x,d=this.midPoint.y;if(!(o===f&&l===d)){var v=n(this.motionFactor,f,o),p=n(this.motionFactor,d,l);a(v,o,.1)&&(v=o),a(p,l,.1)&&(p=l),this.midPoint.set(v,p);var m=o-v,x=l-p;this.velocity.set(m,x),this.angle=e(v,p,o,l),this.distance=Math.sqrt(m*m+x*x)}},up:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.button=o.button,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),o.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=o.timeStamp,this.wasTouch=!1)},down:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.button=o.button,this.downElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),o.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),r.macOS&&o.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=o.timeStamp),this.wasTouch=!1},move:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.manager.transformPointer(this,o.pageX,o.pageY,!0),this.locked&&(this.movementX=o.movementX||o.mozMovementX||o.webkitMovementX||0,this.movementY=o.movementY||o.mozMovementY||o.webkitMovementY||0),this.moveTime=o.timeStamp,this.wasTouch=!1},wheel:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.deltaX=o.deltaX,this.deltaY=o.deltaY,this.deltaZ=o.deltaZ,this.wasTouch=!1},touchstart:function(o,l){o.pointerId&&(this.pointerId=o.pointerId),this.identifier=o.identifier,this.target=o.target,this.active=!0,this.buttons=1,this.event=l,this.downElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=l.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(o,l){this.event=l,this.manager.transformPointer(this,o.pageX,o.pageY,!0),this.moveTime=l.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(o,l){this.buttons=0,this.event=l,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(o,l){this.buttons=0,this.event=l,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?e(this.downX,this.downY,this.x,this.y):e(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(o,l){o===void 0&&(o=10),l===void 0&&(l=[]);for(var f=this.prevPosition.x,d=this.prevPosition.y,v=this.position.x,p=this.position.y,m=0;m<o;m++){var x=1/o*m;l[m]={x:n(x,f,v),y:n(x,d,p)}}return l},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(o){this.position.x=o}},y:{get:function(){return this.position.y},set:function(o){this.position.y=o}},time:{get:function(){return this.event?this.event.timeStamp:0}}});h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(51),s=t(1),a=new e({initialize:function(i){this.manager=i,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=s,this.onTouchStartWindow=s,this.onTouchMove=s,this.onTouchEnd=s,this.onTouchEndWindow=s,this.onTouchCancel=s,this.onTouchCancelWindow=s,this.onTouchOver=s,this.onTouchOut=s,i.events.once(c.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputTouch,this.target=n.inputTouchEventTarget,this.capture=n.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},startListeners:function(){var n=this,i=this.manager.canvas,r=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(f){r&&window.focus(),!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&(n.manager.onTouchStart(f),n.capture&&f.cancelable&&f.target===i&&f.preventDefault())},this.onTouchStartWindow=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&f.target!==i&&n.manager.onTouchStart(f)},this.onTouchMove=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&(n.manager.onTouchMove(f),n.capture&&f.cancelable&&f.preventDefault())},this.onTouchEnd=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&(n.manager.onTouchEnd(f),n.capture&&f.cancelable&&f.target===i&&f.preventDefault())},this.onTouchEndWindow=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&f.target!==i&&n.manager.onTouchEnd(f)},this.onTouchCancel=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&(n.manager.onTouchCancel(f),n.capture&&f.preventDefault())},this.onTouchCancelWindow=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&n.manager.onTouchCancel(f)},this.onTouchOver=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&n.manager.setCanvasOver(f)},this.onTouchOut=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&n.manager.setCanvasOut(f)};var u=this.target;if(u){var o={passive:!0},l={passive:!1};u.addEventListener("touchstart",this.onTouchStart,this.capture?l:o),u.addEventListener("touchmove",this.onTouchMove,this.capture?l:o),u.addEventListener("touchend",this.onTouchEnd,this.capture?l:o),u.addEventListener("touchcancel",this.onTouchCancel,this.capture?l:o),u.addEventListener("touchover",this.onTouchOver,this.capture?l:o),u.addEventListener("touchout",this.onTouchOut,this.capture?l:o),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,l),window.addEventListener("touchend",this.onTouchEndWindow,l),window.addEventListener("touchcancel",this.onTouchCancelWindow,l)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("touchstart",this.onTouchStart),n.removeEventListener("touchmove",this.onTouchMove),n.removeEventListener("touchend",this.onTouchEnd),n.removeEventListener("touchcancel",this.onTouchCancel),n.removeEventListener("touchover",this.onTouchOver),n.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(22),s=t(9),a=t(8),n=t(16),i=t(5),r=t(2),u=t(24),o=t(93),l=new e({Extends:s,initialize:function(d){s.call(this),this.game=d,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],d.isBooted?this.boot():d.events.once(c.BOOT,this.boot,this)},boot:function(){var f,d,v,p,m,x,T,S=this.game.config,E=S.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),f=0;f<E.length;f++)d=E[f],v=r(d,"key",null),p=r(d,"plugin",null),m=r(d,"start",!1),x=r(d,"mapping",null),T=r(d,"data",null),v&&(p?this.install(v,p,m,x,T):console.warn("Missing `plugin` for key: "+v));for(E=S.installScenePlugins,E=E.concat(this._pendingScene),f=0;f<E.length;f++)d=E[f],v=r(d,"key",null),p=r(d,"plugin",null),x=r(d,"mapping",null),v&&(p?this.installScenePlugin(v,p,x):console.warn("Missing `plugin` for key: "+v));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(c.DESTROY,this.destroy,this)},addToScene:function(f,d,v){var p,m,x,T=this.game,S=f.scene,E=f.settings.map,C=f.settings.isBooted;for(p=0;p<d.length;p++)m=d[p],T[m]?(f[m]=T[m],E.hasOwnProperty(m)&&(S[E[m]]=f[m])):m==="game"&&E.hasOwnProperty(m)&&(S[E[m]]=T);for(var A=0;A<v.length;A++)for(x=v[A],p=0;p<x.length;p++)if(m=x[p],!!u.hasCore(m)){var P=u.getCore(m),M=P.mapping,O=new P.plugin(S,this,M);f[M]=O,P.custom?S[M]=O:E.hasOwnProperty(M)&&(S[E[M]]=O),C&&O.boot()}for(x=this.plugins,p=0;p<x.length;p++){var F=x[p];F.mapping&&(S[F.mapping]=F.plugin)}},getDefaultScenePlugins:function(){var f=this.game.config.defaultPlugins;return f=f.concat(this.scenePlugins),f},installScenePlugin:function(f,d,v,p,m){if(m===void 0&&(m=!1),typeof d!="function"){console.warn("Invalid Scene Plugin: "+f);return}if(!u.hasCore(f))u.register(f,d,v,!0),this.scenePlugins.push(f);else if(!m&&u.hasCore(f)){console.warn("Scene Plugin key in use: "+f);return}if(p){var x=new d(p,this,f);p.sys[f]=x,v&&v!==""&&(p[v]=x),x.boot()}},install:function(f,d,v,p,m){if(v===void 0&&(v=!1),p===void 0&&(p=null),m===void 0&&(m=null),typeof d!="function")return console.warn("Invalid Plugin: "+f),null;if(u.hasCustom(f))return console.warn("Plugin key in use: "+f),null;if(p!==null&&(v=!0),!this.game.isBooted)this._pendingGlobal.push({key:f,plugin:d,start:v,mapping:p,data:m});else if(u.registerCustom(f,d,p,m),v)return this.start(f);return null},getIndex:function(f){for(var d=this.plugins,v=0;v<d.length;v++){var p=d[v];if(p.key===f)return v}return-1},getEntry:function(f){var d=this.getIndex(f);if(d!==-1)return this.plugins[d]},isActive:function(f){var d=this.getEntry(f);return d&&d.active},start:function(f,d){d===void 0&&(d=f);var v=this.getEntry(d);return v&&!v.active?(v.active=!0,v.plugin.start()):v||(v=this.createEntry(f,d)),v?v.plugin:null},createEntry:function(f,d){var v=u.getCustom(f);if(v){var p=new v.plugin(this);v={key:d,plugin:p,active:!0,mapping:v.mapping,data:v.data},this.plugins.push(v),p.init(v.data),p.start()}return v},stop:function(f){var d=this.getEntry(f);return d&&d.active&&(d.active=!1,d.plugin.stop()),this},get:function(f,d){d===void 0&&(d=!0);var v=this.getEntry(f);if(v)return v.plugin;var p=this.getClass(f);return p&&d?(v=this.createEntry(f,f),v?v.plugin:null):p||null},getClass:function(f){return u.getCustomClass(f)},removeGlobalPlugin:function(f){var d=this.getEntry(f);d&&o(this.plugins,d),u.removeCustom(f)},removeScenePlugin:function(f){o(this.scenePlugins,f),u.remove(f)},registerGameObject:function(f,d,v){return d&&i.register(f,d),v&&n.register(f,v),this},removeGameObject:function(f,d,v){return d===void 0&&(d=!0),v===void 0&&(v=!0),d&&i.remove(f),v&&n.remove(f),this},registerFileType:function(f,d,v){a.register(f,d),v&&v.sys.load&&(v.sys.load[f]=d)},destroy:function(){for(var f=0;f<this.plugins.length;f++)this.plugins[f].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});h.exports=l},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(201),c=t(0),s=t(9),a=t(104),n=t(22),i=t(401),r=t(407),u=t(402),o=t(1),l=t(10),f=t(416),d=t(76),v=t(3),p=new c({Extends:s,initialize:function(x){s.call(this),this.game=x,this.canvas,this.canvasBounds=new l,this.parent=null,this.parentIsWindow=!1,this.parentSize=new f,this.gameSize=new f,this.baseSize=new f,this.displaySize=new f,this.scaleMode=e.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new v(1,1),this.autoRound=!1,this.autoCenter=e.CENTER.NO_CENTER,this.orientation=e.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:o,windowResize:o,fullScreenChange:o,fullScreenError:o}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(n.BOOT,this.boot,this)},boot:function(){var m=this.game;this.canvas=m.canvas,this.fullscreen=m.device.fullscreen,this.scaleMode!==e.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===e.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),m.events.on(n.PRE_STEP,this.step,this),m.events.once(n.READY,this.refresh,this),m.events.once(n.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(m){this.getParent(m),this.getParentBounds();var x=m.width,T=m.height,S=m.scaleMode,E=m.zoom,C=m.autoRound;if(typeof x=="string"){var A=this.parentSize.width;A===0&&(A=window.innerWidth);var P=parseInt(x,10)/100;x=Math.floor(A*P)}if(typeof T=="string"){var M=this.parentSize.height;M===0&&(M=window.innerHeight);var O=parseInt(T,10)/100;T=Math.floor(M*O)}this.scaleMode=S,this.autoRound=C,this.autoCenter=m.autoCenter,this.resizeInterval=m.resizeInterval,C&&(x=Math.floor(x),T=Math.floor(T)),this.gameSize.setSize(x,T),E===e.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(x,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),m.minWidth>0&&this.displaySize.setMin(m.minWidth*E,m.minHeight*E),m.maxWidth>0&&this.displaySize.setMax(m.maxWidth*E,m.maxHeight*E),this.displaySize.setSize(x,T),this.orientation=u(x,T)},getParent:function(m){var x=m.parent;if(x!==null){if(this.parent=r(x),this.parentIsWindow=this.parent===document.body,m.expandParent&&m.scaleMode!==e.SCALE_MODE.NONE){var T=this.parent.getBoundingClientRect();(this.parentIsWindow||T.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",T=this.parent.getBoundingClientRect(),!this.parentIsWindow&&T.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}m.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=r(m.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var m=this.parentSize,x=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(x.height=i(!0));var T=x.width,S=x.height;return m.width!==T||m.height!==S?(m.setSize(T,S),!0):!1},lockOrientation:function(m){var x=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return x?x.call(screen,m):!1},setParentSize:function(m,x){return this.parentSize.setSize(m,x),this.refresh()},setGameSize:function(m,x){var T=this.autoRound;T&&(m=Math.floor(m),x=Math.floor(x));var S=this.width,E=this.height;return this.gameSize.resize(m,x),this.baseSize.resize(m,x),T&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(m/x),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(S,E)},resize:function(m,x){var T=this.zoom,S=this.autoRound;S&&(m=Math.floor(m),x=Math.floor(x));var E=this.width,C=this.height;this.gameSize.resize(m,x),this.baseSize.resize(m,x),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(m*T,x*T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var A=this.canvas.style,P=m*T,M=x*T;return S&&(P=Math.floor(P),M=Math.floor(M)),(P!==m||M!==x)&&(A.width=P+"px",A.height=M+"px"),this.refresh(E,C)},setZoom:function(m){return this.zoom=m,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(m,x){m===void 0&&(m=this.width),x===void 0&&(x=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var T=this.game.domContainer;if(T){this.baseSize.setCSS(T);var S=this.canvas.style,E=T.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=S.marginLeft,E.marginTop=S.marginTop}return this.emit(a.RESIZE,this.gameSize,this.baseSize,this.displaySize,m,x),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var m=u(this.width,this.height);m!==this.orientation&&(this.orientation=m,this.emit(a.ORIENTATION_CHANGE,m))}},updateScale:function(){var m=this.canvas.style,x=this.gameSize.width,T=this.gameSize.height,S,E,C=this.zoom,A=this.autoRound;this.scaleMode===e.SCALE_MODE.NONE?(this.displaySize.setSize(x*C,T*C),S=this.displaySize.width,E=this.displaySize.height,A&&(S=Math.floor(S),E=Math.floor(E)),this._resetZoom&&(m.width=S+"px",m.height=E+"px",this._resetZoom=!1)):this.scaleMode===e.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),S=this.displaySize.width,E=this.displaySize.height,A&&(S=Math.floor(S),E=Math.floor(E)),this.canvas.width=S,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),S=this.displaySize.width,E=this.displaySize.height,A&&(S=Math.floor(S),E=Math.floor(E)),m.width=S+"px",m.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var m=d(this.parentSize.width,this.gameSize.width,0,!0),x=d(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(m,x),1)},updateCenter:function(){var m=this.autoCenter;if(m!==e.CENTER.NO_CENTER){var x=this.canvas,T=x.style,S=x.getBoundingClientRect(),E=S.width,C=S.height,A=Math.floor((this.parentSize.width-E)/2),P=Math.floor((this.parentSize.height-C)/2);m===e.CENTER.CENTER_HORIZONTALLY?P=0:m===e.CENTER.CENTER_VERTICALLY&&(A=0),T.marginLeft=A+"px",T.marginTop=P+"px"}},updateBounds:function(){var m=this.canvasBounds,x=this.canvas.getBoundingClientRect();m.x=x.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),m.y=x.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),m.width=x.width,m.height=x.height},transformX:function(m){return(m-this.canvasBounds.left)*this.displayScale.x},transformY:function(m){return(m-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(m){m===void 0&&(m={navigationUI:"hide"});var x=this.fullscreen;if(!x.available){this.emit(a.FULLSCREEN_UNSUPPORTED);return}if(!x.active){var T=this.getFullscreenTarget();x.keyboard?T[x.request](Element.ALLOW_KEYBOARD_INPUT):T[x.request](m)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(a.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(m){this.removeFullscreenTarget(),this.emit(a.FULLSCREEN_FAILED,m)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var m=document.createElement("div");m.style.margin="0",m.style.padding="0",m.style.width="100%",m.style.height="100%",this.fullscreenTarget=m,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var x=this.canvas.parentNode;x.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var m=this.fullscreenTarget;if(m&&m.parentNode){var x=m.parentNode;x.insertBefore(this.canvas,m),x.removeChild(m)}}},stopFullscreen:function(){var m=this.fullscreen;if(!m.available)return this.emit(a.FULLSCREEN_UNSUPPORTED),!1;m.active&&document[m.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(a.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(m){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(m)},startListeners:function(){var m=this,x=this.listeners;if(x.orientationChange=function(){m.updateBounds(),m._checkOrientation=!0,m.dirty=!0},x.windowResize=function(){m.updateBounds(),m.dirty=!0},window.addEventListener("orientationchange",x.orientationChange,!1),window.addEventListener("resize",x.windowResize,!1),this.fullscreen.available){x.fullScreenChange=function(S){return m.onFullScreenChange(S)},x.fullScreenError=function(S){return m.onFullScreenError(S)};var T=["webkit","moz",""];T.forEach(function(S){document.addEventListener(S+"fullscreenchange",x.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",x.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",x.fullScreenChange,!1),document.addEventListener("MSFullscreenError",x.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(m,x){this.parent&&(this._lastCheck+=x,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var m=this.listeners;window.removeEventListener("orientationchange",m.orientationChange,!1),window.removeEventListener("resize",m.windowResize,!1);var x=["webkit","moz",""];x.forEach(function(T){document.removeEventListener(T+"fullscreenchange",m.fullScreenChange,!1),document.removeEventListener(T+"fullscreenerror",m.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",m.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",m.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===e.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===e.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});h.exports=p},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=t(0),s=t(76),a=t(3),n=new c({initialize:function(r,u,o,l){r===void 0&&(r=0),u===void 0&&(u=r),o===void 0&&(o=0),l===void 0&&(l=null),this._width=r,this._height=u,this._parent=l,this.aspectMode=o,this.aspectRatio=u===0?1:r/u,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(i){return i===void 0&&(i=0),this.aspectMode=i,this.setSize(this._width,this._height)},setSnap:function(i,r){return i===void 0&&(i=0),r===void 0&&(r=i),this.snapTo.set(i,r),this.setSize(this._width,this._height)},setParent:function(i){return this._parent=i,this.setSize(this._width,this._height)},setMin:function(i,r){return i===void 0&&(i=0),r===void 0&&(r=i),this.minWidth=e(i,0,this.maxWidth),this.minHeight=e(r,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(i,r){return i===void 0&&(i=Number.MAX_VALUE),r===void 0&&(r=i),this.maxWidth=e(i,this.minWidth,Number.MAX_VALUE),this.maxHeight=e(r,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(i,r){switch(i===void 0&&(i=0),r===void 0&&(r=i),this.aspectMode){case n.NONE:this._width=this.getNewWidth(s(i,this.snapTo.x)),this._height=this.getNewHeight(s(r,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case n.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(s(i,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case n.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(s(r,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case n.FIT:this.constrain(i,r,!0);break;case n.ENVELOP:this.constrain(i,r,!1);break}return this},setAspectRatio:function(i){return this.aspectRatio=i,this.setSize(this._width,this._height)},resize:function(i,r){return this._width=this.getNewWidth(s(i,this.snapTo.x)),this._height=this.getNewHeight(s(r,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(i,r){return r===void 0&&(r=!0),i=e(i,this.minWidth,this.maxWidth),r&&this._parent&&i>this._parent.width&&(i=Math.max(this.minWidth,this._parent.width)),i},getNewHeight:function(i,r){return r===void 0&&(r=!0),i=e(i,this.minHeight,this.maxHeight),r&&this._parent&&i>this._parent.height&&(i=Math.max(this.minHeight,this._parent.height)),i},constrain:function(i,r,u){i===void 0&&(i=0),r===void 0&&(r=i),u===void 0&&(u=!0),i=this.getNewWidth(i),r=this.getNewHeight(r);var o=this.snapTo,l=r===0?1:i/r;return u&&this.aspectRatio>l||!u&&this.aspectRatio<l?(i=s(i,o.x),r=i/this.aspectRatio,o.y>0&&(r=s(r,o.y),i=r*this.aspectRatio)):(u&&this.aspectRatio<l||!u&&this.aspectRatio>l)&&(r=s(r,o.y),i=r*this.aspectRatio,o.x>0&&(i=s(i,o.x),r=i*(1/this.aspectRatio))),this._width=i,this._height=r,this},fitTo:function(i,r){return this.constrain(i,r,!0)},envelop:function(i,r){return this.constrain(i,r,!1)},setWidth:function(i){return this.setSize(i,this._height)},setHeight:function(i){return this.setSize(this._width,i)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(i){i&&i.style&&(i.style.width=this._width+"px",i.style.height=this._height+"px")},copy:function(i){return i.setAspectMode(this.aspectMode),i.aspectRatio=this.aspectRatio,i.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(i){this.setSize(i,this._height)}},height:{get:function(){return this._height},set:function(i){this.setSize(this._width,i)}}});n.NONE=0,n.WIDTH_CONTROLS_HEIGHT=1,n.HEIGHT_CONTROLS_WIDTH=2,n.FIT=3,n.ENVELOP=4,h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(144),s=t(20),a=t(22),n=t(6),i=t(95),r=t(1),u=t(418),o=t(204),l=new e({initialize:function(d,v){if(this.game=d,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++)this._pending.push({key:"default",scene:v[p],autoStart:p===0,data:{}})}d.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var f,d,v,p;for(f=0;f<this._pending.length;f++){d=this._pending[f],v=d.key,p=d.scene;var m;p instanceof u?m=this.createSceneFromInstance(v,p):typeof p=="object"?m=this.createSceneFromObject(v,p):typeof p=="function"&&(m=this.createSceneFromFunction(v,p)),v=m.sys.settings.key,this.keys[v]=m,this.scenes.push(m),this._data[v]&&(m.sys.settings.data=this._data[v].data,this._data[v].autoStart&&(d.autoStart=!0)),(d.autoStart||m.sys.settings.active)&&this._start.push(v)}for(this._pending.length=0,this._data={},this.isBooted=!0,f=0;f<this._start.length;f++)d=this._start[f],this.start(d);this._start.length=0}},processQueue:function(){var f=this._pending.length,d=this._queue.length;if(!(f===0&&d===0)){var v,p;if(f){for(v=0;v<f;v++)p=this._pending[v],this.add(p.key,p.scene,p.autoStart,p.data);for(v=0;v<this._start.length;v++)p=this._start[v],this.start(p);this._start.length=0,this._pending.length=0;return}for(v=0;v<this._queue.length;v++)p=this._queue[v],this[p.op](p.keyA,p.keyB);this._queue.length=0}},add:function(f,d,v,p){if(v===void 0&&(v=!1),p===void 0&&(p={}),this.isProcessing||!this.isBooted)return this._pending.push({key:f,scene:d,autoStart:v,data:p}),this.isBooted||(this._data[f]={data:p}),null;f=this.getKey(f,d);var m;return d instanceof u?m=this.createSceneFromInstance(f,d):typeof d=="object"?(d.key=f,m=this.createSceneFromObject(f,d)):typeof d=="function"&&(m=this.createSceneFromFunction(f,d)),m.sys.settings.data=p,f=m.sys.settings.key,this.keys[f]=m,this.scenes.push(m),(v||m.sys.settings.active)&&(this._pending.length?this._start.push(f):this.start(f)),m},remove:function(f){if(this.isProcessing)this._queue.push({op:"remove",keyA:f,keyB:null});else{var d=this.getScene(f);if(!d||d.sys.isTransitioning())return this;var v=this.scenes.indexOf(d),p=d.sys.settings.key;v>-1&&(delete this.keys[p],this.scenes.splice(v,1),this._start.indexOf(p)>-1&&(v=this._start.indexOf(p),this._start.splice(v,1)),d.sys.destroy())}return this},bootScene:function(f){var d=f.sys,v=d.settings;d.sceneUpdate=r,f.init&&(f.init.call(f,v.data),v.status=c.INIT,v.isTransition&&d.events.emit(s.TRANSITION_INIT,v.transitionFrom,v.transitionDuration));var p;d.load&&(p=d.load,p.reset()),p&&f.preload?(f.preload.call(f),p.list.size===0?this.create(f):(v.status=c.LOADING,p.once(i.COMPLETE,this.loadComplete,this),p.start())):this.create(f)},loadComplete:function(f){this.create(f.scene)},payloadComplete:function(f){this.bootScene(f.scene)},update:function(f,d){this.processQueue(),this.isProcessing=!0;for(var v=this.scenes.length-1;v>=0;v--){var p=this.scenes[v].sys;p.settings.status>c.START&&p.settings.status<=c.RUNNING&&p.step(f,d)}},render:function(f){for(var d=0;d<this.scenes.length;d++){var v=this.scenes[d].sys;v.settings.visible&&v.settings.status>=c.LOADING&&v.settings.status<c.SLEEPING&&v.render(f)}this.isProcessing=!1},create:function(f){var d=f.sys,v=d.settings;f.create&&(v.status=c.CREATING,f.create.call(f,v.data),v.status===c.DESTROYED)||(v.isTransition&&d.events.emit(s.TRANSITION_START,v.transitionFrom,v.transitionDuration),f.update&&(d.sceneUpdate=f.update),v.status=c.RUNNING,d.events.emit(s.CREATE,f))},createSceneFromFunction:function(f,d){var v=new d;if(v instanceof u){var p=v.sys.settings.key;if(p!==""&&(f=p),this.keys.hasOwnProperty(f))throw new Error("Cannot add a Scene with duplicate key: "+f);return this.createSceneFromInstance(f,v)}else return v.sys=new o(v),v.sys.settings.key=f,v.sys.init(this.game),v},createSceneFromInstance:function(f,d){var v=d.sys.settings.key;return v===""&&(d.sys.settings.key=f),d.sys.init(this.game),d},createSceneFromObject:function(f,d){var v=new u(d),p=v.sys.settings.key;p!==""?f=p:v.sys.settings.key=f,v.sys.init(this.game);for(var m=["init","preload","create","update","render"],x=0;x<m.length;x++){var T=n(d,m[x],null);T&&(v[m[x]]=T)}if(d.hasOwnProperty("extend")){for(var S in d.extend)if(d.extend.hasOwnProperty(S)){var E=d.extend[S];S==="data"&&v.hasOwnProperty("data")&&typeof E=="object"?v.data.merge(E):S!=="sys"&&(v[S]=E)}}return v},getKey:function(f,d){if(f||(f="default"),typeof d=="function")return f;if(d instanceof u?f=d.sys.settings.key:typeof d=="object"&&d.hasOwnProperty("key")&&(f=d.key),this.keys.hasOwnProperty(f))throw new Error("Cannot add a Scene with duplicate key: "+f);return f},getScenes:function(f,d){f===void 0&&(f=!0),d===void 0&&(d=!1);for(var v=[],p=this.scenes,m=0;m<p.length;m++){var x=p[m];x&&(!f||f&&x.sys.isActive())&&v.push(x)}return d?v.reverse():v},getScene:function(f){if(typeof f=="string"){if(this.keys[f])return this.keys[f]}else for(var d=0;d<this.scenes.length;d++)if(f===this.scenes[d])return f;return null},isActive:function(f){var d=this.getScene(f);return d?d.sys.isActive():null},isPaused:function(f){var d=this.getScene(f);return d?d.sys.isPaused():null},isVisible:function(f){var d=this.getScene(f);return d?d.sys.isVisible():null},isSleeping:function(f){var d=this.getScene(f);return d?d.sys.isSleeping():null},pause:function(f,d){var v=this.getScene(f);return v&&v.sys.pause(d),this},resume:function(f,d){var v=this.getScene(f);return v&&v.sys.resume(d),this},sleep:function(f,d){var v=this.getScene(f);return v&&!v.sys.isTransitioning()&&v.sys.sleep(d),this},wake:function(f,d){var v=this.getScene(f);return v&&v.sys.wake(d),this},run:function(f,d){var v=this.getScene(f);if(!v){for(var p=0;p<this._pending.length;p++)if(this._pending[p].key===f){this.queueOp("start",f,d);break}return this}v.sys.isSleeping()?v.sys.wake(d):v.sys.isPaused()?v.sys.resume(d):this.start(f,d)},start:function(f,d){if(!this.isBooted)return this._data[f]={autoStart:!0,data:d},this;var v=this.getScene(f);if(v){var p=v.sys;if(p.isActive()||p.isPaused())p.shutdown(),p.sceneUpdate=r,p.start(d);else{p.sceneUpdate=r,p.start(d);var m;if(p.load&&(m=p.load),m&&p.settings.hasOwnProperty("pack")&&(m.reset(),m.addPack({payload:p.settings.pack})))return p.settings.status=c.LOADING,m.once(i.COMPLETE,this.payloadComplete,this),m.start(),this}this.bootScene(v)}return this},stop:function(f,d){var v=this.getScene(f);return v&&!v.sys.isTransitioning()&&v.sys.shutdown(d),this},switch:function(f,d){var v=this.getScene(f),p=this.getScene(d);return v&&p&&v!==p&&(this.sleep(f),this.isSleeping(d)?this.wake(d):this.start(d)),this},getAt:function(f){return this.scenes[f]},getIndex:function(f){var d=this.getScene(f);return this.scenes.indexOf(d)},bringToTop:function(f){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:f,keyB:null});else{var d=this.getIndex(f);if(d!==-1&&d<this.scenes.length){var v=this.getScene(f);this.scenes.splice(d,1),this.scenes.push(v)}}return this},sendToBack:function(f){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:f,keyB:null});else{var d=this.getIndex(f);if(d!==-1&&d>0){var v=this.getScene(f);this.scenes.splice(d,1),this.scenes.unshift(v)}}return this},moveDown:function(f){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:f,keyB:null});else{var d=this.getIndex(f);if(d>0){var v=d-1,p=this.getScene(f),m=this.getAt(v);this.scenes[d]=m,this.scenes[v]=p}}return this},moveUp:function(f){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:f,keyB:null});else{var d=this.getIndex(f);if(d<this.scenes.length-1){var v=d+1,p=this.getScene(f),m=this.getAt(v);this.scenes[d]=m,this.scenes[v]=p}}return this},moveAbove:function(f,d){if(f===d)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:f,keyB:d});else{var v=this.getIndex(f),p=this.getIndex(d);if(v!==-1&&p!==-1){var m=this.getAt(p);this.scenes.splice(p,1),this.scenes.splice(v+1,0,m)}}return this},moveBelow:function(f,d){if(f===d)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:f,keyB:d});else{var v=this.getIndex(f),p=this.getIndex(d);if(v!==-1&&p!==-1){var m=this.getAt(p);this.scenes.splice(p,1),v===0?this.scenes.unshift(m):this.scenes.splice(v,0,m)}}return this},queueOp:function(f,d,v){return this._queue.push({op:f,keyA:d,keyB:v}),this},swapPosition:function(f,d){if(f===d)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:f,keyB:d});else{var v=this.getIndex(f),p=this.getIndex(d);if(v!==p&&v!==-1&&p!==-1){var m=this.getAt(v);this.scenes[v]=this.scenes[p],this.scenes[p]=m}}return this},dump:function(){for(var f=[],d=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],v=0;v<this.scenes.length;v++){var p=this.scenes[v].sys,m=p.settings.visible&&(p.settings.status===c.RUNNING||p.settings.status===c.PAUSED)?"[*] ":"[-] ";m+=p.settings.key+" ("+d[p.settings.status]+")",f.push(m)}console.log(f.join(`
`))},destroy:function(){for(var f=0;f<this.scenes.length;f++){var d=this.scenes[f].sys;d.destroy()}this.update=r,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});h.exports=l},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(204),s=new e({initialize:function(n){this.sys=new c(this,n),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),c=t(205),s=function(a){var n=a.game.config.defaultPhysicsSystem,i=e(a.settings,"physics",!1);if(!(!n&&!i)){var r=[];if(n&&r.push(c(n+"Physics")),i)for(var u in i)u=c(u.concat("Physics")),r.indexOf(u)===-1&&r.push(u);return r}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),c=function(s){var a=s.plugins.getDefaultScenePlugins(),n=e(s.settings,"plugins",!1);return Array.isArray(n)?n:a||[]};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(144),c=t(6),s=t(127),a=t(978),n={create:function(i){return typeof i=="string"?i={key:i}:i===void 0&&(i={}),{status:e.PENDING,key:c(i,"key",""),active:c(i,"active",!1),visible:c(i,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:c(i,"pack",!1),cameras:c(i,"cameras",null),map:c(i,"map",s(a,c(i,"mapAdd",{}))),physics:c(i,"physics",{}),loader:c(i,"loader",{}),plugins:c(i,"plugins",!1),input:c(i,"input",{})}}};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),c=t(423),s=t(0),a=t(38),n=t(33),i=t(9),r=t(106),u=t(22),o=t(388),l=t(6),f=t(425),d=t(206),v=new s({Extends:i,initialize:function(m){i.call(this),this.game=m,this.name="TextureManager",this.list={},this._tempCanvas=e.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,m.events.once(u.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(r.LOAD,this.updatePending,this),this.on(r.ERROR,this.updatePending,this);var p=this.game.config;this.addBase64("__DEFAULT",p.defaultImage),this.addBase64("__MISSING",p.missingImage),this.addBase64("__WHITE",p.whiteImage),this.game.events.once(u.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(r.LOAD),this.off(r.ERROR),this.emit(r.READY))},checkKey:function(p){return this.exists(p)?(console.error("Texture key already in use: "+p),!1):!0},remove:function(p){if(typeof p=="string")if(this.exists(p))p=this.get(p);else return console.warn("No texture found matching key: "+p),this;return this.list.hasOwnProperty(p.key)&&(p.destroy(),this.emit(r.REMOVE,p.key)),this},removeKey:function(p){return this.list.hasOwnProperty(p)&&delete this.list[p],this},addBase64:function(p,m){if(this.checkKey(p)){var x=this,T=new Image;T.onerror=function(){x.emit(r.ERROR,p)},T.onload=function(){var S=x.create(p,T);f.Image(S,0),x.emit(r.ADD,p,S),x.emit(r.LOAD,p,S)},T.src=m}return this},getBase64:function(p,m,x,T){x===void 0&&(x="image/png"),T===void 0&&(T=.92);var S="",E=this.getFrame(p,m);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var C=E.canvasData,A=e.create2D(this,C.width,C.height),P=A.getContext("2d");P.drawImage(E.source.image,C.x,C.y,C.width,C.height,0,0,C.width,C.height),S=A.toDataURL(x,T),e.remove(A)}return S},addImage:function(p,m,x){var T=null;return this.checkKey(p)&&(T=this.create(p,m),f.Image(T,0),x&&T.setDataSource(x),this.emit(r.ADD,p,T)),T},addGLTexture:function(p,m,x,T){var S=null;return this.checkKey(p)&&(x===void 0&&(x=m.width),T===void 0&&(T=m.height),S=this.create(p,m,x,T),S.add("__BASE",0,0,0,x,T),this.emit(r.ADD,p,S)),S},addRenderTexture:function(p,m){var x=null;return this.checkKey(p)&&(x=this.create(p,m),x.add("__BASE",0,0,0,m.width,m.height),this.emit(r.ADD,p,x)),x},generate:function(p,m){if(this.checkKey(p)){var x=e.create(this,1,1);return m.canvas=x,o(m),this.addCanvas(p,x)}else return null},createCanvas:function(p,m,x){if(m===void 0&&(m=256),x===void 0&&(x=256),this.checkKey(p)){var T=e.create(this,m,x,n.CANVAS,!0);return this.addCanvas(p,T)}return null},addCanvas:function(p,m,x){x===void 0&&(x=!1);var T=null;return x?T=new c(this,p,m,m.width,m.height):this.checkKey(p)&&(T=new c(this,p,m,m.width,m.height),this.list[p]=T,this.emit(r.ADD,p,T)),T},addAtlas:function(p,m,x,T){return Array.isArray(x.textures)||Array.isArray(x.frames)?this.addAtlasJSONArray(p,m,x,T):this.addAtlasJSONHash(p,m,x,T)},addAtlasJSONArray:function(p,m,x,T){var S=null;if(this.checkKey(p)){if(S=this.create(p,m),Array.isArray(x))for(var E=x.length===1,C=0;C<S.source.length;C++){var A=E?x[0]:x[C];f.JSONArray(S,C,A)}else f.JSONArray(S,0,x);T&&S.setDataSource(T),this.emit(r.ADD,p,S)}return S},addAtlasJSONHash:function(p,m,x,T){var S=null;if(this.checkKey(p)){if(S=this.create(p,m),Array.isArray(x))for(var E=0;E<x.length;E++)f.JSONHash(S,E,x[E]);else f.JSONHash(S,0,x);T&&S.setDataSource(T),this.emit(r.ADD,p,S)}return S},addAtlasXML:function(p,m,x,T){var S=null;return this.checkKey(p)&&(S=this.create(p,m),f.AtlasXML(S,0,x),T&&S.setDataSource(T),this.emit(r.ADD,p,S)),S},addUnityAtlas:function(p,m,x,T){var S=null;return this.checkKey(p)&&(S=this.create(p,m),f.UnityYAML(S,0,x),T&&S.setDataSource(T),this.emit(r.ADD,p,S)),S},addSpriteSheet:function(p,m,x){var T=null;if(this.checkKey(p)){T=this.create(p,m);var S=T.source[0].width,E=T.source[0].height;f.SpriteSheet(T,0,0,0,S,E,x),this.emit(r.ADD,p,T)}return T},addSpriteSheetFromAtlas:function(p,m){if(!this.checkKey(p))return null;var x=l(m,"atlas",null),T=l(m,"frame",null);if(!(!x||!T)){var S=this.get(x),E=S.get(T);if(E){var C=this.create(p,E.source.image);return E.trimmed?f.SpriteSheetFromAtlas(C,E,m):f.SpriteSheet(C,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,m),this.emit(r.ADD,p,C),C}}},create:function(p,m,x,T){var S=null;return this.checkKey(p)&&(S=new d(this,p,m,x,T),this.list[p]=S),S},exists:function(p){return this.list.hasOwnProperty(p)},get:function(p){return p===void 0&&(p="__DEFAULT"),this.list[p]?this.list[p]:p instanceof d?p:this.list.__MISSING},cloneFrame:function(p,m){if(this.list[p])return this.list[p].get(m).clone()},getFrame:function(p,m){if(this.list[p])return this.list[p].get(m)},getTextureKeys:function(){var p=[];for(var m in this.list)m!=="__DEFAULT"&&m!=="__MISSING"&&p.push(m);return p},getPixel:function(p,m,x,T){var S=this.getFrame(x,T);if(S){p-=S.x,m-=S.y;var E=S.data.cut;if(p+=E.x,m+=E.y,p>=E.x&&p<E.r&&m>=E.y&&m<E.b){var C=this._tempContext;C.clearRect(0,0,1,1),C.drawImage(S.source.image,p,m,1,1,0,0,1,1);var A=C.getImageData(0,0,1,1);return new a(A.data[0],A.data[1],A.data[2],A.data[3])}}return null},getPixelAlpha:function(p,m,x,T){var S=this.getFrame(x,T);if(S){p-=S.x,m-=S.y;var E=S.data.cut;if(p+=E.x,m+=E.y,p>=E.x&&p<E.r&&m>=E.y&&m<E.b){var C=this._tempContext;C.clearRect(0,0,1,1),C.drawImage(S.source.image,p,m,1,1,0,0,1,1);var A=C.getImageData(0,0,1,1);return A.data[3]}}return null},setTexture:function(p,m,x){return this.list[m]&&(p.texture=this.list[m],p.frame=p.texture.get(x)),p},renameTexture:function(p,m){var x=this.get(p);return x&&p!==m?(x.key=m,this.list[m]=x,delete this.list[p],!0):!1},each:function(p,m){for(var x=[null],T=1;T<arguments.length;T++)x.push(arguments[T]);for(var S in this.list)x[0]=this.list[S],p.apply(m,x)},destroy:function(){for(var p in this.list)this.list[p].destroy();this.list={},this.game=null,e.remove(this._tempCanvas)}});h.exports=v},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(18),s=t(38),a=t(33),n=t(138),i=t(206),r=new e({Extends:i,initialize:function(o,l,f,d,v){i.call(this,o,l,f,d,v),this.add("__BASE",0,0,0,d,v),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=d,this.height=v,this.imageData=this.context.getImageData(0,0,d,v),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(u,o,l){return this.context.drawImage(l,u,o),this.update()},drawFrame:function(u,o,l,f){l===void 0&&(l=0),f===void 0&&(f=0);var d=this.manager.getFrame(u,o);if(d){var v=d.canvasData,p=d.cutWidth,m=d.cutHeight,x=d.source.resolution;return this.context.drawImage(d.source.image,v.x,v.y,p,m,l,f,p/x,m/x),this.update()}else return this},setPixel:function(u,o,l,f,d,v){v===void 0&&(v=255),u=Math.abs(Math.floor(u)),o=Math.abs(Math.floor(o));var p=this.getIndex(u,o);if(p>-1){var m=this.context.getImageData(u,o,1,1);m.data[0]=l,m.data[1]=f,m.data[2]=d,m.data[3]=v,this.context.putImageData(m,u,o)}return this},putData:function(u,o,l,f,d,v,p){return f===void 0&&(f=0),d===void 0&&(d=0),v===void 0&&(v=u.width),p===void 0&&(p=u.height),this.context.putImageData(u,o,l,f,d,v,p),this},getData:function(u,o,l,f){u=c(Math.floor(u),0,this.width-1),o=c(Math.floor(o),0,this.height-1),l=c(l,1,this.width-u),f=c(f,1,this.height-o);var d=this.context.getImageData(u,o,l,f);return d},getPixel:function(u,o,l){l||(l=new s);var f=this.getIndex(u,o);if(f>-1){var d=this.data,v=d[f+0],p=d[f+1],m=d[f+2],x=d[f+3];l.setTo(v,p,m,x)}return l},getPixels:function(u,o,l,f){u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l=this.width),f===void 0&&(f=l),u=Math.abs(Math.round(u)),o=Math.abs(Math.round(o));for(var d=c(u,0,this.width),v=c(u+l,0,this.width),p=c(o,0,this.height),m=c(o+f,0,this.height),x=new s,T=[],S=p;S<m;S++){for(var E=[],C=d;C<v;C++)x=this.getPixel(C,S,x),E.push({x:C,y:S,color:x.color,alpha:x.alphaGL});T.push(E)}return T},getIndex:function(u,o){return u=Math.abs(Math.round(u)),o=Math.abs(Math.round(o)),u<this.width&&o<this.height?(u+o*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(u,o,l,f){return u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l=this.width),f===void 0&&(f=this.height),this.context.clearRect(u,o,l,f),this.update()},setSize:function(u,o){return o===void 0&&(o=u),(u!==this.width||o!==this.height)&&(this.canvas.width=u,this.canvas.height=o,this._source.width=u,this._source.height=o,this._source.isPowerOf2=n(u,o),this.frames.__BASE.setSize(u,o,0,0),this.width=u,this.height=o,this.refresh()),this},destroy:function(){i.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),c=t(0),s=t(138),a=t(168),n=new c({initialize:function(r,u,o,l,f){f===void 0&&(f=!1);var d=r.manager.game;this.renderer=d.renderer,this.texture=r,this.source=u,this.image=u,this.compressionAlgorithm=null,this.resolution=1,this.width=o||u.naturalWidth||u.videoWidth||u.width||0,this.height=l||u.naturalHeight||u.videoHeight||u.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=u instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&u instanceof HTMLVideoElement,this.isRenderTexture=u.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&u instanceof WebGLTexture,this.isPowerOf2=s(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=f,this.init(d)},init:function(i){var r=this.renderer;r&&(r.gl?this.isCanvas?this.glTexture=r.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=r.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=r.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=r.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),i.config.antialias||this.setFilter(1)},setFilter:function(i){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,i),this.scaleMode=i},setFlipY:function(i){return i===void 0&&(i=!0),this.flipY=i,this},update:function(){var i=this.renderer.gl;i&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):i&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&e.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AtlasXML:t(979),Canvas:t(980),Image:t(981),JSONArray:t(982),JSONHash:t(983),SpriteSheet:t(984),SpriteSheetFromAtlas:t(985),UnityYAML:t(986)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(427),c=t(430),s=t(432),a={create:function(n){var i=n.config.audio,r=n.device.audio;return i.noAudio||!r.webAudio&&!r.audioData?new c(n):r.webAudio&&!i.disableWebAudio?new s(n):new e(n)}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(145),c=t(0),s=t(70),a=t(429),n=new c({Extends:e,initialize:function(r){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,e.call(this,r)},add:function(i,r){var u=new a(this,i,r);return this.sounds.push(u),u},unlock:function(){this.locked=!1;var i=this;if(this.game.cache.audio.entries.each(function(l,f){for(var d=0;d<f.length;d++)if(f[d].dataset.locked==="true")return i.locked=!0,!1;return!0}),!!this.locked){var r=!1,u=function(){r=!0},o=function(){if(r){r=!1;return}document.body.removeEventListener("touchmove",u),document.body.removeEventListener("touchend",o);var l=[];if(i.game.cache.audio.entries.each(function(d,v){for(var p=0;p<v.length;p++){var m=v[p];m.dataset.locked==="true"&&l.push(m)}return!0}),l.length!==0){var f=l[l.length-1];f.oncanplaythrough=function(){f.oncanplaythrough=null,l.forEach(function(d){d.dataset.locked="false"}),i.unlocked=!0},l.forEach(function(d){d.load()})}};this.once(s.UNLOCKED,function(){for(this.forEachActiveSound(function(f){f.currentMarker===null&&f.duration===0&&(f.duration=f.tags[0].duration),f.totalDuration=f.tags[0].duration});this.lockedActionsQueue.length;){var l=this.lockedActionsQueue.shift();l.sound[l.prop].apply?l.sound[l.prop].apply(l.sound,l.value||[]):l.sound[l.prop]=l.value}},this),document.body.addEventListener("touchmove",u,!1),document.body.addEventListener("touchend",o,!1)}},onBlur:function(){this.forEachActiveSound(function(i){i.isPlaying&&(this.onBlurPausedSounds.push(i),i.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(i){i.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){e.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(i,r,u){return i.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:i,prop:r,value:u}),!0):!1},setMute:function(i){return this.mute=i,this},mute:{get:function(){return this._mute},set:function(i){this._mute=i,this.forEachActiveSound(function(r){r.updateMute()}),this.emit(s.GLOBAL_MUTE,this,i)}},setVolume:function(i){return this.volume=i,this},volume:{get:function(){return this._volume},set:function(i){this._volume=i,this.forEachActiveSound(function(r){r.updateVolume()}),this.emit(s.GLOBAL_VOLUME,this,i)}}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),c=function(s,a,n,i,r){if(i===void 0&&(i=0),r===void 0&&(r=s.length),e(s,i,r))for(var u=i;u<r;u++){var o=s[u];if(!a||a&&n===void 0&&o.hasOwnProperty(a)||a&&n!==void 0&&o[a]===n)return o}return null};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),c=t(0),s=t(70),a=t(18),n=new c({Extends:e,initialize:function(r,u,o){if(o===void 0&&(o={}),this.tags=r.game.cache.audio.get(u),!this.tags)throw new Error('There is no audio asset with key "'+u+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,e.call(this,r,u,o)},play:function(i,r){return this.manager.isLocked(this,"play",[i,r])||!e.prototype.play.call(this,i,r)||!this.pickAndPlayAudioTag()?!1:(this.emit(s.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!e.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(s.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!e.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(s.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!e.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(s.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var i=this.currentConfig.seek,r=this.currentConfig.delay,u=(this.currentMarker?this.currentMarker.start:0)+i;return this.previousTime=u,this.audio.currentTime=u,this.applyConfig(),r===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+r*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var i=0;i<this.tags.length;i++){var r=this.tags[i];if(r.dataset.used==="false")return r.dataset.used="true",this.audio=r,!0}if(!this.manager.override)return!1;var u=[];this.manager.forEachActiveSound(function(l){l.key===this.key&&l.audio&&u.push(l)},this),u.sort(function(l,f){return l.loop===f.loop?f.seek/f.duration-l.seek/l.duration:l.loop?1:-1});var o=u[0];return this.audio=o.audio,o.reset(),o.audio=null,o.startTime=0,o.previousTime=0,!0},playCatchPromise:function(){var i=this.audio.play();i&&i.catch(function(r){console.warn(r)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){e.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(i){if(this.isPlaying){if(this.startTime>0){this.startTime<i-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,i-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var r=this.currentMarker?this.currentMarker.start:0,u=r+this.duration,o=this.audio.currentTime;if(this.currentConfig.loop)o>=u-this.manager.loopEndOffset?(this.audio.currentTime=r+Math.max(0,o-u),o=this.audio.currentTime):o<r&&(this.audio.currentTime+=r,o=this.audio.currentTime),o<this.previousTime&&this.emit(s.LOOPED,this);else if(o>=u){this.reset(),this.stopAndReleaseAudioTag(),this.emit(s.COMPLETE,this);return}this.previousTime=o}},destroy:function(){e.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){e.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(i){this.currentConfig.mute=i,!this.manager.isLocked(this,"mute",i)&&(this.updateMute(),this.emit(s.MUTE,this,i))}},setMute:function(i){return this.mute=i,this},volume:{get:function(){return this.currentConfig.volume},set:function(i){this.currentConfig.volume=i,!this.manager.isLocked(this,"volume",i)&&(this.updateVolume(),this.emit(s.VOLUME,this,i))}},setVolume:function(i){return this.volume=i,this},rate:{get:function(){return this.currentConfig.rate},set:function(i){this.currentConfig.rate=i,!this.manager.isLocked(this,s.RATE,i)&&(this.calculateRate(),this.emit(s.RATE,this,i))}},setRate:function(i){return this.rate=i,this},detune:{get:function(){return this.currentConfig.detune},set:function(i){this.currentConfig.detune=i,!this.manager.isLocked(this,s.DETUNE,i)&&(this.calculateRate(),this.emit(s.DETUNE,this,i))}},setDetune:function(i){return this.detune=i,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(i){this.manager.isLocked(this,"seek",i)||this.startTime>0||(this.isPlaying||this.isPaused)&&(i=Math.min(Math.max(0,i),this.duration),this.isPlaying?(this.previousTime=i,this.audio.currentTime=i):this.isPaused&&(this.currentConfig.seek=i),this.emit(s.SEEK,this,i))}},setSeek:function(i){return this.seek=i,this},loop:{get:function(){return this.currentConfig.loop},set:function(i){this.currentConfig.loop=i,!this.manager.isLocked(this,"loop",i)&&(this.audio&&(this.audio.loop=i),this.emit(s.LOOP,this,i))}},setLoop:function(i){return this.loop=i,this},pan:{get:function(){return this.currentConfig.pan},set:function(i){this.currentConfig.pan=i,this.emit(s.PAN,this,i)}},setPan:function(i){return this.pan=i,this}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(145),c=t(0),s=t(9),a=t(431),n=t(1),i=new c({Extends:s,initialize:function(u){s.call(this),this.game=u,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(r,u){var o=new a(this,r,u);return this.sounds.push(o),o},addAudioSprite:function(r,u){var o=this.add(r,u);return o.spritemap={},o},play:function(r,u){return!1},playAudioSprite:function(r,u,o){return!1},remove:function(r){return e.prototype.remove.call(this,r)},removeByKey:function(r){return e.prototype.removeByKey.call(this,r)},pauseAll:n,resumeAll:n,stopAll:n,update:n,setRate:n,setDetune:n,setMute:n,setVolume:n,forEachActiveSound:function(r,u){e.prototype.forEachActiveSound.call(this,r,u)},destroy:function(){e.prototype.destroy.call(this)}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),c=t(0),s=t(9),a=t(17),n=function(){return!1},i=function(){return null},r=function(){return this},u=new c({Extends:s,initialize:function(l,f,d){d===void 0&&(d={}),s.call(this),this.manager=l,this.key=f,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=a({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},d),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:i,play:n,pause:n,resume:n,stop:n,destroy:function(){e.prototype.destroy.call(this)},setMute:r,setVolume:r,setRate:r,setDetune:r,setSeek:r,setLoop:r,setPan:r});h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(433),c=t(145),s=t(0),a=t(70),n=t(22),i=t(434),r=new s({Extends:c,initialize:function(o){this.context=this.createAudioContext(o),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),c.call(this,o),this.locked&&o.isBooted?this.unlock():o.events.once(n.BOOT,this.unlock,this)},createAudioContext:function(u){var o=u.config.audio;if(o.context)return o.context.resume(),o.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(u){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=u,this.masterMuteNode=u.createGain(),this.masterVolumeNode=u.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(u.destination),this.destination=this.masterMuteNode,this},add:function(u,o){var l=new i(this,u,o);return this.sounds.push(l),l},decodeAudio:function(u,o){var l;Array.isArray(u)?l=u:l=[{key:u,data:o}];for(var f=this.game.cache.audio,d=l.length,v=0;v<l.length;v++){var p=l[v],m=p.key,x=p.data;typeof x=="string"&&(x=e(x));var T=function(E,C){f.add(E,C),this.emit(a.DECODED,E),d--,d===0&&this.emit(a.DECODED_ALL)}.bind(this,m),S=function(E,C){console.error("Error decoding audio: "+E+" - ",C?C.message:""),d--,d===0&&this.emit(a.DECODED_ALL)}.bind(this,m);this.context.decodeAudioData(x,T,S)}},unlock:function(){var u=this,o=document.body,l=function f(){if(u.context&&o){var d=o.removeEventListener;u.context.resume().then(function(){d("touchstart",f),d("touchend",f),d("click",f),d("keydown",f),u.unlocked=!0},function(){d("touchstart",f),d("touchend",f),d("click",f),d("keydown",f)})}};o&&(o.addEventListener("touchstart",l,!1),o.addEventListener("touchend",l,!1),o.addEventListener("click",l,!1),o.addEventListener("keydown",l,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var u=this.context;(u.state==="suspended"||u.state==="interrupted")&&!this.locked&&u.resume()},update:function(u,o){c.prototype.update.call(this,u,o);var l=this.context;l&&l.state==="interrupted"&&l.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var u=this;this.context.close().then(function(){u.context=null})}c.prototype.destroy.call(this)},setMute:function(u){return this.mute=u,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(u){this.masterMuteNode.gain.setValueAtTime(u?0:1,0),this.emit(a.GLOBAL_MUTE,this,u)}},setVolume:function(u){return this.volume=u,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(u){this.masterVolumeNode.gain.setValueAtTime(u,0),this.emit(a.GLOBAL_VOLUME,this,u)}}});h.exports=r},function(h,g){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),c=0;c<t.length;c++)e[t.charCodeAt(c)]=c;var s=function(a){a=a.substr(a.indexOf(",")+1);var n=a.length,i=n*.75,r=0,u,o,l,f;a[n-1]==="="&&(i--,a[n-2]==="="&&i--);for(var d=new ArrayBuffer(i),v=new Uint8Array(d),p=0;p<n;p+=4)u=e[a.charCodeAt(p)],o=e[a.charCodeAt(p+1)],l=e[a.charCodeAt(p+2)],f=e[a.charCodeAt(p+3)],v[r++]=u<<2|o>>4,v[r++]=(o&15)<<4|l>>2,v[r++]=(l&3)<<6|f&63;return d};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),c=t(0),s=t(70),a=new c({Extends:e,initialize:function(i,r,u){if(u===void 0&&(u={}),this.audioBuffer=i.game.cache.audio.get(r),!this.audioBuffer)throw new Error('Audio key "'+r+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=i.context.createGain(),this.volumeNode=i.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),i.context.createStereoPanner?(this.pannerNode=i.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(i.destination)):this.volumeNode.connect(i.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,e.call(this,i,r,u)},play:function(n,i){return e.prototype.play.call(this,n,i)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(s.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!e.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(s.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!e.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(s.RESUME,this),!0)},stop:function(){return e.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(s.STOP,this),!0):!1},createAndStartBufferSource:function(){var n=this.currentConfig.seek,i=this.currentConfig.delay,r=this.manager.context.currentTime+i,u=(this.currentMarker?this.currentMarker.start:0)+n,o=this.duration-n;this.playTime=r-n,this.startTime=r,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,r),Math.max(0,u),Math.max(0,o)),this.resetConfig()},createAndStartLoopBufferSource:function(){var n=this.getLoopTime(),i=this.currentMarker?this.currentMarker.start:0,r=this.duration;this.loopTime=n,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,n),Math.max(0,i),Math.max(0,r))},createBufferSource:function(){var n=this,i=this.manager.context.createBufferSource();return i.buffer=this.audioBuffer,i.connect(this.muteNode),i.onended=function(r){r.target===n.source&&(n.currentConfig.loop?n.hasLooped=!0:n.hasEnded=!0)},i},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),e.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,e.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(s.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(s.LOOPED,this))},destroy:function(){e.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){e.prototype.calculateRate.call(this);var n=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,n),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,n)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var n=0,i=0;i<this.rateUpdates.length;i++){var r=0;i<this.rateUpdates.length-1?r=this.rateUpdates[i+1].time:r=this.manager.context.currentTime-this.playTime,n+=(r-this.rateUpdates[i].time)*this.rateUpdates[i].rate}return n},getLoopTime:function(){for(var n=0,i=0;i<this.rateUpdates.length-1;i++)n+=(this.rateUpdates[i+1].time-this.rateUpdates[i].time)*this.rateUpdates[i].rate;var r=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+r.time+(this.duration-n)/r.rate},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,this.calculateRate(),this.emit(s.RATE,this,n)}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,this.calculateRate(),this.emit(s.DETUNE,this,n)}},setDetune:function(n){return this.detune=n,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(n){this.currentConfig.mute=n,this.muteNode.gain.setValueAtTime(n?0:1,0),this.emit(s.MUTE,this,n)}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(n){this.currentConfig.volume=n,this.volumeNode.gain.setValueAtTime(n,0),this.emit(s.VOLUME,this,n)}},setVolume:function(n){return this.volume=n,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.currentConfig.seek=n,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(s.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),n&&this.createAndStartLoopBufferSource()),this.emit(s.LOOP,this,n)}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(n){this.currentConfig.pan=n,this.pannerNode&&this.pannerNode.pan.setValueAtTime(n,this.manager.context.currentTime),this.emit(s.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var c=e.length,s=e[0].length,a=new Array(s),n=0;n<s;n++){a[n]=new Array(c);for(var i=c-1;i>-1;i--)a[n][i]=e[i][n]}return a};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(s,a,n){var i=s[a];s[a]=s[n],s[n]=i}function e(s,a){return s<a?-1:s>a?1:0}var c=function(s,a,n,i,r){for(n===void 0&&(n=0),i===void 0&&(i=s.length-1),r===void 0&&(r=e);i>n;){if(i-n>600){var u=i-n+1,o=a-n+1,l=Math.log(u),f=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*f*(u-f)/u)*(o-u/2<0?-1:1),v=Math.max(n,Math.floor(a-o*f/u+d)),p=Math.min(i,Math.floor(a+(u-o)*f/u+d));c(s,a,v,p,r)}var m=s[a],x=n,T=i;for(t(s,n,a),r(s[i],m)>0&&t(s,n,i);x<T;){for(t(s,x,T),x++,T--;r(s[x],m)<0;)x++;for(;r(s[T],m)>0;)T--}r(s[n],m)===0?t(s,n,T):(T++,t(s,T,i)),T<=a&&(n=T+1),a<=T&&(i=T-1)}};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),c=t(131),s=function(n,i,r){for(var u=[],o=0;o<n.length;o++)for(var l=0;l<i.length;l++)for(var f=0;f<r;f++)u.push({a:n[o],b:i[l]});return u},a=function(n,i,r){var u=e(r,"max",0),o=e(r,"qty",1),l=e(r,"random",!1),f=e(r,"randomB",!1),d=e(r,"repeat",0),v=e(r,"yoyo",!1),p=[];if(f&&c(i),d===-1)if(u===0)d=0;else{var m=n.length*i.length*o;v&&(m*=2),d=Math.ceil(u/m)}for(var x=0;x<=d;x++){var T=s(n,i,o);l&&c(T),p=p.concat(T),v&&(T.reverse(),p=p.concat(T))}return u&&p.splice(u),p};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={PROCESS_QUEUE_ADD:t(1041),PROCESS_QUEUE_REMOVE:t(1042)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(13),c=function(s,a){var n=e(a,"anims",null);if(n===null)return s;if(typeof n=="string")s.anims.play(n);else if(typeof n=="object"){var i=s.anims,r=e(n,"key",void 0);if(r){var u=e(n,"startFrame",void 0),o=e(n,"delay",0),l=e(n,"repeat",0),f=e(n,"repeatDelay",0),d=e(n,"yoyo",!1),v=e(n,"play",!1),p=e(n,"delayedPlay",0),m={key:r,delay:o,repeat:l,repeatDelay:f,yoyo:d,startFrame:u};v?i.play(m):p>0?i.playAfterDelay(m,p):i.load(m)}}return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(109),s=new e({initialize:function(n,i,r,u,o){this.parent=n,this.x=i,this.y=r,this.frame=u,this.data={},this.tint=16777215,this._visible=o,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(a){return a===void 0?this.frame=this.parent.frame:a instanceof c&&a.texture===this.parent.texture?this.frame=a:this.frame=this.parent.texture.get(a),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(a,n,i){return this.x=a,this.y=n,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(a,n){return this.x=a,this.y=n,this},setFlipX:function(a){return this.flipX=a,this},setFlipY:function(a){return this.flipY=a,this},setFlip:function(a,n){return this.flipX=a,this.flipY=n,this},setVisible:function(a){return this.visible=a,this},setAlpha:function(a){return this.alpha=a,this},setTint:function(a){return this.tint=a,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(a){this.parent.dirty|=this._visible!==a,this._visible=a}},alpha:{get:function(){return this._alpha},set:function(a){this.parent.dirty|=this._alpha>0!=a>0,this._alpha=a}}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=function(s,a,n){n===void 0&&(n=new e);var i=Math.min(s.x,a.x),r=Math.min(s.y,a.y),u=Math.max(s.right,a.right)-i,o=Math.max(s.bottom,a.bottom)-r;return n.setTo(i,r,u,o)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(1055),a=t(15),n=t(7),i=t(202),r=t(20),u=t(140),o=new e({Extends:a,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Origin,c.ScrollFactor,c.Transform,c.Visible,s],initialize:function(f,d,v,p,m,x){a.call(this,f,"DOMElement"),this.parent=f.sys.game.domContainer,this.cache=f.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new u,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(d,v),typeof p=="string"?p[0]==="#"?this.setElement(p.substr(1),m,x):this.createElement(p,m,x):p&&this.setElement(p,m,x),f.sys.events.on(r.SLEEP,this.handleSceneEvent,this),f.sys.events.on(r.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(l){var f=this.node,d=f.style;f&&(d.display=l.settings.visible?"block":"none")},setSkew:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.skewX=l,this.skewY=f,this},setPerspective:function(l){return this.parent.style.perspective=l+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(l){this.parent.style.perspective=l+"px"}},addListener:function(l){if(this.node){l=l.split(" ");for(var f=0;f<l.length;f++)this.node.addEventListener(l[f],this.handler,!1)}return this},removeListener:function(l){if(this.node){l=l.split(" ");for(var f=0;f<l.length;f++)this.node.removeEventListener(l[f],this.handler)}return this},dispatchNativeEvent:function(l){this.emit(l.type,l)},createElement:function(l,f,d){return this.setElement(document.createElement(l),f,d)},setElement:function(l,f,d){this.removeElement();var v;if(typeof l=="string"?(l[0]==="#"&&(l=l.substr(1)),v=document.getElementById(l)):typeof l=="object"&&l.nodeType===1&&(v=l),!v)return this;if(this.node=v,f&&n(f))for(var p in f)v.style[p]=f[p];else typeof f=="string"&&(v.style=f);return v.style.zIndex="0",v.style.display="inline",v.style.position="absolute",v.phaser=this,this.parent&&this.parent.appendChild(v),d&&(v.innerText=d),this.updateSize()},createFromCache:function(l,f){var d=this.cache.get(l);return d&&this.createFromHTML(d,f),this},createFromHTML:function(l,f){f===void 0&&(f="div"),this.removeElement();var d=document.createElement(f);return this.node=d,d.style.zIndex="0",d.style.display="inline",d.style.position="absolute",d.phaser=this,this.parent&&this.parent.appendChild(d),d.innerHTML=l,this.updateSize()},removeElement:function(){return this.node&&(i(this.node),this.node=null),this},updateSize:function(){var l=this.node,f=l.getBoundingClientRect();return this.width=l.clientWidth,this.height=l.clientHeight,this.displayWidth=f.width||0,this.displayHeight=f.height||0,this},getChildByProperty:function(l,f){if(this.node){for(var d=this.node.querySelectorAll("*"),v=0;v<d.length;v++)if(d[v][l]===f)return d[v]}return null},getChildByID:function(l){return this.getChildByProperty("id",l)},getChildByName:function(l){return this.getChildByProperty("name",l)},setClassName:function(l){return this.node&&(this.node.className=l,this.updateSize()),this},setText:function(l){return this.node&&(this.node.innerText=l,this.updateSize()),this},setHTML:function(l){return this.node&&(this.node.innerHTML=l,this.updateSize()),this},preUpdate:function(){var l=this.parentContainer,f=this.node;f&&l&&!l.willRender()&&(f.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(r.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(r.WAKE,this.handleSceneEvent,this)}});h.exports=o},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1056),c=t(15),s=t(25),a=new s,n=new s,i=new s,r=function(u,o,l,f){if(o.node){var d=o.node.style,v=o.scene.sys.settings;if(!d||!v.visible||c.RENDER_MASK!==o.renderFlags||o.cameraFilter!==0&&o.cameraFilter&l.id||o.parentContainer&&!o.parentContainer.willRender()){d.display="none";return}var p=o.parentContainer,m=l.alpha*o.alpha;p&&(m*=p.alpha);var x=a,T=n,S=i,E=0,C=0,A="0%",P="0%";f?(E=o.width*o.scaleX*o.originX,C=o.height*o.scaleY*o.originY,T.applyITRS(o.x-E,o.y-C,o.rotation,o.scaleX,o.scaleY),x.copyFrom(l.matrix),x.multiplyWithOffset(f,-l.scrollX*o.scrollFactorX,-l.scrollY*o.scrollFactorY),T.e=o.x-E,T.f=o.y-C,x.multiply(T,S)):(E=o.width*o.originX,C=o.height*o.originY,T.applyITRS(o.x-E,o.y-C,o.rotation,o.scaleX,o.scaleY),x.copyFrom(l.matrix),A=100*o.originX+"%",P=100*o.originY+"%",T.e-=l.scrollX*o.scrollFactorX,T.f-=l.scrollY*o.scrollFactorY,x.multiply(T,S)),o.transformOnly||(d.display="block",d.opacity=m,d.zIndex=o._depth,d.pointerEvents=o.pointerEvents,d.mixBlendMode=e[o._blendMode]),d.transform=S.getCSSMatrix()+" skew("+o.skewX+"rad, "+o.skewY+"rad) rotate3d("+o.rotate3d.x+","+o.rotate3d.y+","+o.rotate3d.z+","+o.rotate3d.w+o.rotate3dAngle+")",d.transformOrigin=A+" "+P}};h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(15),a=t(1060),n=new e({Extends:s,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.Flip,c.Origin,c.ScrollFactor,c.Size,c.Texture,c.Tint,c.Transform,c.Visible,a],initialize:function(r){s.call(this,r,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(218),c=t(98),s=t(14),a=t(4),n=function(i,r,u){u===void 0&&(u=new a);var o=c(r,0,s.PI2);return e(i,o,u)};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(447),c=t(218),s=t(98),a=t(14),n=function(i,r,u,o){o===void 0&&(o=[]),!r&&u>0&&(r=e(i)/u);for(var l=0;l<r;l++){var f=s(l/r,0,a.PI2);o.push(c(i,f))}return o};h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c=e.width/2,s=e.height/2,a=Math.pow(c-s,2)/Math.pow(c+s,2);return Math.PI*(c+s)*(1+3*a/(10+Math.sqrt(4-3*a)))};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(217),c=t(30),s=function(a,n,i,r,u,o){var l=n.commandBuffer,f=l.length,d=u||a.currentContext;if(!(f===0||!c(a,d,n,i,r))){i.addToRenderList(n);var v=1,p=1,m=0,x=0,T=1,S=0,E=0,C=0;d.beginPath();for(var A=0;A<f;++A){var P=l[A];switch(P){case e.ARC:d.arc(l[A+1],l[A+2],l[A+3],l[A+4],l[A+5],l[A+6]),A+=7;break;case e.LINE_STYLE:T=l[A+1],m=l[A+2],v=l[A+3],S=(m&16711680)>>>16,E=(m&65280)>>>8,C=m&255,d.strokeStyle="rgba("+S+","+E+","+C+","+v+")",d.lineWidth=T,A+=3;break;case e.FILL_STYLE:x=l[A+1],p=l[A+2],S=(x&16711680)>>>16,E=(x&65280)>>>8,C=x&255,d.fillStyle="rgba("+S+","+E+","+C+","+p+")",A+=2;break;case e.BEGIN_PATH:d.beginPath();break;case e.CLOSE_PATH:d.closePath();break;case e.FILL_PATH:o||d.fill();break;case e.STROKE_PATH:o||d.stroke();break;case e.FILL_RECT:o?d.rect(l[A+1],l[A+2],l[A+3],l[A+4]):d.fillRect(l[A+1],l[A+2],l[A+3],l[A+4]),A+=4;break;case e.FILL_TRIANGLE:d.beginPath(),d.moveTo(l[A+1],l[A+2]),d.lineTo(l[A+3],l[A+4]),d.lineTo(l[A+5],l[A+6]),d.closePath(),o||d.fill(),A+=6;break;case e.STROKE_TRIANGLE:d.beginPath(),d.moveTo(l[A+1],l[A+2]),d.lineTo(l[A+3],l[A+4]),d.lineTo(l[A+5],l[A+6]),d.closePath(),o||d.stroke(),A+=6;break;case e.LINE_TO:d.lineTo(l[A+1],l[A+2]),A+=2;break;case e.MOVE_TO:d.moveTo(l[A+1],l[A+2]),A+=2;break;case e.LINE_FX_TO:d.lineTo(l[A+1],l[A+2]),A+=5;break;case e.MOVE_FX_TO:d.moveTo(l[A+1],l[A+2]),A+=5;break;case e.SAVE:d.save();break;case e.RESTORE:d.restore();break;case e.TRANSLATE:d.translate(l[A+1],l[A+2]),A+=2;break;case e.SCALE:d.scale(l[A+1],l[A+2]),A+=2;break;case e.ROTATE:d.rotate(l[A+1]),A+=1;break;case e.GRADIENT_FILL_STYLE:A+=5;break;case e.GRADIENT_LINE_STYLE:A+=6;break}}d.restore()}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(137),s=t(80),a=t(2),n=t(68),i=new e({initialize:function(u,o,l,f){f===void 0&&(f=!1),this.propertyKey=o,this.propertyValue=l,this.defaultValue=l,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=f,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(u)},loadConfig:function(r,u){r===void 0&&(r={}),u&&(this.propertyKey=u),this.propertyValue=a(r,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(r){return this.propertyValue=r,this.setMethods()},setMethods:function(){var r=this.propertyValue,u=typeof r;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,u==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(r))this.onEmit=this.randomStaticValueEmit;else if(u==="function")this.emitOnly?this.onEmit=r:this.onUpdate=r;else if(u==="object"&&this.hasBoth(r,"start","end")){this.start=r.start,this.end=r.end;var o=this.has(r,"random");if(o&&(this.onEmit=this.randomRangedValueEmit),this.has(r,"steps"))this.steps=r.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var l=this.has(r,"ease")?r.ease:"Linear";this.ease=s(l,r.easeParams),o||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(u==="object"&&this.hasBoth(r,"min","max"))this.start=r.min,this.end=r.max,this.onEmit=this.randomRangedValueEmit;else if(u==="object"&&this.has(r,"random")){var f=r.random;Array.isArray(f)&&(this.start=f[0],this.end=f[1]),this.onEmit=this.randomRangedValueEmit}else u==="object"&&this.hasEither(r,"onEmit","onUpdate")&&(this.has(r,"onEmit")&&(this.onEmit=r.onEmit),this.has(r,"onUpdate")&&(this.onUpdate=r.onUpdate));return this},has:function(r,u){return r.hasOwnProperty(u)},hasBoth:function(r,u,o){return r.hasOwnProperty(u)&&r.hasOwnProperty(o)},hasEither:function(r,u,o){return r.hasOwnProperty(u)||r.hasOwnProperty(o)},defaultEmit:function(r,u,o){return o},defaultUpdate:function(r,u,o,l){return l},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var r=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[r]},randomRangedValueEmit:function(r,u){var o=c(this.start,this.end);return r&&r.data[u]&&(r.data[u].min=o),o},steppedEmit:function(){var r=this.counter,u=this.counter+(this.end-this.start)/this.steps;return this.counter=n(u,this.start,this.end),r},easedValueEmit:function(r,u){if(r&&r.data[u]){var o=r.data[u];o.min=this.start,o.max=this.end}return this.start},easeValueUpdate:function(r,u,o){var l=r.data[u];return(l.max-l.min)*this.ease(o)+l.min}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(2),s=new e({initialize:function(n,i,r,u,o){if(typeof n=="object"){var l=n;n=c(l,"x",0),i=c(l,"y",0),r=c(l,"power",0),u=c(l,"epsilon",100),o=c(l,"gravity",50)}else n===void 0&&(n=0),i===void 0&&(i=0),r===void 0&&(r=0),u===void 0&&(u=100),o===void 0&&(o=50);this.x=n,this.y=i,this.active=!0,this._gravity=o,this._power=0,this._epsilon=0,this.power=r,this.epsilon=u},update:function(a,n){var i=this.x-a.x,r=this.y-a.y,u=i*i+r*r;if(u!==0){var o=Math.sqrt(u);u<this._epsilon&&(u=this._epsilon);var l=this._power*n/(u*o)*100;a.velocityX+=i*l,a.velocityY+=r*l}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(a){this._epsilon=a*a}},power:{get:function(){return this._power/this._gravity},set:function(a){this._power=a*this._gravity}},gravity:{get:function(){return this._gravity},set:function(a){var n=this.power;this._gravity=a,this.power=n}}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(36),s=t(50),a=new e({initialize:function(i){this.emitter=i,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(n,i){var r=this.emitter;this.frame=r.getFrame(),r.emitZone&&r.emitZone.getPoint(this),n===void 0?this.x+=r.x.onEmit(this,"x"):this.x+=n,i===void 0?this.y+=r.y.onEmit(this,"y"):this.y+=i,this.life=r.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var u=r.speedX.onEmit(this,"speedX"),o=r.speedY?r.speedY.onEmit(this,"speedY"):u;if(r.radial){var l=c(r.angle.onEmit(this,"angle"));this.velocityX=Math.cos(l)*Math.abs(u),this.velocityY=Math.sin(l)*Math.abs(o)}else if(r.moveTo){var f=r.moveToX.onEmit(this,"moveToX"),d=r.moveToY?r.moveToY.onEmit(this,"moveToY"):f,v=Math.atan2(d-this.y,f-this.x),p=s(this.x,this.y,f,d)/(this.life/1e3);this.velocityX=Math.cos(v)*p,this.velocityY=Math.sin(v)*p}else this.velocityX=u,this.velocityY=o;r.acceleration&&(this.accelerationX=r.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=r.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=r.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=r.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=r.delay.onEmit(this,"delay"),this.scaleX=r.scaleX.onEmit(this,"scaleX"),this.scaleY=r.scaleY?r.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=r.rotate.onEmit(this,"rotate"),this.rotation=c(this.angle),this.bounce=r.bounce.onEmit(this,"bounce"),this.alpha=r.alpha.onEmit(this,"alpha"),this.tint=r.tint.onEmit(this,"tint")},computeVelocity:function(n,i,r,u){var o=this.velocityX,l=this.velocityY,f=this.accelerationX,d=this.accelerationY,v=this.maxVelocityX,p=this.maxVelocityY;o+=n.gravityX*r,l+=n.gravityY*r,f&&(o+=f*r),d&&(l+=d*r),o>v?o=v:o<-v&&(o=-v),l>p?l=p:l<-p&&(l=-p),this.velocityX=o,this.velocityY=l;for(var m=0;m<u.length;m++)u[m].update(this,i,r)},checkBounds:function(n){var i=n.bounds,r=-this.bounce;this.x<i.x&&n.collideLeft?(this.x=i.x,this.velocityX*=r):this.x>i.right&&n.collideRight&&(this.x=i.right,this.velocityX*=r),this.y<i.y&&n.collideTop?(this.y=i.y,this.velocityY*=r):this.y>i.bottom&&n.collideBottom&&(this.y=i.bottom,this.velocityY*=r)},update:function(n,i,r){if(this.delayCurrent>0)return this.delayCurrent-=n,!1;var u=this.emitter,o=1-this.lifeCurrent/this.life;return this.lifeT=o,this.computeVelocity(u,n,i,r),this.x+=this.velocityX*i,this.y+=this.velocityY*i,u.bounds&&this.checkBounds(u),u.deathZone&&u.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=u.scaleX.onUpdate(this,"scaleX",o,this.scaleX),u.scaleY?this.scaleY=u.scaleY.onUpdate(this,"scaleY",o,this.scaleY):this.scaleY=this.scaleX,this.angle=u.rotate.onUpdate(this,"rotate",o,this.angle),this.rotation=c(this.angle),this.alpha=u.alpha.onUpdate(this,"alpha",o,this.alpha),this.tint=u.tint.onUpdate(this,"tint",o,this.tint),this.lifeCurrent-=n,this.lifeCurrent<=0)}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),c=t(0),s=t(11),a=t(453),n=t(454),i=t(449),r=t(2),u=t(210),o=t(455),l=t(126),f=t(451),d=t(456),v=t(10),p=t(79),m=t(3),x=t(68),T=new c({Mixins:[s.BlendMode,s.Mask,s.ScrollFactor,s.Visible],initialize:function(E,C){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=f,this.x=new i(C,"x",0,!0),this.y=new i(C,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new i(C,"accelerationX",0,!0),this.accelerationY=new i(C,"accelerationY",0,!0),this.maxVelocityX=new i(C,"maxVelocityX",1e4,!0),this.maxVelocityY=new i(C,"maxVelocityY",1e4,!0),this.speedX=new i(C,"speedX",0,!0),this.speedY=new i(C,"speedY",0,!0),this.moveTo=!1,this.moveToX=new i(C,"moveToX",0,!0),this.moveToY=new i(C,"moveToY",0,!0),this.bounce=new i(C,"bounce",0,!0),this.scaleX=new i(C,"scaleX",1),this.scaleY=new i(C,"scaleY",1),this.tint=new i(C,"tint",16777215),this.alpha=new i(C,"alpha",1),this.lifespan=new i(C,"lifespan",1e3,!0),this.angle=new i(C,"angle",{min:0,max:360},!0),this.rotate=new i(C,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new i(C,"quantity",1,!0),this.delay=new i(C,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=e.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,C&&this.fromJSON(C)},fromJSON:function(S){if(!S)return this;var E=0,C="";for(E=0;E<this.configFastMap.length;E++)C=this.configFastMap[E],l(S,C)&&(this[C]=r(S,C));for(E=0;E<this.configOpMap.length;E++)C=this.configOpMap[E],l(S,C)&&this[C].loadConfig(S);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,l(S,"speed")&&(this.speedX.loadConfig(S,"speed"),this.speedY=null),(o(S,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),l(S,"scale")&&(this.scaleX.loadConfig(S,"scale"),this.scaleY=null),l(S,"callbackScope")){var A=r(S,"callbackScope",null);this.emitCallbackScope=A,this.deathCallbackScope=A}return l(S,"emitZone")&&this.setEmitZone(S.emitZone),l(S,"deathZone")&&this.setDeathZone(S.deathZone),l(S,"bounds")&&this.setBounds(S.bounds),l(S,"followOffset")&&this.followOffset.setFromObject(r(S,"followOffset",0)),l(S,"frame")&&this.setFrame(S.frame),l(S,"reserve")&&this.reserve(S.reserve),this},toJSON:function(S){S===void 0&&(S={});var E=0,C="";for(E=0;E<this.configFastMap.length;E++)C=this.configFastMap[E],S[C]=this[C];for(E=0;E<this.configOpMap.length;E++)C=this.configOpMap[E],this[C]&&(S[C]=this[C].toJSON());return this.speedY||(delete S.speedX,S.speed=this.speedX.toJSON()),this.scaleY||(delete S.scaleX,S.scale=this.scaleX.toJSON()),S},startFollow:function(S,E,C,A){return E===void 0&&(E=0),C===void 0&&(C=0),A===void 0&&(A=!1),this.follow=S,this.followOffset.set(E,C),this.trackVisible=A,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return u(this.frames);var S=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=x(this.currentFrame+1,0,this._frameLength)),S},setFrame:function(S,E,C){E===void 0&&(E=!0),C===void 0&&(C=1),this.randomFrame=E,this.frameQuantity=C,this.currentFrame=0,this._frameCounter=0;var A=typeof S;if(Array.isArray(S)||A==="string"||A==="number")this.manager.setEmitterFrames(S,this);else if(A==="object"){var P=S;S=r(P,"frames",null),S&&this.manager.setEmitterFrames(S,this);var M=r(P,"cycle",!1);this.randomFrame=!M,this.frameQuantity=r(P,"quantity",C)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(S){return S===void 0&&(S=!0),this.radial=S,this},setPosition:function(S,E){return this.x.onChange(S),this.y.onChange(E),this},setBounds:function(S,E,C,A){if(typeof S=="object"){var P=S;S=P.x,E=P.y,C=l(P,"w")?P.w:P.width,A=l(P,"h")?P.h:P.height}return this.bounds?this.bounds.setTo(S,E,C,A):this.bounds=new v(S,E,C,A),this},setSpeedX:function(S){return this.speedX.onChange(S),this.radial=!1,this},setSpeedY:function(S){return this.speedY&&(this.speedY.onChange(S),this.radial=!1),this},setSpeed:function(S){return this.speedX.onChange(S),this.speedY=null,this.radial=!0,this},setScaleX:function(S){return this.scaleX.onChange(S),this},setScaleY:function(S){return this.scaleY.onChange(S),this},setScale:function(S){return this.scaleX.onChange(S),this.scaleY=null,this},setGravityX:function(S){return this.gravityX=S,this},setGravityY:function(S){return this.gravityY=S,this},setGravity:function(S,E){return this.gravityX=S,this.gravityY=E,this},setAlpha:function(S){return this.alpha.onChange(S),this},setTint:function(S){return this.tint.onChange(S),this},setEmitterAngle:function(S){return this.angle.onChange(S),this},setAngle:function(S){return this.angle.onChange(S),this},setLifespan:function(S){return this.lifespan.onChange(S),this},setQuantity:function(S){return this.quantity.onChange(S),this},setFrequency:function(S,E){return this.frequency=S,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(S){if(S===void 0)this.emitZone=null;else{var E=r(S,"type","random"),C=r(S,"source",null);switch(E){case"random":this.emitZone=new d(C);break;case"edge":var A=r(S,"quantity",1),P=r(S,"stepRate",0),M=r(S,"yoyo",!1),O=r(S,"seamless",!0);this.emitZone=new n(C,A,P,M,O);break}}return this},setDeathZone:function(S){if(S===void 0)this.deathZone=null;else{var E=r(S,"type","onEnter"),C=r(S,"source",null);if(C&&typeof C.contains=="function"){var A=E==="onEnter";this.deathZone=new a(C,A)}}return this},reserve:function(S){for(var E=this.dead,C=0;C<S;C++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(S,E){return S===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof S=="function"&&(this.emitCallback=S,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(S,E){return S===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof S=="function"&&(this.deathCallback=S,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var S=this.dead,E=this.alive;E.length>0;)S.push(E.pop());return this},forEachAlive:function(S,E){for(var C=this.alive,A=C.length,P=0;P<A;++P)S.call(E,C[P],this);return this},forEachDead:function(S,E){for(var C=this.dead,A=C.length,P=0;P<A;++P)S.call(E,C[P],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return p(this.alive,this.depthSortCallback),this},flow:function(S,E){return E===void 0&&(E=1),this.frequency=S,this.quantity.onChange(E),this.start()},explode:function(S,E,C){return this.frequency=-1,this.emitParticle(S,E,C)},emitParticleAt:function(S,E,C){return this.emitParticle(C,S,E)},emitParticle:function(S,E,C){if(!this.atLimit()){S===void 0&&(S=this.quantity.onEmit());for(var A=this.dead,P=this.follow?this.follow.x+this.followOffset.x:E,M=this.follow?this.follow.y+this.followOffset.y:C,O=0;O<S;O++){var F=A.pop();if(F||(F=new this.particleClass(this)),F.fire(P,M),this.particleBringToTop?this.alive.push(F):this.alive.unshift(F),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,F,this),this.atLimit())break}return F}},preUpdate:function(S,E){E*=this.timeScale;var C=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var A=this.manager.getProcessors(),P=this.alive,M=this.dead,O=0,F=[],I=P.length;for(O=0;O<I;O++){var N=P[O];N.update(E,C,A)&&F.push({index:O,particle:N})}if(I=F.length,I>0){var G=this.deathCallback,Y=this.deathCallbackScope;for(O=I-1;O>=0;O--){var z=F[O];P.splice(z.index,1),M.push(z.particle),G&&G.call(Y,z.particle),z.particle.resetPosition()}}this.on&&(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(S,E){return S.y-E.y}});h.exports=T},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n){this.source=a,this.killOnEnter=n},willKill:function(s){var a=this.source.contains(s.x,s.y);return a&&this.killOnEnter||!a&&!this.killOnEnter}});h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n,i,r,u){r===void 0&&(r=!1),u===void 0&&(u=!0),this.source=a,this.points=[],this.quantity=n,this.stepRate=i,this.yoyo=r,this.counter=-1,this.seamless=u,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var s=this.points[0],a=this.points[this.points.length-1];s.x===a.x&&s.y===a.y&&this.points.pop()}var n=this._length;return this._length=this.points.length,this._length<n&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(s){return this.source=s,this.updateSource()},getPoint:function(s){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var a=this.points[this.counter];a&&(s.x=a.x,s.y=a.y)}});h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){for(var s=0;s<c.length;s++)if(e.hasOwnProperty(c[s]))return!0;return!1};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(3),s=new e({initialize:function(n){this.source=n,this._tempVec=new c},getPoint:function(a){var n=this._tempVec;this.source.getRandomPoint(n),a.x=n.x,a.y=n.y}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(73),a=new e({Extends:s,Mixins:[c.PathFollower],initialize:function(i,r,u,o,l,f){s.call(this,i,u,o,l,f),this.path=r},preUpdate:function(n,i){this.anims.update(n,i),this.pathUpdate(n)}});h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=e.canvas,n=e.context,i=e.style,r=[],u=0,o=s.length;i.maxLines>0&&i.maxLines<s.length&&(o=i.maxLines),i.syncFont(a,n);for(var l=0;l<o;l++){var f=i.strokeThickness;f+=n.measureText(s[l]).width,i.wordWrap&&(f-=n.measureText(" ").width),r[l]=Math.ceil(f),u=Math.max(u,r[l])}var d=c.fontSize+i.strokeThickness,v=d*o,p=e.lineSpacing;return o>1&&(v+=p*(o-1)),{width:u,height:v,lines:o,lineWidths:r,lineSpacing:p,lineHeight:d}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(13),s=t(6),a=t(460),n={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},i=new e({initialize:function(u,o){this.parent=u,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(o,!1,!0);var l=s(o,"metrics",!1);l?this.metrics={ascent:s(l,"ascent",0),descent:s(l,"descent",0),fontSize:s(l,"fontSize",0)}:this.metrics=a(this)},setStyle:function(r,u,o){u===void 0&&(u=!0),o===void 0&&(o=!1),r&&r.hasOwnProperty("fontSize")&&typeof r.fontSize=="number"&&(r.fontSize=r.fontSize.toString()+"px");for(var l in n){var f=o?n[l][1]:this[l];l==="wordWrapCallback"||l==="wordWrapCallbackScope"?this[l]=s(r,n[l][0],f):this[l]=c(r,n[l][0],f)}var d=s(r,"font",null);d!==null&&this.setFont(d,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var v=s(r,"fill",null);return v!==null&&(this.color=v),u?this.update(!0):this.parent},syncFont:function(r,u){u.font=this._font},syncStyle:function(r,u){u.textBaseline="alphabetic",u.fillStyle=this.color,u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.lineCap="round",u.lineJoin="round"},syncShadow:function(r,u){u?(r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY,r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur):(r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowColor=0,r.shadowBlur=0)},update:function(r){return r&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(r,u){u===void 0&&(u=!0);var o=r,l="",f="";if(typeof r!="string")o=s(r,"fontFamily","Courier"),l=s(r,"fontSize","16px"),f=s(r,"fontStyle","");else{var d=r.split(" "),v=0;f=d.length>2?d[v++]:"",l=d[v++]||"16px",o=d[v++]||"Courier"}return(o!==this.fontFamily||l!==this.fontSize||f!==this.fontStyle)&&(this.fontFamily=o,this.fontSize=l,this.fontStyle=f,u&&this.update(!0)),this.parent},setFontFamily:function(r){return this.fontFamily!==r&&(this.fontFamily=r,this.update(!0)),this.parent},setFontStyle:function(r){return this.fontStyle!==r&&(this.fontStyle=r,this.update(!0)),this.parent},setFontSize:function(r){return typeof r=="number"&&(r=r.toString()+"px"),this.fontSize!==r&&(this.fontSize=r,this.update(!0)),this.parent},setTestString:function(r){return this.testString=r,this.update(!0)},setFixedSize:function(r,u){return this.fixedWidth=r,this.fixedHeight=u,r&&(this.parent.width=r),u&&(this.parent.height=u),this.update(!1)},setBackgroundColor:function(r){return this.backgroundColor=r,this.update(!1)},setFill:function(r){return this.color=r,this.update(!1)},setColor:function(r){return this.color=r,this.update(!1)},setResolution:function(r){return this.resolution=r,this.update(!1)},setStroke:function(r,u){return u===void 0&&(u=this.strokeThickness),r===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==r||this.strokeThickness!==u)&&(this.stroke=r,this.strokeThickness=u,this.update(!0)),this.parent},setShadow:function(r,u,o,l,f,d){return r===void 0&&(r=0),u===void 0&&(u=0),o===void 0&&(o="#000"),l===void 0&&(l=0),f===void 0&&(f=!1),d===void 0&&(d=!0),this.shadowOffsetX=r,this.shadowOffsetY=u,this.shadowColor=o,this.shadowBlur=l,this.shadowStroke=f,this.shadowFill=d,this.update(!1)},setShadowOffset:function(r,u){return r===void 0&&(r=0),u===void 0&&(u=r),this.shadowOffsetX=r,this.shadowOffsetY=u,this.update(!1)},setShadowColor:function(r){return r===void 0&&(r="#000"),this.shadowColor=r,this.update(!1)},setShadowBlur:function(r){return r===void 0&&(r=0),this.shadowBlur=r,this.update(!1)},setShadowStroke:function(r){return this.shadowStroke=r,this.update(!1)},setShadowFill:function(r){return this.shadowFill=r,this.update(!1)},setWordWrapWidth:function(r,u){return u===void 0&&(u=!1),this.wordWrapWidth=r,this.wordWrapUseAdvanced=u,this.update(!1)},setWordWrapCallback:function(r,u){return u===void 0&&(u=null),this.wordWrapCallback=r,this.wordWrapCallbackScope=u,this.update(!1)},setAlign:function(r){return r===void 0&&(r="left"),this.align=r,this.update(!1)},setMaxLines:function(r){return r===void 0&&(r=0),this.maxLines=r,this.update(!1)},getTextMetrics:function(){var r=this.metrics;return{ascent:r.ascent,descent:r.descent,fontSize:r.fontSize}},toJSON:function(){var r={};for(var u in n)r[u]=this[u];return r.metrics=this.getTextMetrics(),r},destroy:function(){this.parent=void 0}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),c=function(s){var a=e.create(this),n=a.getContext("2d");s.syncFont(a,n);var i=n.measureText(s.testString);if("actualBoundingBoxAscent"in i){var r=i.actualBoundingBoxAscent,u=i.actualBoundingBoxDescent;return e.remove(a),{ascent:r,descent:u,fontSize:r+u}}var o=Math.ceil(i.width*s.baselineX),l=o,f=2*l;l=l*s.baselineY|0,a.width=o,a.height=f,n.fillStyle="#f00",n.fillRect(0,0,o,f),n.font=s._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s.testString,0,l);var d={ascent:0,descent:0,fontSize:0},v=n.getImageData(0,0,o,f);if(!v)return d.ascent=l,d.descent=l+6,d.fontSize=d.ascent+d.descent,e.remove(a),d;var p=v.data,m=p.length,x=o*4,T,S,E=0,C=!1;for(T=0;T<l;T++){for(S=0;S<x;S+=4)if(p[E+S]!==255){C=!0;break}if(!C)E+=x;else break}for(d.ascent=l-T,E=m-x,C=!1,T=f;T>l;T--){for(S=0;S<x;S+=4)if(p[E+S]!==255){C=!0;break}if(!C)E-=x;else break}return d.descent=T-l,d.fontSize=d.ascent+d.descent,e.remove(a),d};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1097),c=t(0),s=t(36),a=t(59),n=t(65),i=t(14),r=t(34),u=new c({Extends:r,Mixins:[e],initialize:function(l,f,d,v,p,m,x,T,S){f===void 0&&(f=0),d===void 0&&(d=0),v===void 0&&(v=128),p===void 0&&(p=0),m===void 0&&(m=360),x===void 0&&(x=!1),r.call(this,l,"Arc",new n(0,0,v)),this._startAngle=p,this._endAngle=m,this._anticlockwise=x,this._iterations=.01,this.setPosition(f,d);var E=this.geom.radius*2;this.setSize(E,E),T!==void 0&&this.setFillStyle(T,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(o){this._iterations=o,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(o){this.geom.radius=o;var l=o*2;this.setSize(l,l),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(o){this._startAngle=o,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(o){this._endAngle=o,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(o){this._anticlockwise=o,this.updateData()}},setRadius:function(o){return this.radius=o,this},setIterations:function(o){return o===void 0&&(o=.01),this.iterations=o,this},setStartAngle:function(o,l){return this._startAngle=o,l!==void 0&&(this._anticlockwise=l),this.updateData()},setEndAngle:function(o,l){return this._endAngle=o,l!==void 0&&(this._anticlockwise=l),this.updateData()},updateData:function(){var o=this._iterations,l=o,f=this.geom.radius,d=s(this._startAngle),v=s(this._endAngle),p=this._anticlockwise,m=f,x=f;v-=d,p?v<-i.PI2?v=-i.PI2:v>0&&(v=-i.PI2+v%i.PI2):v>i.PI2?v=i.PI2:v<0&&(v=i.PI2+v%i.PI2);for(var T=[m+Math.cos(d)*f,x+Math.sin(d)*f],S;l<1;)S=v*l+d,T.push(m+Math.cos(S)*f,x+Math.sin(S)*f),l+=o;return S=v+d,T.push(m+Math.cos(S)*f,x+Math.sin(S)*f),T.push(m+Math.cos(d)*f,x+Math.sin(d)*f),this.pathIndexes=a(T),this.pathData=T,this}});h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(1100),s=t(59),a=t(10),n=t(34),i=new e({Extends:n,Mixins:[c],initialize:function(u,o,l,f,d,v){o===void 0&&(o=0),l===void 0&&(l=0),n.call(this,u,"Curve",f),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(o,l),d!==void 0&&this.setFillStyle(d,v),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(r){this._smoothness=r,this.updateData()}},setSmoothness:function(r){return this._smoothness=r,this.updateData()},updateData:function(){var r=this._curveBounds,u=this._smoothness;this.geom.getBounds(r,u),this.setSize(r.width,r.height),this.updateDisplayOrigin();for(var o=[],l=this.geom.getPoints(u),f=0;f<l.length;f++)o.push(l[f].x,l[f].y);return o.push(l[0].x,l[0].y),this.pathIndexes=s(o),this.pathData=o,this}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(59),s=t(1103),a=t(111),n=t(34),i=new e({Extends:n,Mixins:[s],initialize:function(u,o,l,f,d,v,p){o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=128),d===void 0&&(d=128),n.call(this,u,"Ellipse",new a(f/2,d/2,f,d)),this._smoothness=64,this.setPosition(o,l),this.width=f,this.height=d,v!==void 0&&this.setFillStyle(v,p),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(r){this._smoothness=r,this.updateData()}},setSize:function(r,u){return this.width=r,this.height=u,this.geom.setPosition(r/2,u/2),this.geom.setSize(r,u),this.updateData()},setSmoothness:function(r){return this._smoothness=r,this.updateData()},updateData:function(){for(var r=[],u=this.geom.getPoints(this._smoothness),o=0;o<u.length;o++)r.push(u[o].x,u[o].y);return r.push(u[0].x,u[0].y),this.pathIndexes=c(r),this.pathData=r,this}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(34),s=t(1106),a=new e({Extends:c,Mixins:[s],initialize:function(i,r,u,o,l,f,d,v,p,m,x){r===void 0&&(r=0),u===void 0&&(u=0),o===void 0&&(o=128),l===void 0&&(l=128),f===void 0&&(f=32),d===void 0&&(d=32),c.call(this,i,"Grid",null),this.cellWidth=f,this.cellHeight=d,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(r,u),this.setSize(o,l),this.setFillStyle(v,p),m!==void 0&&this.setOutlineStyle(m,x),this.updateDisplayOrigin()},setFillStyle:function(n,i){return i===void 0&&(i=1),n===void 0?this.showCells=!1:(this.fillColor=n,this.fillAlpha=i,this.showCells=!0),this},setAltFillStyle:function(n,i){return i===void 0&&(i=1),n===void 0?this.showAltCells=!1:(this.altFillColor=n,this.altFillAlpha=i,this.showAltCells=!0),this},setOutlineStyle:function(n,i){return i===void 0&&(i=1),n===void 0?this.showOutline=!1:(this.outlineFillColor=n,this.outlineFillAlpha=i,this.showOutline=!0),this}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1109),c=t(0),s=t(34),a=new c({Extends:s,Mixins:[e],initialize:function(i,r,u,o,l,f,d,v){r===void 0&&(r=0),u===void 0&&(u=0),o===void 0&&(o=48),l===void 0&&(l=32),f===void 0&&(f=15658734),d===void 0&&(d=10066329),v===void 0&&(v=13421772),s.call(this,i,"IsoBox",null),this.projection=4,this.fillTop=f,this.fillLeft=d,this.fillRight=v,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(r,u),this.setSize(o,l),this.updateDisplayOrigin()},setProjection:function(n){return this.projection=n,this},setFaces:function(n,i,r){return n===void 0&&(n=!0),i===void 0&&(i=!0),r===void 0&&(r=!0),this.showTop=n,this.showLeft=i,this.showRight=r,this},setFillStyle:function(n,i,r){return this.fillTop=n,this.fillLeft=i,this.fillRight=r,this.isFilled=!0,this}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(1112),s=t(34),a=new e({Extends:s,Mixins:[c],initialize:function(i,r,u,o,l,f,d,v,p){r===void 0&&(r=0),u===void 0&&(u=0),o===void 0&&(o=48),l===void 0&&(l=32),f===void 0&&(f=!1),d===void 0&&(d=15658734),v===void 0&&(v=10066329),p===void 0&&(p=13421772),s.call(this,i,"IsoTriangle",null),this.projection=4,this.fillTop=d,this.fillLeft=v,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=f,this.isFilled=!0,this.setPosition(r,u),this.setSize(o,l),this.updateDisplayOrigin()},setProjection:function(n){return this.projection=n,this},setReversed:function(n){return this.isReversed=n,this},setFaces:function(n,i,r){return n===void 0&&(n=!0),i===void 0&&(i=!0),r===void 0&&(r=!0),this.showTop=n,this.showLeft=i,this.showRight=r,this},setFillStyle:function(n,i,r){return this.fillTop=n,this.fillLeft=i,this.fillRight=r,this.isFilled=!0,this}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(34),s=t(47),a=t(1115),n=new e({Extends:c,Mixins:[a],initialize:function(r,u,o,l,f,d,v,p,m){u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=0),d===void 0&&(d=128),v===void 0&&(v=0),c.call(this,r,"Line",new s(l,f,d,v));var x=Math.max(1,this.geom.right-this.geom.left),T=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(u,o),this.setSize(x,T),p!==void 0&&this.setStrokeStyle(1,p,m),this.updateDisplayOrigin()},setLineWidth:function(i,r){return r===void 0&&(r=i),this._startWidth=i,this._endWidth=r,this.lineWidth=i,this},setTo:function(i,r,u,o){return this.geom.setTo(i,r,u,o),this}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1118),c=t(0),s=t(59),a=t(469),n=t(227),i=t(34),r=t(472),u=new c({Extends:i,Mixins:[e],initialize:function(l,f,d,v,p,m){f===void 0&&(f=0),d===void 0&&(d=0),i.call(this,l,"Polygon",new n(v));var x=a(this.geom);this.setPosition(f,d),this.setSize(x.width,x.height),p!==void 0&&this.setFillStyle(p,m),this.updateDisplayOrigin(),this.updateData()},smooth:function(o){o===void 0&&(o=1);for(var l=0;l<o;l++)r(this.geom);return this.updateData()},updateData:function(){for(var o=[],l=this.geom.points,f=0;f<l.length;f++)o.push(l[f].x,l[f].y);return o.push(l[0].x,l[0].y),this.pathIndexes=s(o),this.pathData=o,this}});h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=function(s,a){a===void 0&&(a=new e);for(var n=1/0,i=1/0,r=-n,u=-i,o,l=0;l<s.points.length;l++)o=s.points[l],n=Math.min(n,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x),u=Math.max(u,o.y);return a.x=n,a.y=i,a.width=r-n,a.height=u-i,a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),c=t(47),s=t(471),a=function(n,i,r,u){u===void 0&&(u=[]);var o=n.points,l=s(n);!i&&r>0&&(i=l/r);for(var f=0;f<i;f++)for(var d=l*(f/i),v=0,p=0;p<o.length;p++){var m=o[p],x=o[(p+1)%o.length],T=new c(m.x,m.y,x.x,x.y),S=e(T);if(d<v||d>v+S){v+=S;continue}var E=T.getPoint((d-v)/S);u.push(E);break}return u};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),c=t(47),s=function(a){for(var n=a.points,i=0,r=0;r<n.length;r++){var u=n[r],o=n[(r+1)%n.length],l=new c(u.x,u.y,o.x,o.y);i+=e(l)}return i};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(c,s){return c[0]=s[0],c[1]=s[1],c},e=function(c){var s,a=[],n=c.points;for(s=0;s<n.length;s++)a.push([n[s].x,n[s].y]);var i=[];for(a.length>0&&i.push(t([0,0],a[0])),s=0;s<a.length-1;s++){var r=a[s],u=a[s+1],o=r[0],l=r[1],f=u[0],d=u[1];i.push([.85*o+.15*f,.85*l+.15*d]),i.push([.15*o+.85*f,.15*l+.85*d])}return a.length>1&&i.push(t([0,0],a[a.length-1])),c.setTo(i)};h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(10),s=t(34),a=t(1121),n=new e({Extends:s,Mixins:[a],initialize:function(r,u,o,l,f,d,v){u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l=128),f===void 0&&(f=128),s.call(this,r,"Rectangle",new c(0,0,l,f)),this.setPosition(u,o),this.setSize(l,f),d!==void 0&&this.setFillStyle(d,v),this.updateDisplayOrigin(),this.updateData()},setSize:function(i,r){return this.width=i,this.height=r,this.geom.setSize(i,r),this.updateData(),this},updateData:function(){var i=[],r=this.geom,u=this._tempLine;return r.getLineA(u),i.push(u.x1,u.y1,u.x2,u.y2),r.getLineB(u),i.push(u.x2,u.y2),r.getLineC(u),i.push(u.x2,u.y2),r.getLineD(u),i.push(u.x2,u.y2),this.pathData=i,this}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1124),c=t(0),s=t(59),a=t(34),n=new c({Extends:a,Mixins:[e],initialize:function(r,u,o,l,f,d,v,p){u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l=5),f===void 0&&(f=32),d===void 0&&(d=64),a.call(this,r,"Star",null),this._points=l,this._innerRadius=f,this._outerRadius=d,this.setPosition(u,o),this.setSize(d*2,d*2),v!==void 0&&this.setFillStyle(v,p),this.updateDisplayOrigin(),this.updateData()},setPoints:function(i){return this._points=i,this.updateData()},setInnerRadius:function(i){return this._innerRadius=i,this.updateData()},setOuterRadius:function(i){return this._outerRadius=i,this.updateData()},points:{get:function(){return this._points},set:function(i){this._points=i,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(i){this._innerRadius=i,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(i){this._outerRadius=i,this.updateData()}},updateData:function(){var i=[],r=this._points,u=this._innerRadius,o=this._outerRadius,l=Math.PI/2*3,f=Math.PI/r,d=o,v=o;i.push(d,v+-o);for(var p=0;p<r;p++)i.push(d+Math.cos(l)*o,v+Math.sin(l)*o),l+=f,i.push(d+Math.cos(l)*u,v+Math.sin(l)*u),l+=f;return i.push(d,v+-o),this.pathIndexes=s(i),this.pathData=i,this}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(34),s=t(82),a=t(1127),n=new e({Extends:c,Mixins:[a],initialize:function(r,u,o,l,f,d,v,p,m,x,T){u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=128),d===void 0&&(d=64),v===void 0&&(v=0),p===void 0&&(p=128),m===void 0&&(m=128),c.call(this,r,"Triangle",new s(l,f,d,v,p,m));var S=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(u,o),this.setSize(S,E),x!==void 0&&this.setFillStyle(x,T),this.updateDisplayOrigin(),this.updateData()},setTo:function(i,r,u,o,l,f){return this.geom.setTo(i,r,u,o,l,f),this.updateData()},updateData:function(){var i=[],r=this.geom,u=this._tempLine;return r.getLineA(u),i.push(u.x1,u.y1,u.x2,u.y2),r.getLineB(u),i.push(u.x2,u.y2),r.getLineC(u),i.push(u.x2,u.y2),this.pathData=i,this}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=t(67),s=function(a,n,i){i===void 0&&(i=new e);var r=a.getLineA(),u=a.getLineB(),o=a.getLineC();if(n<=0||n>=1)return i.x=r.x1,i.y=r.y1,i;var l=c(r),f=c(u),d=c(o),v=l+f+d,p=v*n,m=0;return p<l?(m=p/l,i.x=r.x1+(r.x2-r.x1)*m,i.y=r.y1+(r.y2-r.y1)*m):p>l+f?(p-=l+f,m=p/d,i.x=o.x1+(o.x2-o.x1)*m,i.y=o.y1+(o.y2-o.y1)*m):(p-=l,m=p/f,i.x=u.x1+(u.x2-u.x1)*m,i.y=u.y1+(u.y2-u.y1)*m),i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),c=t(4),s=function(a,n,i,r){r===void 0&&(r=[]);var u=a.getLineA(),o=a.getLineB(),l=a.getLineC(),f=e(u),d=e(o),v=e(l),p=f+d+v;!n&&i>0&&(n=p/i);for(var m=0;m<n;m++){var x=p*(m/n),T=0,S=new c;x<f?(T=x/f,S.x=u.x1+(u.x2-u.x1)*T,S.y=u.y1+(u.y2-u.y1)*T):x>f+d?(x-=f+d,T=x/v,S.x=l.x1+(l.x2-l.x1)*T,S.y=l.y1+(l.y2-l.y1)*T):(x-=f,T=x/d,S.x=o.x1+(o.x2-o.x1)*T,S.y=o.y1+(o.y2-o.y1)*T),r.push(S)}return r};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(c))return e[c]=s,!0;if(c.indexOf(".")!==-1){for(var a=c.split("."),n=e,i=e,r=0;r<a.length;r++)if(n.hasOwnProperty(a[r]))i=n,n=n[a[r]];else return!1;return i[a[a.length-1]]=s,!0}return!1};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),c=t(117),s=function(a,n,i,r,u,o,l){if(r===void 0&&(r=!1),o===void 0&&(o=16777215),l===void 0&&(l=1),a.length!==n.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var f={faces:[],vertices:[]},d,v,p,m,x,T,S,E,C,A,P,M=r?3:2,O=Array.isArray(o),F=Array.isArray(l);if(Array.isArray(i)&&i.length>0)for(d=0;d<i.length;d++){var I=i[d],N=i[d]*2,G=i[d]*M;v=a[G],p=a[G+1],m=r?a[G+2]:0,x=n[N],T=n[N+1],S=O?o[I]:o,E=F?l[I]:l,C=0,A=0,P=0,u&&(C=u[G],A=u[G+1],P=r?u[G+2]:0),f.vertices.push(new c(v,p,m,x,T,S,E,C,A,P))}else{var Y=0,z=0;for(d=0;d<a.length;d+=M)v=a[d],p=a[d+1],m=r?a[d+2]:0,x=n[Y],T=n[Y+1],S=O?o[z]:o,E=F?l[z]:l,C=0,A=0,P=0,u&&(C=u[d],A=u[d+1],P=r?u[d+2]:0),f.vertices.push(new c(v,p,m,x,T,S,E,C,A,P)),Y+=2,z++}for(d=0;d<f.vertices.length;d+=3){var W=f.vertices[d],D=f.vertices[d+1],L=f.vertices[d+2];f.faces.push(new e(W,D,L))}return f};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),c=t(69),s=t(39),a=t(117),n=new s,i=new s,r=new c,u=function(o,l,f,d,v,p,m,x,T,S){f===void 0&&(f=1),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),m===void 0&&(m=0),x===void 0&&(x=0),T===void 0&&(T=0),S===void 0&&(S=!0);var E={faces:[],verts:[]},C=o.materials;n.set(d,v,p),i.set(m,x,T),r.fromRotationXYTranslation(i,n,S);for(var A=0;A<o.models.length;A++)for(var P=o.models[A],M=P.vertices,O=P.textureCoords,F=P.faces,I=0;I<F.length;I++){var N=F[I],G=N.vertices[0],Y=N.vertices[1],z=N.vertices[2],W=M[G.vertexIndex],D=M[Y.vertexIndex],L=M[z.vertexIndex],B=G.textureCoordsIndex,w=Y.textureCoordsIndex,V=z.textureCoordsIndex,U=B===-1?{u:0,v:1}:O[B],X=w===-1?{u:0,v:0}:O[w],H=V===-1?{u:1,v:1}:O[V],b=16777215;N.material!==""&&C[N.material]&&(b=C[N.material]);var Z=new a(W.x*f,W.y*f,W.z*f,U.u,U.v,b).transformMat4(r),K=new a(D.x*f,D.y*f,D.z*f,X.u,X.v,b).transformMat4(r),Q=new a(L.x*f,L.y*f,L.z*f,H.u,H.v,b).transformMat4(r);E.verts.push(Z,K,Q),E.faces.push(new e(Z,K,Q))}return l&&(l.faces=l.faces.concat(E.faces),l.vertices=l.vertices.concat(E.verts)),E};h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),c=t(0),s=t(11),a=t(200),n=t(12),i=new c({Extends:e,Mixins:[s.ScrollFactor,s.Visible],initialize:function(u,o,l,f,d,v,p){e.call(this,u,o,l),this.color=new a(f,d,v),this.intensity=p,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(r){return!(i.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&r.id)},setColor:function(r){var u=n.getFloatsFromUintRGB(r);return this.color.set(u[0],u[1],u[2]),this},setIntensity:function(r){return this.intensity=r,this},setRadius:function(r){return this.radius=r,this}});i.RENDER_MASK=15,h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(151),c=t(0),s=t(50),a=t(481),n=t(150),i=t(200),r=t(74),u=t(79),o=t(12),l=new c({initialize:function(){this.lights=[],this.ambientColor=new i(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(f,d,v,p,m,x){return this.systems.displayList.add(new n(this.scene,f,d,v,p,m,x))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(f){for(var d=this.lights,v=f.worldView,p=[],m=0;m<d.length;m++){var x=d[m];x.willRender(f)&&e(x,v)&&p.push({light:x,distance:s(x.x,x.y,v.centerX,v.centerY)})}return p.length>this.maxLights&&(u(p,this.sortByDistance),p=p.slice(0,this.maxLights)),this.visibleLights=p.length,p},sortByDistance:function(f,d){return f.distance>=d.distance},setAmbientColor:function(f){var d=o.getFloatsFromUintRGB(f);return this.ambientColor.set(d[0],d[1],d[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(f,d,v,p,m){f===void 0&&(f=0),d===void 0&&(d=0),v===void 0&&(v=128),p===void 0&&(p=16777215),m===void 0&&(m=1);var x=o.getFloatsFromUintRGB(p),T=new a(f,d,v,x[0],x[1],x[2],m);return this.lights.push(T),T},removeLight:function(f){var d=this.lights.indexOf(f);return d>=0&&r(this.lights,d),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});h.exports=l},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(56),c=t(17),s={Circle:t(1191),Ellipse:t(1201),Intersects:t(484),Line:t(1221),Mesh:t(1243),Point:t(1246),Polygon:t(1260),Rectangle:t(502),Triangle:t(1293)};s=c(!1,s,e),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CircleToCircle:t(231),CircleToRectangle:t(151),GetCircleToCircle:t(1211),GetCircleToRectangle:t(1212),GetLineToCircle:t(232),GetLineToLine:t(485),GetLineToPoints:t(486),GetLineToPolygon:t(487),GetLineToRectangle:t(234),GetRaysFromPointToPolygon:t(1213),GetRectangleIntersection:t(1214),GetRectangleToRectangle:t(1215),GetRectangleToTriangle:t(1216),GetTriangleToCircle:t(1217),GetTriangleToLine:t(492),GetTriangleToTriangle:t(1218),LineToCircle:t(233),LineToLine:t(96),LineToRectangle:t(488),PointToLine:t(496),PointToLineSegment:t(1219),RectangleToRectangle:t(152),RectangleToTriangle:t(489),RectangleToValues:t(1220),TriangleToCircle:t(491),TriangleToLine:t(493),TriangleToTriangle:t(494)}},function(h,g,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),c=function(s,a,n){var i=s.x1,r=s.y1,u=s.x2,o=s.y2,l=a.x1,f=a.y1,d=a.x2,v=a.y2,p=u-i,m=o-r,x=d-l,T=v-f,S=T*p-x*m;if(p===0||S===0)return!1;var E=(p*(f-r)+m*(i-l))/(x*m-T*p),C=(l+x*E-i)/p;return C<0||E<0||E>1?null:(n===void 0&&(n=new e),n.set(i+p*C,r+m*C,C))};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),c=t(485),s=t(47),a=new s,n=new e,i=function(r,u,o){o===void 0&&(o=new e);var l=!1;o.set(),n.set();for(var f=u[0],d=1;d<u.length;d++){var v=u[d];a.setTo(f.x,f.y,v.x,v.y),f=v,c(r,a,n)&&(!l||n.z<o.z)&&(o.copy(n),l=!0)}return l?o:null};h.exports=i},function(h,g,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),c=t(140),s=t(486),a=new e,n=function(i,r,u){u===void 0&&(u=new c),Array.isArray(r)||(r=[r]);var o=!1;u.set(),a.set();for(var l=0;l<r.length;l++)s(i,r[l].points,a)&&(!o||a.z<u.z)&&(u.set(a.x,a.y,a.z,l),o=!0);return o?u:null};h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.x1,a=e.y1,n=e.x2,i=e.y2,r=c.x,u=c.y,o=c.right,l=c.bottom,f=0;if(s>=r&&s<=o&&a>=u&&a<=l||n>=r&&n<=o&&i>=u&&i<=l)return!0;if(s<r&&n>=r){if(f=a+(i-a)*(r-s)/(n-s),f>u&&f<=l)return!0}else if(s>o&&n<=o&&(f=a+(i-a)*(o-s)/(n-s),f>=u&&f<=l))return!0;if(a<u&&i>=u){if(f=s+(n-s)*(u-a)/(i-a),f>=r&&f<=o)return!0}else if(a>l&&i<=l&&(f=s+(n-s)*(l-a)/(i-a),f>=r&&f<=o))return!0;return!1};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(96),c=t(57),s=t(235),a=t(490),n=function(i,r){if(r.left>i.right||r.right<i.left||r.top>i.bottom||r.bottom<i.top)return!1;var u=r.getLineA(),o=r.getLineB(),l=r.getLineC();if(c(i,u.x1,u.y1)||c(i,u.x2,u.y2)||c(i,o.x1,o.y1)||c(i,o.x2,o.y2)||c(i,l.x1,l.y1)||c(i,l.x2,l.y2))return!0;var f=i.getLineA(),d=i.getLineB(),v=i.getLineC(),p=i.getLineD();if(e(u,f)||e(u,d)||e(u,v)||e(u,p)||e(o,f)||e(o,d)||e(o,v)||e(o,p)||e(l,f)||e(l,d)||e(l,v)||e(l,p))return!0;var m=a(i),x=s(r,m,!0);return x.length>0};h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c===void 0&&(c=[]),c.push({x:e.x,y:e.y}),c.push({x:e.right,y:e.y}),c.push({x:e.right,y:e.bottom}),c.push({x:e.x,y:e.bottom}),c};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(233),c=t(115),s=function(a,n){return a.left>n.right||a.right<n.left||a.top>n.bottom||a.bottom<n.top?!1:!!(c(a,n.x,n.y)||e(a.getLineA(),n)||e(a.getLineB(),n)||e(a.getLineC(),n))};h.exports=s},function(h,g,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=t(493),s=t(96),a=function(n,i,r){if(r===void 0&&(r=[]),c(n,i))for(var u=n.getLineA(),o=n.getLineB(),l=n.getLineC(),f=[new e,new e,new e],d=[s(u,i,f[0]),s(o,i,f[1]),s(l,i,f[2])],v=0;v<3;v++)d[v]&&r.push(f[v]);return r};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(96),c=function(s,a){return!!(s.contains(a.x1,a.y1)||s.contains(a.x2,a.y2)||e(s.getLineA(),a)||e(s.getLineB(),a)||e(s.getLineC(),a))};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(235),c=t(495),s=t(96),a=function(n,i){if(n.left>i.right||n.right<i.left||n.top>i.bottom||n.bottom<i.top)return!1;var r=n.getLineA(),u=n.getLineB(),o=n.getLineC(),l=i.getLineA(),f=i.getLineB(),d=i.getLineC();if(s(r,l)||s(r,f)||s(r,d)||s(u,l)||s(u,f)||s(u,d)||s(o,l)||s(o,f)||s(o,d))return!0;var v=c(n),p=e(i,v,!0);return p.length>0||(v=c(i),p=e(n,v,!0),p.length>0)};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c===void 0&&(c=[]),c.push({x:e.x1,y:e.y1}),c.push({x:e.x2,y:e.y2}),c.push({x:e.x3,y:e.y3}),c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){s===void 0&&(s=1);var a=c.x1,n=c.y1,i=c.x2,r=c.y2,u=e.x,o=e.y,l=(i-a)*(i-a)+(r-n)*(r-n);if(l===0)return!1;var f=((u-a)*(i-a)+(o-n)*(r-n))/l;if(f<0)return Math.sqrt((a-u)*(a-u)+(n-o)*(n-o))<=s;if(f>=0&&f<=1){var d=((n-o)*(i-a)-(a-u)*(r-n))/l;return Math.abs(d)*Math.sqrt(l)<=s}else return Math.sqrt((i-u)*(i-u)+(r-o)*(r-o))<=s};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),c=t(68),s=t(97),a=function(n){var i=s(n)-e.TAU;return c(i,-Math.PI,Math.PI)};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=!0,e="untitled",c="",s="";function a(m){var x=m.indexOf("#");return x>-1?m.substring(0,x):m}function n(m){return m.models.length===0&&m.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),c="",m.models[m.models.length-1]}function i(m,x){var T=m.length>=2?m[1]:e;x.models.push({faces:[],name:T,textureCoords:[],vertexNormals:[],vertices:[]}),c=""}function r(m){m.length===2&&(c=m[1])}function u(m,x){var T=m.length,S=T>=2?parseFloat(m[1]):0,E=T>=3?parseFloat(m[2]):0,C=T>=4?parseFloat(m[3]):0;n(x).vertices.push({x:S,y:E,z:C})}function o(m,x){var T=m.length,S=T>=2?parseFloat(m[1]):0,E=T>=3?parseFloat(m[2]):0,C=T>=4?parseFloat(m[3]):0;isNaN(S)&&(S=0),isNaN(E)&&(E=0),isNaN(C)&&(C=0),t&&(E=1-E),n(x).textureCoords.push({u:S,v:E,w:C})}function l(m,x){var T=m.length,S=T>=2?parseFloat(m[1]):0,E=T>=3?parseFloat(m[2]):0,C=T>=4?parseFloat(m[3]):0;n(x).vertexNormals.push({x:S,y:E,z:C})}function f(m,x){var T=m.length-1;if(!(T<3)){for(var S={group:c,material:s,vertices:[]},E=0;E<T;E++){var C=m[E+1],A=C.split("/"),P=A.length;if(!(P<1||P>3)){var M=0,O=0,F=0;M=parseInt(A[0],10),P>1&&A[1]!==""&&(O=parseInt(A[1],10)),P>2&&(F=parseInt(A[2],10)),M!==0&&(M<0&&(M=n(x).vertices.length+1+M),O-=1,M-=1,F-=1,S.vertices.push({textureCoordsIndex:O,vertexIndex:M,vertexNormalIndex:F}))}}n(x).faces.push(S)}}function d(m,x){m.length>=2&&x.materialLibraries.push(m[1])}function v(m){m.length>=2&&(s=m[1])}var p=function(m,x){x===void 0&&(x=!0),t=x;var T={materials:{},materialLibraries:[],models:[]};c="",s="";for(var S=m.split(`
`),E=0;E<S.length;E++){var C=a(S[E]),A=C.replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":i(A,T);break;case"g":r(A);break;case"v":u(A,T);break;case"vt":o(A,T);break;case"vn":l(A,T);break;case"f":f(A,T);break;case"mtllib":d(A,T);break;case"usemtl":v(A);break}}return T};h.exports=p},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103),c=function(s){for(var a={},n=s.split(`
`),i="",r=0;r<n.length;r++){var u=n[r].trim();if(!(u.indexOf("#")===0||u==="")){var o=u.replace(/\s\s+/g," ").trim().split(" ");switch(o[0].toLowerCase()){case"newmtl":{i=o[1];break}case"kd":{var l=Math.floor(o[1]*255),f=o.length>=2?Math.floor(o[2]*255):l,d=o.length>=3?Math.floor(o[3]*255):l;a[i]=e(l,f,d);break}}}}return a};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x*e.x+e.y*e.y};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10);e.Area=t(1267),e.Ceil=t(1268),e.CeilAll=t(1269),e.CenterOn=t(190),e.Clone=t(1270),e.Contains=t(57),e.ContainsPoint=t(1271),e.ContainsRect=t(503),e.CopyFrom=t(1272),e.Decompose=t(490),e.Equals=t(1273),e.FitInside=t(1274),e.FitOutside=t(1275),e.Floor=t(1276),e.FloorAll=t(1277),e.FromPoints=t(199),e.FromXY=t(1278),e.GetAspectRatio=t(237),e.GetCenter=t(1279),e.GetPoint=t(171),e.GetPoints=t(306),e.GetSize=t(1280),e.Inflate=t(1281),e.Intersection=t(1282),e.MarchingAnts=t(316),e.MergePoints=t(1283),e.MergeRect=t(1284),e.MergeXY=t(1285),e.Offset=t(1286),e.OffsetPoint=t(1287),e.Overlaps=t(1288),e.Perimeter=t(130),e.PerimeterPoint=t(1289),e.Random=t(174),e.RandomOutside=t(1290),e.SameDimensions=t(1291),e.Scale=t(1292),e.Union=t(441),h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c.width*c.height>e.width*e.height?!1:c.x>e.x&&c.x<e.right&&c.right>e.x&&c.right<e.right&&c.y>e.y&&c.y<e.bottom&&c.bottom>e.y&&c.bottom<e.bottom};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){return a===void 0&&(a=new e),a.x=(s.x1+s.x2+s.x3)/3,a.y=(s.y1+s.y2+s.y3)/3,a};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e.x1+=c,e.y1+=s,e.x2+=c,e.y2+=s,e.x3+=c,e.y3+=s,e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4);function c(a,n,i,r){var u=a-i,o=n-r,l=u*u+o*o;return Math.sqrt(l)}var s=function(a,n){n===void 0&&(n=new e);var i=a.x1,r=a.y1,u=a.x2,o=a.y2,l=a.x3,f=a.y3,d=c(l,f,u,o),v=c(i,r,l,f),p=c(u,o,i,r),m=d+v+p;return n.x=(i*d+u*v+l*p)/m,n.y=(r*d+o*v+f*p)/m,n};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return function(s,a,n,i){var r=e.getPixelAlpha(a,n,i.texture.key,i.frame.name);return r&&r>=c}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return{gameObject:e,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:c,hitAreaCallback:s,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n){this.pad=a,this.events=a.events,this.index=n,this.value=0,this.threshold=.1},update:function(s){this.value=s},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(239),s=new e({initialize:function(n,i){this.pad=n,this.events=n.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function(a){this.value=a;var n=this.pad,i=this.index;a>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(c.BUTTON_DOWN,n,this,a),this.pad.emit(c.GAMEPAD_BUTTON_DOWN,i,a,this)):this.pressed&&(this.pressed=!1,this.events.emit(c.BUTTON_UP,n,this,a),this.pad.emit(c.GAMEPAD_BUTTON_UP,i,a,this))},destroy:function(){this.pad=null,this.events=null}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(509),c=t(510),s=t(0),a=t(9),n=t(3),i=new s({Extends:a,initialize:function(u,o){a.call(this),this.manager=u,this.pad=o,this.id=o.id,this.index=o.index;for(var l=[],f=0;f<o.buttons.length;f++)l.push(new c(this,f));this.buttons=l;var d=[];for(f=0;f<o.axes.length;f++)d.push(new e(this,f));this.axes=d,this.vibration=o.vibrationActuator;var v={value:0,pressed:!1};this._LCLeft=l[14]?l[14]:v,this._LCRight=l[15]?l[15]:v,this._LCTop=l[12]?l[12]:v,this._LCBottom=l[13]?l[13]:v,this._RCLeft=l[2]?l[2]:v,this._RCRight=l[1]?l[1]:v,this._RCTop=l[3]?l[3]:v,this._RCBottom=l[0]?l[0]:v,this._FBLeftTop=l[4]?l[4]:v,this._FBLeftBottom=l[6]?l[6]:v,this._FBRightTop=l[5]?l[5]:v,this._FBRightBottom=l[7]?l[7]:v;var p={value:0};this._HAxisLeft=d[0]?d[0]:p,this._VAxisLeft=d[1]?d[1]:p,this._HAxisRight=d[2]?d[2]:p,this._VAxisRight=d[3]?d[3]:p,this.leftStick=new n,this.rightStick=new n,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(r){return this.axes[r].getValue()},setAxisThreshold:function(r){for(var u=0;u<this.axes.length;u++)this.axes[u].threshold=r},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(r){return this.buttons[r].value},isButtonDown:function(r){return this.buttons[r].pressed},update:function(r){if(!(r.timestamp<this._created)){var u,o=this.buttons,l=r.buttons,f=o.length;for(u=0;u<f;u++)o[u].update(l[u].value);var d=this.axes,v=r.axes;for(f=d.length,u=0;u<f;u++)d[u].update(v[u]);f>=2&&(this.leftStick.set(d[0].getValue(),d[1].getValue()),f>=4&&this.rightStick.set(d[2].getValue(),d[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var r;for(r=0;r<this.buttons.length;r++)this.buttons[r].destroy();for(r=0;r<this.axes.length;r++)this.axes[r].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(9),s=t(154),a=new e({Extends:c,initialize:function(i,r){c.call(this),this.plugin=i,this.keyCode=r,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(n){return this.emitOnRepeat=n,this},onDown:function(n){this.originalEvent=n,this.enabled&&(this.altKey=n.altKey,this.ctrlKey=n.ctrlKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.location=n.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(s.DOWN,this,n):(this.isDown=!0,this.isUp=!1,this.timeDown=n.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(s.DOWN,this,n)))},onUp:function(n){this.originalEvent=n,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=n.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(s.UP,this,n))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(154),s=t(2),a=t(514),n=t(516),i=new e({initialize:function(u,o,l){if(l===void 0&&(l={}),o.length<2)return!1;this.manager=u,this.enabled=!0,this.keyCodes=[];for(var f=0;f<o.length;f++){var d=o[f];typeof d=="string"?this.keyCodes.push(d.toUpperCase().charCodeAt(0)):typeof d=="number"?this.keyCodes.push(d):d.hasOwnProperty("keyCode")&&this.keyCodes.push(d.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=s(l,"resetOnWrongKey",!0),this.maxKeyDelay=s(l,"maxKeyDelay",0),this.resetOnMatch=s(l,"resetOnMatch",!1),this.deleteOnMatch=s(l,"deleteOnMatch",!1);var v=this,p=function(m){if(!(v.matched||!v.enabled)){var x=a(m,v);x&&(v.manager.emit(c.COMBO_MATCH,v,m),v.resetOnMatch?n(v):v.deleteOnMatch&&v.destroy())}};this.onKeyDown=p,this.manager.on(c.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(c.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(515),c=function(s,a){if(a.matched)return!0;var n=!1,i=!1;if(s.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var r=a.timeLastMatched+a.maxKeyDelay;s.timeStamp<=r&&(i=!0,n=e(s,a))}else i=!0,n=e(s,a);return!i&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),n&&(a.timeLastMatched=s.timeStamp,a.matched=!0,a.timeMatched=s.timeStamp),n};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c.timeLastMatched=e.timeStamp,c.index++,c.index===c.size?!0:(c.current=c.keyCodes[c.index],!1)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(240),c=function(s,a){var n=e(a,s.xhrSettings),i=new XMLHttpRequest;if(i.open("GET",s.src,n.async,n.user,n.password),i.responseType=s.xhrSettings.responseType,i.timeout=n.timeout,n.headers)for(var r in n.headers)i.setRequestHeader(r,n.headers[r]);return n.header&&n.headerValue&&i.setRequestHeader(n.header,n.headerValue),n.requestedWith&&i.setRequestHeader("X-Requested-With",n.requestedWith),n.overrideMimeType&&i.overrideMimeType(n.overrideMimeType),n.withCredentials&&(i.withCredentials=!0),i.onload=s.onLoad.bind(s,i),i.onerror=s.onError.bind(s,i),i.onprogress=s.onProgress.bind(s),i.send(),i};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(519),r=t(7),u=new e({Extends:s,initialize:function(l,f,d,v,p){if(r(f)){var m=f;f=n(m,"key"),v=n(m,"xhrSettings"),p=n(m,"context",p)}var x={type:"audio",cache:l.cacheManager.audio,extension:d.type,responseType:"arraybuffer",key:f,url:d.url,xhrSettings:v,config:{context:p}};s.call(this,l,x)},onProcess:function(){this.state=c.FILE_PROCESSING;var o=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(l){o.data=l,o.onProcessComplete()},function(l){console.error("Error decoding audio: "+o.key+" - ",l?l.message:null),o.onProcessError()}),this.config.context=null}});u.create=function(o,l,f,d,v){var p=o.systems.game,m=p.config.audio,x=p.device.audio;r(l)&&(f=n(l,"url",[]),d=n(l,"config",{}));var T=u.getAudioURL(p,f);return T?x.webAudio&&!m.disableWebAudio?new u(o,l,T,v,p.sound.context):new i(o,l,T,d):null},u.getAudioURL=function(o,l){Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++){var d=n(l[f],"url",l[f]);if(d.indexOf("blob:")===0||d.indexOf("data:")===0)return{url:d,type:""};var v=d.match(/\.([a-zA-Z0-9]+)($|\?)/);if(v=n(l[f],"type",v?v[1]:"").toLowerCase(),o.device.audio[v])return{url:d,type:v}}return null},a.register("audio",function(o,l,f,d){var v=this.systems.game,p=v.config.audio,m=v.device.audio;if(p.noAudio||!m.webAudio&&!m.audioData)return this;var x;if(Array.isArray(o))for(var T=0;T<o.length;T++)x=u.create(this,o[T]),x&&this.addFile(x);else x=u.create(this,o,l,f,d),x&&this.addFile(x);return this}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(95),s=t(23),a=t(2),n=t(155),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d){if(i(l)){var v=l;l=a(v,"key"),d=a(v,"config",d)}var p={type:"audio",cache:o.cacheManager.audio,extension:f.type,key:l,url:f.url,config:d};s.call(this,o,p),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var u=0;u<this.data.length;u++){var o=this.data[u];o.oncanplaythrough=null,o.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(u){var o=u.target;o.oncanplaythrough=null,o.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(c.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var u=this.config&&this.config.instances||1;this.filesTotal=u,this.filesLoaded=0,this.percentComplete=0;for(var o=0;o<u;o++){var l=new Audio;l.dataset||(l.dataset={}),l.dataset.name=this.key+("0"+o).slice(-2),l.dataset.used="false",this.locked?l.dataset.locked="true":(l.dataset.locked="false",l.preload="auto",l.oncanplaythrough=this.onProgress.bind(this),l.onerror=this.onError.bind(this)),this.data.push(l)}for(o=0;o<this.data.length;o++)l=this.data[o],l.src=n(this,this.loader.baseURL),this.locked||l.load();this.locked&&setTimeout(this.onLoad.bind(this))}});h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d){var v="js";if(i(l)){var p=l;l=n(p,"key"),f=n(p,"url"),d=n(p,"xhrSettings"),v=n(p,"extension",v)}var m={type:"script",cache:!1,extension:v,responseType:"text",key:l,url:f,xhrSettings:d};s.call(this,o,m)},onProcess:function(){this.state=c.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",function(u,o,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new r(this,u[f]));else this.addFile(new r(this,u,o,l));return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(522),c=t(157),s=t(0),a=t(62),n=t(524),i=t(525),r=new s({initialize:function(o){this.world=o,this.scene=o.scene,this.sys=o.scene.sys},collider:function(u,o,l,f,d){return this.world.addCollider(u,o,l,f,d)},overlap:function(u,o,l,f,d){return this.world.addOverlap(u,o,l,f,d)},existing:function(u,o){var l=o?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(u,l),u},staticImage:function(u,o,l,f){var d=new e(this.scene,u,o,l,f);return this.sys.displayList.add(d),this.world.enableBody(d,a.STATIC_BODY),d},image:function(u,o,l,f){var d=new e(this.scene,u,o,l,f);return this.sys.displayList.add(d),this.world.enableBody(d,a.DYNAMIC_BODY),d},staticSprite:function(u,o,l,f){var d=new c(this.scene,u,o,l,f);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,a.STATIC_BODY),d},sprite:function(u,o,l,f){var d=new c(this.scene,u,o,l,f);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,a.DYNAMIC_BODY),d},staticGroup:function(u,o){return this.sys.updateList.add(new i(this.world,this.world.scene,u,o))},group:function(u,o){return this.sys.updateList.add(new n(this.world,this.world.scene,u,o))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(243),s=t(125),a=new e({Extends:s,Mixins:[c.Acceleration,c.Angular,c.Bounce,c.Debug,c.Drag,c.Enable,c.Friction,c.Gravity,c.Immovable,c.Mass,c.Pushable,c.Size,c.Velocity],initialize:function(i,r,u,o,l){s.call(this,i,r,u,o,l),this.body=null}});h.exports=a},function(h,g,t){var e=t(244),c=t(65),s=t(231),a=t(151),n=function(i,r,u,o,l,f){var d=e(i,r-o,u-o,2*o,2*o,l,f);if(d.length===0)return d;for(var v=new c(r,u,o),p=new c,m=[],x=0;x<d.length;x++){var T=d[x];T.isCircle?(p.setTo(T.center.x,T.center.y,T.halfWidth),s(v,p)&&m.push(T)):a(v,T)&&m.push(T)}return m};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(157),c=t(0),s=t(62),a=t(2),n=t(113),i=t(7),r=new c({Extends:n,initialize:function(o,l,f,d){if(!f&&!d)d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(i(f))d=f,f=null,d.internalCreateCallback=this.createCallbackHandler,d.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(f)&&i(f[0])){d=f[0];var v=this;f.forEach(function(p){p.internalCreateCallback=v.createCallbackHandler,p.internalRemoveCallback=v.removeCallbackHandler}),f=null}else d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=o,d.classType=a(d,"classType",e),this.physicsType=s.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:a(d,"collideWorldBounds",!1),setBoundsRectangle:a(d,"customBoundsRectangle",null),setAccelerationX:a(d,"accelerationX",0),setAccelerationY:a(d,"accelerationY",0),setAllowDrag:a(d,"allowDrag",!0),setAllowGravity:a(d,"allowGravity",!0),setAllowRotation:a(d,"allowRotation",!0),setBounceX:a(d,"bounceX",0),setBounceY:a(d,"bounceY",0),setDragX:a(d,"dragX",0),setDragY:a(d,"dragY",0),setEnable:a(d,"enable",!0),setGravityX:a(d,"gravityX",0),setGravityY:a(d,"gravityY",0),setFrictionX:a(d,"frictionX",0),setFrictionY:a(d,"frictionY",0),setMaxVelocityX:a(d,"maxVelocityX",1e4),setMaxVelocityY:a(d,"maxVelocityY",1e4),setVelocityX:a(d,"velocityX",0),setVelocityY:a(d,"velocityY",0),setAngularVelocity:a(d,"angularVelocity",0),setAngularAcceleration:a(d,"angularAcceleration",0),setAngularDrag:a(d,"angularDrag",0),setMass:a(d,"mass",1),setImmovable:a(d,"immovable",!1)},n.call(this,l,f,d),this.type="PhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,s.DYNAMIC_BODY);var o=u.body;for(var l in this.defaults)o[l](this.defaults[l])},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},setVelocity:function(u,o,l){l===void 0&&(l=0);for(var f=this.getChildren(),d=0;d<f.length;d++)f[d].body.velocity.set(u+d*l,o+d*l);return this},setVelocityX:function(u,o){o===void 0&&(o=0);for(var l=this.getChildren(),f=0;f<l.length;f++)l[f].body.velocity.x=u+f*o;return this},setVelocityY:function(u,o){o===void 0&&(o=0);for(var l=this.getChildren(),f=0;f<l.length;f++)l[f].body.velocity.y=u+f*o;return this}});h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(157),c=t(0),s=t(62),a=t(2),n=t(113),i=t(7),r=new c({Extends:n,initialize:function(o,l,f,d){!f&&!d?d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:e}:i(f)?(d=f,f=null,d.internalCreateCallback=this.createCallbackHandler,d.internalRemoveCallback=this.removeCallbackHandler,d.createMultipleCallback=this.createMultipleCallbackHandler,d.classType=a(d,"classType",e)):Array.isArray(f)&&i(f[0])?(d=f,f=null,d.forEach(function(v){v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler,v.createMultipleCallback=this.createMultipleCallbackHandler,v.classType=a(v,"classType",e)})):d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=o,this.physicsType=s.STATIC_BODY,n.call(this,l,f,d),this.type="StaticPhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,s.STATIC_BODY)},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var u=this.children.entries,o=0;o<u.length;o++)u[o].body.reset();return this}});h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(350),c=t(527),s=t(18),a=t(0),n=t(528),i=t(62),r=t(50),u=t(9),o=t(245),l=t(124),f=t(354),d=t(355),v=t(246),p=t(247),m=t(529),x=t(6),T=t(14),S=t(211),E=t(530),C=t(10),A=t(531),P=t(532),M=t(537),O=t(538),F=t(149),I=t(539),N=t(248),G=t(25),Y=t(3),z=t(68),W=new a({Extends:u,initialize:function(L,B){u.call(this),this.scene=L,this.bodies=new F,this.staticBodies=new F,this.pendingDestroy=new F,this.colliders=new S,this.gravity=new Y(x(B,"gravity.x",0),x(B,"gravity.y",0)),this.bounds=new C(x(B,"x",0),x(B,"y",0),x(B,"width",L.sys.scale.width),x(B,"height",L.sys.scale.height)),this.checkCollision={up:x(B,"checkCollision.up",!0),down:x(B,"checkCollision.down",!0),left:x(B,"checkCollision.left",!0),right:x(B,"checkCollision.right",!0)},this.fps=x(B,"fps",60),this.fixedStep=x(B,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=x(B,"timeScale",1),this.OVERLAP_BIAS=x(B,"overlapBias",4),this.TILE_BIAS=x(B,"tileBias",16),this.forceX=x(B,"forceX",!1),this.isPaused=x(B,"isPaused",!1),this._total=0,this.drawDebug=x(B,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:x(B,"debugShowBody",!0),debugShowStaticBody:x(B,"debugShowStaticBody",!0),debugShowVelocity:x(B,"debugShowVelocity",!0),bodyDebugColor:x(B,"debugBodyColor",16711935),staticBodyDebugColor:x(B,"debugStaticBodyColor",255),velocityDebugColor:x(B,"debugVelocityColor",65280)},this.maxEntries=x(B,"maxEntries",16),this.useTree=x(B,"useTree",!0),this.tree=new A(this.maxEntries),this.staticTree=new A(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new G,this._tempMatrix2=new G,this.drawDebug&&this.createDebugGraphic()},enable:function(D,L){L===void 0&&(L=i.DYNAMIC_BODY),Array.isArray(D)||(D=[D]);for(var B=0;B<D.length;B++){var w=D[B];if(w.isParent)for(var V=w.getChildren(),U=0;U<V.length;U++){var X=V[U];X.isParent?this.enable(X,L):this.enableBody(X,L)}else this.enableBody(w,L)}},enableBody:function(D,L){return L===void 0&&(L=i.DYNAMIC_BODY),D.body||(L===i.DYNAMIC_BODY?D.body=new c(this,D):L===i.STATIC_BODY&&(D.body=new I(this,D))),this.add(D.body),D},add:function(D){return D.physicsType===i.DYNAMIC_BODY?this.bodies.set(D):D.physicsType===i.STATIC_BODY&&(this.staticBodies.set(D),this.staticTree.insert(D)),D.enable=!0,D},disable:function(D){Array.isArray(D)||(D=[D]);for(var L=0;L<D.length;L++){var B=D[L];if(B.isParent)for(var w=B.getChildren(),V=0;V<w.length;V++){var U=w[V];U.isParent?this.disable(U):this.disableBody(U.body)}else this.disableBody(B.body)}},disableBody:function(D){this.remove(D),D.enable=!1},remove:function(D){D.physicsType===i.DYNAMIC_BODY?(this.tree.remove(D),this.bodies.delete(D)):D.physicsType===i.STATIC_BODY&&(this.staticBodies.delete(D),this.staticTree.remove(D))},createDebugGraphic:function(){var D=this.scene.sys.add.graphics({x:0,y:0});return D.setDepth(Number.MAX_VALUE),this.debugGraphic=D,this.drawDebug=!0,D},setBounds:function(D,L,B,w,V,U,X,H){return this.bounds.setTo(D,L,B,w),V!==void 0&&this.setBoundsCollision(V,U,X,H),this},setBoundsCollision:function(D,L,B,w){return D===void 0&&(D=!0),L===void 0&&(L=!0),B===void 0&&(B=!0),w===void 0&&(w=!0),this.checkCollision.left=D,this.checkCollision.right=L,this.checkCollision.up=B,this.checkCollision.down=w,this},pause:function(){return this.isPaused=!0,this.emit(o.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(o.RESUME),this},addCollider:function(D,L,B,w,V){B===void 0&&(B=null),w===void 0&&(w=null),V===void 0&&(V=B);var U=new n(this,!1,D,L,B,w,V);return this.colliders.add(U),U},addOverlap:function(D,L,B,w,V){B===void 0&&(B=null),w===void 0&&(w=null),V===void 0&&(V=B);var U=new n(this,!0,D,L,B,w,V);return this.colliders.add(U),U},removeCollider:function(D){return this.colliders.remove(D),this},setFPS:function(D){return this.fps=D,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(D,L){if(!(this.isPaused||this.bodies.size===0)){var B,w=this._frameTime,V=this._frameTimeMS*this.timeScale;this._elapsed+=L;var U,X=this.bodies.entries,H=this._elapsed>=V;for(this.fixedStep||(w=L*.001,H=!0,this._elapsed=0),B=0;B<X.length;B++)U=X[B],U.enable&&U.preUpdate(H,w);if(H){this._elapsed-=V,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(X));var b=this.colliders.update();for(B=0;B<b.length;B++){var Z=b[B];Z.active&&Z.update()}this.emit(o.WORLD_STEP,w)}for(;this._elapsed>=V;)this._elapsed-=V,this.step(w)}},step:function(D){var L,B,w=this.bodies.entries,V=w.length;for(L=0;L<V;L++)B=w[L],B.enable&&B.update(D);this.useTree&&(this.tree.clear(),this.tree.load(w));var U=this.colliders.update();for(L=0;L<U.length;L++){var X=U[L];X.active&&X.update()}this.emit(o.WORLD_STEP,D),this.stepsLastFrame++},postUpdate:function(){var D,L,B=this.bodies.entries,w=B.length,V=this.bodies,U=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,D=0;D<w;D++)L=B[D],L.enable&&L.postUpdate();if(this.drawDebug){var X=this.debugGraphic;for(X.clear(),D=0;D<w;D++)L=B[D],L.willDrawDebug()&&L.drawDebug(X);for(B=U.entries,w=B.length,D=0;D<w;D++)L=B[D],L.willDrawDebug()&&L.drawDebug(X)}var H=this.pendingDestroy;if(H.size>0){var b=this.tree,Z=this.staticTree;for(B=H.entries,w=B.length,D=0;D<w;D++)L=B[D],L.physicsType===i.DYNAMIC_BODY?(b.remove(L),V.delete(L)):L.physicsType===i.STATIC_BODY&&(Z.remove(L),U.delete(L)),L.world=void 0,L.gameObject=void 0;H.clear()}},updateMotion:function(D,L){D.allowRotation&&this.computeAngularVelocity(D,L),this.computeVelocity(D,L)},computeAngularVelocity:function(D,L){var B=D.angularVelocity,w=D.angularAcceleration,V=D.angularDrag,U=D.maxAngular;w?B+=w*L:D.allowDrag&&V&&(V*=L,f(B-V,0,.1)?B-=V:d(B+V,0,.1)?B+=V:B=0),B=s(B,-U,U);var X=B-D.angularVelocity;D.angularVelocity+=X,D.rotation+=D.angularVelocity*L},computeVelocity:function(D,L){var B=D.velocity.x,w=D.acceleration.x,V=D.drag.x,U=D.maxVelocity.x,X=D.velocity.y,H=D.acceleration.y,b=D.drag.y,Z=D.maxVelocity.y,K=D.speed,Q=D.maxSpeed,j=D.allowDrag,q=D.useDamping;D.allowGravity&&(B+=(this.gravity.x+D.gravity.x)*L,X+=(this.gravity.y+D.gravity.y)*L),w?B+=w*L:j&&V&&(q?(V=Math.pow(V,L),B*=V,K=Math.sqrt(B*B+X*X),l(K,0,.001)&&(B=0)):(V*=L,f(B-V,0,.01)?B-=V:d(B+V,0,.01)?B+=V:B=0)),H?X+=H*L:j&&b&&(q?(b=Math.pow(b,L),X*=b,K=Math.sqrt(B*B+X*X),l(K,0,.001)&&(X=0)):(b*=L,f(X-b,0,.01)?X-=b:d(X+b,0,.01)?X+=b:X=0)),B=s(B,-U,U),X=s(X,-Z,Z),D.velocity.set(B,X),Q>-1&&K>Q&&(D.velocity.normalize().scale(Q),K=Q),D.speed=K},separate:function(D,L,B,w,V,U){if(!U&&!D.enable||!L.enable||D.checkCollision.none||L.checkCollision.none||!this.intersects(D,L)||B&&B.call(w,D.gameObject,L.gameObject)===!1)return!1;if(D.isCircle&&L.isCircle)return this.separateCircle(D,L,V);if(D.isCircle!==L.isCircle){var X=D.isCircle?L:D,H=D.isCircle?D:L,b={x:X.x,y:X.y,right:X.right,bottom:X.bottom},Z=H.center;if((Z.y<b.y||Z.y>b.bottom)&&(Z.x<b.x||Z.x>b.right))return this.separateCircle(D,L,V)}var K=!1,Q=!1;V?(K=M(D,L,V,this.OVERLAP_BIAS),Q=O(D,L,V,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+D.gravity.y)<Math.abs(this.gravity.x+D.gravity.x)?(K=M(D,L,V,this.OVERLAP_BIAS),this.intersects(D,L)&&(Q=O(D,L,V,this.OVERLAP_BIAS))):(Q=O(D,L,V,this.OVERLAP_BIAS),this.intersects(D,L)&&(K=M(D,L,V,this.OVERLAP_BIAS)));var j=K||Q;return j&&(V?(D.onOverlap||L.onOverlap)&&this.emit(o.OVERLAP,D.gameObject,L.gameObject,D,L):(D.onCollide||L.onCollide)&&this.emit(o.COLLIDE,D.gameObject,L.gameObject,D,L)),j},separateCircle:function(D,L,B,w){v(D,L,!1,w),p(D,L,!1,w);var V=0;if(D.isCircle!==L.isCircle){var U={x:L.isCircle?D.position.x:L.position.x,y:L.isCircle?D.position.y:L.position.y,right:L.isCircle?D.right:L.right,bottom:L.isCircle?D.bottom:L.bottom},X={x:D.isCircle?D.center.x:L.center.x,y:D.isCircle?D.center.y:L.center.y,radius:D.isCircle?D.halfWidth:L.halfWidth};X.y<U.y?X.x<U.x?V=r(X.x,X.y,U.x,U.y)-X.radius:X.x>U.right&&(V=r(X.x,X.y,U.right,U.y)-X.radius):X.y>U.bottom&&(X.x<U.x?V=r(X.x,X.y,U.x,U.bottom)-X.radius:X.x>U.right&&(V=r(X.x,X.y,U.right,U.bottom)-X.radius)),V*=-1}else V=D.halfWidth+L.halfWidth-r(D.center.x,D.center.y,L.center.x,L.center.y);if(D.overlapR=V,L.overlapR=V,B||V===0||D.immovable&&L.immovable||D.customSeparateX||L.customSeparateX)return V!==0&&(D.onOverlap||L.onOverlap)&&this.emit(o.OVERLAP,D.gameObject,L.gameObject,D,L),V!==0;var H=D.center.x-L.center.x,b=D.center.y-L.center.y,Z=Math.sqrt(Math.pow(H,2)+Math.pow(b,2)),K=(L.center.x-D.center.x)/Z||0,Q=(L.center.y-D.center.y)/Z||0,j=2*(D.velocity.x*K+D.velocity.y*Q-L.velocity.x*K-L.velocity.y*Q)/(D.mass+L.mass);(D.immovable||L.immovable)&&(j*=2),D.immovable||(D.velocity.x=D.velocity.x-j/D.mass*K,D.velocity.y=D.velocity.y-j/D.mass*Q),L.immovable||(L.velocity.x=L.velocity.x+j/L.mass*K,L.velocity.y=L.velocity.y+j/L.mass*Q),!D.immovable&&!L.immovable&&(V/=2);var q=e(D.center,L.center),k=(V+T.EPSILON)*Math.cos(q),J=(V+T.EPSILON)*Math.sin(q);return D.immovable||(D.x-=k,D.y-=J,D.updateCenter()),L.immovable||(L.x+=k,L.y+=J,L.updateCenter()),D.velocity.x*=D.bounce.x,D.velocity.y*=D.bounce.y,L.velocity.x*=L.bounce.x,L.velocity.y*=L.bounce.y,(D.onCollide||L.onCollide)&&this.emit(o.COLLIDE,D.gameObject,L.gameObject,D,L),!0},intersects:function(D,L){return D===L?!1:!D.isCircle&&!L.isCircle?!(D.right<=L.position.x||D.bottom<=L.position.y||D.position.x>=L.right||D.position.y>=L.bottom):D.isCircle?L.isCircle?r(D.center.x,D.center.y,L.center.x,L.center.y)<=D.halfWidth+L.halfWidth:this.circleBodyIntersects(D,L):this.circleBodyIntersects(L,D)},circleBodyIntersects:function(D,L){var B=s(D.center.x,L.left,L.right),w=s(D.center.y,L.top,L.bottom),V=(D.center.x-B)*(D.center.x-B),U=(D.center.y-w)*(D.center.y-w);return V+U<=D.halfWidth*D.halfWidth},overlap:function(D,L,B,w,V){return B===void 0&&(B=null),w===void 0&&(w=null),V===void 0&&(V=B),this.collideObjects(D,L,B,w,V,!0)},collide:function(D,L,B,w,V){return B===void 0&&(B=null),w===void 0&&(w=null),V===void 0&&(V=B),this.collideObjects(D,L,B,w,V,!1)},collideObjects:function(D,L,B,w,V,U){var X,H;D.isParent&&D.physicsType===void 0&&(D=D.children.entries),L&&L.isParent&&L.physicsType===void 0&&(L=L.children.entries);var b=Array.isArray(D),Z=Array.isArray(L);if(this._total=0,!b&&!Z)this.collideHandler(D,L,B,w,V,U);else if(!b&&Z)for(X=0;X<L.length;X++)this.collideHandler(D,L[X],B,w,V,U);else if(b&&!Z)if(L)for(X=0;X<D.length;X++)this.collideHandler(D[X],L,B,w,V,U);else for(X=0;X<D.length;X++){var K=D[X];for(H=X+1;H<D.length;H++)X!==H&&this.collideHandler(K,D[H],B,w,V,U)}else for(X=0;X<D.length;X++)for(H=0;H<L.length;H++)this.collideHandler(D[X],L[H],B,w,V,U);return this._total>0},collideHandler:function(D,L,B,w,V,U){if(L===void 0&&D.isParent)return this.collideGroupVsGroup(D,D,B,w,V,U);if(!D||!L)return!1;if(D.body){if(L.body)return this.collideSpriteVsSprite(D,L,B,w,V,U);if(L.isParent)return this.collideSpriteVsGroup(D,L,B,w,V,U);if(L.isTilemap)return this.collideSpriteVsTilemapLayer(D,L,B,w,V,U)}else if(D.isParent){if(L.body)return this.collideSpriteVsGroup(L,D,B,w,V,U);if(L.isParent)return this.collideGroupVsGroup(D,L,B,w,V,U);if(L.isTilemap)return this.collideGroupVsTilemapLayer(D,L,B,w,V,U)}else if(D.isTilemap){if(L.body)return this.collideSpriteVsTilemapLayer(L,D,B,w,V,U);if(L.isParent)return this.collideGroupVsTilemapLayer(L,D,B,w,V,U)}},collideSpriteVsSprite:function(D,L,B,w,V,U){return!D.body||!L.body?!1:(this.separate(D.body,L.body,w,V,U)&&(B&&B.call(V,D,L),this._total++),!0)},collideSpriteVsGroup:function(D,L,B,w,V,U){var X=D.body;if(!(L.length===0||!X||!X.enable||X.checkCollision.none)){var H,b,Z;if(this.useTree||L.physicsType===i.STATIC_BODY){var K=this.treeMinMax;K.minX=X.left,K.minY=X.top,K.maxX=X.right,K.maxY=X.bottom;var Q=L.physicsType===i.DYNAMIC_BODY?this.tree.search(K):this.staticTree.search(K);for(b=Q.length,H=0;H<b;H++)Z=Q[H],!(X===Z||!Z.enable||Z.checkCollision.none||!L.contains(Z.gameObject))&&this.separate(X,Z,w,V,U,!0)&&(B&&B.call(V,X.gameObject,Z.gameObject),this._total++)}else{var j=L.getChildren(),q=L.children.entries.indexOf(D);for(b=j.length,H=0;H<b;H++)Z=j[H].body,!(!Z||H===q||!Z.enable)&&this.separate(X,Z,w,V,U)&&(B&&B.call(V,X.gameObject,Z.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(D,L,B,w,V,U){var X=D.getChildren();if(X.length===0)return!1;for(var H=!1,b=0;b<X.length;b++)X[b].body&&this.collideSpriteVsTilemapLayer(X[b],L,B,w,V,U)&&(H=!0);return H},collideTiles:function(D,L,B,w,V){return!D.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(D,L,B,w,V,!1,!1)},overlapTiles:function(D,L,B,w,V){return!D.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(D,L,B,w,V,!0,!1)},collideSpriteVsTilemapLayer:function(D,L,B,w,V,U){var X=D.body;if(!X.enable||X.checkCollision.none)return!1;var H=X.position.x,b=X.position.y,Z=X.width,K=X.height,Q=L.layer;if(Q.tileWidth>Q.baseTileWidth){var j=(Q.tileWidth-Q.baseTileWidth)*L.scaleX;H-=j,Z+=j}if(Q.tileHeight>Q.baseTileHeight){var q=(Q.tileHeight-Q.baseTileHeight)*L.scaleY;K+=q}var k=m(H,b,Z,K,null,L.scene.cameras.main,L.layer);return k.length===0?!1:this.collideSpriteVsTilesHandler(D,k,B,w,V,U,!0)},collideSpriteVsTilesHandler:function(D,L,B,w,V,U,X){for(var H=D.body,b,Z={left:0,right:0,top:0,bottom:0},K,Q=!1,j=0;j<L.length;j++){b=L[j],K=b.tilemapLayer;var q=K.tileToWorldXY(b.x,b.y);Z.left=q.x,Z.top=q.y,b.baseHeight!==b.height&&(Z.top-=(b.height-b.baseHeight)*K.scaleY),Z.right=Z.left+b.width*K.scaleX,Z.bottom=Z.top+b.height*K.scaleY,N(Z,H)&&(!w||w.call(V,D,b))&&E(b,D)&&(U||P(j,H,b,Z,K,this.TILE_BIAS,X))&&(this._total++,Q=!0,B&&B.call(V,D,b),U&&H.onOverlap?this.emit(o.TILE_OVERLAP,D,b,H):H.onCollide&&this.emit(o.TILE_COLLIDE,D,b,H))}return Q},collideGroupVsGroup:function(D,L,B,w,V,U){if(!(D.length===0||L.length===0))for(var X=D.getChildren(),H=0;H<X.length;H++)this.collideSpriteVsGroup(X[H],L,B,w,V,U)},wrap:function(D,L){D.body?this.wrapObject(D,L):D.getChildren?this.wrapArray(D.getChildren(),L):Array.isArray(D)?this.wrapArray(D,L):this.wrapObject(D,L)},wrapArray:function(D,L){for(var B=0;B<D.length;B++)this.wrapObject(D[B],L)},wrapObject:function(D,L){L===void 0&&(L=0),D.x=z(D.x,this.bounds.left-L,this.bounds.right+L),D.y=z(D.y,this.bounds.top-L,this.bounds.bottom+L)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});h.exports=W},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(62),s=t(245),a=t(196),n=t(10),i=t(57),r=t(3),u=new e({initialize:function(l,f){var d=f.displayWidth?f.displayWidth:64,v=f.displayHeight?f.displayHeight:64;this.world=l,this.gameObject=f,this.transform={x:f.x,y:f.y,rotation:f.angle,scaleX:f.scaleX,scaleY:f.scaleY,displayOriginX:f.displayOriginX,displayOriginY:f.displayOriginY},this.debugShowBody=l.defaults.debugShowBody,this.debugShowVelocity=l.defaults.debugShowVelocity,this.debugBodyColor=l.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new r,this.position=new r(f.x-f.scaleX*f.displayOriginX,f.y-f.scaleY*f.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=f.angle,this.preRotation=f.angle,this.width=d,this.height=v,this.sourceWidth=d,this.sourceHeight=v,f.frame&&(this.sourceWidth=f.frame.realWidth,this.sourceHeight=f.frame.realHeight),this.halfWidth=Math.abs(d/2),this.halfHeight=Math.abs(v/2),this.center=new r(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new r,this.newVelocity=new r,this.deltaMax=new r,this.acceleration=new r,this.allowDrag=!0,this.drag=new r,this.allowGravity=!0,this.gravity=new r,this.bounce=new r,this.worldBounce=null,this.customBoundsRectangle=l.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new r(1e4,1e4),this.maxSpeed=-1,this.friction=new r(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=c.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=c.DYNAMIC_BODY,this._sx=f.scaleX,this._sy=f.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new n},updateBounds:function(){var o=this.gameObject,l=this.transform;if(o.parentContainer){var f=o.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);l.x=f.tx,l.y=f.ty,l.rotation=a(f.rotation),l.scaleX=f.scaleX,l.scaleY=f.scaleY,l.displayOriginX=o.displayOriginX,l.displayOriginY=o.displayOriginY}else l.x=o.x,l.y=o.y,l.rotation=o.angle,l.scaleX=o.scaleX,l.scaleY=o.scaleY,l.displayOriginX=o.displayOriginX,l.displayOriginY=o.displayOriginY;var d=!1;if(this.syncBounds){var v=o.getBounds(this._bounds);this.width=v.width,this.height=v.height,d=!0}else{var p=Math.abs(l.scaleX),m=Math.abs(l.scaleY);(this._sx!==p||this._sy!==m)&&(this.width=this.sourceWidth*p,this.height=this.sourceHeight*m,this._sx=p,this._sy=m,d=!0)}d&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var o=this.transform;this.position.x=o.x+o.scaleX*(this.offset.x-o.displayOriginX),this.position.y=o.y+o.scaleY*(this.offset.y-o.displayOriginY),this.updateCenter()},resetFlags:function(o){o===void 0&&(o=!1);var l=this.wasTouching,f=this.touching,d=this.blocked;o?(l.none=!0,l.up=!1,l.down=!1,l.left=!1,l.right=!1):(l.none=f.none,l.up=f.up,l.down=f.down,l.left=f.left,l.right=f.right),f.none=!0,f.up=!1,f.down=!1,f.left=!1,f.right=!1,d.none=!0,d.up=!1,d.down=!1,d.left=!1,d.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(o,l){o&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),o&&this.update(l)},update:function(o){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,o);var l=this.velocity.x,f=this.velocity.y;this.newVelocity.set(l*o,f*o),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(f,l),this.speed=Math.sqrt(l*l+f*f),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(s.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var o=this.position.x-this.prevFrame.x,l=this.position.y-this.prevFrame.y;if(this.moves){var f=this.deltaMax.x,d=this.deltaMax.y;f!==0&&o!==0&&(o<0&&o<-f?o=-f:o>0&&o>f&&(o=f)),d!==0&&l!==0&&(l<0&&l<-d?l=-d:l>0&&l>d&&(l=d)),this.gameObject.x+=o,this.gameObject.y+=l}o<0?this.facing=c.FACING_LEFT:o>0&&(this.facing=c.FACING_RIGHT),l<0?this.facing=c.FACING_UP:l>0&&(this.facing=c.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=o,this._ty=l},setBoundsRectangle:function(o){return this.customBoundsRectangle=o||this.world.bounds,this},checkWorldBounds:function(){var o=this.position,l=this.customBoundsRectangle,f=this.world.checkCollision,d=this.worldBounce?-this.worldBounce.x:-this.bounce.x,v=this.worldBounce?-this.worldBounce.y:-this.bounce.y,p=!1;return o.x<l.x&&f.left?(o.x=l.x,this.velocity.x*=d,this.blocked.left=!0,p=!0):this.right>l.right&&f.right&&(o.x=l.right-this.width,this.velocity.x*=d,this.blocked.right=!0,p=!0),o.y<l.y&&f.up?(o.y=l.y,this.velocity.y*=v,this.blocked.up=!0,p=!0):this.bottom>l.bottom&&f.down&&(o.y=l.bottom-this.height,this.velocity.y*=v,this.blocked.down=!0,p=!0),p&&(this.blocked.none=!1,this.updateCenter()),p},setOffset:function(o,l){return l===void 0&&(l=o),this.offset.set(o,l),this},setSize:function(o,l,f){f===void 0&&(f=!0);var d=this.gameObject;if(!o&&d.frame&&(o=d.frame.realWidth),!l&&d.frame&&(l=d.frame.realHeight),this.sourceWidth=o,this.sourceHeight=l,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),f&&d.getCenter){var v=(d.width-o)/2,p=(d.height-l)/2;this.offset.set(v,p)}return this.isCircle=!1,this.radius=0,this},setCircle:function(o,l,f){return l===void 0&&(l=this.offset.x),f===void 0&&(f=this.offset.y),o>0?(this.isCircle=!0,this.radius=o,this.sourceWidth=o*2,this.sourceHeight=o*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,f),this.updateCenter()):this.isCircle=!1,this},reset:function(o,l){this.stop();var f=this.gameObject;f.setPosition(o,l),f.getTopLeft?f.getTopLeft(this.position):this.position.set(o,l),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=f.angle,this.preRotation=f.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(o){return o.x=this.x,o.y=this.y,o.right=this.right,o.bottom=this.bottom,o},hitTest:function(o,l){if(!this.isCircle)return i(this,o,l);if(this.radius>0&&o>=this.left&&o<=this.right&&l>=this.top&&l<=this.bottom){var f=(this.center.x-o)*(this.center.x-o),d=(this.center.y-l)*(this.center.y-l);return f+d<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(o){var l=this.position,f=l.x+this.halfWidth,d=l.y+this.halfHeight;this.debugShowBody&&(o.lineStyle(o.defaultStrokeWidth,this.debugBodyColor),this.isCircle?o.strokeCircle(f,d,this.width/2):(this.checkCollision.up&&o.lineBetween(l.x,l.y,l.x+this.width,l.y),this.checkCollision.right&&o.lineBetween(l.x+this.width,l.y,l.x+this.width,l.y+this.height),this.checkCollision.down&&o.lineBetween(l.x,l.y+this.height,l.x+this.width,l.y+this.height),this.checkCollision.left&&o.lineBetween(l.x,l.y,l.x,l.y+this.height))),this.debugShowVelocity&&(o.lineStyle(o.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),o.lineBetween(f,d,f+this.velocity.x/2,d+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(o,l,f,d){o===void 0&&(o=!0),this.collideWorldBounds=o;var v=l!==void 0,p=f!==void 0;return(v||p)&&(this.worldBounce||(this.worldBounce=new r),v&&(this.worldBounce.x=l),p&&(this.worldBounce.y=f)),d!==void 0&&(this.onWorldBounds=d),this},setVelocity:function(o,l){return this.velocity.set(o,l),o=this.velocity.x,l=this.velocity.y,this.speed=Math.sqrt(o*o+l*l),this},setVelocityX:function(o){this.velocity.x=o;var l=o,f=this.velocity.y;return this.speed=Math.sqrt(l*l+f*f),this},setVelocityY:function(o){this.velocity.y=o;var l=this.velocity.x,f=o;return this.speed=Math.sqrt(l*l+f*f),this},setMaxVelocity:function(o,l){return this.maxVelocity.set(o,l),this},setMaxVelocityX:function(o){return this.maxVelocity.x=o,this},setMaxVelocityY:function(o){return this.maxVelocity.y=o,this},setMaxSpeed:function(o){return this.maxSpeed=o,this},setBounce:function(o,l){return this.bounce.set(o,l),this},setBounceX:function(o){return this.bounce.x=o,this},setBounceY:function(o){return this.bounce.y=o,this},setAcceleration:function(o,l){return this.acceleration.set(o,l),this},setAccelerationX:function(o){return this.acceleration.x=o,this},setAccelerationY:function(o){return this.acceleration.y=o,this},setAllowDrag:function(o){return o===void 0&&(o=!0),this.allowDrag=o,this},setAllowGravity:function(o){return o===void 0&&(o=!0),this.allowGravity=o,this},setAllowRotation:function(o){return o===void 0&&(o=!0),this.allowRotation=o,this},setDrag:function(o,l){return this.drag.set(o,l),this},setDamping:function(o){return this.useDamping=o,this},setDragX:function(o){return this.drag.x=o,this},setDragY:function(o){return this.drag.y=o,this},setGravity:function(o,l){return this.gravity.set(o,l),this},setGravityX:function(o){return this.gravity.x=o,this},setGravityY:function(o){return this.gravity.y=o,this},setFriction:function(o,l){return this.friction.set(o,l),this},setFrictionX:function(o){return this.friction.x=o,this},setFrictionY:function(o){return this.friction.y=o,this},setAngularVelocity:function(o){return this.angularVelocity=o,this},setAngularAcceleration:function(o){return this.angularAcceleration=o,this},setAngularDrag:function(o){return this.angularDrag=o,this},setMass:function(o){return this.mass=o,this},setImmovable:function(o){return o===void 0&&(o=!0),this.immovable=o,this},setEnable:function(o){return o===void 0&&(o=!0),this.enable=o,this},processX:function(o,l,f,d){this.x+=o,this.updateCenter(),l!==null&&(this.velocity.x=l);var v=this.blocked;f&&(v.left=!0),d&&(v.right=!0)},processY:function(o,l,f,d){this.y+=o,this.updateCenter(),l!==null&&(this.velocity.y=l);var v=this.blocked;f&&(v.up=!0),d&&(v.down=!0)},x:{get:function(){return this.position.x},set:function(o){this.position.x=o}},y:{get:function(){return this.position.y},set:function(o){this.position.y=o}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n,i,r,u,o,l){this.world=a,this.name="",this.active=!0,this.overlapOnly=n,this.object1=i,this.object2=r,this.collideCallback=u,this.processCallback=o,this.callbackContext=l},setName:function(s){return this.name=s,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=t(3),s=new c,a=new c,n=function(i,r,u,o,l,f,d){var v=d.tilemapLayer.tilemap._convert.WorldToTileXY;v(i,r,!0,s,f,d);var p=s.x,m=s.y;v(i+u,r+o,!1,a,f,d);var x=Math.ceil(a.x),T=Math.ceil(a.y);return e(p,m,x-p,T-m,l,d)};h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,c,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,c,e):!0};h.exports=t},function(h,g,t){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(436);function c(T){if(!(this instanceof c))return new c(T);this._maxEntries=Math.max(4,T||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}c.prototype={all:function(){return this._all(this.data,[])},search:function(T){var S=this.data,E=[],C=this.toBBox;if(!p(T,S))return E;for(var A=[],P,M,O,F;S;){for(P=0,M=S.children.length;P<M;P++)O=S.children[P],F=S.leaf?C(O):O,p(T,F)&&(S.leaf?E.push(O):v(T,F)?this._all(O,E):A.push(O));S=A.pop()}return E},collides:function(T){var S=this.data,E=this.toBBox;if(!p(T,S))return!1;for(var C=[],A,P,M,O;S;){for(A=0,P=S.children.length;A<P;A++)if(M=S.children[A],O=S.leaf?E(M):M,p(T,O)){if(S.leaf||v(T,O))return!0;C.push(M)}S=C.pop()}return!1},load:function(T){if(!(T&&T.length))return this;if(T.length<this._minEntries){for(var S=0,E=T.length;S<E;S++)this.insert(T[S]);return this}var C=this._build(T.slice(),0,T.length-1,0);if(!this.data.children.length)this.data=C;else if(this.data.height===C.height)this._splitRoot(this.data,C);else{if(this.data.height<C.height){var A=this.data;this.data=C,C=A}this._insert(C,this.data.height-C.height-1,!0)}return this},insert:function(T){return T&&this._insert(T,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(T,S){if(!T)return this;for(var E=this.data,C=this.toBBox(T),A=[],P=[],M,O,F,I;E||A.length;){if(E||(E=A.pop(),O=A[A.length-1],M=P.pop(),I=!0),E.leaf&&(F=s(T,E.children,S),F!==-1))return E.children.splice(F,1),A.push(E),this._condense(A),this;!I&&!E.leaf&&v(E,C)?(A.push(E),P.push(M),M=0,O=E,E=E.children[0]):O?(M++,E=O.children[M],I=!1):E=null}return this},toBBox:function(T){return T},compareMinX:r,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(T){return this.data=T,this},_all:function(T,S){for(var E=[];T;)T.leaf?S.push.apply(S,T.children):E.push.apply(E,T.children),T=E.pop();return S},_build:function(T,S,E,C){var A=E-S+1,P=this._maxEntries,M;if(A<=P)return M=m(T.slice(S,E+1)),a(M,this.toBBox),M;C||(C=Math.ceil(Math.log(A)/Math.log(P)),P=Math.ceil(A/Math.pow(P,C-1))),M=m([]),M.leaf=!1,M.height=C;var O=Math.ceil(A/P),F=O*Math.ceil(Math.sqrt(P)),I,N,G,Y;for(x(T,S,E,F,this.compareMinX),I=S;I<=E;I+=F)for(G=Math.min(I+F-1,E),x(T,I,G,O,this.compareMinY),N=I;N<=G;N+=O)Y=Math.min(N+O-1,G),M.children.push(this._build(T,N,Y,C-1));return a(M,this.toBBox),M},_chooseSubtree:function(T,S,E,C){for(var A,P,M,O,F,I,N,G;C.push(S),!(S.leaf||C.length-1===E);){for(N=G=1/0,A=0,P=S.children.length;A<P;A++)M=S.children[A],F=o(M),I=f(T,M)-F,I<G?(G=I,N=F<N?F:N,O=M):I===G&&F<N&&(N=F,O=M);S=O||S.children[0]}return S},_insert:function(T,S,E){var C=this.toBBox,A=E?T:C(T),P=[],M=this._chooseSubtree(A,this.data,S,P);for(M.children.push(T),i(M,A);S>=0&&P[S].children.length>this._maxEntries;)this._split(P,S),S--;this._adjustParentBBoxes(A,P,S)},_split:function(T,S){var E=T[S],C=E.children.length,A=this._minEntries;this._chooseSplitAxis(E,A,C);var P=this._chooseSplitIndex(E,A,C),M=m(E.children.splice(P,E.children.length-P));M.height=E.height,M.leaf=E.leaf,a(E,this.toBBox),a(M,this.toBBox),S?T[S-1].children.push(M):this._splitRoot(E,M)},_splitRoot:function(T,S){this.data=m([T,S]),this.data.height=T.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(T,S,E){var C,A,P,M,O,F,I,N;for(F=I=1/0,C=S;C<=E-S;C++)A=n(T,0,C,this.toBBox),P=n(T,C,E,this.toBBox),M=d(A,P),O=o(A)+o(P),M<F?(F=M,N=C,I=O<I?O:I):M===F&&O<I&&(I=O,N=C);return N},_chooseSplitAxis:function(T,S,E){var C=T.leaf?this.compareMinX:r,A=T.leaf?this.compareMinY:u,P=this._allDistMargin(T,S,E,C),M=this._allDistMargin(T,S,E,A);P<M&&T.children.sort(C)},_allDistMargin:function(T,S,E,C){T.children.sort(C);var A=this.toBBox,P=n(T,0,S,A),M=n(T,E-S,E,A),O=l(P)+l(M),F,I;for(F=S;F<E-S;F++)I=T.children[F],i(P,T.leaf?A(I):I),O+=l(P);for(F=E-S-1;F>=S;F--)I=T.children[F],i(M,T.leaf?A(I):I),O+=l(M);return O},_adjustParentBBoxes:function(T,S,E){for(var C=E;C>=0;C--)i(S[C],T)},_condense:function(T){for(var S=T.length-1,E;S>=0;S--)T[S].children.length===0?S>0?(E=T[S-1].children,E.splice(E.indexOf(T[S]),1)):this.clear():a(T[S],this.toBBox)},compareMinX:function(T,S){return T.left-S.left},compareMinY:function(T,S){return T.top-S.top},toBBox:function(T){return{minX:T.left,minY:T.top,maxX:T.right,maxY:T.bottom}}};function s(T,S,E){if(!E)return S.indexOf(T);for(var C=0;C<S.length;C++)if(E(T,S[C]))return C;return-1}function a(T,S){n(T,0,T.children.length,S,T)}function n(T,S,E,C,A){A||(A=m(null)),A.minX=1/0,A.minY=1/0,A.maxX=-1/0,A.maxY=-1/0;for(var P=S,M;P<E;P++)M=T.children[P],i(A,T.leaf?C(M):M);return A}function i(T,S){return T.minX=Math.min(T.minX,S.minX),T.minY=Math.min(T.minY,S.minY),T.maxX=Math.max(T.maxX,S.maxX),T.maxY=Math.max(T.maxY,S.maxY),T}function r(T,S){return T.minX-S.minX}function u(T,S){return T.minY-S.minY}function o(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function l(T){return T.maxX-T.minX+(T.maxY-T.minY)}function f(T,S){return(Math.max(S.maxX,T.maxX)-Math.min(S.minX,T.minX))*(Math.max(S.maxY,T.maxY)-Math.min(S.minY,T.minY))}function d(T,S){var E=Math.max(T.minX,S.minX),C=Math.max(T.minY,S.minY),A=Math.min(T.maxX,S.maxX),P=Math.min(T.maxY,S.maxY);return Math.max(0,A-E)*Math.max(0,P-C)}function v(T,S){return T.minX<=S.minX&&T.minY<=S.minY&&S.maxX<=T.maxX&&S.maxY<=T.maxY}function p(T,S){return S.minX<=T.maxX&&S.minY<=T.maxY&&S.maxX>=T.minX&&S.maxY>=T.minY}function m(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(T,S,E,C,A){for(var P=[S,E],M;P.length;)E=P.pop(),S=P.pop(),!(E-S<=C)&&(M=S+Math.ceil((E-S)/C/2)*C,e(T,M,S,E,A),P.push(S,M,M,E))}h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(533),c=t(535),s=t(248),a=function(n,i,r,u,o,l,f){var d=u.left,v=u.top,p=u.right,m=u.bottom,x=r.faceLeft||r.faceRight,T=r.faceTop||r.faceBottom;if(f||(x=!0,T=!0),!x&&!T)return!1;var S=0,E=0,C=0,A=1;if(i.deltaAbsX()>i.deltaAbsY()?C=-1:i.deltaAbsX()<i.deltaAbsY()&&(A=-1),i.deltaX()!==0&&i.deltaY()!==0&&x&&T&&(C=Math.min(Math.abs(i.position.x-p),Math.abs(i.right-d)),A=Math.min(Math.abs(i.position.y-m),Math.abs(i.bottom-v))),C<A){if(x&&(S=e(i,r,d,p,l,f),S!==0&&!s(u,i)))return!0;T&&(E=c(i,r,v,m,l,f))}else{if(T&&(E=c(i,r,v,m,l,f),E!==0&&!s(u,i)))return!0;x&&(S=e(i,r,d,p,l,f))}return S!==0||E!==0};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(534),c=function(s,a,n,i,r,u){var o=0,l=a.faceLeft,f=a.faceRight,d=a.collideLeft,v=a.collideRight;return u||(l=!0,f=!0,d=!0,v=!0),s.deltaX()<0&&v&&s.checkCollision.left?f&&s.x<i&&(o=s.x-i,o<-r&&(o=0)):s.deltaX()>0&&d&&s.checkCollision.right&&l&&s.right>n&&(o=s.right-n,o>r&&(o=0)),o!==0&&(s.customSeparateX?s.overlapX=o:e(s,o)),o};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c<0?(e.blocked.none=!1,e.blocked.left=!0):c>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=c,e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(536),c=function(s,a,n,i,r,u){var o=0,l=a.faceTop,f=a.faceBottom,d=a.collideUp,v=a.collideDown;return u||(l=!0,f=!0,d=!0,v=!0),s.deltaY()<0&&v&&s.checkCollision.up?f&&s.y<i&&(o=s.y-i,o<-r&&(o=0)):s.deltaY()>0&&d&&s.checkCollision.down&&l&&s.bottom>n&&(o=s.bottom-n,o>r&&(o=0)),o!==0&&(s.customSeparateY?s.overlapY=o:e(s,o)),o};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c<0?(e.blocked.none=!1,e.blocked.up=!0):c>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=c,e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(246),c=t(1389),s=function(a,n,i,r){var u=e(a,n,i,r),o=a.immovable,l=n.immovable;if(i||u===0||o&&l||a.customSeparateX||n.customSeparateX)return u!==0||a.embedded&&n.embedded;var f=c.Set(a,n,u);return!o&&!l?f>0?!0:c.Check():(o?c.RunImmovableBody1(f):l&&c.RunImmovableBody2(f),!0)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(247),c=t(1390),s=function(a,n,i,r){var u=e(a,n,i,r),o=a.immovable,l=n.immovable;if(i||u===0||o&&l||a.customSeparateY||n.customSeparateY)return u!==0||a.embedded&&n.embedded;var f=c.Set(a,n,u);return!o&&!l?f>0?!0:c.Check():(o?c.RunImmovableBody1(f):l&&c.RunImmovableBody2(f),!0)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),c=t(0),s=t(62),a=t(57),n=t(3),i=new c({initialize:function(u,o){var l=o.displayWidth?o.displayWidth:64,f=o.displayHeight?o.displayHeight:64;this.world=u,this.gameObject=o,this.debugShowBody=u.defaults.debugShowStaticBody,this.debugBodyColor=u.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(o.x-l*o.originX,o.y-f*o.originY),this.width=l,this.height=f,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=n.ZERO,this.allowGravity=!1,this.gravity=n.ZERO,this.bounce=n.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=s.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(r,u){return r&&r!==this.gameObject&&(this.gameObject.body=null,r.body=this,this.gameObject=r),u&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var r=this.gameObject;return r.getTopLeft(this.position),this.width=r.displayWidth,this.height=r.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(r,u){return u===void 0&&(u=r),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(r,u),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(r,u,o){o===void 0&&(o=!0);var l=this.gameObject;if(!r&&l.frame&&(r=l.frame.realWidth),!u&&l.frame&&(u=l.frame.realHeight),this.world.staticTree.remove(this),this.width=r,this.height=u,this.halfWidth=Math.floor(r/2),this.halfHeight=Math.floor(u/2),o&&l.getCenter){var f=l.displayWidth/2,d=l.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f-this.halfWidth,d-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(r,u,o){return u===void 0&&(u=this.offset.x),o===void 0&&(o=this.offset.y),r>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=r,this.width=r*2,this.height=r*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(u,o),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(r,u){var o=this.gameObject;r===void 0&&(r=o.x),u===void 0&&(u=o.y),this.world.staticTree.remove(this),o.setPosition(r,u),o.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(r){return r.x=this.x,r.y=this.y,r.right=this.right,r.bottom=this.bottom,r},hitTest:function(r,u){return this.isCircle?e(this,r,u):a(this,r,u)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(r){var u=this.position,o=u.x+this.halfWidth,l=u.y+this.halfHeight;this.debugShowBody&&(r.lineStyle(r.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?r.strokeCircle(o,l,this.width/2):r.strokeRect(u.x,u.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(r){return r<=0&&(r=.1),this.mass=r,this},x:{get:function(){return this.position.x},set:function(r){this.world.staticTree.remove(this),this.position.x=r,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(r){this.world.staticTree.remove(this),this.position.y=r,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});h.exports=i},function(h,g,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var e=t(0),c=new e({initialize:function(a){this.pluginManager=a,this.game=a.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),c=new e,s=function(a,n,i,r){var u=i.tilemapLayer,o=u.cullPaddingX,l=u.cullPaddingY,f=u.tilemap.tileToWorldXY(a,n,c,r,u);return f.x>r.worldView.x+u.scaleX*i.tileWidth*(-o-.5)&&f.x<r.worldView.right+u.scaleX*i.tileWidth*(o-.5)&&f.y>r.worldView.y+u.scaleY*i.tileHeight*(-l-1)&&f.y<r.worldView.bottom+u.scaleY*i.tileHeight*(l-.5)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=function(s,a,n,i,r,u,o){for(var l=e(n,i,r,u,null,o),f=0;f<l.length;f++)l[f]&&l[f].index===s&&(l[f].index=a)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=t(139),s=t(76),a=new e,n=function(i,r){var u=i.tilemapLayer.tilemap,o=i.tilemapLayer,l=Math.floor(u.tileWidth*o.scaleX),f=Math.floor(u.tileHeight*o.scaleY),d=s(r.worldView.x-o.x,l,0,!0)-o.cullPaddingX,v=c(r.worldView.right-o.x,l,0,!0)+o.cullPaddingX,p=s(r.worldView.y-o.y,f,0,!0)-o.cullPaddingY,m=c(r.worldView.bottom-o.y,f,0,!0)+o.cullPaddingY;return a.setTo(d,p,v-d,m-p)};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(543),c=t(159),s=function(a,n,i,r){i===void 0&&(i=[]),r===void 0&&(r=0),i.length=0;var u=a.tilemapLayer,o=e(a,n);return(u.skipCull||u.scrollFactorX!==1||u.scrollFactorY!==1)&&(o.left=0,o.right=a.width,o.top=0,o.bottom=a.height),c(a,o,r,i),i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(546),c=t(159),s=function(a,n,i,r){i===void 0&&(i=[]),r===void 0&&(r=0),i.length=0;var u=a.tilemapLayer;if(!u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1){var o=e(a,n);c(a,o,r,i)}return i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(139),c=t(76),s=function(a,n){var i=a.tilemapLayer.tilemap,r=a.tilemapLayer,u=Math.floor(i.tileWidth*r.scaleX),o=Math.floor(i.tileHeight*r.scaleY),l=a.hexSideLength,f=(o-l)/2+l,d=c(n.worldView.x-r.x,u,0,!0)-r.cullPaddingX,v=e(n.worldView.right-r.x,u,0,!0)+r.cullPaddingX,p=c(n.worldView.y-r.y,f,0,!0)-r.cullPaddingY,m=e(n.worldView.bottom-r.y,f,0,!0)+r.cullPaddingY;return{left:d,right:v,top:p,bottom:m}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(541),c=function(s,a,n,i){n===void 0&&(n=[]),i===void 0&&(i=0),n.length=0;var r=s.tilemapLayer,u=s.data,o=s.width,l=s.height,f=0,d=o,v=0,p=l;if(!r.skipCull){var m,x,T;if(i===0){for(x=v;x<p;x++)for(m=f;u[x]&&m<d;m++)if(e(m,x,s,a)){if(T=u[x][m],!T||T.index===-1||!T.visible||T.alpha===0)continue;n.push(T)}}else if(i===1){for(x=v;x<p;x++)for(m=d;u[x]&&m>=f;m--)if(e(m,x,s,a)){if(T=u[x][m],!T||T.index===-1||!T.visible||T.alpha===0)continue;n.push(T)}}else if(i===2){for(x=p;x>=v;x--)for(m=f;u[x]&&m<d;m++)if(e(m,x,s,a)){if(T=u[x][m],!T||T.index===-1||!T.visible||T.alpha===0)continue;n.push(T)}}else if(i===3){for(x=p;x>=v;x--)for(m=d;u[x]&&m>=f;m--)if(e(m,x,s,a)){if(T=u[x][m],!T||T.index===-1||!T.visible||T.alpha===0)continue;n.push(T)}}}return r.tilesDrawn=n.length,r.tilesTotal=o*l,n};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(549),c=t(159),s=function(a,n,i,r){i===void 0&&(i=[]),r===void 0&&(r=0),i.length=0;var u=a.tilemapLayer;if(!u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1){var o=e(a,n);c(a,o,r,i)}return i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(139),c=t(76),s=function(a,n){var i=a.tilemapLayer.tilemap,r=a.tilemapLayer,u=Math.floor(i.tileWidth*r.scaleX),o=Math.floor(i.tileHeight*r.scaleY),l=c(n.worldView.x-r.x,u,0,!0)-r.cullPaddingX,f=e(n.worldView.right-r.x,u,0,!0)+r.cullPaddingX,d=c(n.worldView.y-r.y,o/2,0,!0)-r.cullPaddingY,v=e(n.worldView.bottom-r.y,o/2,0,!0)+r.cullPaddingY;return{left:l,right:f,top:d,bottom:v}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),c=function(s,a,n,i,r){n||(n=new e);var u=r.baseTileWidth,o=r.baseTileHeight,l=r.tilemapLayer,f=0,d=0;l&&(i||(i=l.scene.cameras.main),f=l.x+i.scrollX*(1-l.scrollFactorX),u*=l.scaleX,d=l.y+i.scrollY*(1-l.scrollFactorY),o*=l.scaleY);var v=r.hexSideLength,p=(o-v)/2+v,m=f+s*u+a%2*(u/2),x=d+a*p;return n.set(m,x)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),c=function(s,a,n,i,r){n||(n=new e);var u=r.baseTileWidth,o=r.baseTileHeight,l=r.tilemapLayer,f=0,d=0;l&&(i||(i=l.scene.cameras.main),f=l.x+i.scrollX*(1-l.scrollFactorX),u*=l.scaleX,d=l.y+i.scrollY*(1-l.scrollFactorY),o*=l.scaleY);var v=f+(s-a)*(u/2),p=d+(s+a)*(o/2);return n.set(v,p)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),c=function(s,a,n,i,r){n||(n=new e);var u=r.baseTileWidth,o=r.baseTileHeight,l=r.tilemapLayer,f=0,d=0;l&&(i||(i=l.scene.cameras.main),f=l.x+i.scrollX*(1-l.scrollFactorX),u*=l.scaleX,d=l.y+i.scrollY*(1-l.scrollFactorY),o*=l.scaleY);var v=f+s*u+a%2*(u/2),p=d+a*(o/2);return n.set(v,p)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(253),c=t(254),s=t(3),a=function(n,i,r,u,o){return r||(r=new s(0,0)),r.x=e(n,u,o),r.y=c(i,u,o),r};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=s.baseTileHeight,n=s.tilemapLayer,i=0;n&&(c===void 0&&(c=n.scene.cameras.main),i=n.y+c.scrollY*(1-n.scrollFactorY),a*=n.scaleY);var r=n.tilemap.hexSideLength,u=(a-r)/2+r;return i+e*u};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=s.baseTileHeight,n=s.tilemapLayer,i=0;return n&&(c===void 0&&(c=n.scene.cameras.main),i=n.y+c.scrollY*(1-n.scrollFactorY),a*=n.scaleY),i+e*(a/2)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),c=function(s,a,n,i,r,u){i||(i=new e);var o=u.baseTileWidth,l=u.baseTileHeight,f=u.tilemapLayer;f&&(r||(r=f.scene.cameras.main),a=a-(f.y+r.scrollY*(1-f.scrollFactorY)),l*=f.scaleY,s=s-(f.x+r.scrollX*(1-f.scrollFactorX)),o*=f.scaleX);var d=u.hexSideLength,v=(l-d)/2+d,p=n?Math.floor(a/v):a/v,m=n?Math.floor((s-p%2*.5*o)/o):(s-p%2*.5*o)/o;return i.set(m,p)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),c=function(s,a,n,i,r,u){i||(i=new e);var o=u.baseTileWidth,l=u.baseTileHeight,f=u.tilemapLayer;f&&(r||(r=f.scene.cameras.main),a=a-(f.y+r.scrollY*(1-f.scrollFactorY)),l*=f.scaleY,s=s-(f.x+r.scrollX*(1-f.scrollFactorX)),o*=f.scaleX);var d=n?Math.floor((s/(o/2)+a/(l/2))/2):(s/(o/2)+a/(l/2))/2,v=n?Math.floor((a/(l/2)-s/(o/2))/2):(a/(l/2)-s/(o/2))/2;return i.set(d,v)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),c=function(s,a,n,i,r,u){i||(i=new e);var o=u.baseTileWidth,l=u.baseTileHeight,f=u.tilemapLayer;f&&(r||(r=f.scene.cameras.main),a=a-(f.y+r.scrollY*(1-f.scrollFactorY)),l*=f.scaleY,s=s-(f.x+r.scrollX*(1-f.scrollFactorX)),o*=f.scaleX);var d=n?Math.floor(a/(l/2)):a/(l/2),v=n?Math.floor((s+d%2*.5*o)/o):(s+d%2*.5*o)/o;return i.set(v,d)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(255),c=t(256),s=t(3),a=function(n,i,r,u,o,l){return r===void 0&&(r=!0),u||(u=new s(0,0)),u.x=e(n,r,o,l),u.y=c(i,r,o,l),u};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=a.baseTileHeight,i=a.tilemapLayer;i&&(s||(s=i.scene.cameras.main),e=e-(i.y+s.scrollY*(1-i.scrollFactorY)),n*=i.scaleY);var r=a.hexSideLength,u=(n-r)/2+r;return c?Math.floor(e/u):e/u};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=a.baseTileHeight,i=a.tilemapLayer;return i&&(s||(s=i.scene.cameras.main),e=e-(i.y+s.scrollY*(1-i.scrollFactorY)),n*=i.scaleY),c?Math.floor(e/(n/2)):e/(n/2)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(119),c=function(s,a,n){if(e(s,a,n)){var i=n.data[a][s];return i!==null&&i.index>-1}else return!1};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(85),c=t(119),s=t(252),a=function(n,i,r,u,o){if(r===void 0&&(r=!0),u===void 0&&(u=!0),!c(n,i,o))return null;var l=o.data[i][n];if(l)o.data[i][n]=r?null:new e(o,-1,n,i,o.tileWidth,o.tileHeight);else return null;return u&&l&&l.collides&&s(n,i,o),l};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),c=t(259),s=t(565),a=t(566),n=t(577),i=function(r,u,o,l,f,d){var v;switch(u){case e.ARRAY_2D:v=c(r,o,l,f,d);break;case e.CSV:v=s(r,o,l,f,d);break;case e.TILED_JSON:v=a(r,o,d);break;case e.WELTMEISTER:v=n(r,o,d);break;default:console.warn("Unrecognized tilemap data format: "+u),v=null}return v};h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),c=t(259),s=function(a,n,i,r,u){var o=n.trim().split(`
`).map(function(f){return f.split(",")}),l=c(a,o,i,r,u);return l.format=e.CSV,l};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(567),c=t(568),s=t(29),a=t(40),n=t(258),i=t(121),r=t(569),u=t(570),o=t(573),l=t(575),f=function(d,v,p){var m=new i({width:v.width,height:v.height,name:d,tileWidth:v.tilewidth,tileHeight:v.tileheight,orientation:n(v.orientation),format:a.TILED_JSON,version:v.version,properties:v.properties,renderOrder:v.renderorder,infinite:v.infinite});m.orientation===s.HEXAGONAL&&(m.hexSideLength=v.hexsidelength),m.layers=o(v,p),m.images=r(v);var x=l(v);return m.tilesets=x.tilesets,m.imageCollections=x.imageCollections,m.objects=u(v),m.tiles=c(m),e(m),m};h.exports=f},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),c=function(s){for(var a,n,i,r,u,o=0;o<s.layers.length;o++){a=s.layers[o],r=null;for(var l=0;l<a.data.length;l++){u=a.data[l];for(var f=0;f<u.length;f++)n=u[f],!(n===null||n.index<0)&&(i=s.tiles[n.index][2],r=s.tilesets[i],n.width=r.tileWidth,n.height=r.tileHeight,r.tileProperties&&r.tileProperties[n.index-r.firstgid]&&(n.properties=e(n.properties,r.tileProperties[n.index-r.firstgid])))}}};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),c=function(s){var a,n,i=[];for(a=0;a<s.imageCollections.length;a++)for(var r=s.imageCollections[a],u=r.images,o=0;o<u.length;o++){var l=u[o];n=new e(l.image,l.gid,r.imageWidth,r.imageHeight,0,0),n.updateTileData(r.imageWidth,r.imageHeight),s.tilesets.push(n)}for(a=0;a<s.tilesets.length;a++){n=s.tilesets[a];for(var f=n.tileMargin,d=n.tileMargin,v=0,p=0,m=0,x=n.firstgid;x<n.firstgid+n.total&&(i[x]=[f,d,a],f+=n.tileWidth+n.tileSpacing,v++,!(v===n.total||(p++,p===n.columns&&(f=n.tileMargin,d+=n.tileHeight+n.tileSpacing,p=0,m++,m===n.rows))));x++);}return i};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),c=t(161),s=function(a){for(var n=[],i=[],r=c(a);r.i<r.layers.length||i.length>0;){if(r.i>=r.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}r=i.pop();continue}var u=r.layers[r.i];if(r.i++,u.type!=="imagelayer"){if(u.type==="group"){var o=c(a,u,r);i.push(r),r=o}continue}var l=e(u,"offsetx",0)+e(u,"startx",0),f=e(u,"offsety",0)+e(u,"starty",0);n.push({name:r.name+u.name,image:u.image,x:r.x+l+u.x,y:r.y+f+u.y,alpha:r.opacity*u.opacity,visible:r.visible&&u.visible,properties:e(u,"properties",{})})}return n};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),c=t(260),s=t(572),a=t(161),n=function(i){for(var r=[],u=[],o=a(i);o.i<o.layers.length||u.length>0;){if(o.i>=o.layers.length){if(u.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=u.pop();continue}var l=o.layers[o.i];if(o.i++,l.opacity*=o.opacity,l.visible=o.visible&&l.visible,l.type!=="objectgroup"){if(l.type==="group"){var f=a(i,l,o);u.push(o),o=f}continue}l.name=o.name+l.name;for(var d=o.x+e(l,"startx",0)+e(l,"offsetx",0),v=o.y+e(l,"starty",0)+e(l,"offsety",0),p=[],m=0;m<l.objects.length;m++){var x=c(l.objects[m],d,v);p.push(x)}var T=new s(l);T.objects=p,r.push(T)}return r};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(126),c=function(s,a){for(var n={},i=0;i<a.length;i++){var r=a[i];e(s,r)&&(n[r]=s[r])}return n};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(2),s=new e({initialize:function(n){n===void 0&&(n={}),this.name=c(n,"name","object layer"),this.opacity=c(n,"opacity",1),this.properties=c(n,"properties",{}),this.propertyTypes=c(n,"propertytypes",{}),this.type=c(n,"type","objectgroup"),this.visible=c(n,"visible",!0),this.objects=c(n,"objects",[])}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(574),c=t(29),s=t(161),a=t(258),n=t(2),i=t(120),r=t(261),u=t(85),o=function(l,f){for(var d=n(l,"infinite",!1),v=[],p=[],m=s(l);m.i<m.layers.length||p.length>0;){if(m.i>=m.layers.length){if(p.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}m=p.pop();continue}var x=m.layers[m.i];if(m.i++,x.type!=="tilelayer"){if(x.type==="group"){var T=s(l,x,m);p.push(m),m=T}continue}if(x.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+x.name+"'");continue}else if(x.encoding&&x.encoding==="base64"){if(x.chunks)for(var S=0;S<x.chunks.length;S++)x.chunks[S].data=e(x.chunks[S].data);x.data&&(x.data=e(x.data)),delete x.encoding}var E,C,A,P,M=[],O=0;if(d){var F=n(x,"startx",0)+x.x,I=n(x,"starty",0)+x.y;E=new i({name:m.name+x.name,x:m.x+n(x,"offsetx",0)+F*l.tilewidth,y:m.y+n(x,"offsety",0)+I*l.tileheight,width:x.width,height:x.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:m.opacity*x.opacity,visible:m.visible&&x.visible,properties:n(x,"properties",[]),orientation:a(l.orientation)}),E.orientation===c.HEXAGONAL&&(E.hexSideLength=l.hexsidelength);for(var N=0;N<x.height;N++){M.push([null]);for(var G=0;G<x.width;G++)M[N][G]=null}for(N=0,H=x.chunks.length;N<H;N++)for(var Y=x.chunks[N],z=Y.x-F,W=Y.y-I,D=0,L=0,B=Y.data.length;L<B;L++){var w=O+z,V=D+W;C=r(Y.data[L]),C.gid>0?(A=new u(E,C.gid,w,V,l.tilewidth,l.tileheight),A.rotation=C.rotation,A.flipX=C.flipped,M[V][w]=A):(P=f?null:new u(E,-1,w,V,l.tilewidth,l.tileheight),M[V][w]=P),O++,O===Y.width&&(D++,O=0)}}else{E=new i({name:m.name+x.name,x:m.x+n(x,"offsetx",0)+x.x,y:m.y+n(x,"offsety",0)+x.y,width:x.width,height:x.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:m.opacity*x.opacity,visible:m.visible&&x.visible,properties:n(x,"properties",[]),orientation:a(l.orientation)}),E.orientation===c.HEXAGONAL&&(E.hexSideLength=l.hexsidelength);for(var U=[],X=0,H=x.data.length;X<H;X++)C=r(x.data[X]),C.gid>0?(A=new u(E,C.gid,O,M.length,l.tilewidth,l.tileheight),A.rotation=C.rotation,A.flipX=C.flipped,U.push(A)):(P=f?null:new u(E,-1,O,M.length,l.tilewidth,l.tileheight),U.push(P)),O++,O===x.width&&(M.push(U),O=0,U=[])}E.data=M,v.push(E)}return v};h.exports=o},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var c=window.atob(e),s=c.length,a=new Array(s/4),n=0;n<s;n+=4)a[n/4]=(c.charCodeAt(n)|c.charCodeAt(n+1)<<8|c.charCodeAt(n+2)<<16|c.charCodeAt(n+3)<<24)>>>0;return a};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),c=t(576),s=t(260),a=t(1453),n=function(i){for(var r=[],u=[],o=null,l,f=0;f<i.tilesets.length;f++){var d=i.tilesets[f];if(d.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(d.image){var v=new e(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing);if(i.version>1){var p=void 0,m=void 0;if(Array.isArray(d.tiles)){p=p||{},m=m||{};for(var x=0;x<d.tiles.length;x++){var T=d.tiles[x];if(T.properties){var S={};T.properties.forEach(function(N){S[N.name]=N.value}),m[T.id]=S}if(T.objectgroup&&((p[T.id]||(p[T.id]={})).objectgroup=T.objectgroup,T.objectgroup.objects)){var E=T.objectgroup.objects.map(function(N){return s(N)});p[T.id].objectgroup.objects=E}T.animation&&((p[T.id]||(p[T.id]={})).animation=T.animation),T.type&&((p[T.id]||(p[T.id]={})).type=T.type)}}Array.isArray(d.wangsets)&&(p=p||{},m=m||{},a(d.wangsets,p)),p&&(v.tileData=p,v.tileProperties=m)}else if(d.tileproperties&&(v.tileProperties=d.tileproperties),d.tiles){v.tileData=d.tiles;for(l in v.tileData){var C=v.tileData[l].objectgroup;if(C&&C.objects){var A=C.objects.map(function(N){return s(N)});v.tileData[l].objectgroup.objects=A}}}v.updateTileData(d.imagewidth,d.imageheight),r.push(v)}else{var P=new c(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing,d.properties),M=0;for(x=0;x<d.tiles.length;x++){T=d.tiles[x];var O=T.image,F=parseInt(T.id,10),I=d.firstgid+F;P.addImage(I,O),M=Math.max(F,M)}P.maxId=M,u.push(P)}o&&(o.lastgid=d.firstgid-1),o=d}return{tilesets:r,imageCollections:u}};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a,n,i,r,u,o,l){(i===void 0||i<=0)&&(i=32),(r===void 0||r<=0)&&(r=32),u===void 0&&(u=0),o===void 0&&(o=0),this.name=a,this.firstgid=n|0,this.imageWidth=i|0,this.imageHeight=r|0,this.imageMargin=u|0,this.imageSpacing=o|0,this.properties=l||{},this.images=[],this.total=0},containsImageIndex:function(s){return s>=this.firstgid&&s<this.firstgid+this.total},addImage:function(s,a){return this.images.push({gid:s,image:a}),this.total++,this}});h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),c=t(121),s=t(578),a=t(579),n=function(i,r,u){if(r.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+i),null;for(var o=0,l=0,f=0;f<r.layer.length;f++)r.layer[f].width>o&&(o=r.layer[f].width),r.layer[f].height>l&&(l=r.layer[f].height);var d=new c({width:o,height:l,name:i,tileWidth:r.layer[0].tilesize,tileHeight:r.layer[0].tilesize,format:e.WELTMEISTER});return d.layers=s(r,u),d.tilesets=a(r),d};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(120),c=t(85),s=function(a,n){for(var i=[],r=0;r<a.layer.length;r++){for(var u=a.layer[r],o=new e({name:u.name,width:u.width,height:u.height,tileWidth:u.tilesize,tileHeight:u.tilesize,visible:u.visible===1}),l=[],f=[],d=0;d<u.data.length;d++){for(var v=0;v<u.data[d].length;v++){var p=u.data[d][v]-1,m;p>-1?m=new c(o,p,v,d,u.tilesize,u.tilesize):m=n?null:new c(o,-1,v,d,u.tilesize,u.tilesize),l.push(m)}f.push(l),l=[]}o.data=f,i.push(o)}return i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),c=function(s){for(var a=[],n=[],i=0;i<s.layer.length;i++){var r=s.layer[i],u=r.tilesetName;u!==""&&n.indexOf(u)===-1&&(n.push(u),a.push(new e(u,0,r.tilesize,r.tilesize,0,0)))}return a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(36),s=t(40),a=t(2),n=t(120),i=t(29),r=t(362),u=t(74),o=t(73),l=t(85),f=t(251),d=t(581),v=t(122),p=new e({initialize:function(x,T){this.scene=x,this.tileWidth=T.tileWidth,this.tileHeight=T.tileHeight,this.width=T.width,this.height=T.height,this.orientation=T.orientation,this.renderOrder=T.renderOrder,this.format=T.format,this.version=T.version,this.properties=T.properties,this.widthInPixels=T.widthInPixels,this.heightInPixels=T.heightInPixels,this.imageCollections=T.imageCollections,this.images=T.images,this.layers=T.layers,this.tilesets=T.tilesets,this.objects=T.objects,this.currentLayerIndex=0,this.hexSideLength=T.hexSideLength;var S=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(S),WorldToTileX:f.GetWorldToTileXFunction(S),WorldToTileY:f.GetWorldToTileYFunction(S),TileToWorldXY:f.GetTileToWorldXYFunction(S),TileToWorldX:f.GetTileToWorldXFunction(S),TileToWorldY:f.GetTileToWorldYFunction(S)}},createBlankDynamicLayer:function(m,x,T,S,E,C,A,P){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(m,x,T,S,E,C,A,P)},createDynamicLayer:function(m,x,T,S){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(m,x,T,S)},createStaticLayer:function(m,x,T,S){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(m,x,T,S)},setRenderOrder:function(m){var x=["right-down","left-down","right-up","left-up"];return typeof m=="number"&&(m=x[m]),x.indexOf(m)>-1&&(this.renderOrder=m),this},addTilesetImage:function(m,x,T,S,E,C,A){if(m===void 0)return null;if(x==null&&(x=m),!this.scene.sys.textures.exists(x))return console.warn("Invalid Tileset Image: "+x),null;var P=this.scene.sys.textures.get(x),M=this.getTilesetIndex(m);if(M===null&&this.format===s.TILED_JSON)return console.warn("No data found for Tileset: "+m),null;var O=this.tilesets[M];return O?(O.setTileSize(T,S),O.setSpacing(E,C),O.setImage(P),O):(T===void 0&&(T=this.tileWidth),S===void 0&&(S=this.tileHeight),E===void 0&&(E=0),C===void 0&&(C=0),A===void 0&&(A=0),O=new v(m,A,T,S,E,C),O.setImage(P),this.tilesets.push(O),O)},copy:function(m,x,T,S,E,C,A,P){return P=this.getLayer(P),P!==null?(f.Copy(m,x,T,S,E,C,A,P),this):null},createBlankLayer:function(m,x,T,S,E,C,A,P){T===void 0&&(T=0),S===void 0&&(S=0),E===void 0&&(E=this.width),C===void 0&&(C=this.height),A===void 0&&(A=this.tileWidth),P===void 0&&(P=this.tileHeight);var M=this.getLayerIndex(m);if(M!==null)return console.warn("Invalid Tilemap Layer ID: "+m),null;for(var O=new n({name:m,tileWidth:A,tileHeight:P,width:E,height:C,orientation:this.orientation}),F,I=0;I<C;I++){F=[];for(var N=0;N<E;N++)F.push(new l(O,-1,N,I,A,P,this.tileWidth,this.tileHeight));O.data.push(F)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var G=new d(this.scene,this,this.currentLayerIndex,x,T,S);return G.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(G),G},createLayer:function(m,x,T,S){var E=this.getLayerIndex(m);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+m),typeof m=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var C=this.layers[E];if(C.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+m),null;this.currentLayerIndex=E,T===void 0&&(T=C.x),S===void 0&&(S=C.y);var A=new d(this.scene,this,E,x,T,S);return A.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(A),A},createFromObjects:function(m,x){var T=[],S=this.getObjectLayer(m);if(!S)return console.warn("createFromObjects: Invalid objectLayerName given: "+m),T;Array.isArray(x)||(x=[x]);for(var E=S.objects,C=0;C<x.length;C++){for(var A=x[C],P=a(A,"id",null),M=a(A,"gid",null),O=a(A,"name",null),F,I=[],N=0;N<E.length;N++)F=E[N],(P===null&&M===null&&O===null||P!==null&&F.id===P||M!==null&&F.gid===M||O!==null&&F.name===O)&&I.push(F);for(var G=a(A,"classType",o),Y=a(A,"scene",this.scene),z=a(A,"container",null),W=a(A,"key",null),D=a(A,"frame",null),L=0;L<I.length;L++){F=I[L];var B=new G(Y);B.setName(F.name),B.setPosition(F.x,F.y),B.setTexture(W,D),F.width&&(B.displayWidth=F.width),F.height&&(B.displayHeight=F.height);var w={x:B.originX*F.width,y:(B.originY-1)*F.height};if(F.rotation){var V=c(F.rotation);r(w,V),B.rotation=V}if(B.x+=w.x,B.y+=w.y,(F.flippedHorizontal!==void 0||F.flippedVertical!==void 0)&&B.setFlip(F.flippedHorizontal,F.flippedVertical),F.visible||(B.visible=!1),Array.isArray(F.properties))F.properties.forEach(function(X){var H=X.name;B[H]!==void 0?B[H]=X.value:B.setData(H,X.value)});else for(var U in F.properties)B[U]!==void 0?B[U]=F.properties[U]:B.setData(U,F.properties[U]);z?z.add(B):Y.add.existing(B),T.push(B)}}return T},createFromTiles:function(m,x,T,S,E,C){return C=this.getLayer(C),C===null?null:f.CreateFromTiles(m,x,T,S,E,C)},fill:function(m,x,T,S,E,C,A){return C===void 0&&(C=!0),A=this.getLayer(A),A===null?null:(f.Fill(m,x,T,S,E,C,A),this)},filterObjects:function(m,x,T){if(typeof m=="string"){var S=m;if(m=this.getObjectLayer(m),!m)return console.warn("No object layer found with the name: "+S),null}return m.objects.filter(x,T)},filterTiles:function(m,x,T,S,E,C,A,P){return P=this.getLayer(P),P===null?null:f.FilterTiles(m,x,T,S,E,C,A,P)},findByIndex:function(m,x,T,S){return S=this.getLayer(S),S===null?null:f.FindByIndex(m,x,T,S)},findObject:function(m,x,T){if(typeof m=="string"){var S=m;if(m=this.getObjectLayer(m),!m)return console.warn("No object layer found with the name: "+S),null}return m.objects.find(x,T)||null},findTile:function(m,x,T,S,E,C,A,P){return P=this.getLayer(P),P===null?null:f.FindTile(m,x,T,S,E,C,A,P)},forEachTile:function(m,x,T,S,E,C,A,P){return P=this.getLayer(P),P===null?null:(f.ForEachTile(m,x,T,S,E,C,A,P),this)},getImageIndex:function(m){return this.getIndex(this.images,m)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(m){return m.name})},getIndex:function(m,x){for(var T=0;T<m.length;T++)if(m[T].name===x)return T;return null},getLayer:function(m){var x=this.getLayerIndex(m);return x!==null?this.layers[x]:null},getObjectLayer:function(m){var x=this.getIndex(this.objects,m);return x!==null?this.objects[x]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(m){return m.name})},getLayerIndex:function(m){return m===void 0?this.currentLayerIndex:typeof m=="string"?this.getLayerIndexByName(m):typeof m=="number"&&m<this.layers.length?m:m instanceof d?m.layerIndex:null},getLayerIndexByName:function(m){return this.getIndex(this.layers,m)},getTileAt:function(m,x,T,S){return S=this.getLayer(S),S===null?null:f.GetTileAt(m,x,T,S)},getTileAtWorldXY:function(m,x,T,S,E){return E=this.getLayer(E),E===null?null:f.GetTileAtWorldXY(m,x,T,S,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(m){return m.name})},getTilesWithin:function(m,x,T,S,E,C){return C=this.getLayer(C),C===null?null:f.GetTilesWithin(m,x,T,S,E,C)},getTilesWithinShape:function(m,x,T,S){return S=this.getLayer(S),S===null?null:f.GetTilesWithinShape(m,x,T,S)},getTilesWithinWorldXY:function(m,x,T,S,E,C,A){return A=this.getLayer(A),A===null?null:f.GetTilesWithinWorldXY(m,x,T,S,E,C,A)},getTileset:function(m){var x=this.getIndex(this.tilesets,m);return x!==null?this.tilesets[x]:null},getTilesetIndex:function(m){return this.getIndex(this.tilesets,m)},hasTileAt:function(m,x,T){return T=this.getLayer(T),T===null?null:f.HasTileAt(m,x,T)},hasTileAtWorldXY:function(m,x,T,S){return S=this.getLayer(S),S===null?null:f.HasTileAtWorldXY(m,x,T,S)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(m){this.setLayer(m)}},putTileAt:function(m,x,T,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:f.PutTileAt(m,x,T,S,E)},putTileAtWorldXY:function(m,x,T,S,E,C){return S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:f.PutTileAtWorldXY(m,x,T,S,E,C)},putTilesAt:function(m,x,T,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(f.PutTilesAt(m,x,T,S,E),this)},randomize:function(m,x,T,S,E,C){return C=this.getLayer(C),C===null?null:(f.Randomize(m,x,T,S,E,C),this)},calculateFacesAt:function(m,x,T){return T=this.getLayer(T),T===null?null:(f.CalculateFacesAt(m,x,T),this)},calculateFacesWithin:function(m,x,T,S,E){return E=this.getLayer(E),E===null?null:(f.CalculateFacesWithin(m,x,T,S,E),this)},removeLayer:function(m){var x=this.getLayerIndex(m);if(x!==null){u(this.layers,x);for(var T=x;T<this.layers.length;T++)this.layers[T].tilemapLayer&&this.layers[T].tilemapLayer.layerIndex--;return this.currentLayerIndex===x&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(m){var x=this.getLayerIndex(m);return x!==null?(m=this.layers[x],m.destroy(),u(this.layers,x),this.currentLayerIndex===x&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var m=this.layers,x=0;x<m.length;x++)m[x].tilemapLayer&&m[x].tilemapLayer.destroy(!1);return m.length=0,this.currentLayerIndex=0,this},removeTile:function(m,x,T){x===void 0&&(x=-1),T===void 0&&(T=!0);var S=[];Array.isArray(m)||(m=[m]);for(var E=0;E<m.length;E++){var C=m[E];S.push(this.removeTileAt(C.x,C.y,!0,T,C.tilemapLayer)),x>-1&&this.putTileAt(x,C.x,C.y,T,C.tilemapLayer)}return S},removeTileAt:function(m,x,T,S,E){return T===void 0&&(T=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:f.RemoveTileAt(m,x,T,S,E)},removeTileAtWorldXY:function(m,x,T,S,E,C){return T===void 0&&(T=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:f.RemoveTileAtWorldXY(m,x,T,S,E,C)},renderDebug:function(m,x,T){return T=this.getLayer(T),T===null?null:(this.orientation===i.ORTHOGONAL&&f.RenderDebug(m,x,T),this)},renderDebugFull:function(m,x){for(var T=this.layers,S=0;S<T.length;S++)f.RenderDebug(m,x,T[S]);return this},replaceByIndex:function(m,x,T,S,E,C,A){return A=this.getLayer(A),A===null?null:(f.ReplaceByIndex(m,x,T,S,E,C,A),this)},setCollision:function(m,x,T,S,E){return x===void 0&&(x=!0),T===void 0&&(T=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(f.SetCollision(m,x,T,S,E),this)},setCollisionBetween:function(m,x,T,S,E){return T===void 0&&(T=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(f.SetCollisionBetween(m,x,T,S,E),this)},setCollisionByProperty:function(m,x,T,S){return x===void 0&&(x=!0),T===void 0&&(T=!0),S=this.getLayer(S),S===null?null:(f.SetCollisionByProperty(m,x,T,S),this)},setCollisionByExclusion:function(m,x,T,S){return x===void 0&&(x=!0),T===void 0&&(T=!0),S=this.getLayer(S),S===null?null:(f.SetCollisionByExclusion(m,x,T,S),this)},setCollisionFromCollisionGroup:function(m,x,T){return m===void 0&&(m=!0),x===void 0&&(x=!0),T=this.getLayer(T),T===null?null:(f.SetCollisionFromCollisionGroup(m,x,T),this)},setTileIndexCallback:function(m,x,T,S){return S=this.getLayer(S),S===null?null:(f.SetTileIndexCallback(m,x,T,S),this)},setTileLocationCallback:function(m,x,T,S,E,C,A){return A=this.getLayer(A),A===null?null:(f.SetTileLocationCallback(m,x,T,S,E,C,A),this)},setLayer:function(m){var x=this.getLayerIndex(m);return x!==null&&(this.currentLayerIndex=x),this},setBaseTileSize:function(m,x){this.tileWidth=m,this.tileHeight=x,this.widthInPixels=this.width*m,this.heightInPixels=this.height*x;for(var T=0;T<this.layers.length;T++){this.layers[T].baseTileWidth=m,this.layers[T].baseTileHeight=x;for(var S=this.layers[T].data,E=this.layers[T].width,C=this.layers[T].height,A=0;A<C;A++)for(var P=0;P<E;P++){var M=S[A][P];M!==null&&M.setSize(void 0,void 0,m,x)}}return this},setLayerTileSize:function(m,x,T){if(T=this.getLayer(T),T===null)return this;T.tileWidth=m,T.tileHeight=x;for(var S=T.data,E=T.width,C=T.height,A=0;A<C;A++)for(var P=0;P<E;P++){var M=S[A][P];M!==null&&M.setSize(m,x)}return this},shuffle:function(m,x,T,S,E){return E=this.getLayer(E),E===null?null:(f.Shuffle(m,x,T,S,E),this)},swapByIndex:function(m,x,T,S,E,C,A){return A=this.getLayer(A),A===null?null:(f.SwapByIndex(m,x,T,S,E,C,A),this)},tileToWorldX:function(m,x,T){return T=this.getLayer(T),T===null?null:this._convert.TileToWorldX(m,x,T)},tileToWorldY:function(m,x,T){return T=this.getLayer(T),T===null?null:this._convert.TileToWorldY(m,x,T)},tileToWorldXY:function(m,x,T,S,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(m,x,T,S,E)},weightedRandomize:function(m,x,T,S,E,C){return C=this.getLayer(C),C===null?null:(f.WeightedRandomize(x,T,S,E,m,C),this)},worldToTileX:function(m,x,T,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileX(m,x,T,S)},worldToTileY:function(m,x,T,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileY(m,x,T,S)},worldToTileXY:function(m,x,T,S,E,C){return C=this.getLayer(C),C===null?null:this._convert.WorldToTileXY(m,x,T,S,E,C)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});h.exports=p},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(11),s=t(15),a=t(251),n=t(1456),i=new e({Extends:s,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Depth,c.Flip,c.GetBounds,c.Origin,c.Pipeline,c.Transform,c.Visible,c.ScrollFactor,n],initialize:function(u,o,l,f,d,v){s.call(this,u,"TilemapLayer"),this.isTilemap=!0,this.tilemap=o,this.layerIndex=l,this.layer=o.layers[l],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(f),this.setAlpha(this.layer.alpha),this.setPosition(d,v),this.setOrigin(),this.setSize(o.tileWidth*this.layer.width,o.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(r){var u=[],o=[],l=this.tilemap;Array.isArray(r)||(r=[r]);for(var f=0;f<r.length;f++){var d=r[f];if(typeof d=="string"&&(d=l.getTileset(d)),d){o.push(d);for(var v=d.firstgid,p=0;p<d.total;p++)u[v+p]=d}}this.gidMap=u,this.tileset=o},setRenderOrder:function(r){var u=["right-down","left-down","right-up","left-up"];return typeof r=="string"&&(r=u.indexOf(r)),r>=0&&r<4&&(this._renderOrder=r),this},calculateFacesAt:function(r,u){return a.CalculateFacesAt(r,u,this.layer),this},calculateFacesWithin:function(r,u,o,l){return a.CalculateFacesWithin(r,u,o,l,this.layer),this},createFromTiles:function(r,u,o,l,f){return a.CreateFromTiles(r,u,o,l,f,this.layer)},cull:function(r){return this.cullCallback(this.layer,r,this.culledTiles,this._renderOrder)},copy:function(r,u,o,l,f,d,v){return a.Copy(r,u,o,l,f,d,v,this.layer),this},fill:function(r,u,o,l,f,d){return a.Fill(r,u,o,l,f,d,this.layer),this},filterTiles:function(r,u,o,l,f,d,v){return a.FilterTiles(r,u,o,l,f,d,v,this.layer)},findByIndex:function(r,u,o){return a.FindByIndex(r,u,o,this.layer)},findTile:function(r,u,o,l,f,d,v){return a.FindTile(r,u,o,l,f,d,v,this.layer)},forEachTile:function(r,u,o,l,f,d,v){return a.ForEachTile(r,u,o,l,f,d,v,this.layer),this},getTileAt:function(r,u,o){return a.GetTileAt(r,u,o,this.layer)},getTileAtWorldXY:function(r,u,o,l){return a.GetTileAtWorldXY(r,u,o,l,this.layer)},getTilesWithin:function(r,u,o,l,f){return a.GetTilesWithin(r,u,o,l,f,this.layer)},getTilesWithinShape:function(r,u,o){return a.GetTilesWithinShape(r,u,o,this.layer)},getTilesWithinWorldXY:function(r,u,o,l,f,d){return a.GetTilesWithinWorldXY(r,u,o,l,f,d,this.layer)},hasTileAt:function(r,u){return a.HasTileAt(r,u,this.layer)},hasTileAtWorldXY:function(r,u,o){return a.HasTileAtWorldXY(r,u,o,this.layer)},putTileAt:function(r,u,o,l){return a.PutTileAt(r,u,o,l,this.layer)},putTileAtWorldXY:function(r,u,o,l,f){return a.PutTileAtWorldXY(r,u,o,l,f,this.layer)},putTilesAt:function(r,u,o,l){return a.PutTilesAt(r,u,o,l,this.layer),this},randomize:function(r,u,o,l,f){return a.Randomize(r,u,o,l,f,this.layer),this},removeTileAt:function(r,u,o,l){return a.RemoveTileAt(r,u,o,l,this.layer)},removeTileAtWorldXY:function(r,u,o,l,f){return a.RemoveTileAtWorldXY(r,u,o,l,f,this.layer)},renderDebug:function(r,u){return a.RenderDebug(r,u,this.layer),this},replaceByIndex:function(r,u,o,l,f,d){return a.ReplaceByIndex(r,u,o,l,f,d,this.layer),this},setSkipCull:function(r){return r===void 0&&(r=!0),this.skipCull=r,this},setCullPadding:function(r,u){return r===void 0&&(r=1),u===void 0&&(u=1),this.cullPaddingX=r,this.cullPaddingY=u,this},setCollision:function(r,u,o,l){return a.SetCollision(r,u,o,this.layer,l),this},setCollisionBetween:function(r,u,o,l){return a.SetCollisionBetween(r,u,o,l,this.layer),this},setCollisionByProperty:function(r,u,o){return a.SetCollisionByProperty(r,u,o,this.layer),this},setCollisionByExclusion:function(r,u,o){return a.SetCollisionByExclusion(r,u,o,this.layer),this},setCollisionFromCollisionGroup:function(r,u){return a.SetCollisionFromCollisionGroup(r,u,this.layer),this},setTileIndexCallback:function(r,u,o){return a.SetTileIndexCallback(r,u,o,this.layer),this},setTileLocationCallback:function(r,u,o,l,f,d){return a.SetTileLocationCallback(r,u,o,l,f,d,this.layer),this},shuffle:function(r,u,o,l){return a.Shuffle(r,u,o,l,this.layer),this},swapByIndex:function(r,u,o,l,f,d){return a.SwapByIndex(r,u,o,l,f,d,this.layer),this},tileToWorldX:function(r,u){return this.tilemap.tileToWorldX(r,u,this)},tileToWorldY:function(r,u){return this.tilemap.tileToWorldY(r,u,this)},tileToWorldXY:function(r,u,o,l){return this.tilemap.tileToWorldXY(r,u,o,l,this)},weightedRandomize:function(r,u,o,l,f){return a.WeightedRandomize(u,o,l,f,r,this.layer),this},worldToTileX:function(r,u,o){return this.tilemap.worldToTileX(r,u,o,this)},worldToTileY:function(r,u,o){return this.tilemap.worldToTileY(r,u,o,this)},worldToTileXY:function(r,u,o,l,f){return this.tilemap.worldToTileXY(r,u,o,l,f,this)},destroy:function(r){r===void 0&&(r=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),r&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],s.prototype.destroy.call(this))}});h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(2),s=new e({initialize:function(n){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(n)},reset:function(a){return this.delay=c(a,"delay",0),this.repeat=c(a,"repeat",0),this.loop=c(a,"loop",!1),this.callback=c(a,"callback",void 0),this.callbackScope=c(a,"callbackScope",this.callback),this.args=c(a,"args",[]),this.timeScale=c(a,"timeScale",1),this.startAt=c(a,"startAt",0),this.paused=c(a,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var a=this.delay+this.delay*this.repeat,n=this.elapsed+this.delay*(this.repeat-this.repeatCount);return n/a}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(a){a===void 0&&(a=!1),this.elapsed=this.delay,this.hasDispatched=!a,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1465),c=function(s){var a,n=[];if(s.hasOwnProperty("props"))for(a in s.props)a.substr(0,1)!=="_"&&n.push({key:a,value:s.props[a]});else for(a in s)e.indexOf(a)===-1&&a.substr(0,1)!=="_"&&n.push({key:a,value:s[a]});return n};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),c=function(s){var a=e(s,"tweens",null);return a===null?[]:(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a]),a)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(265),c=t(13),s=t(99),a=t(80),n=t(162),i=t(6),r=t(264),u=t(266),o=t(268),l=function(f,d,v){v===void 0&&(v=e);var p=i(d,"from",0),m=i(d,"to",1),x=[{value:p}],T=n(d,"delay",v.delay),S=n(d,"duration",v.duration),E=i(d,"easeParams",v.easeParams),C=a(i(d,"ease",v.ease),E),A=n(d,"hold",v.hold),P=n(d,"repeat",v.repeat),M=n(d,"repeatDelay",v.repeatDelay),O=s(d,"yoyo",v.yoyo),F=[],I=r("value",m),N=o(x[0],0,"value",I.getEnd,I.getStart,I.getActive,C,T,S,O,A,P,M,!1,!1);N.start=p,N.current=p,N.to=m,F.push(N);var G=new u(f,F,x);G.offset=c(d,"offset",null),G.completeDelay=c(d,"completeDelay",0),G.loop=Math.round(c(d,"loop",0)),G.loopDelay=Math.round(c(d,"loopDelay",0)),G.paused=s(d,"paused",!1),G.useFrames=s(d,"useFrames",!1);for(var Y=i(d,"callbackScope",G),z=[G,null],W=u.TYPES,D=0;D<W.length;D++){var L=W[D],B=i(d,L,!1);if(B){var w=i(d,L+"Scope",Y),V=i(d,L+"Params",[]);G.setCallback(L,B,z.concat(V),w)}}return G};h.exports=l},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(80),c=t(6),s=t(14),a=function(n,i){i===void 0&&(i={});var r,u=c(i,"start",0),o=c(i,"ease",null),l=c(i,"grid",null),f=c(i,"from",0),d=f==="first",v=f==="center",p=f==="last",m=typeof f=="number",x=Array.isArray(n),T=parseFloat(x?n[0]:n),S=x?parseFloat(n[1]):0,E=Math.max(T,S);if(x&&(u+=T),l){var C=l[0],A=l[1],P=0,M=0,O=0,F=0,I=[];p?(P=C-1,M=A-1):m?(P=f%C,M=Math.floor(f/C)):v&&(P=(C-1)/2,M=(A-1)/2);for(var N=s.MIN_SAFE_INTEGER,G=0;G<A;G++){I[G]=[];for(var Y=0;Y<C;Y++){O=P-Y,F=M-G;var z=Math.sqrt(O*O+F*F);z>N&&(N=z),I[G][Y]=z}}}var W=o?e(o):null;return l?r=function(D,L,B,w){var V=0,U=w%C,X=Math.floor(w/C);U>=0&&U<C&&X>=0&&X<A&&(V=I[X][U]);var H;if(x){var b=S-T;W?H=V/N*b*W(V/N):H=V/N*b}else W?H=V*T*W(V/N):H=V*T;return H+u}:r=function(D,L,B,w,V){V--;var U;d?U=w:v?U=Math.abs(V/2-w):p?U=V-w:m&&(U=Math.abs(f-w));var X;if(x){var H;v?H=(S-T)/V*(U*2):H=(S-T)/V*U,W?X=H*W(U/V):X=H}else W?X=V*E*W(U/V):X=U*T;return X+u},r};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),c=t(265),s=t(13),a=t(99),n=t(80),i=t(162),r=t(263),u=t(584),o=t(6),l=t(588),f=t(163),d=function(v,p){var m=new l(v);m.completeDelay=s(p,"completeDelay",0),m.loop=Math.round(s(p,"loop",0)),m.loopDelay=Math.round(s(p,"loopDelay",0)),m.paused=a(p,"paused",!1),m.useFrames=a(p,"useFrames",!1);var x=o(p,"callbackScope",m),T=[m],S=o(p,"onStart",!1);if(S){var E=o(p,"onStartScope",x),C=o(p,"onStartParams",[]);m.setCallback("onStart",S,T.concat(C),E)}var A=o(p,"onUpdate",!1);if(A){var P=o(p,"onUpdateScope",x),M=o(p,"onUpdateParams",[]);m.setCallback("onUpdate",A,T.concat(M),P)}var O=o(p,"onLoop",!1);if(O){var F=o(p,"onLoopScope",x),I=o(p,"onLoopParams",[]);m.setCallback("onLoop",O,T.concat(I),F)}var N=o(p,"onYoyo",!1);if(N){var G=o(p,"onYoyoScope",x),Y=o(p,"onYoyoParams",[]);m.setCallback("onYoyo",N,T.concat(null,Y),G)}var z=o(p,"onComplete",!1);if(z){var W=o(p,"onCompleteScope",x),D=o(p,"onCompleteParams",[]);m.setCallback("onComplete",z,T.concat(D),W)}var L=u(p);if(L.length===0)return m.paused=!0,m;var B=e(c);B.targets=r(p);var w=s(p,"totalDuration",0);w>0?B.duration=Math.floor(w/L.length):B.duration=i(p,"duration",B.duration),B.delay=i(p,"delay",B.delay),B.easeParams=o(p,"easeParams",B.easeParams),B.ease=n(o(p,"ease",B.ease),B.easeParams),B.hold=i(p,"hold",B.hold),B.repeat=i(p,"repeat",B.repeat),B.repeatDelay=i(p,"repeatDelay",B.repeatDelay),B.yoyo=a(p,"yoyo",B.yoyo),B.flipX=a(p,"flipX",B.flipX),B.flipY=a(p,"flipY",B.flipY);for(var V=0;V<L.length;V++)m.queue(f(m,L[V],B));return m};h.exports=d},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(9),s=t(267),a=t(163),n=t(100),i=new e({Extends:c,initialize:function(u){c.call(this),this.manager=u,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=n.PENDING_ADD,this._pausedState=n.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(r,u){this.emit(r,this),u&&u.func.apply(u.scope,u.params)},setTimeScale:function(r){return this.timeScale=r,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===n.ACTIVE},add:function(r){return this.queue(a(this,r))},queue:function(r){return this.isPlaying()||(r.parent=this,r.parentIsTimeline=!0,this.data.push(r),this.totalData=this.data.length),this},hasOffset:function(r){return r.offset!==null},isOffsetAbsolute:function(r){return typeof r=="number"},isOffsetRelative:function(r){var u=typeof r;if(u==="string"){var o=r[0];if(o==="-"||o==="+")return!0}return!1},getRelativeOffset:function(r,u){var o=r[0],l=parseFloat(r.substr(2)),f=u;switch(o){case"+":f+=l;break;case"-":f-=l;break}return Math.max(0,f)},calcDuration:function(){for(var r=0,u=0,o=0,l=0;l<this.totalData;l++){var f=this.data[l];f.init(),this.hasOffset(f)?this.isOffsetAbsolute(f.offset)?(f.calculatedOffset=f.offset,f.offset===0&&(o=0)):this.isOffsetRelative(f.offset)&&(f.calculatedOffset=this.getRelativeOffset(f.offset,r)):f.calculatedOffset=o,r=f.totalDuration+f.calculatedOffset,u+=f.totalDuration,o+=f.totalDuration}this.duration=u,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=n.PAUSED,!1):!0},resetTweens:function(r){for(var u=0;u<this.totalData;u++){var o=this.data[u];o.play(r)}},setCallback:function(r,u,o,l){return i.TYPES.indexOf(r)!==-1&&(this.callbacks[r]={func:u,scope:l,params:o}),this},makeActive:function(r){return this.manager.makeActive(r)},play:function(){if(this.state!==n.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=n.ACTIVE;this.dispatchTimelineEvent(s.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=n.LOOP_DELAY):(this.state=n.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=n.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=n.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(r,u){if(this.state!==n.PAUSED){switch(this.useFrames&&(u=1*this.manager.timeScale),u*=this.timeScale,this.elapsed+=u,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=u,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case n.ACTIVE:for(var o=this.totalData,l=0;l<this.totalData;l++){var f=this.data[l];f.update(r,u)&&o--}this.dispatchTimelineEvent(s.TIMELINE_UPDATE,this.callbacks.onUpdate),o===0&&this.nextState();break;case n.LOOP_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=n.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop));break;case n.COMPLETE_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=n.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===n.PENDING_REMOVE}},stop:function(){this.state=n.PENDING_REMOVE},pause:function(){if(this.state!==n.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=n.PAUSED,this.emit(s.TIMELINE_PAUSE,this),this},resume:function(){return this.state===n.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(s.TIMELINE_RESUME,this)),this},hasTarget:function(r){for(var u=0;u<this.data.length;u++)if(this.data[u].hasTarget(r))return!0;return!1},destroy:function(){for(var r=0;r<this.data.length;r++)this.data[r].stop()}});i.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],h.exports=i},function(h,g,t){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),c=t(41),s=t(32),a=t(2),n=t(64),i={parseBody:function(r,u,o,l){l===void 0&&(l={});for(var f=a(o,"fixtures",[]),d=[],v=0;v<f.length;v++)for(var p=this.parseFixture(f[v]),m=0;m<p.length;m++)d.push(p[m]);var x=s.clone(o,!0);s.extend(x,l,!0),delete x.fixtures,delete x.type;var T=c.create(x);return c.setParts(T,d),c.setPosition(T,{x:r,y:u}),T},parseFixture:function(r){var u=s.extend({},!1,r);delete u.circle,delete u.vertices;var o;if(r.circle){var l=a(r.circle,"x"),f=a(r.circle,"y"),d=a(r.circle,"radius");o=[e.circle(l,f,d,u)]}else r.vertices&&(o=this.parseVertices(r.vertices,u));return o},parseVertices:function(r,u){u===void 0&&(u={});for(var o=[],l=0;l<r.length;l++)n.clockwiseSort(r[l]),o.push(c.create(s.extend({position:n.centre(r[l]),vertices:r[l]},u)));return e.flagCoincidentParts(o)}};h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),c=t(41),s={parseBody:function(a,n,i,r){r===void 0&&(r={});var u,o=i.vertices;if(o.length===1)r.vertices=o[0],u=c.create(r),e.flagCoincidentParts(u.parts);else{for(var l=[],f=0;f<o.length;f++){var d=c.create({vertices:o[f]});l.push(d)}e.flagCoincidentParts(l),r.parts=l,u=c.create(r)}return u.label=i.label,c.setPosition(u,{x:a,y:n}),u}};h.exports=s},function(h,g,t){var e={};h.exports=e;var c=t(118),s=t(128),a=t(32),n=t(41),i=t(86);(function(){e.stack=function(r,u,o,l,f,d,v){for(var p=c.create({label:"Stack"}),m=r,x=u,T,S=0,E=0;E<l;E++){for(var C=0,A=0;A<o;A++){var P=v(m,x,A,E,T,S);if(P){var M=P.bounds.max.y-P.bounds.min.y,O=P.bounds.max.x-P.bounds.min.x;M>C&&(C=M),n.translate(P,{x:O*.5,y:M*.5}),m=P.bounds.max.x+f,c.addBody(p,P),T=P,S+=1}else m+=f}x+=C+d,m=r}return p},e.chain=function(r,u,o,l,f,d){for(var v=r.bodies,p=1;p<v.length;p++){var m=v[p-1],x=v[p],T=m.bounds.max.y-m.bounds.min.y,S=m.bounds.max.x-m.bounds.min.x,E=x.bounds.max.y-x.bounds.min.y,C=x.bounds.max.x-x.bounds.min.x,A={bodyA:m,pointA:{x:S*u,y:T*o},bodyB:x,pointB:{x:C*l,y:E*f}},P=a.extend(A,d);c.addConstraint(r,s.create(P))}return r.label+=" Chain",r},e.mesh=function(r,u,o,l,f){var d=r.bodies,v,p,m,x,T;for(v=0;v<o;v++){for(p=1;p<u;p++)m=d[p-1+v*u],x=d[p+v*u],c.addConstraint(r,s.create(a.extend({bodyA:m,bodyB:x},f)));if(v>0)for(p=0;p<u;p++)m=d[p+(v-1)*u],x=d[p+v*u],c.addConstraint(r,s.create(a.extend({bodyA:m,bodyB:x},f))),l&&p>0&&(T=d[p-1+(v-1)*u],c.addConstraint(r,s.create(a.extend({bodyA:T,bodyB:x},f)))),l&&p<u-1&&(T=d[p+1+(v-1)*u],c.addConstraint(r,s.create(a.extend({bodyA:T,bodyB:x},f))))}return r.label+=" Mesh",r},e.pyramid=function(r,u,o,l,f,d,v){return e.stack(r,u,o,l,f,d,function(p,m,x,T,S,E){var C=Math.min(l,Math.ceil(o/2)),A=S?S.bounds.max.x-S.bounds.min.x:0;if(!(T>C)){T=C-T;var P=T,M=o-1-T;if(!(x<P||x>M)){E===1&&n.translate(S,{x:(x+(o%2===1?1:-1))*A,y:0});var O=S?x*A:0;return v(r+O+x*f,m,x,T,S,E)}}})},e.newtonsCradle=function(r,u,o,l,f){for(var d=c.create({label:"Newtons Cradle"}),v=0;v<o;v++){var p=1.9,m=i.circle(r+v*(l*p),u+f,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),x=s.create({pointA:{x:r+v*(l*p),y:u},bodyB:m});c.addBody(d,m),c.addConstraint(d,x)}return d},e.car=function(r,u,o,l,f){var d=n.nextGroup(!0),v=20,p=-o*.5+v,m=o*.5-v,x=0,T=c.create({label:"Car"}),S=i.rectangle(r,u,o,l,{collisionFilter:{group:d},chamfer:{radius:l*.5},density:2e-4}),E=i.circle(r+p,u+x,f,{collisionFilter:{group:d},friction:.8}),C=i.circle(r+m,u+x,f,{collisionFilter:{group:d},friction:.8}),A=s.create({bodyB:S,pointB:{x:p,y:x},bodyA:E,stiffness:1,length:0}),P=s.create({bodyB:S,pointB:{x:m,y:x},bodyA:C,stiffness:1,length:0});return c.addBody(T,S),c.addBody(T,E),c.addBody(T,C),c.addConstraint(T,A),c.addConstraint(T,P),T},e.softBody=function(r,u,o,l,f,d,v,p,m,x){m=a.extend({inertia:1/0},m),x=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},x);var T=e.stack(r,u,o,l,f,d,function(S,E){return i.circle(S,E,p,m)});return e.mesh(T,o,l,v,x),T.label="Soft Body",T}})()},function(h,g,t){var e={};h.exports=e,t(84);var c=t(32);(function(){e.pathToVertices=function(s,a){typeof window<"u"&&!("SVGPathSeg"in window)&&c.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,i,r,u,o,l,f,d,v,p,m=[],x,T,S=0,E=0,C=0;a=a||15;var A=function(M,O,F){var I=F%2===1&&F>1;if(!v||M!=v.x||O!=v.y){v&&I?(x=v.x,T=v.y):(x=0,T=0);var N={x:x+M,y:T+O};(I||!v)&&(v=N),m.push(N),E=x+M,C=T+O}},P=function(M){var O=M.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":E=M.x,C=M.y;break;case"H":E=M.x;break;case"V":C=M.y;break}A(E,C,M.pathSegType)}};for(e._svgPathToAbsolute(s),r=s.getTotalLength(),l=[],n=0;n<s.pathSegList.numberOfItems;n+=1)l.push(s.pathSegList.getItem(n));for(f=l.concat();S<r;){if(p=s.getPathSegAtLength(S),o=l[p],o!=d){for(;f.length&&f[0]!=o;)P(f.shift());d=o}switch(o.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":u=s.getPointAtLength(S),A(u.x,u.y,0);break}S+=a}for(n=0,i=f.length;n<i;++n)P(f[n]);return m},e._svgPathToAbsolute=function(s){for(var a,n,i,r,u,o,l=s.pathSegList,f=0,d=0,v=l.numberOfItems,p=0;p<v;++p){var m=l.getItem(p),x=m.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(x))"x"in m&&(f=m.x),"y"in m&&(d=m.y);else switch("x1"in m&&(i=f+m.x1),"x2"in m&&(u=f+m.x2),"y1"in m&&(r=d+m.y1),"y2"in m&&(o=d+m.y2),"x"in m&&(f+=m.x),"y"in m&&(d+=m.y),x){case"m":l.replaceItem(s.createSVGPathSegMovetoAbs(f,d),p);break;case"l":l.replaceItem(s.createSVGPathSegLinetoAbs(f,d),p);break;case"h":l.replaceItem(s.createSVGPathSegLinetoHorizontalAbs(f),p);break;case"v":l.replaceItem(s.createSVGPathSegLinetoVerticalAbs(d),p);break;case"c":l.replaceItem(s.createSVGPathSegCurvetoCubicAbs(f,d,i,r,u,o),p);break;case"s":l.replaceItem(s.createSVGPathSegCurvetoCubicSmoothAbs(f,d,u,o),p);break;case"q":l.replaceItem(s.createSVGPathSegCurvetoQuadraticAbs(f,d,i,r),p);break;case"t":l.replaceItem(s.createSVGPathSegCurvetoQuadraticSmoothAbs(f,d),p);break;case"a":l.replaceItem(s.createSVGPathSegArcAbs(f,d,m.r1,m.r2,m.angle,m.largeArcFlag,m.sweepFlag),p);break;case"z":case"Z":f=a,d=n;break}(x=="M"||x=="m")&&(a=f,n=d)}}})()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),c=t(41),s=t(0),a=t(249),n=t(9),i=t(2),r=t(126),u=t(64),o=new s({Extends:n,Mixins:[a.Bounce,a.Collision,a.Friction,a.Gravity,a.Mass,a.Sensor,a.Sleep,a.Static],initialize:function(f,d,v){n.call(this),this.tile=d,this.world=f,d.physics.matterBody&&d.physics.matterBody.destroy(),d.physics.matterBody=this;var p=i(v,"body",null),m=i(v,"addToWorld",!0);if(p)this.setBody(p,m);else{var x=d.getCollisionGroup(),T=i(x,"objects",[]);T.length>0?this.setFromTileCollision(v):this.setFromTileRectangle(v)}},setFromTileRectangle:function(l){l===void 0&&(l={}),r(l,"isStatic")||(l.isStatic=!0),r(l,"addToWorld")||(l.addToWorld=!0);var f=this.tile.getBounds(),d=f.x+f.width/2,v=f.y+f.height/2,p=e.rectangle(d,v,f.width,f.height,l);return this.setBody(p,l.addToWorld),this},setFromTileCollision:function(l){l===void 0&&(l={}),r(l,"isStatic")||(l.isStatic=!0),r(l,"addToWorld")||(l.addToWorld=!0);for(var f=this.tile.tilemapLayer.scaleX,d=this.tile.tilemapLayer.scaleY,v=this.tile.getLeft(),p=this.tile.getTop(),m=this.tile.getCollisionGroup(),x=i(m,"objects",[]),T=[],S=0;S<x.length;S++){var E=x[S],C=v+E.x*f,A=p+E.y*d,P=E.width*f,M=E.height*d,O=null;if(E.rectangle)O=e.rectangle(C+P/2,A+M/2,P,M,l);else if(E.ellipse)O=e.circle(C+P/2,A+M/2,P/2,l);else if(E.polygon||E.polyline){var F=E.polygon?E.polygon:E.polyline,I=F.map(function(Y){return{x:Y.x*f,y:Y.y*d}}),N=u.create(I),G=u.centre(N);C+=G.x,A+=G.y,O=e.fromVertices(C,A,N,l)}O&&T.push(O)}return T.length===1?this.setBody(T[0],l.addToWorld):T.length>1&&(l.parts=T,this.setBody(c.create(l),l.addToWorld)),this},setBody:function(l,f){return f===void 0&&(f=!0),this.body&&this.removeBody(),this.body=l,this.body.gameObject=this,f&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});h.exports=o},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1399);e.Body=t(41),e.Composite=t(118),e.World=t(596),e.Detector=t(273),e.Grid=t(597),e.Pairs=t(598),e.Pair=t(250),e.Query=t(1400),e.Resolver=t(599),e.SAT=t(274),e.Constraint=t(128),e.Common=t(32),e.Engine=t(1401),e.Events=t(166),e.Sleeping=t(165),e.Plugin=t(595),e.Bodies=t(86),e.Composites=t(591),e.Axes=t(271),e.Bounds=t(84),e.Svg=t(592),e.Vector=t(83),e.Vertices=t(64),e.World.add=e.Composite.add,e.World.remove=e.Composite.remove,e.World.addComposite=e.Composite.addComposite,e.World.addBody=e.Composite.addBody,e.World.addConstraint=e.Composite.addConstraint,e.World.clear=e.Composite.clear,h.exports=e},function(h,g,t){var e={};h.exports=e;var c=t(32);(function(){e._registry={},e.register=function(s){if(e.isPlugin(s)||c.warn("Plugin.register:",e.toString(s),"does not implement all required fields."),s.name in e._registry){var a=e._registry[s.name],n=e.versionParse(s.version).number,i=e.versionParse(a.version).number;n>i?(c.warn("Plugin.register:",e.toString(a),"was upgraded to",e.toString(s)),e._registry[s.name]=s):n<i?c.warn("Plugin.register:",e.toString(a),"can not be downgraded to",e.toString(s)):s!==a&&c.warn("Plugin.register:",e.toString(s),"is already registered to different plugin object")}else e._registry[s.name]=s;return s},e.resolve=function(s){return e._registry[e.dependencyParse(s).name]},e.toString=function(s){return typeof s=="string"?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},e.isPlugin=function(s){return s&&s.name&&s.version&&s.install},e.isUsed=function(s,a){return s.used.indexOf(a)>-1},e.isFor=function(s,a){var n=s.for&&e.dependencyParse(s.for);return!s.for||a.name===n.name&&e.versionSatisfies(a.version,n.range)},e.use=function(s,a){if(s.uses=(s.uses||[]).concat(a||[]),s.uses.length===0){c.warn("Plugin.use:",e.toString(s),"does not specify any dependencies to install.");return}for(var n=e.dependencies(s),i=c.topologicalSort(n),r=[],u=0;u<i.length;u+=1)if(i[u]!==s.name){var o=e.resolve(i[u]);if(!o){r.push("❌ "+i[u]);continue}e.isUsed(s,o.name)||(e.isFor(o,s)||(c.warn("Plugin.use:",e.toString(o),"is for",o.for,"but installed on",e.toString(s)+"."),o._warned=!0),o.install?o.install(s):(c.warn("Plugin.use:",e.toString(o),"does not specify an install function."),o._warned=!0),o._warned?(r.push("🔶 "+e.toString(o)),delete o._warned):r.push("✅ "+e.toString(o)),s.used.push(o.name))}r.length>0&&!o.silent&&c.info(r.join("  "))},e.dependencies=function(s,a){var n=e.dependencyParse(s),i=n.name;if(a=a||{},!(i in a)){s=e.resolve(s)||s,a[i]=c.map(s.uses||[],function(u){e.isPlugin(u)&&e.register(u);var o=e.dependencyParse(u),l=e.resolve(u);return l&&!e.versionSatisfies(l.version,o.range)?(c.warn("Plugin.dependencies:",e.toString(l),"does not satisfy",e.toString(o),"used by",e.toString(n)+"."),l._warned=!0,s._warned=!0):l||(c.warn("Plugin.dependencies:",e.toString(u),"used by",e.toString(n),"could not be resolved."),s._warned=!0),o.name});for(var r=0;r<a[i].length;r+=1)e.dependencies(a[i][r],a);return a}},e.dependencyParse=function(s){if(c.isString(s)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return a.test(s)||c.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}}return{name:s.name,range:s.range||s.version}},e.versionParse=function(s){var a=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;a.test(s)||c.warn("Plugin.versionParse:",s,"is not a valid version or range.");var n=s.split("-");s=n[0];var i=isNaN(Number(s[0])),r=i?s.substr(1):s,u=c.map(r.split("."),function(o){return Number(o)});return{isRange:i,version:r,range:s,operator:i?s[0]:"",parts:u,prerelease:n[1],number:u[0]*1e8+u[1]*1e4+u[2]}},e.versionSatisfies=function(s,a){a=a||"*";var n=e.versionParse(a),i=n.parts,r=e.versionParse(s),u=r.parts;if(n.isRange){if(n.operator==="*"||s==="*")return!0;if(n.operator==="~")return u[0]===i[0]&&u[1]===i[1]&&u[2]>=i[2];if(n.operator==="^")return i[0]>0?u[0]===i[0]&&r.number>=n.number:i[1]>0?u[1]===i[1]&&u[2]>=i[2]:u[2]===i[2]}return s===a||s==="*"}})()},function(h,g,t){var e={};h.exports=e;var c=t(118);t(128);var s=t(32);(function(){e.create=function(a){var n=c.create(),i={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return s.extend(n,i,a)}})()},function(h,g,t){var e={};h.exports=e;var c=t(250),s=t(273),a=t(32);(function(){e.create=function(n){var i={controller:e,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(i,n)},e.update=function(n,i,r,u){var o,l,f,d=r.world,v=n.buckets,p,m,x=!1,T=r.metrics;for(T.broadphaseTests=0,o=0;o<i.length;o++){var S=i[o];if(!(S.isSleeping&&!u)&&!(S.bounds.max.x<d.bounds.min.x||S.bounds.min.x>d.bounds.max.x||S.bounds.max.y<d.bounds.min.y||S.bounds.min.y>d.bounds.max.y)){var E=e._getRegion(n,S);if(!S.region||E.id!==S.region.id||u){T.broadphaseTests+=1,(!S.region||u)&&(S.region=E);var C=e._regionUnion(E,S.region);for(l=C.startCol;l<=C.endCol;l++)for(f=C.startRow;f<=C.endRow;f++){m=e._getBucketId(l,f),p=v[m];var A=l>=E.startCol&&l<=E.endCol&&f>=E.startRow&&f<=E.endRow,P=l>=S.region.startCol&&l<=S.region.endCol&&f>=S.region.startRow&&f<=S.region.endRow;!A&&P&&P&&p&&e._bucketRemoveBody(n,p,S),(S.region===E||A&&!P||u)&&(p||(p=e._createBucket(v,m)),e._bucketAddBody(n,p,S))}S.region=E,x=!0}}}x&&(n.pairsList=e._createActivePairsList(n))},e.clear=function(n){n.buckets={},n.pairs={},n.pairsList=[]},e._regionUnion=function(n,i){var r=Math.min(n.startCol,i.startCol),u=Math.max(n.endCol,i.endCol),o=Math.min(n.startRow,i.startRow),l=Math.max(n.endRow,i.endRow);return e._createRegion(r,u,o,l)},e._getRegion=function(n,i){var r=i.bounds,u=Math.floor(r.min.x/n.bucketWidth),o=Math.floor(r.max.x/n.bucketWidth),l=Math.floor(r.min.y/n.bucketHeight),f=Math.floor(r.max.y/n.bucketHeight);return e._createRegion(u,o,l,f)},e._createRegion=function(n,i,r,u){return{id:n+","+i+","+r+","+u,startCol:n,endCol:i,startRow:r,endRow:u}},e._getBucketId=function(n,i){return"C"+n+"R"+i},e._createBucket=function(n,i){var r=n[i]=[];return r},e._bucketAddBody=function(n,i,r){for(var u=0;u<i.length;u++){var o=i[u];if(!(r.id===o.id||r.isStatic&&o.isStatic)){var l=c.id(r,o),f=n.pairs[l];f?f[2]+=1:n.pairs[l]=[r,o,1]}}i.push(r)},e._bucketRemoveBody=function(n,i,r){i.splice(i.indexOf(r),1);for(var u=0;u<i.length;u++){var o=i[u],l=c.id(r,o),f=n.pairs[l];f&&(f[2]-=1)}},e._createActivePairsList=function(n){var i,r,u=[];i=a.keys(n.pairs);for(var o=0;o<i.length;o++)r=n.pairs[i[o]],r[2]>0?u.push(r):delete n.pairs[i[o]];return u}})()},function(h,g,t){var e={};h.exports=e;var c=t(250),s=t(32);(function(){e._pairMaxIdleLife=1e3,e.create=function(a){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},e.update=function(a,n,i){var r=a.list,u=a.table,o=a.collisionStart,l=a.collisionEnd,f=a.collisionActive,d,v,p,m;for(o.length=0,l.length=0,f.length=0,m=0;m<r.length;m++)r[m].confirmedActive=!1;for(m=0;m<n.length;m++)d=n[m],d.collided&&(v=c.id(d.bodyA,d.bodyB),p=u[v],p?(p.isActive?f.push(p):o.push(p),c.update(p,d,i),p.confirmedActive=!0):(p=c.create(d,i),u[v]=p,o.push(p),r.push(p)));for(m=0;m<r.length;m++)p=r[m],p.isActive&&!p.confirmedActive&&(c.setActive(p,!1,i),l.push(p))},e.removeOld=function(a,n){var i=a.list,r=a.table,u=[],o,l,f,d;for(d=0;d<i.length;d++){if(o=i[d],l=o.collision,l.bodyA.isSleeping||l.bodyB.isSleeping){o.timeUpdated=n;continue}n-o.timeUpdated>e._pairMaxIdleLife&&u.push(d)}for(d=0;d<u.length;d++)f=u[d]-d,o=i[f],delete r[o.id],i.splice(f,1)},e.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()},function(h,g,t){var e={};h.exports=e;var c=t(64),s=t(83),a=t(32),n=t(84);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var r,u,o;for(r=0;r<i.length;r++)u=i[r],u.isActive&&(o=u.activeContacts.length,u.collision.parentA.totalContacts+=o,u.collision.parentB.totalContacts+=o)},e.solvePosition=function(i,r,u){var o,l,f,d,v,p,m,x,T,S,E,C,A,P,M,O,F=u*e._positionDampen;for(o=0;o<r.length;o++){var I=r[o];I.previousPositionImpulse.x=I.positionImpulse.x,I.previousPositionImpulse.y=I.positionImpulse.y}for(o=0;o<i.length;o++)d=i[o],!(!d.isActive||d.isSensor)&&(v=d.collision,p=v.parentA,m=v.parentB,x=v.normal,E=p.previousPositionImpulse,C=m.previousPositionImpulse,S=v.penetration,P=C.x-E.x+S.x,M=C.y-E.y+S.y,l=x.x,f=x.y,T=l*P+f*M,d.separation=T,O=(T-d.slop)*F,(p.isStatic||m.isStatic)&&(O*=2),p.isStatic||p.isSleeping||(A=O/p.totalContacts,p.positionImpulse.x+=l*A,p.positionImpulse.y+=f*A),m.isStatic||m.isSleeping||(A=O/m.totalContacts,m.positionImpulse.x-=l*A,m.positionImpulse.y-=f*A))},e.postSolvePosition=function(i){for(var r=0;r<i.length;r++){var u=i[r];if(u.totalContacts=0,u.positionImpulse.x!==0||u.positionImpulse.y!==0){for(var o=0;o<u.parts.length;o++){var l=u.parts[o];c.translate(l.vertices,u.positionImpulse),n.update(l.bounds,l.vertices,u.velocity),l.position.x+=u.positionImpulse.x,l.position.y+=u.positionImpulse.y}u.positionPrev.x+=u.positionImpulse.x,u.positionPrev.y+=u.positionImpulse.y,s.dot(u.positionImpulse,u.velocity)<0?(u.positionImpulse.x=0,u.positionImpulse.y=0):(u.positionImpulse.x*=e._positionWarming,u.positionImpulse.y*=e._positionWarming)}}},e.preSolveVelocity=function(i){var r,u,o,l,f,d,v,p,m,x,T,S,E,C,A=s._temp[0],P=s._temp[1];for(r=0;r<i.length;r++)if(o=i[r],!(!o.isActive||o.isSensor))for(l=o.activeContacts,f=o.collision,d=f.parentA,v=f.parentB,p=f.normal,m=f.tangent,u=0;u<l.length;u++)x=l[u],T=x.vertex,S=x.normalImpulse,E=x.tangentImpulse,(S!==0||E!==0)&&(A.x=p.x*S+m.x*E,A.y=p.y*S+m.y*E,d.isStatic||d.isSleeping||(C=s.sub(T,d.position,P),d.positionPrev.x+=A.x*d.inverseMass,d.positionPrev.y+=A.y*d.inverseMass,d.anglePrev+=s.cross(C,A)*d.inverseInertia),v.isStatic||v.isSleeping||(C=s.sub(T,v.position,P),v.positionPrev.x-=A.x*v.inverseMass,v.positionPrev.y-=A.y*v.inverseMass,v.anglePrev-=s.cross(C,A)*v.inverseInertia))},e.solveVelocity=function(i,r){for(var u=r*r,o=s._temp[0],l=s._temp[1],f=s._temp[2],d=s._temp[3],v=s._temp[4],p=s._temp[5],m=0;m<i.length;m++){var x=i[m];if(!(!x.isActive||x.isSensor)){var T=x.collision,S=T.parentA,E=T.parentB,C=T.normal,A=T.tangent,P=x.activeContacts,M=1/P.length;S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var O=0;O<P.length;O++){var F=P[O],I=F.vertex,N=s.sub(I,S.position,l),G=s.sub(I,E.position,f),Y=s.add(S.velocity,s.mult(s.perp(N),S.angularVelocity),d),z=s.add(E.velocity,s.mult(s.perp(G),E.angularVelocity),v),W=s.sub(Y,z,p),D=s.dot(C,W),L=s.dot(A,W),B=Math.abs(L),w=a.sign(L),V=(1+x.restitution)*D,U=a.clamp(x.separation+D,0,1)*e._frictionNormalMultiplier,X=L,H=1/0;B>x.friction*x.frictionStatic*U*u&&(H=B,X=a.clamp(x.friction*w*u,-H,H));var b=s.cross(N,C),Z=s.cross(G,C),K=M/(S.inverseMass+E.inverseMass+S.inverseInertia*b*b+E.inverseInertia*Z*Z);if(V*=K,X*=K,D<0&&D*D>e._restingThresh*u)F.normalImpulse=0;else{var Q=F.normalImpulse;F.normalImpulse=Math.min(F.normalImpulse+V,0),V=F.normalImpulse-Q}if(L*L>e._restingThreshTangent*u)F.tangentImpulse=0;else{var j=F.tangentImpulse;F.tangentImpulse=a.clamp(F.tangentImpulse+X,-H,H),X=F.tangentImpulse-j}o.x=C.x*V+A.x*X,o.y=C.y*V+A.y*X,S.isStatic||S.isSleeping||(S.positionPrev.x+=o.x*S.inverseMass,S.positionPrev.y+=o.y*S.inverseMass,S.anglePrev+=s.cross(N,o)*S.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=o.x*E.inverseMass,E.positionPrev.y-=o.y*E.inverseMass,E.anglePrev-=s.cross(G,o)*E.inverseInertia)}}}}})()},function(h,g){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}h.exports=t},function(h,g,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(276),c=function(s,a,n,i){for(var r=s[0],u=1;u<s.length;u++){var o=s[u];e(o,r,a,n,i),r=o}return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),c=function(s,a,n,i,r){return e(s,"angle",a,n,i,r)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){for(var a=0;a<e.length;a++){var n=e[a];c.call(s,n)}return e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){s===void 0&&(s=0);for(var a=s;a<e.length;a++){var n=e[a],i=!0;for(var r in c)n[r]!==c[r]&&(i=!1);if(i)return n}return null};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){s===void 0&&(s=0);for(var a=s;a<e.length;a++){var n=e[a],i=!0;for(var r in c)n[r]!==c[r]&&(i=!1);if(i)return n}return null};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(289),c=t(123),s=t(2),a=t(1),n=t(129),i=new n({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1),r=function(u,o){o===void 0&&(o={});var l=o.hasOwnProperty("width"),f=o.hasOwnProperty("height"),d=s(o,"width",-1),v=s(o,"height",-1),p=s(o,"cellWidth",1),m=s(o,"cellHeight",p),x=s(o,"position",c.TOP_LEFT),T=s(o,"x",0),S=s(o,"y",0),E=0,C=0,A=d*p,P=v*m;i.setPosition(T,S),i.setSize(p,m);for(var M=0;M<u.length;M++)if(e(u[M],i,x),l&&d===-1)i.x+=p;else if(f&&v===-1)i.y+=m;else if(f&&!l){if(C+=m,i.y+=m,C===P&&(C=0,E+=p,i.y=S,i.x+=p,E===A))break}else if(E+=p,i.x+=p,E===A&&(E=0,C+=m,i.x=T,i.y+=m,C===P))break;return u};h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=2,s={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a,n,i,r){return a===void 0&&(a=1),n===void 0?this.alpha=a:(this._alphaTL=e(a,0,1),this._alphaTR=e(n,0,1),this._alphaBL=e(i,0,1),this._alphaBR=e(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(a){var n=e(a,0,1);this._alpha=n,this._alphaTL=n,this._alphaTR=n,this._alphaBL=n,this._alphaBR=n,n===0?this.renderFlags&=~c:this.renderFlags|=c}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(a){var n=e(a,0,1);this._alphaTL=n,n!==0&&(this.renderFlags|=c)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(a){var n=e(a,0,1);this._alphaTR=n,n!==0&&(this.renderFlags|=c)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(a){var n=e(a,0,1);this._alphaBL=n,n!==0&&(this.renderFlags|=c)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(a){var n=e(a,0,1);this._alphaBR=n,n!==0&&(this.renderFlags|=c)}}};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,c){return this.width=e,this.height=c,this},setDisplaySize:function(e,c){return this.displayWidth=e,this.displayHeight=c,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={texture:null,frame:null,isCropped:!1,setCrop:function(e,c,s,a){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,c,s,a,this.flipX,this.flipY);else{var n=e;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,c){return this.flipX=e,this.flipY=c,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=t(308),s=t(3),a={prepareBoundsOutput:function(n,i){if(i===void 0&&(i=!1),this.rotation!==0&&c(n,this.x,this.y,this.rotation),i&&this.parentContainer){var r=this.parentContainer.getBoundsTransformMatrix();r.transformPoint(n.x,n.y,n)}return n},getCenter:function(n){return n===void 0&&(n=new s),n.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,n.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,n},getTopLeft:function(n,i){return n||(n=new s),n.x=this.x-this.displayWidth*this.originX,n.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(n,i)},getTopCenter:function(n,i){return n||(n=new s),n.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,n.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(n,i)},getTopRight:function(n,i){return n||(n=new s),n.x=this.x-this.displayWidth*this.originX+this.displayWidth,n.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(n,i)},getLeftCenter:function(n,i){return n||(n=new s),n.x=this.x-this.displayWidth*this.originX,n.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(n,i)},getRightCenter:function(n,i){return n||(n=new s),n.x=this.x-this.displayWidth*this.originX+this.displayWidth,n.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(n,i)},getBottomLeft:function(n,i){return n||(n=new s),n.x=this.x-this.displayWidth*this.originX,n.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(n,i)},getBottomCenter:function(n,i){return n||(n=new s),n.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,n.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(n,i)},getBottomRight:function(n,i){return n||(n=new s),n.x=this.x-this.displayWidth*this.originX+this.displayWidth,n.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(n,i)},getBounds:function(n){n===void 0&&(n=new e);var i,r,u,o,l,f,d,v;if(this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(n),p.transformPoint(n.x,n.y,n),i=n.x,r=n.y,this.getTopRight(n),p.transformPoint(n.x,n.y,n),u=n.x,o=n.y,this.getBottomLeft(n),p.transformPoint(n.x,n.y,n),l=n.x,f=n.y,this.getBottomRight(n),p.transformPoint(n.x,n.y,n),d=n.x,v=n.y}else this.getTopLeft(n),i=n.x,r=n.y,this.getTopRight(n),u=n.x,o=n.y,this.getBottomLeft(n),l=n.x,f=n.y,this.getBottomRight(n),d=n.x,v=n.y;return n.x=Math.min(i,u,l,d),n.y=Math.min(r,o,f,v),n.width=Math.max(i,u,l,d)-n.x,n.height=Math.max(r,o,f,v)-n.y,n}};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="blur"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="contextlost"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="contextrestored"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="focus"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="hidden"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postrender"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="poststep"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prestep"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="ready"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="step"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="visible"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postrender"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="render"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resize"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,c){return e===void 0&&(e=.5),c===void 0&&(c=e),this.originX=e,this.originY=c,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,c){return e===void 0&&(e=0),c===void 0&&(c=e),this.displayOriginX=e,this.displayOriginY=c,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(36),c=t(99),s=t(6),a=t(100),n=t(3),i={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(r,u){u===void 0&&(u=this.pathConfig);var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this.path=r,u&&this.startFollow(u),this},setRotateToPath:function(r,u){return u===void 0&&(u=0),this.rotateToPath=r,this.pathRotationOffset=u,this},isFollowing:function(){var r=this.pathTween;return r&&r.isPlaying()},startFollow:function(r,u){r===void 0&&(r={}),u===void 0&&(u=0);var o=this.pathTween;o&&o.isPlaying()&&o.stop(),typeof r=="number"&&(r={duration:r}),r.from=s(r,"from",0),r.to=s(r,"to",1);var l=c(r,"positionOnPath",!1);this.rotateToPath=c(r,"rotateToPath",!1),this.pathRotationOffset=s(r,"rotationOffset",0);var f=s(r,"startAt",u);if(f&&(r.onStart=function(v){var p=v.data[0];p.progress=f,p.elapsed=p.duration*f;var m=p.ease(p.progress);p.current=p.start+(p.end-p.start)*m,p.target[p.key]=p.current}),this.pathOffset||(this.pathOffset=new n(this.x,this.y)),this.pathVector||(this.pathVector=new n),this.pathDelta||(this.pathDelta=new n),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(r),this.path.getStartPoint(this.pathOffset),l&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var d=this.path.getPoint(.1);this.rotation=Math.atan2(d.y-this.y,d.x-this.x)+e(this.pathRotationOffset)}return this.pathConfig=r,this},pauseFollow:function(){var r=this.pathTween;return r&&r.isPlaying()&&r.pause(),this},resumeFollow:function(){var r=this.pathTween;return r&&r.isPaused()&&r.resume(),this},stopFollow:function(){var r=this.pathTween;return r&&r.isPlaying()&&r.stop(),this},pathUpdate:function(){var r=this.pathTween;if(r){var u=r.data[0],o=this.pathDelta,l=this.pathVector;if(o.copy(l).negate(),u.state===a.COMPLETE){this.path.getPoint(1,l),o.add(l),l.add(this.pathOffset),this.setPosition(l.x,l.y);return}else if(u.state!==a.PLAYING_FORWARD&&u.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(r.getValue(),l),o.add(l),l.add(this.pathOffset);var f=this.x,d=this.y;this.setPosition(l.x,l.y);var v=this.x-f,p=this.y-d;if(v===0&&p===0)return;if(u.state!==this._prevDirection){this._prevDirection=u.state;return}this.rotateToPath&&(this.rotation=Math.atan2(p,v)+e(this.pathRotationOffset))}}};h.exports=i},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){return e===void 0&&(e=this.frame),this.width=e.realWidth,this.height=e.realHeight,this},setSize:function(e,c){return this.width=e,this.height=c,this},setDisplaySize:function(e,c){return this.displayWidth=e,this.displayHeight=c,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,e={texture:null,frame:null,isCropped:!1,setTexture:function(c,s){return this.texture=this.scene.sys.textures.get(c),this.setFrame(s)},setFrame:function(c,s,a){return s===void 0&&(s=!0),a===void 0&&(a=!0),this.frame=this.texture.get(c),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&s&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,e={texture:null,frame:null,isCropped:!1,setCrop:function(c,s,a,n){if(c===void 0)this.isCropped=!1;else if(this.frame){if(typeof c=="number")this.frame.setCropUVs(this._crop,c,s,a,n,this.flipX,this.flipY);else{var i=c;this.frame.setCropUVs(this._crop,i.x,i.y,i.width,i.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(c,s){return this.texture=this.scene.sys.textures.get(c),this.setFrame(s)},setFrame:function(c,s,a){return s===void 0&&(s=!0),a===void 0&&(a=!0),this.frame=this.texture.get(c),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&s&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,c,s,a){return e===void 0&&(e=16777215),c===void 0&&(c=e,s=e,a=e),this.tintTopLeft=e,this.tintTopRight=c,this.tintBottomLeft=s,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function(e,c,s,a){return this.setTint(e,c,s,a),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="changedata"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="changedata-"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removedata"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="setdata"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addedtoscene"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removedfromscene"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="created"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="error"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loop"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="play"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="seeked"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="seeking"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="timeout"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="unlocked"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addedtoscene"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="create"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postupdate"},function(h,g){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="preupdate"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="ready"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removedfromscene"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="render"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="shutdown"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="sleep"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitioncomplete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitioninit"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitionout"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitionstart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitionwake"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="wake"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),c=function(s,a,n,i,r){return e(s,"alpha",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),c=function(s,a,n,i,r){return e(s,"x",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),c=function(s,a,n,i,r,u,o){return n==null&&(n=a),e(s,"x",a,i,u,o),e(s,"y",n,r,u,o)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),c=function(s,a,n,i,r){return e(s,"y",a,n,i,r)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s===void 0&&(s=0),a===void 0&&(a=6.28);for(var n=s,i=(a-s)/e.length,r=0;r<e.length;r++)e[r].x=c.x+c.radius*Math.cos(n),e[r].y=c.y+c.radius*Math.sin(n),n+=i;return e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s===void 0&&(s=0),a===void 0&&(a=6.28);for(var n=s,i=(a-s)/e.length,r=c.width/2,u=c.height/2,o=0;o<e.length;o++)e[o].x=c.x+r*Math.cos(n),e[o].y=c.y+u*Math.sin(n),n+=i;return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(172),c=function(s,a){for(var n=e(a,s.length),i=0;i<s.length;i++){var r=s[i],u=n[i];r.x=u.x,r.y=u.y}return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(316),c=t(178),s=t(179),a=function(n,i,r){r===void 0&&(r=0);var u=e(i,!1,n.length);r>0?c(u,r):r<0&&s(u,Math.abs(r));for(var o=0;o<n.length;o++)n[o].x=u[o].x,n[o].y=u[o].y;return n};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(317),c=function(s,a,n){var i=e({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n),r=e({x1:a.x2,y1:a.y2,x2:a.x3,y2:a.y3},n),u=e({x1:a.x3,y1:a.y3,x2:a.x1,y2:a.y1},n);i.pop(),r.pop(),u.pop(),i=i.concat(r,u);for(var o=i.length/s.length,l=0,f=0;f<s.length;f++){var d=s[f],v=i[Math.floor(l)];d.x=v.x,d.y=v.y,l+=o}return s};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){for(var a=0;a<e.length;a++){var n=e[a];n.anims&&n.anims.play(c,s)}return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(170),c=function(s,a){for(var n=0;n<s.length;n++)e(a,s[n]);return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(180),c=function(s,a){for(var n=0;n<s.length;n++)e(a,s[n]);return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(173),c=function(s,a){for(var n=0;n<s.length;n++)e(a,s[n]);return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(174),c=function(s,a){for(var n=0;n<s.length;n++)e(a,s[n]);return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(181),c=function(s,a){for(var n=0;n<s.length;n++)e(a,s[n]);return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),c=function(s,a,n,i,r){return e(s,"rotation",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(182),c=t(50),s=function(a,n,i){for(var r=n.x,u=n.y,o=0;o<a.length;o++){var l=a[o];e(l,r,u,i,Math.max(1,c(l.x,l.y,r,u)))}return a};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(182),c=function(s,a,n,i){var r=a.x,u=a.y;if(i===0)return s;for(var o=0;o<s.length;o++)e(s[o],r,u,n,i);return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),c=function(s,a,n,i,r){return e(s,"scaleX",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),c=function(s,a,n,i,r,u,o){return n==null&&(n=a),e(s,"scaleX",a,i,u,o),e(s,"scaleY",n,r,u,o)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),c=function(s,a,n,i,r){return e(s,"scaleY",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r){return e(s,"alpha",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i){return e(s,"blendMode",a,0,n,i)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r){return e(s,"depth",a,n,i,r)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){for(var a=0;a<e.length;a++)e[a].setInteractive(c,s);return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r,u,o){return n==null&&(n=a),e(s,"originX",a,i,u,o),e(s,"originY",n,r,u,o),s.forEach(function(l){l.updateDisplayOrigin()}),s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r){return e(s,"rotation",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r,u,o){return n==null&&(n=a),e(s,"scaleX",a,i,u,o),e(s,"scaleY",n,r,u,o)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r){return e(s,"scaleX",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r){return e(s,"scaleY",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r,u,o){return n==null&&(n=a),e(s,"scrollFactorX",a,i,u,o),e(s,"scrollFactorY",n,r,u,o)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r){return e(s,"scrollFactorX",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r){return e(s,"scrollFactorY",a,n,i,r)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n){for(var i=0;i<e.length;i++)e[i].setTint(c,s,a,n);return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i){return e(s,"visible",a,0,n,i)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r){return e(s,"x",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r,u,o){return n==null&&(n=a),e(s,"x",a,i,u,o),e(s,"y",n,r,u,o)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),c=function(s,a,n,i,r){return e(s,"y",a,n,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),c=function(s,a,n,i,r){i===void 0&&(i=0),r===void 0&&(r=new e);var u,o;if(s.length>1){var l,f,d,v;if(i===0){var p=s.length-1;for(u=s[p].x,o=s[p].y,l=p-1;l>=0;l--)v=s[l],f=v.x,d=v.y,v.x=u,v.y=o,u=f,o=d;s[p].x=a,s[p].y=n}else{for(u=s[0].x,o=s[0].y,l=1;l<s.length;l++)v=s[l],f=v.x,d=v.y,v.x=u,v.y=o,u=f,o=d;s[0].x=a,s[0].y=n}}else u=s[0].x,o=s[0].y,s[0].x=a,s[0].y=n;return r.x=u,r.y=o,r};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(131),c=function(s){return e(s)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(183),c=function(s,a,n,i,r){r===void 0&&(r=!1);var u=Math.abs(i-n)/s.length,o;if(r)for(o=0;o<s.length;o++)s[o][a]+=e(o*u,n,i);else for(o=0;o<s.length;o++)s[o][a]=e(o*u,n,i);return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(184),c=function(s,a,n,i,r){r===void 0&&(r=!1);var u=Math.abs(i-n)/s.length,o;if(r)for(o=0;o<s.length;o++)s[o][a]+=e(o*u,n,i);else for(o=0;o<s.length;o++)s[o][a]=e(o*u,n,i);return s};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n){n===void 0&&(n=!1);var i=Math.abs(a-s)/e.length,r;if(n)for(r=0;r<e.length;r++)e[r][c]+=r*i+s;else for(r=0;r<e.length;r++)e[r][c]=r*i+s;return e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var c=0;c<e.length;c++)e[c].visible=!e[c].visible;return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),c=function(s,a,n){n===void 0&&(n=0);for(var i=0;i<s.length;i++){var r=s[i];r.x=e(r.x,a.left-n,a.right+n),r.y=e(r.y,a.top-n,a.bottom+n)}return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Animation:t(185),AnimationFrame:t(319),AnimationManager:t(321),AnimationState:t(164),Events:t(132)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="add"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationcomplete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationcomplete-"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationrepeat"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationrestart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationstart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationstop"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationupdate"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pauseall"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="remove"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resumeall"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BaseCache:t(323),CacheManager:t(325),Events:t(324)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="add"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="remove"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Controls:t(739),Scene2D:t(742)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={FixedKeyControl:t(740),SmoothedKeyControl:t(741)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(6),s=new e({initialize:function(n){this.camera=c(n,"camera",null),this.left=c(n,"left",null),this.right=c(n,"right",null),this.up=c(n,"up",null),this.down=c(n,"down",null),this.zoomIn=c(n,"zoomIn",null),this.zoomOut=c(n,"zoomOut",null),this.zoomSpeed=c(n,"zoomSpeed",.01),this.minZoom=c(n,"minZoom",.001),this.maxZoom=c(n,"maxZoom",1e3),this.speedX=0,this.speedY=0;var i=c(n,"speed",null);typeof i=="number"?(this.speedX=i,this.speedY=i):(this.speedX=c(n,"speed.x",0),this.speedY=c(n,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(this.active){a===void 0&&(a=1);var n=this.camera;this.up&&this.up.isDown?n.scrollY-=this.speedY*a|0:this.down&&this.down.isDown&&(n.scrollY+=this.speedY*a|0),this.left&&this.left.isDown?n.scrollX-=this.speedX*a|0:this.right&&this.right.isDown&&(n.scrollX+=this.speedX*a|0),this.zoomIn&&this.zoomIn.isDown?(n.zoom-=this.zoomSpeed,n.zoom<this.minZoom&&(n.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(n.zoom+=this.zoomSpeed,n.zoom>this.maxZoom&&(n.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(6),s=new e({initialize:function(n){this.camera=c(n,"camera",null),this.left=c(n,"left",null),this.right=c(n,"right",null),this.up=c(n,"up",null),this.down=c(n,"down",null),this.zoomIn=c(n,"zoomIn",null),this.zoomOut=c(n,"zoomOut",null),this.zoomSpeed=c(n,"zoomSpeed",.01),this.minZoom=c(n,"minZoom",.001),this.maxZoom=c(n,"maxZoom",1e3),this.accelX=0,this.accelY=0;var i=c(n,"acceleration",null);typeof i=="number"?(this.accelX=i,this.accelY=i):(this.accelX=c(n,"acceleration.x",0),this.accelY=c(n,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=c(n,"drag",null);typeof r=="number"?(this.dragX=r,this.dragY=r):(this.dragX=c(n,"drag.x",0),this.dragY=c(n,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var u=c(n,"maxSpeed",null);typeof u=="number"?(this.maxSpeedX=u,this.maxSpeedY=u):(this.maxSpeedX=c(n,"maxSpeed.x",0),this.maxSpeedY=c(n,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(this.active){a===void 0&&(a=1);var n=this.camera;this._speedX>0?(this._speedX-=this.dragX*a,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*a,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*a,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*a,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(n.scrollX-=this._speedX*a|0),this._speedY!==0&&(n.scrollY-=this._speedY*a|0),this._zoom!==0&&(n.zoom+=this._zoom,n.zoom<this.minZoom?n.zoom=this.minZoom:n.zoom>this.maxZoom&&(n.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Camera:t(326),BaseCamera:t(133),CameraManager:t(799),Effects:t(333),Events:t(37)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="cameradestroy"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeincomplete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeinstart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeoutcomplete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeoutstart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="cameraflashcomplete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="cameraflashstart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="followupdate"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerapancomplete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerapanstart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postrender"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerarotatecomplete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerarotatestart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerashakecomplete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerashakestart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerazoomcomplete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerazoomstart"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=t(0),s=t(37),a=new c({initialize:function(i){this.camera=i,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,i,r,u,o,l,f,d){if(n===void 0&&(n=!0),i===void 0&&(i=1e3),r===void 0&&(r=0),u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l=!1),f===void 0&&(f=null),d===void 0&&(d=this.camera.scene),!l&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=i,this.direction=n,this.progress=0,this.red=r,this.green=u,this.blue=o,this.alpha=n?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=d;var v=n?s.FADE_OUT_START:s.FADE_IN_START;return this.camera.emit(v,this.camera,this,i,r,u,o),this.camera},update:function(n,i){this.isRunning&&(this._elapsed+=i,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(n){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera;return n.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",n.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function(n,i){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera,u=this.red/255,o=this.green/255,l=this.blue/255;return n.drawFillRect(r.x,r.y,r.width,r.height,i(l,o,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var n=this.direction?s.FADE_OUT_COMPLETE:s.FADE_IN_COMPLETE;this.camera.emit(n,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=t(0),s=t(37),a=new c({initialize:function(i){this.camera=i,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,i,r,u,o,l,f){return n===void 0&&(n=250),i===void 0&&(i=255),r===void 0&&(r=255),u===void 0&&(u=255),o===void 0&&(o=!1),l===void 0&&(l=null),f===void 0&&(f=this.camera.scene),!o&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,this.red=i,this.green=r,this.blue=u,this.alpha=1,this._elapsed=0,this._onUpdate=l,this._onUpdateScope=f,this.camera.emit(s.FLASH_START,this.camera,this,n,i,r,u),this.camera)},update:function(n,i){this.isRunning&&(this._elapsed+=i,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(n){if(!this.isRunning)return!1;var i=this.camera;return n.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",n.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function(n,i){if(!this.isRunning)return!1;var r=this.camera,u=this.red/255,o=this.green/255,l=this.blue/255;return n.drawFillRect(r.x,r.y,r.width,r.height,i(l,o,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=t(0),s=t(134),a=t(37),n=t(3),i=new c({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=new n,this.current=new n,this.destination=new n,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,u,o,l,f,d,v){o===void 0&&(o=1e3),l===void 0&&(l=s.Linear),f===void 0&&(f=!1),d===void 0&&(d=null),v===void 0&&(v=this.camera.scene);var p=this.camera;return!f&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source.set(p.scrollX,p.scrollY),this.destination.set(r,u),p.getScroll(r,u,this.current),typeof l=="string"&&s.hasOwnProperty(l)?this.ease=s[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=v,this.camera.emit(a.PAN_START,this.camera,this,o,r,u)),p},update:function(r,u){if(this.isRunning){this._elapsed+=u;var o=e(this._elapsed/this.duration,0,1);this.progress=o;var l=this.camera;if(this._elapsed<this.duration){var f=this.ease(o);l.getScroll(this.destination.x,this.destination.y,this.current);var d=this.source.x+(this.current.x-this.source.x)*f,v=this.source.y+(this.current.y-this.source.y)*f;l.setScroll(d,v),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,o,d,v)}else l.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,o,l.scrollX,l.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});h.exports=i},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c===void 0&&(c=1.70158),e*e*((c+1)*e-c)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c===void 0&&(c=1.70158),--e*e*((c+1)*e+c)+1};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c===void 0&&(c=1.70158);var s=c*1.525;return(e*=2)<1?.5*(e*e*((s+1)*e-s)):.5*((e-=2)*e*((s+1)*e+s)+2)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c=!1;return e<.5?(e=1-e*2,c=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,c?(1-e)*.5:e*.5+.5};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1-Math.sqrt(1-e*e)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt(1- --e*e)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return--e*e*e+1};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(c===void 0&&(c=.1),s===void 0&&(s=.1),e===0)return 0;if(e===1)return 1;var a=s/4;return c<1?c=1:a=s*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*(e-=1))*Math.sin((e-a)*(2*Math.PI)/s))};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(c===void 0&&(c=.1),s===void 0&&(s=.1),e===0)return 0;if(e===1)return 1;var a=s/4;return c<1?c=1:a=s*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*e)*Math.sin((e-a)*(2*Math.PI)/s)+1};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(c===void 0&&(c=.1),s===void 0&&(s=.1),e===0)return 0;if(e===1)return 1;var a=s/4;return c<1?c=1:a=s*Math.asin(1/c)/(2*Math.PI),(e*=2)<1?-.5*(c*Math.pow(2,10*(e-=1))*Math.sin((e-a)*(2*Math.PI)/s)):c*Math.pow(2,-10*(e-=1))*Math.sin((e-a)*(2*Math.PI)/s)*.5+1};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.pow(2,10*(e-1))-.001};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1-Math.pow(2,-10*e)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*(2-e)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e*e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1- --e*e*e*e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e*e*e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return--e*e*e*e*e+1};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c===void 0&&(c=1),e<=0?0:e>=1?1:((c*e|0)+1)*(1/c)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=t(0),s=t(37),a=t(3),n=new c({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(i,r,u,o,l){return i===void 0&&(i=100),r===void 0&&(r=.05),u===void 0&&(u=!1),o===void 0&&(o=null),l===void 0&&(l=this.camera.scene),!u&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=i,this.progress=0,typeof r=="number"?this.intensity.set(r):this.intensity.set(r.x,r.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=o,this._onUpdateScope=l,this.camera.emit(s.SHAKE_START,this.camera,this,i,r),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(i,r){if(this.isRunning)if(this._elapsed+=r,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var u=this.intensity,o=this.camera.width,l=this.camera.height,f=this.camera.zoom;this._offsetX=(Math.random()*u.x*o*2-u.x*o)*f,this._offsetY=(Math.random()*u.y*l*2-u.y*l)*f,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});h.exports=n},function(h,g,t){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var e=t(18),c=t(0),s=t(37),a=t(134),n=new c({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(i,r,u,o,l,f,d){u===void 0&&(u=1e3),o===void 0&&(o=a.Linear),l===void 0&&(l=!1),f===void 0&&(f=null),d===void 0&&(d=this.camera.scene),r===void 0&&(r=!1),this.shortestPath=r;var v=i;i<0?(v=-1*i,this.clockwise=!1):this.clockwise=!0;var p=360*Math.PI/180;v=v-Math.floor(v/p)*p;var m=this.camera;if(!l&&this.isRunning)return m;if(this.isRunning=!0,this.duration=u,this.progress=0,this.source=m.rotation,this.destination=v,typeof o=="string"&&a.hasOwnProperty(o)?this.ease=a[o]:typeof o=="function"&&(this.ease=o),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=d,this.shortestPath){var x=0,T=0;this.destination>this.source?x=Math.abs(this.destination-this.source):x=Math.abs(this.destination+p)-this.source,this.source>this.destination?T=Math.abs(this.source-this.destination):T=Math.abs(this.source+p)-this.destination,x<T?this.clockwise=!0:x>T&&(this.clockwise=!1)}return this.camera.emit(s.ROTATE_START,this.camera,this,u,v),m},update:function(i,r){if(this.isRunning){this._elapsed+=r;var u=e(this._elapsed/this.duration,0,1);this.progress=u;var o=this.camera;if(this._elapsed<this.duration){var l=this.ease(u);this.current=o.rotation;var f=0,d=360*Math.PI/180,v=this.destination,p=this.current;this.clockwise===!1&&(v=this.current,p=this.destination),v>=p?f=Math.abs(v-p):f=Math.abs(v+d)-p;var m=0;this.clockwise?m=o.rotation+f*l:m=o.rotation-f*l,o.rotation=m,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,u,m)}else o.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,u,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=t(0),s=t(134),a=t(37),n=new c({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,r,u,o,l,f){r===void 0&&(r=1e3),u===void 0&&(u=s.Linear),o===void 0&&(o=!1),l===void 0&&(l=null),f===void 0&&(f=this.camera.scene);var d=this.camera;return!o&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,this.source=d.zoom,this.destination=i,typeof u=="string"&&s.hasOwnProperty(u)?this.ease=s[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=l,this._onUpdateScope=f,this.camera.emit(a.ZOOM_START,this.camera,this,r,i)),d},update:function(i,r){this.isRunning&&(this._elapsed+=r,this.progress=e(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(326),c=t(0),s=t(2),a=t(24),n=t(57),i=t(104),r=t(20),u=new c({initialize:function(l){this.scene=l,this.systems=l.sys,this.roundPixels=l.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,l.sys.events.once(r.BOOT,this.boot,this),l.sys.events.on(r.START,this.start,this)},boot:function(){var o=this.systems;o.settings.cameras?this.fromJSON(o.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new e(0,0,o.scale.width,o.scale.height).setScene(this.scene),o.game.scale.on(i.RESIZE,this.onResize,this),this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){if(!this.main){var o=this.systems;o.settings.cameras?this.fromJSON(o.settings.cameras):this.add(),this.main=this.cameras[0]}var l=this.systems.events;l.on(r.UPDATE,this.update,this),l.once(r.SHUTDOWN,this.shutdown,this)},add:function(o,l,f,d,v,p){o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=this.scene.sys.scale.width),d===void 0&&(d=this.scene.sys.scale.height),v===void 0&&(v=!1),p===void 0&&(p="");var m=new e(o,l,f,d);return m.setName(p),m.setScene(this.scene),m.setRoundPixels(this.roundPixels),m.id=this.getNextID(),this.cameras.push(m),v&&(this.main=m),m},addExisting:function(o,l){l===void 0&&(l=!1);var f=this.cameras.indexOf(o);return f===-1?(o.id=this.getNextID(),o.setRoundPixels(this.roundPixels),this.cameras.push(o),l&&(this.main=o),o):null},getNextID:function(){for(var o=this.cameras,l=1,f=0;f<32;f++){for(var d=!1,v=0;v<o.length;v++){var p=o[v];if(p&&p.id===l){d=!0;continue}}if(d)l=l<<1;else return l}return 0},getTotal:function(o){o===void 0&&(o=!1);for(var l=0,f=this.cameras,d=0;d<f.length;d++){var v=f[d];(!o||o&&v.visible)&&l++}return l},fromJSON:function(o){Array.isArray(o)||(o=[o]);for(var l=this.scene.sys.scale.width,f=this.scene.sys.scale.height,d=0;d<o.length;d++){var v=o[d],p=s(v,"x",0),m=s(v,"y",0),x=s(v,"width",l),T=s(v,"height",f),S=this.add(p,m,x,T);S.name=s(v,"name",""),S.zoom=s(v,"zoom",1),S.rotation=s(v,"rotation",0),S.scrollX=s(v,"scrollX",0),S.scrollY=s(v,"scrollY",0),S.roundPixels=s(v,"roundPixels",!1),S.visible=s(v,"visible",!0);var E=s(v,"backgroundColor",!1);E&&S.setBackgroundColor(E);var C=s(v,"bounds",null);if(C){var A=s(C,"x",0),P=s(C,"y",0),M=s(C,"width",l),O=s(C,"height",f);S.setBounds(A,P,M,O)}}return this},getCamera:function(o){for(var l=this.cameras,f=0;f<l.length;f++)if(l[f].name===o)return l[f];return null},getCamerasBelowPointer:function(o){for(var l=this.cameras,f=o.x,d=o.y,v=[],p=0;p<l.length;p++){var m=l[p];m.visible&&m.inputEnabled&&n(m,f,d)&&v.unshift(m)}return v},remove:function(o,l){l===void 0&&(l=!0),Array.isArray(o)||(o=[o]);for(var f=0,d=this.cameras,v=0;v<o.length;v++){var p=d.indexOf(o[v]);p!==-1&&(l?d[p].destroy():d[p].renderList=[],d.splice(p,1),f++)}return!this.main&&d[0]&&(this.main=d[0]),f},render:function(o,l){for(var f=this.scene,d=this.cameras,v=0;v<this.cameras.length;v++){var p=d[v];if(p.visible&&p.alpha>0){p.preRender();var m=this.getVisibleChildren(l.getChildren(),p);o.render(f,m,p)}}},getVisibleChildren:function(o,l){for(var f=[],d=0;d<o.length;d++){var v=o[d];v.willRender(l)&&f.push(v)}return f},resetAll:function(){for(var o=0;o<this.cameras.length;o++)this.cameras[o].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(o,l){for(var f=0;f<this.cameras.length;f++)this.cameras[f].update(o,l)},onResize:function(o,l,f,d,v){for(var p=0;p<this.cameras.length;p++){var m=this.cameras[p];m._x===0&&m._y===0&&m._width===d&&m._height===v&&m.setSize(l.width,l.height)}},resize:function(o,l){for(var f=0;f<this.cameras.length;f++)this.cameras[f].setSize(o,l)},shutdown:function(){this.main=void 0;for(var o=0;o<this.cameras.length;o++)this.cameras[o].destroy();this.cameras=[];var l=this.systems.events;l.off(r.UPDATE,this.update,this),l.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});a.register("CameraManager",u,"cameras"),h.exports=u},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="enterfullscreen"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="fullscreenfailed"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="fullscreenunsupported"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="leavefullscreen"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="orientationchange"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resize"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Config:t(346),CreateRenderer:t(366),DebugHeader:t(384),Events:t(22),TimeStep:t(385),VisibilityHandler:t(387)}},function(h,g){var t=h.exports={},e,c;function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=s}catch{e=s}try{typeof clearTimeout=="function"?c=clearTimeout:c=a}catch{c=a}})();function n(m){if(e===setTimeout)return setTimeout(m,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(m,0);try{return e(m,0)}catch{try{return e.call(null,m,0)}catch{return e.call(this,m,0)}}}function i(m){if(c===clearTimeout)return clearTimeout(m);if((c===a||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(m);try{return c(m)}catch{try{return c.call(null,m)}catch{return c.call(this,m)}}}var r=[],u=!1,o,l=-1;function f(){!u||!o||(u=!1,o.length?r=o.concat(r):l=-1,r.length&&d())}function d(){if(!u){var m=n(f);u=!0;for(var x=r.length;x;){for(o=r,r=[];++l<x;)o&&o[l].run();l=-1,x=r.length}o=null,u=!1,i(m)}}t.nextTick=function(m){var x=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)x[T-1]=arguments[T];r.push(new v(m,x)),r.length===1&&!u&&n(d)};function v(m,x){this.fun=m,this.array=x}v.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function p(){}t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(m){return[]},t.binding=function(m){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(m){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(136),c={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function s(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(c.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(c.mspointer=!0),navigator.getGamepads&&(c.gamepads=!0),"onwheel"in window||e.ie&&"WheelEvent"in window?c.wheelEvent="wheel":"onmousewheel"in window?c.wheelEvent="mousewheel":e.firefox&&"MouseScrollEvent"in window&&(c.wheelEvent="DOMMouseScroll")),c}h.exports=s()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(136),c={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function s(){if(typeof importScripts=="function")return c;c.audioData=!!window.Audio,c.webAudio=!!(window.AudioContext||window.webkitAudioContext);var a=document.createElement("audio"),n=!!a.canPlayType;try{if(n&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(c.ogg=!0),(a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||a.canPlayType("audio/opus;").replace(/^no$/,""))&&(c.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(c.mp3=!0),a.canPlayType("audio/wav").replace(/^no$/,"")&&(c.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(c.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(c.webm=!0),a.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(e.edge)c.dolby=!0;else if(e.safari&&e.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10),r=parseInt(RegExp.$2,10);(i===10&&r>=11||i>10)&&(c.dolby=!0)}}}catch{}return c}h.exports=s()},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function e(){if(typeof importScripts=="function")return t;var c=document.createElement("video"),s=!!c.canPlayType;try{s&&(c.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(t.ogg=!0),c.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.h264=!0,t.mp4=!0),c.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(t.webm=!0),c.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(t.vp9=!0),c.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.hls=!0))}catch{}return t}h.exports=e()},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return t;var c,s="Fullscreen",a="FullScreen",n=["request"+s,"request"+a,"webkitRequest"+s,"webkitRequest"+a,"msRequest"+s,"msRequest"+a,"mozRequest"+a,"mozRequest"+s];for(c=0;c<n.length;c++)if(document.documentElement[n[c]]){t.available=!0,t.request=n[c];break}var i=["cancel"+a,"exit"+s,"webkitCancel"+a,"webkitExit"+s,"msCancel"+a,"msExit"+s,"mozCancel"+a,"mozExit"+s];if(t.available){for(c=0;c<i.length;c++)if(document[i[c]]){t.cancel=i[c];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}h.exports=e()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Between:t(349),BetweenPoints:t(350),BetweenPointsY:t(813),BetweenY:t(814),CounterClockwise:t(815),Normalize:t(351),Random:t(816),RandomDegrees:t(817),Reverse:t(818),RotateTo:t(819),ShortestBetween:t(820),Wrap:t(269),WrapDegrees:t(270)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return Math.atan2(c.x-e.x,c.y-e.y)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){return Math.atan2(s-e,a-c)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),c=function(s){return s>Math.PI&&(s-=e.PI2),Math.abs(((s+e.TAU)%e.PI2-e.PI2)%e.PI2)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(137),c=function(){return e(-Math.PI,Math.PI)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(137),c=function(){return e(-180,180)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(351),c=function(s){return e(s+Math.PI)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),c=function(s,a,n){return n===void 0&&(n=.05),s===a||(Math.abs(a-s)<=n||Math.abs(a-s)>=e.PI2-n?s=a:(Math.abs(a-s)>Math.PI&&(a<s?a+=e.PI2:a-=e.PI2),a>s?s+=n:a<s&&(s-=n))),s};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=c-e;if(s===0)return 0;var a=Math.floor((s- -180)/360);return s-a*360};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Between:t(50),BetweenPoints:t(352),BetweenPointsSquared:t(822),Chebyshev:t(823),Power:t(824),Snake:t(825),Squared:t(353)}},function(h,g){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.x-c.x,a=e.y-c.y;return s*s+a*a};h.exports=t},function(h,g){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){return Math.max(Math.abs(e-s),Math.abs(c-a))};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n){return n===void 0&&(n=2),Math.sqrt(Math.pow(s-e,n)+Math.pow(a-c,n))};h.exports=t},function(h,g){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){return Math.abs(e-s)+Math.abs(c-a)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Back:t(334),Bounce:t(335),Circular:t(336),Cubic:t(337),Elastic:t(338),Expo:t(339),Linear:t(340),Quadratic:t(341),Quartic:t(342),Quintic:t(343),Sine:t(344),Stepped:t(345)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Ceil:t(828),Equal:t(124),Floor:t(829),GreaterThan:t(354),LessThan:t(355)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c===void 0&&(c=1e-4),Math.ceil(e-c)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c===void 0&&(c=1e-4),Math.floor(e+c)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Bezier:t(831),CatmullRom:t(832),CubicBezier:t(358),Linear:t(833),QuadraticBezier:t(359),SmoothStep:t(360),SmootherStep:t(834)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(356),c=function(s,a){for(var n=0,i=s.length-1,r=0;r<=i;r++)n+=Math.pow(1-a,i-r)*Math.pow(a,r)*s[r]*e(i,r);return n};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(194),c=function(s,a){var n=s.length-1,i=n*a,r=Math.floor(i);return s[0]===s[n]?(a<0&&(r=Math.floor(i=n*(1+a))),e(i-r,s[(r-1+n)%n],s[r],s[(r+1)%n],s[(r+2)%n])):a<0?s[0]-(e(-i,s[0],s[0],s[1],s[1])-s[0]):a>1?s[n]-(e(i-n,s[n],s[n],s[n-1],s[n-1])-s[n]):e(i-r,s[r?r-1:0],s[r],s[n<r+1?n:r+1],s[n<r+2?n:r+2])};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(135),c=function(s,a){var n=s.length-1,i=n*a,r=Math.floor(i);return a<0?e(s[0],s[1],i):a>1?e(s[n],s[n-1],n-i):e(s[r],s[r+1>n?n:r+1],i-r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(183),c=function(s,a,n){return a+(n-a)*e(s,0,1)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={GetNext:t(361),IsSize:t(138),IsValue:t(836)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>0&&(e&e-1)===0};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Ceil:t(139),Floor:t(76),To:t(838)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){return s===void 0&&(s=0),c===0?e:(e-=s,e=c*Math.round(e/c),a?(s+e)/c:s+e)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=new e({initialize:function(a){a===void 0&&(a=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],a&&this.init(a)},rnd:function(){var s=2091639*this.s0+this.c*23283064365386963e-26;return this.c=s|0,this.s0=this.s1,this.s1=this.s2,this.s2=s-this.c,this.s2},hash:function(s){var a,n=this.n;s=s.toString();for(var i=0;i<s.length;i++)n+=s.charCodeAt(i),a=.02519603282416938*n,n=a>>>0,a-=n,a*=n,n=a>>>0,a-=n,n+=a*4294967296;return this.n=n,(n>>>0)*23283064365386963e-26},init:function(s){typeof s=="string"?this.state(s):this.sow(s)},sow:function(s){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!s)for(var a=0;a<s.length&&s[a]!=null;a++){var n=s[a];this.s0-=this.hash(n),this.s0+=~~(this.s0<0),this.s1-=this.hash(n),this.s1+=~~(this.s1<0),this.s2-=this.hash(n),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(s,a){return Math.floor(this.realInRange(0,a-s+1)+s)},between:function(s,a){return Math.floor(this.realInRange(0,a-s+1)+s)},realInRange:function(s,a){return this.frac()*(a-s)+s},normal:function(){return 1-2*this.frac()},uuid:function(){var s="",a="";for(a=s="";s++<36;a+=~s%5|s*3&4?(s^15?8^this.frac()*(s^20?16:4):4).toString(16):"-");return a},pick:function(s){return s[this.integerInRange(0,s.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(s){return s[~~(Math.pow(this.frac(),2)*(s.length-1)+.5)]},timestamp:function(s,a){return this.realInRange(s||9466848e5,a||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(s){return typeof s=="string"&&s.match(/^!rnd/)&&(s=s.split(","),this.c=parseFloat(s[1]),this.s0=parseFloat(s[2]),this.s1=parseFloat(s[3]),this.s2=parseFloat(s[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(s){for(var a=s.length-1,n=a;n>0;n--){var i=Math.floor(this.frac()*(n+1)),r=s[i];s[i]=s[n],s[n]=r}return s}});h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var c=0,s=0;s<e.length;s++)c+=+e[s];return c/e.length};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){c===void 0&&(c=0),s===void 0&&(s=10);var a=Math.pow(s,-c);return Math.ceil(e*a)/a};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return Math.abs(e-c)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=t(0),s=t(69),a=t(1),n=new s,i=new c({initialize:function r(u,o,l,f){u===void 0&&(u=0),o===void 0&&(o=0),l===void 0&&(l=0),f===void 0&&(f=r.DefaultOrder),this._x=u,this._y=o,this._z=l,this._order=f,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(r){this._x=r,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(r){this._y=r,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(r){this._z=r,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(r){this._order=r,this.onChangeCallback(this)}},set:function(r,u,o,l){return l===void 0&&(l=this._order),this._x=r,this._y=u,this._z=o,this._order=l,this.onChangeCallback(this),this},copy:function(r){return this.set(r.x,r.y,r.z,r.order)},setFromQuaternion:function(r,u,o){return u===void 0&&(u=this._order),o===void 0&&(o=!1),n.fromQuat(r),this.setFromRotationMatrix(n,u,o)},setFromRotationMatrix:function(r,u,o){u===void 0&&(u=this._order),o===void 0&&(o=!1);var l=r.val,f=l[0],d=l[4],v=l[8],p=l[1],m=l[5],x=l[9],T=l[2],S=l[6],E=l[10],C=0,A=0,P=0,M=.99999;switch(u){case"XYZ":{A=Math.asin(e(v,-1,1)),Math.abs(v)<M?(C=Math.atan2(-x,E),P=Math.atan2(-d,f)):C=Math.atan2(S,m);break}case"YXZ":{C=Math.asin(-e(x,-1,1)),Math.abs(x)<M?(A=Math.atan2(v,E),P=Math.atan2(p,m)):A=Math.atan2(-T,f);break}case"ZXY":{C=Math.asin(e(S,-1,1)),Math.abs(S)<M?(A=Math.atan2(-T,E),P=Math.atan2(-d,m)):P=Math.atan2(p,f);break}case"ZYX":{A=Math.asin(-e(T,-1,1)),Math.abs(T)<M?(C=Math.atan2(S,E),P=Math.atan2(p,f)):P=Math.atan2(-d,m);break}case"YZX":{P=Math.asin(e(p,-1,1)),Math.abs(p)<M?(C=Math.atan2(-x,m),A=Math.atan2(-T,f)):A=Math.atan2(v,E);break}case"XZY":{P=Math.asin(-e(d,-1,1)),Math.abs(d)<M?(C=Math.atan2(S,m),A=Math.atan2(v,f)):C=Math.atan2(-x,E);break}}return this._x=C,this._y=A,this._z=P,this._order=u,o&&this.onChangeCallback(this),this}});i.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],i.DefaultOrder="XYZ",h.exports=i},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){c===void 0&&(c=0),s===void 0&&(s=10);var a=Math.pow(s,-c);return Math.floor(e*a)/a};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e/c/1e3};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e==parseFloat(e)?!(e%2):void 0};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===parseFloat(e)?!(e%2):void 0};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return Math.min(e+c,s)};h.exports=t},function(h,g){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c=e.length;if(c===0)return 0;e.sort(function(a,n){return a-n});var s=Math.floor(c/2);return c%2===0?(e[s]+e[s-1])/2:e[s]};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return Math.max(e-c,s)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s===void 0&&(s=c+1);var n=(e-c)/(s-c);return n>1?a!==void 0?(n=(a-e)/(a-s),n<0&&(n=0)):n=1:n<0&&(n=0),n};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c===void 0&&(c=1);var s=Math.random()*2*Math.PI;return e.x=Math.cos(s)*c,e.y=Math.sin(s)*c,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c===void 0&&(c=1);var s=Math.random()*2*Math.PI,a=Math.random()*2-1,n=Math.sqrt(1-a*a)*c;return e.x=Math.cos(s)*n,e.y=Math.sin(s)*n,e.z=a*c,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c===void 0&&(c=1),e.x=(Math.random()*2-1)*c,e.y=(Math.random()*2-1)*c,e.z=(Math.random()*2-1)*c,e.w=(Math.random()*2-1)*c,e};h.exports=t},function(h,g){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n){return e.x=c+n*Math.cos(a),e.y=s+n*Math.sin(a),e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){c===void 0&&(c=0),s===void 0&&(s=10);var a=Math.pow(s,-c);return Math.round(e*a)/a};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){c===void 0&&(c=1),s===void 0&&(s=1),a===void 0&&(a=1),a*=Math.PI/e;for(var n=[],i=[],r=0;r<e;r++)s-=c*a,c+=s*a,n[r]=s,i[r]=c;return{sin:i,cos:n,length:e}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),c=function(s,a,n,i){i===void 0&&(i=new e);var r=0,u=0,o=a*n;return s>0&&s<=o&&(s>a-1?(u=Math.floor(s/a),r=s-u*a):r=s),i.set(r,u)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return Math.abs(e-c)<=s};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),c=t(69),s=t(365),a=new c,n=new s,i=new e,r=function(u,o,l){return n.setAxisAngle(o,l),a.fromRotationTranslation(n,i.set(0,0,0)),u.transformMat4(a)};h.exports=r},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addtexture"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="onerror"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="onload"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="ready"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removetexture"},function(h,g){h.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelineafterflush"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinebeforeflush"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinebind"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelineboot"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinedestroy"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinerebind"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelineresize"},function(h,g){h.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(h,g){h.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={GenerateTexture:t(388),Palettes:t(889)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ARNE16:t(389),C64:t(890),CGA:t(891),JMP:t(892),MSX:t(893)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Path:t(895),MoveTo:t(393),CubicBezier:t(390),Curve:t(94),Ellipse:t(391),Line:t(392),QuadraticBezier:t(394),Spline:t(395)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(390),s=t(391),a=t(5),n=t(392),i=t(393),r=t(394),u=t(10),o=t(395),l=t(3),f=t(14),d=new e({initialize:function(p,m){p===void 0&&(p=0),m===void 0&&(m=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new l,this._tmpVec2A=new l,this._tmpVec2B=new l,typeof p=="object"?this.fromJSON(p):this.startPoint.set(p,m)},add:function(v){return this.curves.push(v),this},circleTo:function(v,p,m){return p===void 0&&(p=!1),this.ellipseTo(v,v,0,360,p,m)},closePath:function(){var v=this.curves[0].getPoint(0),p=this.curves[this.curves.length-1].getPoint(1);return v.equals(p)||this.curves.push(new n(p,v)),this},cubicBezierTo:function(v,p,m,x,T,S){var E=this.getEndPoint(),C,A,P;return v instanceof l?(C=v,A=p,P=m):(C=new l(m,x),A=new l(T,S),P=new l(v,p)),this.add(new c(E,C,A,P))},quadraticBezierTo:function(v,p,m,x){var T=this.getEndPoint(),S,E;return v instanceof l?(S=v,E=p):(S=new l(m,x),E=new l(v,p)),this.add(new r(T,S,E))},draw:function(v,p){for(var m=0;m<this.curves.length;m++){var x=this.curves[m];x.active&&x.draw(v,p)}return v},ellipseTo:function(v,p,m,x,T,S){var E=new s(0,0,v,p,m,x,T,S),C=this.getEndPoint(this._tmpVec2A),A=E.getStartPoint(this._tmpVec2B);return C.subtract(A),E.x=C.x,E.y=C.y,this.add(E)},fromJSON:function(v){this.curves=[],this.cacheLengths=[],this.startPoint.set(v.x,v.y),this.autoClose=v.autoClose;for(var p=0;p<v.curves.length;p++){var m=v.curves[p];switch(m.type){case"LineCurve":this.add(n.fromJSON(m));break;case"EllipseCurve":this.add(s.fromJSON(m));break;case"SplineCurve":this.add(o.fromJSON(m));break;case"CubicBezierCurve":this.add(c.fromJSON(m));break;case"QuadraticBezierCurve":this.add(r.fromJSON(m));break}}return this},getBounds:function(v,p){v===void 0&&(v=new u),p===void 0&&(p=16),v.x=Number.MAX_VALUE,v.y=Number.MAX_VALUE;for(var m=new u,x=f.MIN_SAFE_INTEGER,T=f.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var E=this.curves[S];E.active&&(E.getBounds(m,p),v.x=Math.min(v.x,m.x),v.y=Math.min(v.y,m.y),x=Math.max(x,m.right),T=Math.max(T,m.bottom))}return v.right=x,v.bottom=T,v},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var v=[],p=0,m=0;m<this.curves.length;m++)p+=this.curves[m].getLength(),v.push(p);return this.cacheLengths=v,v},getEndPoint:function(v){return v===void 0&&(v=new l),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,v):v.copy(this.startPoint),v},getLength:function(){var v=this.getCurveLengths();return v[v.length-1]},getPoint:function(v,p){p===void 0&&(p=new l);for(var m=v*this.getLength(),x=this.getCurveLengths(),T=0;T<x.length;){if(x[T]>=m){var S=x[T]-m,E=this.curves[T],C=E.getLength(),A=C===0?0:1-S/C;return E.getPointAt(A,p)}T++}return null},getPoints:function(v){v===void 0&&(v=12);for(var p=[],m,x=0;x<this.curves.length;x++){var T=this.curves[x];if(T.active)for(var S=T.getResolution(v),E=T.getPoints(S),C=0;C<E.length;C++){var A=E[C];m&&m.equals(A)||(p.push(A),m=A)}}return this.autoClose&&p.length>1&&!p[p.length-1].equals(p[0])&&p.push(p[0]),p},getRandomPoint:function(v){return v===void 0&&(v=new l),this.getPoint(Math.random(),v)},getSpacedPoints:function(v){v===void 0&&(v=40);for(var p=[],m=0;m<=v;m++)p.push(this.getPoint(m/v));return this.autoClose&&p.push(p[0]),p},getStartPoint:function(v){return v===void 0&&(v=new l),v.copy(this.startPoint)},getTangent:function(v,p){p===void 0&&(p=new l);for(var m=v*this.getLength(),x=this.getCurveLengths(),T=0;T<x.length;){if(x[T]>=m){var S=x[T]-m,E=this.curves[T],C=E.getLength(),A=C===0?0:1-S/C;return E.getTangentAt(A,p)}T++}return null},lineTo:function(v,p){v instanceof l?this._tmpVec2B.copy(v):this._tmpVec2B.set(v,p);var m=this.getEndPoint(this._tmpVec2A);return this.add(new n([m.x,m.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(v){return v.unshift(this.getEndPoint()),this.add(new o(v))},moveTo:function(v,p){return v instanceof l?this.add(new i(v.x,v.y)):this.add(new i(v,p))},toJSON:function(){for(var v=[],p=0;p<this.curves.length;p++)v.push(this.curves[p].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:v}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",function(v,p){return new d(v,p)}),h.exports=d},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DataManager:t(101),DataManagerPlugin:t(897),Events:t(315)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(101),s=t(24),a=t(20),n=new e({Extends:c,initialize:function(r){c.call(this,r,r.sys.events),this.scene=r,this.systems=r.sys,r.sys.events.once(a.BOOT,this.boot,this),r.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){c.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});s.register("DataManagerPlugin",n,"data"),h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Align:t(899),BaseShader:t(396),Bounds:t(902),Canvas:t(906),Color:t(397),ColorMatrix:t(198),Masks:t(916),RGB:t(200)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),c=t(17),s={In:t(900),To:t(901)};s=c(!1,s,e),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BottomCenter:t(290),BottomLeft:t(291),BottomRight:t(292),Center:t(293),LeftCenter:t(295),QuickSet:t(289),RightCenter:t(296),TopCenter:t(297),TopLeft:t(298),TopRight:t(299)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BottomCenter:t(277),BottomLeft:t(278),BottomRight:t(279),LeftBottom:t(280),LeftCenter:t(281),LeftTop:t(282),QuickSet:t(276),RightBottom:t(283),RightCenter:t(284),RightTop:t(285),TopCenter:t(286),TopLeft:t(287),TopRight:t(288)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CenterOn:t(294),GetBottom:t(42),GetBounds:t(903),GetCenterX:t(87),GetCenterY:t(89),GetLeft:t(43),GetOffsetX:t(904),GetOffsetY:t(905),GetRight:t(44),GetTop:t(45),SetBottom:t(55),SetCenterX:t(88),SetCenterY:t(90),SetLeft:t(53),SetRight:t(54),SetTop:t(52)}},function(h,g,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),c=t(43),s=t(44),a=t(45),n=function(i,r){r===void 0&&(r={});var u=c(i),o=a(i);return r.x=u,r.y=o,r.width=s(i)-u,r.height=e(i)-o,r};h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.width*e.originX};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.height*e.originY};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CanvasInterpolation:t(367),CanvasPool:t(31),Smoothing:t(192),TouchAction:t(907),UserSelect:t(908)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c===void 0&&(c="none"),e.style.msTouchAction=c,e.style["ms-touch-action"]=c,e.style["touch-action"]=c,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c===void 0&&(c="none");var s=["-webkit-","-khtml-","-moz-","-ms-",""];return s.forEach(function(a){e.style[a+"user-select"]=c}),e.style["-webkit-touch-callout"]=c,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103),c=function(s){s===void 0&&(s=1024);var a=[],n=255,i,r=255,u=0,o=0;for(i=0;i<=n;i++)a.push({r,g:i,b:o,color:e(r,i,o)});for(u=255,i=n;i>=0;i--)a.push({r:i,g:u,b:o,color:e(i,u,o)});for(r=0,i=0;i<=n;i++,u--)a.push({r,g:u,b:i,color:e(r,u,i)});for(u=0,o=255,i=0;i<=n;i++,o--,r++)a.push({r,g:u,b:o,color:e(r,u,o)});if(s===1024)return a;var l=[],f=0,d=1024/s;for(i=0;i<s;i++)l.push(a[Math.floor(f)]),f+=d;return l};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(c.a=e>>>24),c};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),c=t(399),s=function(a,n,i){var r=i,u=i,o=i;if(n!==0){var l=i<.5?i*(1+n):i+n-i*n,f=2*i-l;r=c(f,l,a+1/3),u=c(f,l,a),o=c(f,l,a-1/3)}var d=new e;return d.setGLTo(r,u,o,1)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(188),c=function(s,a){s===void 0&&(s=1),a===void 0&&(a=1);for(var n=[],i=0;i<=359;i++)n.push(e(i/359,s,a));return n};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(135),c=function(n,i,r,u,o,l,f,d){f===void 0&&(f=100),d===void 0&&(d=0);var v=d/f;return{r:e(n,u,v),g:e(i,o,v),b:e(r,l,v)}},s=function(n,i,r,u){return r===void 0&&(r=100),u===void 0&&(u=0),c(n.r,n.g,n.b,i.r,i.g,i.b,r,u)},a=function(n,i,r,u,o,l){return o===void 0&&(o=100),l===void 0&&(l=0),c(n.r,n.g,n.b,i,r,u,o,l)};h.exports={RGBWithRGB:c,ColorWithRGB:a,ColorWithColor:s}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(195),c=t(38),s=function(a,n){return a===void 0&&(a=0),n===void 0&&(n=255),new c(e(a,n),e(a,n),e(a,n))};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(398),c=function(s,a,n,i,r){return i===void 0&&(i=255),r===void 0&&(r="#"),r==="#"?"#"+((1<<24)+(s<<16)+(a<<8)+n).toString(16).slice(1,7):"0x"+e(i)+e(s)+e(a)+e(n)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BitmapMask:t(310),GeometryMask:t(311)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={AddToDOM:t(142),DOMContentLoaded:t(400),GetInnerHeight:t(401),GetScreenOrientation:t(402),GetTarget:t(407),ParseXML:t(408),RemoveFromDOM:t(202),RequestAnimationFrame:t(386)};h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={EventEmitter:t(919)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(9),s=t(24),a=new e({Extends:c,initialize:function(){c.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});s.register("EventEmitter",a,"events"),h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),c=t(321),s=t(325),a=t(31),n=t(0),i=t(346),r=t(921),u=t(366),o=t(101),l=t(384),f=t(347),d=t(400),v=t(9),p=t(22),m=t(409),x=t(24),T=t(414),S=t(415),E=t(417),C=t(106),A=t(422),P=t(385),M=t(387),O=t(426),F=new n({initialize:function(N){this.config=new i(N),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new v,this.anims=new c(this),this.textures=new A(this),this.cache=new s(this),this.registry=new o(this),this.input=new m(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=f,this.scale=new S(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new P(this,this.config.fps),this.plugins=new T(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,d(this.boot.bind(this))},boot:function(){if(!x.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),r(this),l(this),e(this.canvas,this.config.parent),this.textures.once(C.READY,this.texturesReady,this),this.events.emit(p.BOOT)},texturesReady:function(){this.events.emit(p.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),M(this);var I=this.events;I.on(p.HIDDEN,this.onHidden,this),I.on(p.VISIBLE,this.onVisible,this),I.on(p.BLUR,this.onBlur,this),I.on(p.FOCUS,this.onFocus,this)},step:function(I,N){if(this.pendingDestroy)return this.runDestroy();var G=this.events;G.emit(p.PRE_STEP,I,N),G.emit(p.STEP,I,N),this.scene.update(I,N),G.emit(p.POST_STEP,I,N);var Y=this.renderer;Y.preRender(),G.emit(p.PRE_RENDER,Y,I,N),this.scene.render(Y),Y.postRender(),G.emit(p.POST_RENDER,Y,I,N)},headlessStep:function(I,N){if(this.pendingDestroy)return this.runDestroy();var G=this.events;G.emit(p.PRE_STEP,I,N),G.emit(p.STEP,I,N),this.scene.update(I,N),G.emit(p.POST_STEP,I,N),G.emit(p.PRE_RENDER),G.emit(p.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(p.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(p.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(I,N){N===void 0&&(N=!1),this.pendingDestroy=!0,this.removeCanvas=I,this.noReturn=N},runDestroy:function(){this.scene.destroy(),this.events.emit(p.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});h.exports=F},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),c=function(s){var a=s.config;if(!(!a.parent||!a.domCreateContainer)){var n=document.createElement("div");n.style.cssText=["display: block;","width: "+s.scale.width+"px;","height: "+s.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+a.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),s.domContainer=n,e(n,a.parent)}};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragend"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragenter"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drag"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragleave"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragover"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragstart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drop"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameout"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameover"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectdown"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragend"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragenter"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drag"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragleave"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragover"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragstart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drop"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectmove"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectout"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectover"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerdown"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointermove"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerout"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerover"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerup"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="wheel"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectup"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectwheel"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="process"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerdown"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerdownoutside"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointermove"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerout"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerover"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerup"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerupoutside"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="wheel"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerlockchange"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="preupdate"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="shutdown"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addfile"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="filecomplete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="filecomplete-"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loaderror"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="load"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="fileprogress"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postprocess"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="progress"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(!s.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var a=e.source[c];e.add("__BASE",c,0,0,a.width,a.height);for(var n=s.getElementsByTagName("SubTexture"),i,r=0;r<n.length;r++){var u=n[r].attributes,o=u.name.value,l=parseInt(u.x.value,10),f=parseInt(u.y.value,10),d=parseInt(u.width.value,10),v=parseInt(u.height.value,10);if(i=e.add(o,c,l,f,d,v),u.frameX){var p=Math.abs(parseInt(u.frameX.value,10)),m=Math.abs(parseInt(u.frameY.value,10)),x=parseInt(u.frameWidth.value,10),T=parseInt(u.frameHeight.value,10);i.setTrim(d,v,p,m,x,T)}}return e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.source[c];return e.add("__BASE",c,0,0,s.width,s.height),e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.source[c];return e.add("__BASE",c,0,0,s.width,s.height),e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),c=function(s,a,n){if(!n.frames&&!n.textures){console.warn("Invalid Texture Atlas JSON Array");return}var i=s.source[a];s.add("__BASE",a,0,0,i.width,i.height);for(var r=Array.isArray(n.textures)?n.textures[a].frames:n.frames,u,o=0;o<r.length;o++){var l=r[o];u=s.add(l.filename,a,l.frame.x,l.frame.y,l.frame.w,l.frame.h),l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var f=l.anchor||l.pivot;f&&(u.customPivot=!0,u.pivotX=f.x,u.pivotY=f.y),u.customData=e(l)}for(var d in n)d!=="frames"&&(Array.isArray(n[d])?s.customData[d]=n[d].slice(0):s.customData[d]=n[d]);return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),c=function(s,a,n){if(!n.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var i=s.source[a];s.add("__BASE",a,0,0,i.width,i.height);var r=n.frames,u;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];u=s.add(o,a,l.frame.x,l.frame.y,l.frame.w,l.frame.h),l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var f=l.anchor||l.pivot;f&&(u.customPivot=!0,u.pivotX=f.x,u.pivotY=f.y),u.customData=e(l)}for(var d in n)d!=="frames"&&(Array.isArray(n[d])?s.customData[d]=n[d].slice(0):s.customData[d]=n[d]);return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),c=function(s,a,n,i,r,u,o){var l=e(o,"frameWidth",null),f=e(o,"frameHeight",l);if(l===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var d=s.source[a];s.add("__BASE",a,0,0,d.width,d.height);var v=e(o,"startFrame",0),p=e(o,"endFrame",-1),m=e(o,"margin",0),x=e(o,"spacing",0),T=Math.floor((r-m+x)/(l+x)),S=Math.floor((u-m+x)/(f+x)),E=T*S;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",s.key),(v>E||v<-E)&&(v=0),v<0&&(v=E+v),p!==-1&&(E=v+(p+1));for(var C=m,A=m,P=0,M=0,O=0;O<E;O++){P=0,M=0;var F=C+l,I=A+f;F>r&&(P=F-r),I>u&&(M=I-u),s.add(O,a,n+C,i+A,l-P,f-M),C+=l+x,C+l>r&&(C=m,A+=f+x)}return s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),c=function(s,a,n){var i=e(n,"frameWidth",null),r=e(n,"frameHeight",i);if(!i)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var u=s.source[0];s.add("__BASE",0,0,0,u.width,u.height),e(n,"startFrame",0),e(n,"endFrame",-1);for(var o=e(n,"margin",0),l=e(n,"spacing",0),f=a.cutX,d=a.cutY,v=a.cutWidth,p=a.cutHeight,m=a.realWidth,x=a.realHeight,T=Math.floor((m-o+l)/(i+l)),S=Math.floor((x-o+l)/(r+l)),E=a.x,C=i-E,A=i-(m-v-E),P=a.y,M=r-P,O=r-(x-p-P),F,I=o,N=o,G=0,Y=a.sourceIndex,z=0;z<S;z++){for(var W=z===0,D=z===S-1,L=0;L<T;L++){var B=L===0,w=L===T-1;if(F=s.add(G,Y,f+I,d+N,i,r),B||W||w||D){var V=B?E:0,U=W?P:0,X=0,H=0;B&&(X+=i-C),w&&(X+=i-A),W&&(H+=r-M),D&&(H+=r-O);var b=i-X,Z=r-H;F.cutWidth=b,F.cutHeight=Z,F.setTrim(i,r,V,U,b,Z)}I+=l,B?I+=C:w?I+=A:I+=i,G++}I=o,N+=l,W?N+=M:D?N+=O:N+=r}return s};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=0,e=function(s,a,n,i){var r=t-i.y-i.height;s.add(n,a,i.x,r,i.width,i.height)},c=function(s,a,n){var i=s.source[a];s.add("__BASE",a,0,0,i.width,i.height),t=i.height;for(var r=n.split(`
`),u=/^[ ]*(- )*(\w+)+[: ]+(.*)/,o="",l="",f={x:0,y:0,width:0,height:0},d=0;d<r.length;d++){var v=r[d].match(u);if(v){var p=v[1]==="- ",m=v[2],x=v[3];if(p&&(l!==o&&(e(s,a,l,f),o=l),f={x:0,y:0,width:0,height:0}),m==="name"){l=x;continue}switch(m){case"x":case"y":case"width":case"height":f[m]=parseInt(x,10);break}}}return l!==o&&e(s,a,l,f),s};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="decoded"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="decodedall"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="detune"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="detune"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="mute"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="rate"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="volume"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loop"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="looped"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="mute"},function(h,g){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pan"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pauseall"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="play"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="rate"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resumeall"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="seek"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stopall"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="unlocked"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="volume"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Events:t(75),DisplayList:t(1012),GameObjectCreator:t(16),GameObjectFactory:t(5),UpdateList:t(1040),Components:t(11),GetCalcMatrix:t(19),BuildGameObject:t(28),BuildGameObjectAnimation:t(439),GameObject:t(15),BitmapText:t(148),Blitter:t(213),Bob:t(440),Container:t(214),DOMElement:t(442),DynamicBitmapText:t(215),Extern:t(444),Graphics:t(216),Group:t(113),Image:t(125),Layer:t(219),Particles:t(1074),PathFollower:t(457),RenderTexture:t(221),RetroFont:t(1082),Rope:t(223),Sprite:t(73),Text:t(224),GetTextSize:t(458),MeasureText:t(460),TextStyle:t(459),TileSprite:t(225),Zone:t(129),Video:t(226),Shape:t(34),Arc:t(461),Curve:t(462),Ellipse:t(463),Grid:t(464),IsoBox:t(465),IsoTriangle:t(466),Line:t(467),Polygon:t(468),Rectangle:t(473),Star:t(474),Triangle:t(475),Factories:{Blitter:t(1130),Container:t(1131),DOMElement:t(1132),DynamicBitmapText:t(1133),Extern:t(1134),Graphics:t(1135),Group:t(1136),Image:t(1137),Layer:t(1138),Particles:t(1139),PathFollower:t(1140),RenderTexture:t(1141),Rope:t(1142),Sprite:t(1143),StaticBitmapText:t(1144),Text:t(1145),TileSprite:t(1146),Zone:t(1147),Video:t(1148),Arc:t(1149),Curve:t(1150),Ellipse:t(1151),Grid:t(1152),IsoBox:t(1153),IsoTriangle:t(1154),Line:t(1155),Polygon:t(1156),Rectangle:t(1157),Star:t(1158),Triangle:t(1159)},Creators:{Blitter:t(1160),Container:t(1161),DynamicBitmapText:t(1162),Graphics:t(1163),Group:t(1164),Image:t(1165),Layer:t(1166),Particles:t(1167),RenderTexture:t(1168),Rope:t(1169),Sprite:t(1170),StaticBitmapText:t(1171),Text:t(1172),TileSprite:t(1173),Zone:t(1174),Video:t(1175)}};e.Shader=t(229),e.Mesh=t(230),e.PointLight=t(150),e.Factories.Shader=t(1184),e.Factories.Mesh=t(1185),e.Factories.PointLight=t(1186),e.Creators.Shader=t(1187),e.Creators.Mesh=t(1188),e.Creators.PointLight=t(1189),e.Light=t(481),e.LightsManager=t(482),e.LightsPlugin=t(1190),h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(110),s=t(24),a=t(75),n=t(20),i=t(79),r=new e({Extends:c,initialize:function(o){c.call(this,o),this.sortChildrenFlag=!1,this.scene=o,this.systems=o.sys,this.events=o.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.events.once(n.DESTROY,this.destroy,this)},addChildCallback:function(u){u.displayList&&u.displayList!==this&&u.removeFromDisplayList(),u.displayList||(this.queueDepthSort(),u.displayList=this,u.emit(a.ADDED_TO_SCENE,u,this.scene),this.events.emit(n.ADDED_TO_SCENE,u,this.scene))},removeChildCallback:function(u){this.queueDepthSort(),u.displayList=null,u.emit(a.REMOVED_FROM_SCENE,u,this.scene),this.events.emit(n.REMOVED_FROM_SCENE,u,this.scene)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(i(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(u,o){return u._depth-o._depth},getChildren:function(){return this.list},shutdown:function(){for(var u=this.list,o=u.length;o--;)u[o].destroy(!0);u.length=0,this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});s.register("DisplayList",r,"displayList"),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CheckMatrix:t(209),MatrixToString:t(1014),ReverseColumns:t(1015),ReverseRows:t(1016),Rotate180:t(1017),RotateLeft:t(1018),RotateMatrix:t(147),RotateRight:t(1019),Translate:t(1020),TransposeMatrix:t(435)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(186),c=t(209),s=function(a){var n="";if(!c(a))return n;for(var i=0;i<a.length;i++){for(var r=0;r<a[i].length;r++){var u=a[i][r].toString();u!=="undefined"?n+=e(u,2):n+="?",r<a[i].length-1&&(n+=" |")}if(i<a.length-1){n+=`
`;for(var o=0;o<a[i].length;o++)n+="---",o<a[i].length-1&&(n+="+");n+=`
`}}return n};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.reverse()};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var c=0;c<e.length;c++)e[c].reverse();return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),c=function(s){return e(s,180)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),c=function(s){return e(s,90)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),c=function(s){return e(s,-90)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(178),c=t(179),s=function(a,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),i!==0&&(i<0?e(a,Math.abs(i)):c(a,i)),n!==0)for(var r=0;r<a.length;r++){var u=a[r];n<0?e(u,Math.abs(n)):c(u,n)}return a};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n){if(n===void 0&&(n=e),s>0){var i=s-e.length;if(i<=0)return null}if(!Array.isArray(c))return e.indexOf(c)===-1?(e.push(c),a&&a.call(n,c),c):null;for(var r=c.length-1;r>=0;)e.indexOf(c[r])!==-1&&c.splice(r,1),r--;if(r=c.length,r===0)return null;s>0&&r>i&&(c.splice(i),r=i);for(var u=0;u<r;u++){var o=c[u];e.push(o),a&&a.call(n,o)}return c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n,i){if(s===void 0&&(s=0),i===void 0&&(i=e),a>0){var r=a-e.length;if(r<=0)return null}if(!Array.isArray(c))return e.indexOf(c)===-1?(e.splice(s,0,c),n&&n.call(i,c),c):null;for(var u=c.length-1;u>=0;)e.indexOf(c[u])!==-1&&c.pop(),u--;if(u=c.length,u===0)return null;a>0&&u>r&&(c.splice(r),u=r);for(var o=u-1;o>=0;o--){var l=c[o];e.splice(s,0,l),n&&n.call(i,l)}return c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.indexOf(c);return s!==-1&&s<e.length&&(e.splice(s,1),e.push(c)),c};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),c=function(s,a,n,i,r){i===void 0&&(i=0),r===void 0&&(r=s.length);var u=0;if(e(s,i,r))for(var o=i;o<r;o++){var l=s[o];l[a]===n&&u++}return u};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a,n=[null];for(a=3;a<arguments.length;a++)n.push(arguments[a]);for(a=0;a<e.length;a++)n[0]=e[a],c.apply(s,n);return e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),c=function(s,a,n,i,r){if(i===void 0&&(i=0),r===void 0&&(r=s.length),e(s,i,r)){var u,o=[null];for(u=5;u<arguments.length;u++)o.push(arguments[u]);for(u=i;u<r;u++)o[0]=s[u],a.apply(n,o)}return s};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.indexOf(c);if(s>0){var a=e[s-1],n=e.indexOf(a);e[s]=a,e[n]=c}return e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=e.indexOf(c);if(a===-1||s<0||s>=e.length)throw new Error("Supplied index out of bounds");return a!==s&&(e.splice(a,1),e.splice(s,0,c)),c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.indexOf(c);if(s!==-1&&s<e.length-1){var a=e[s+1],n=e.indexOf(a);e[s]=a,e[n]=c}return e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(c===s)return e;var a=e.indexOf(c),n=e.indexOf(s);if(a<0||n<0)throw new Error("Supplied items must be elements of the same array");return a>n||(e.splice(a,1),n===e.length-1?e.push(c):e.splice(n,0,c)),e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(c===s)return e;var a=e.indexOf(c),n=e.indexOf(s);if(a<0||n<0)throw new Error("Supplied items must be elements of the same array");return a<n||(e.splice(a,1),n===0?e.unshift(c):e.splice(n,0,c)),e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(363),c=function(s,a,n){s===void 0&&(s=0),a===void 0&&(a=null),n===void 0&&(n=1),a===null&&(a=s,s=0);for(var i=[],r=Math.max(e((a-s)/(n||1)),0),u=0;u<r;u++)i.push(s),s+=n;return i};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),c=function(s,a,n,i){if(i===void 0&&(i=s),a<0||a>s.length-1)throw new Error("Index out of bounds");var r=e(s,a);return n&&n.call(i,r),r};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),c=function(s,a,n,i,r){if(a===void 0&&(a=0),n===void 0&&(n=s.length),r===void 0&&(r=s),e(s,a,n)){var u=n-a,o=s.splice(a,u);if(i)for(var l=0;l<o.length;l++){var f=o[l];i.call(r,f)}return o}else return[]};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),c=function(s,a,n){a===void 0&&(a=0),n===void 0&&(n=s.length);var i=a+Math.floor(Math.random()*n);return e(s,i)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=e.indexOf(c),n=e.indexOf(s);return a!==-1&&n===-1?(e[a]=s,!0):!1};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.indexOf(c);return s!==-1&&s>0&&(e.splice(s,1),e.unshift(c)),c};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),c=function(s,a,n,i,r){if(i===void 0&&(i=0),r===void 0&&(r=s.length),e(s,i,r))for(var u=i;u<r;u++){var o=s[u];o.hasOwnProperty(a)&&(o[a]=n)}return s};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){if(c===s)return e;var a=e.indexOf(c),n=e.indexOf(s);if(a<0||n<0)throw new Error("Supplied items must be elements of the same array");return e[a]=s,e[n]=c,e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(211),s=t(24),a=t(20),n=new e({Extends:c,initialize:function(r){c.call(this),this.checkQueue=!0,this.scene=r,this.systems=r.sys,r.sys.events.once(a.BOOT,this.boot,this),r.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var i=this.systems.events;i.on(a.PRE_UPDATE,this.update,this),i.on(a.UPDATE,this.sceneUpdate,this),i.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(i,r){for(var u=this._active,o=u.length,l=0;l<o;l++){var f=u[l];f.active&&f.preUpdate.call(f,i,r)}},shutdown:function(){for(var i=this._active.length;i--;)this._active[i].destroy(!0);for(i=this._pending.length;i--;)this._pending[i].destroy(!0);for(i=this._destroy.length;i--;)this._destroy[i].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var r=this.systems.events;r.off(a.PRE_UPDATE,this.update,this),r.off(a.UPDATE,this.sceneUpdate,this),r.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});s.register("UpdateList",n,"updateList"),h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="add"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="remove"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){if(s===void 0&&(s=!1),a===void 0)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},a;var n=e.text,i=n.length,r=e.maxWidth,u=e.wordWrapCharCode,o=Number.MAX_VALUE,l=Number.MAX_VALUE,f=0,d=0,v=e.fontData.chars,p=e.fontData.lineHeight,m=e.letterSpacing,x=0,T=0,S=0,E=null,C=e._align,A=0,P=0,M=e.fontSize/e.fontData.size,O=M*e.scaleX,F=M*e.scaleY,I=null,N=0,G=[],Y=Number.MAX_VALUE,z=0,W=0,D=0,L,B=[],w=[],V=null;if(r>0){for(L=0;L<i;L++){if(S=n.charCodeAt(L),S===10){V!==null&&(B.push({word:V.word,i:V.i,x:V.x*O,y:V.y*F,w:V.w*O,h:V.h*F,cr:!0}),V=null),x=0,T+=p,I=null;continue}if(E=v[S],!!E){if(I!==null)var U=E.kerning[N];S===u?V!==null&&(B.push({word:V.word,i:V.i,x:V.x*O,y:V.y*F,w:V.w*O,h:V.h*F,cr:!1}),V=null):(V===null&&(V={word:"",i:L,x,y:T,w:0,h:p,cr:!1}),V.word=V.word.concat(n[L]),V.w+=E.xOffset+E.xAdvance+(U!==void 0?U:0)),x+=E.xAdvance+m,I=E,N=S}}V!==null&&B.push({word:V.word,i:V.i,x:V.x*O,y:V.y*F,w:V.w*O,h:V.h*F,cr:!1}),x=0,T=0,I=null,N=0;var X,H=0,b=[];for(L=0;L<B.length;L++){var Z=B[L],K=Z.x,Q=Z.x+Z.w;if(X){var j=K-(X.x+X.w);H=K-(j+X.w),X=null}var q=K-H,k=Q-H;q>r||k>r?(b.push(Z.i-1),Z.cr?(b.push(Z.i+Z.word.length),H=0,X=null):X=Z):Z.cr&&(b.push(Z.i+Z.word.length),H=0,X=null)}var J=function(Et,Tt,Wt){return Et.substr(0,Tt)+Wt+Et.substr(Tt+1)};for(L=b.length-1;L>=0;L--)n=J(n,b[L],`
`);a.wrappedText=n,i=n.length,B=[],V=null}var _=0;for(L=0;L<i;L++){if(S=n.charCodeAt(L),S===10){V!==null&&(B.push({word:V.word,i:V.i,x:V.x*O,y:V.y*F,w:V.w*O,h:V.h*F}),V=null),x=0,T+=p,I=null,G[W]=D,D>z&&(z=D),D<Y&&(Y=D),W++,D=0;continue}if(E=v[S],!!E){if(A=x,P=T,I!==null){var it=E.kerning[N];A+=it!==void 0?it:0}o>A&&(o=A),l>P&&(l=P);var tt=A+E.xAdvance,$=P+p;f<tt&&(f=tt),d<$&&(d=$);var st=E.xOffset+E.xAdvance+(it!==void 0?it:0);S===u?V!==null&&(B.push({word:V.word,i:V.i,x:V.x*O,y:V.y*F,w:V.w*O,h:V.h*F}),V=null):(V===null&&(V={word:"",i:_,x,y:T,w:0,h:p}),V.word=V.word.concat(n[L]),V.w+=st),w.push({i:_,char:n[L],code:S,x:(E.xOffset+x)*M,y:(E.yOffset+T)*M,w:E.width*M,h:E.height*M,t:T*M,r:tt*M,b:p*M,line:W,glyph:E}),x+=E.xAdvance+m,I=E,N=S,D=tt*M,_++}}if(V!==null&&B.push({word:V.word,i:V.i,x:V.x*O,y:V.y*F,w:V.w*O,h:V.h*F}),G[W]=D,D>z&&(z=D),D<Y&&(Y=D),C>0)for(var nt=0;nt<w.length;nt++){var rt=w[nt];if(C===1){var Rt=(z-G[rt.line])/2;rt.x+=Rt,rt.r+=Rt}else if(C===2){var Dt=z-G[rt.line];rt.x+=Dt,rt.r+=Dt}}var ft=a.local,lt=a.global,Ot=a.lines;return ft.x=o*M,ft.y=l*M,ft.width=f*M,ft.height=d*M,lt.x=e.x-e._displayOriginX+o*O,lt.y=e.y-e._displayOriginY+l*F,lt.width=f*O,lt.height=d*F,Ot.shortest=Y,Ot.longest=z,Ot.lengths=G,c&&(ft.x=Math.ceil(ft.x),ft.y=Math.ceil(ft.y),ft.width=Math.ceil(ft.width),ft.height=Math.ceil(ft.height),lt.x=Math.ceil(lt.x),lt.y=Math.ceil(lt.y),lt.width=Math.ceil(lt.width),lt.height=Math.ceil(lt.height),Ot.shortest=Math.ceil(Y),Ot.longest=Math.ceil(z)),s&&(e._displayOriginX=e.originX*ft.width,e._displayOriginY=e.originY*ft.height,lt.x=e.x-e._displayOriginX*e.scaleX,lt.y=e.y-e._displayOriginY*e.scaleY,c&&(lt.x=Math.ceil(lt.x),lt.y=Math.ceil(lt.y))),a.words=B,a.characters=w,a.lines.height=p,a.scale=M,a.scaleX=e.scaleX,a.scaleY=e.scaleY,a};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(212),c=function(s,a,n,i,r,u,o){var l=s.sys.textures.get(n),f=l.get(i),d=s.sys.cache.xml.get(r);if(f&&d){var v=e(d,f,u,o,l);return s.sys.cache.bitmapFont.add(a,{data:v,texture:n,frame:i,fromAtlas:!0}),!0}else return!1};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1046),c=t(1048),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1047),c=t(19),s=t(12),a=function(n,i,r,u){var o=i._text,l=o.length;if(l!==0){r.addToRenderList(i);var f=n.pipelines.set(i.pipeline,i),d=c(i,r,u).calc,v=r.roundPixels,p=r.alpha,m=i.charColors,x=i.tintFill,T=s.getTintAppendFloatAlpha,S=T(i.tintTopLeft,p*i._alphaTL),E=T(i.tintTopRight,p*i._alphaTR),C=T(i.tintBottomLeft,p*i._alphaBL),A=T(i.tintBottomRight,p*i._alphaBR),P=i.frame.glTexture,M=f.setGameObject(i),O=i.getTextBounds(!1),F,I,N,G=O.characters,Y=i.dropShadowX,z=i.dropShadowY,W=Y!==0||z!==0;if(n.pipelines.preBatch(i),W){var D=i.dropShadowColor,L=i.dropShadowAlpha,B=T(D,p*L*i._alphaTL),w=T(D,p*L*i._alphaTR),V=T(D,p*L*i._alphaBL),U=T(D,p*L*i._alphaBR);for(F=0;F<G.length;F++)I=G[F],N=I.glyph,!(I.code===32||N.width===0||N.height===0)&&e(f,i,I,N,Y,z,d,v,B,w,V,U,1,P,M)}for(F=0;F<G.length;F++)if(I=G[F],N=I.glyph,!(I.code===32||N.width===0||N.height===0))if(m[I.i]){var X=m[I.i],H=X.tintEffect,b=T(X.tintTL,p*i._alphaTL),Z=T(X.tintTR,p*i._alphaTR),K=T(X.tintBL,p*i._alphaBL),Q=T(X.tintBR,p*i._alphaBR);e(f,i,I,N,0,0,d,v,b,Z,K,Q,H,P,M)}else e(f,i,I,N,0,0,d,v,S,E,C,A,x,P,M);n.pipelines.postBatch(i)}};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n,i,r,u,o,l,f,d,v,p,m){var x=s.x-c.displayOriginX+n,T=s.y-c.displayOriginY+i,S=x+s.w,E=T+s.h,C=r.getXRound(x,T,u),A=r.getYRound(x,T,u),P=r.getXRound(x,E,u),M=r.getYRound(x,E,u),O=r.getXRound(S,E,u),F=r.getYRound(S,E,u),I=r.getXRound(S,T,u),N=r.getYRound(S,T,u);e.batchQuad(c,C,A,P,M,O,F,I,N,a.u0,a.v0,a.u1,a.v1,o,l,f,d,v,p,m)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(30),c=function(s,a,n,i){var r=a._text,u=r.length,o=s.currentContext;if(!(u===0||!e(s,o,a,n,i))){n.addToRenderList(a);var l=a.fromAtlas?a.frame:a.texture.frames.__BASE,f=a.fontData.chars,d=a.fontData.lineHeight,v=a._letterSpacing,p=0,m=0,x=0,T=null,S=0,E=0,C=0,A=0,P=0,M=0,O=null,F=0,I=l.source.image,N=l.cutX,G=l.cutY,Y=a._fontSize/a.fontData.size,z=a._align,W=0,D=0,L=a.getTextBounds(!1);a.maxWidth>0&&(r=L.wrappedText,u=r.length);var B=a._bounds.lines;z===1?D=(B.longest-B.lengths[0])/2:z===2&&(D=B.longest-B.lengths[0]),o.translate(-a.displayOriginX,-a.displayOriginY);for(var w=n.roundPixels,V=0;V<u;V++){if(x=r.charCodeAt(V),x===10){W++,z===1?D=(B.longest-B.lengths[W])/2:z===2&&(D=B.longest-B.lengths[W]),p=0,m+=d,O=null;continue}if(T=f[x],!!T){if(S=N+T.x,E=G+T.y,C=T.width,A=T.height,P=T.xOffset+p,M=T.yOffset+m,O!==null){var U=T.kerning[F];P+=U!==void 0?U:0}P*=Y,M*=Y,P+=D,p+=T.xAdvance+v,O=T,F=x,!(C===0||A===0||x===32)&&(w&&(P=Math.round(P),M=Math.round(M)),o.save(),o.translate(P,M),o.scale(Y,Y),o.drawImage(I,S,E,C,A,0,0,C,A),o.restore())}}o.restore()}};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1050),c=t(1051),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),c=t(12),s=new e,a=function(n,i,r,u){var o=i.getRenderList();if(o.length!==0){var l=r.alpha*i.alpha;if(l!==0){r.addToRenderList(i);var f=n.pipelines.set(this.pipeline,i),d=r.scrollX*i.scrollFactorX,v=r.scrollY*i.scrollFactorY,p=s.copyFrom(r.matrix);u&&(p.multiplyWithOffset(u,-d,-v),d=0,v=0);var m=i.x-d,x=i.y-v,T=-1,S=!1,E=r.roundPixels;n.pipelines.preBatch(i);for(var C=0;C<o.length;C++){var A=o[C],P=A.frame,M=A.alpha*l;if(M!==0){var O=P.width,F=P.height,I=m+A.x+P.x,N=x+A.y+P.y;A.flipX&&(O*=-1,I+=P.width),A.flipY&&(F*=-1,N+=P.height);var G=I+O,Y=N+F,z=p.getX(I,N),W=p.getY(I,N),D=p.getX(G,Y),L=p.getY(G,Y),B=c.getTintAppendFloatAlpha(A.tint,M);if(P.sourceIndex!==T){var w=f.setGameObject(i,P);T=P.sourceIndex}E&&(z=Math.round(z),W=Math.round(W),D=Math.round(D),L=Math.round(L)),f.batchQuad(i,z,W,z,L,D,L,D,W,P.u0,P.v0,P.u1,P.v1,B,B,B,B,S,P.glTexture,w)&&(T=-1)}}n.pipelines.postBatch(i)}}};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n=c.getRenderList();if(n.length!==0){var i=e.currentContext,r=s.alpha*c.alpha;if(r!==0){s.addToRenderList(c),i.globalCompositeOperation=e.blendModes[c.blendMode],i.imageSmoothingEnabled=!(!e.antialias||c.frame.source.scaleMode);var u=c.x-s.scrollX*c.scrollFactorX,o=c.y-s.scrollY*c.scrollFactorY;i.save(),a&&a.copyToContext(i);for(var l=s.roundPixels,f=0;f<n.length;f++){var d=n[f],v=d.flipX||d.flipY,p=d.frame,m=p.canvasData,x=p.x,T=p.y,S=1,E=1,C=d.alpha*r;C!==0&&(i.globalAlpha=C,v?(d.flipX&&(S=-1,x-=m.width),d.flipY&&(E=-1,T-=m.height),i.save(),i.translate(d.x+u,d.y+o),i.scale(S,E),i.drawImage(p.source.image,m.x,m.y,m.width,m.height,x,T,m.width,m.height),i.restore()):(l&&(x=Math.round(x),T=Math.round(T)),i.drawImage(p.source.image,m.x,m.y,m.width,m.height,x+d.x+u,T+d.y+o,m.width,m.height)))}i.restore()}}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1053),c=t(1054),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s.addToRenderList(c);var n=c.list,i=n.length;if(i!==0){var r=c.localTransform;a?(r.loadIdentity(),r.multiply(a),r.translate(c.x,c.y),r.rotate(c.rotation),r.scale(c.scaleX,c.scaleY)):r.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY),e.pipelines.preBatch(c);var u=c.blendMode!==-1;u||e.setBlendMode(0);for(var o=c.alpha,l=c.scrollFactorX,f=c.scrollFactorY,d=0;d<i;d++){var v=n[d];if(v.willRender(s)){var p,m,x,T;if(v.alphaTopLeft!==void 0)p=v.alphaTopLeft,m=v.alphaTopRight,x=v.alphaBottomLeft,T=v.alphaBottomRight;else{var S=v.alpha;p=S,m=S,x=S,T=S}var E=v.scrollFactorX,C=v.scrollFactorY;!u&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode);var A=v.mask;A&&A.preRenderWebGL(e,v,s);var P=v.type;P!==e.currentType&&(e.newType=!0,e.currentType=P),e.nextTypeMatch=d<i-1?n[d+1].type===e.currentType:!1,v.setScrollFactor(E*l,C*f),v.setAlpha(p*o,m*o,x*o,T*o),v.renderWebGL(e,v,s,r),v.setAlpha(p,m,x,T),v.setScrollFactor(E,C),A&&A.postRenderWebGL(e,s),e.newType=!1}}e.pipelines.postBatch(c)}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s.addToRenderList(c);var n=c.list;if(n.length!==0){var i=c.localTransform;a?(i.loadIdentity(),i.multiply(a),i.translate(c.x,c.y),i.rotate(c.rotation),i.scale(c.scaleX,c.scaleY)):i.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);var r=c.blendMode!==-1;r||e.setBlendMode(0);var u=c._alpha,o=c.scrollFactorX,l=c.scrollFactorY;c.mask&&c.mask.preRenderCanvas(e,null,s);for(var f=0;f<n.length;f++){var d=n[f];if(d.willRender(s)){var v=d.alpha,p=d.scrollFactorX,m=d.scrollFactorY;!r&&d.blendMode!==e.currentBlendMode&&e.setBlendMode(d.blendMode),d.setScrollFactor(p*o,m*l),d.setAlpha(v*u),d.renderCanvas(e,d,s,i),d.setAlpha(v),d.setScrollFactor(p,m)}}c.mask&&c.mask.postRenderCanvas(e)}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(443),c=t(443),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1058),c=t(1059),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=t(25),s=t(12),a=new c,n=function(i,r,u,o){var l=r.text,f=l.length;if(f!==0){u.addToRenderList(r);var d=i.pipelines.set(r.pipeline,r),v=e(r,u,o),p=v.sprite,m=v.calc,x=a,T=r.cropWidth>0||r.cropHeight>0;T&&(d.flush(),i.pushScissor(m.tx,m.ty,r.cropWidth*m.scaleX,r.cropHeight*m.scaleY));var S=r.frame,E=S.glTexture,C=r.tintFill,A=s.getTintAppendFloatAlpha(r.tintTopLeft,u.alpha*r._alphaTL),P=s.getTintAppendFloatAlpha(r.tintTopRight,u.alpha*r._alphaTR),M=s.getTintAppendFloatAlpha(r.tintBottomLeft,u.alpha*r._alphaBL),O=s.getTintAppendFloatAlpha(r.tintBottomRight,u.alpha*r._alphaBR),F=d.setGameObject(r),I=0,N=0,G=0,Y=0,z=r.letterSpacing,W,D=0,L=0,B,w=r.scrollX,V=r.scrollY,U=r.fontData,X=U.chars,H=U.lineHeight,b=r.fontSize/U.size,Z=0,K=r._align,Q=0,j=0,q=r.getTextBounds(!1);r.maxWidth>0&&(l=q.wrappedText,f=l.length);var k=r._bounds.lines;K===1?j=(k.longest-k.lengths[0])/2:K===2&&(j=k.longest-k.lengths[0]);var J=u.roundPixels,_=r.displayCallback,it=r.callbackData;i.pipelines.preBatch(r);for(var tt=0;tt<f;tt++){if(G=l.charCodeAt(tt),G===10){Q++,K===1?j=(k.longest-k.lengths[Q])/2:K===2&&(j=k.longest-k.lengths[Q]),I=0,N+=H,B=null;continue}if(W=X[G],!!W){D=W.width,L=W.height;var $=W.xOffset+I-w,st=W.yOffset+N-V;if(B!==null){var nt=W.kerning[Y];$+=nt!==void 0?nt:0}if(I+=W.xAdvance+z,B=W,Y=G,!(D===0||L===0||G===32)){if(b=r.fontSize/r.fontData.size,Z=0,_){it.color=0,it.tint.topLeft=A,it.tint.topRight=P,it.tint.bottomLeft=M,it.tint.bottomRight=O,it.index=tt,it.charCode=G,it.x=$,it.y=st,it.scale=b,it.rotation=Z,it.data=W.data;var rt=_(it);$=rt.x,st=rt.y,b=rt.scale,Z=rt.rotation,rt.color?(A=rt.color,P=rt.color,M=rt.color,O=rt.color):(A=rt.tint.topLeft,P=rt.tint.topRight,M=rt.tint.bottomLeft,O=rt.tint.bottomRight),A=s.getTintAppendFloatAlpha(A,u.alpha*r._alphaTL),P=s.getTintAppendFloatAlpha(P,u.alpha*r._alphaTR),M=s.getTintAppendFloatAlpha(M,u.alpha*r._alphaBL),O=s.getTintAppendFloatAlpha(O,u.alpha*r._alphaBR)}$*=b,st*=b,$-=r.displayOriginX,st-=r.displayOriginY,$+=j,x.applyITRS($,st,Z,b,b),m.multiply(x,p);var Rt=W.u0,Dt=W.v0,ft=W.u1,lt=W.v1,Ot=D,Et=L,Tt=p.e,Wt=p.f,ue=Et*p.c+p.e,fe=Et*p.d+p.f,ce=Ot*p.a+Et*p.c+p.e,de=Ot*p.b+Et*p.d+p.f,ve=Ot*p.a+p.e,pe=Ot*p.b+p.f;J&&(Tt=Math.round(Tt),Wt=Math.round(Wt),ue=Math.round(ue),fe=Math.round(fe),ce=Math.round(ce),de=Math.round(de),ve=Math.round(ve),pe=Math.round(pe)),d.batchQuad(r,Tt,Wt,ue,fe,ce,de,ve,pe,Rt,Dt,ft,lt,A,P,M,O,C,E,F)}}}T&&(d.flush(),i.popScissor()),i.pipelines.postBatch(r)}};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(30),c=function(s,a,n,i){var r=a._text,u=r.length,o=s.currentContext;if(!(u===0||!e(s,o,a,n,i))){n.addToRenderList(a);var l=a.fromAtlas?a.frame:a.texture.frames.__BASE,f=a.displayCallback,d=a.callbackData,v=a.fontData.chars,p=a.fontData.lineHeight,m=a._letterSpacing,x=0,T=0,S=0,E=null,C=0,A=0,P=0,M=0,O=0,F=0,I=null,N=0,G=a.frame.source.image,Y=l.cutX,z=l.cutY,W=0,D=0,L=a._fontSize/a.fontData.size,B=a._align,w=0,V=0;a.getTextBounds(!1);var U=a._bounds.lines;B===1?V=(U.longest-U.lengths[0])/2:B===2&&(V=U.longest-U.lengths[0]),o.translate(-a.displayOriginX,-a.displayOriginY);var X=n.roundPixels;a.cropWidth>0&&a.cropHeight>0&&(o.beginPath(),o.rect(0,0,a.cropWidth,a.cropHeight),o.clip());for(var H=0;H<u;H++){if(D=L,W=0,S=r.charCodeAt(H),S===10){w++,B===1?V=(U.longest-U.lengths[w])/2:B===2&&(V=U.longest-U.lengths[w]),x=0,T+=p,I=null;continue}if(E=v[S],!!E){if(C=Y+E.x,A=z+E.y,P=E.width,M=E.height,O=E.xOffset+x-a.scrollX,F=E.yOffset+T-a.scrollY,I!==null){var b=E.kerning[N];O+=b!==void 0?b:0}if(f){d.index=H,d.charCode=S,d.x=O,d.y=F,d.scale=D,d.rotation=W,d.data=E.data;var Z=f(d);O=Z.x,F=Z.y,D=Z.scale,W=Z.rotation}O*=D,F*=D,O+=V,x+=E.xAdvance+m,I=E,N=S,!(P===0||M===0||S===32)&&(X&&(O=Math.round(O),F=Math.round(F)),o.save(),o.translate(O,F),o.rotate(W),o.scale(D,D),o.drawImage(G,C,A,P,M,0,0,P,M),o.restore())}}o.restore()}};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1061),c=t(1062),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=function(s,a,n,i){s.pipelines.clear();var r=e(a,n,i).calc;a.render.call(a,s,n,r),s.pipelines.rebind()};h.exports=c},function(h,g){},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1064),c=t(448),c=t(448),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(217),c=t(19),s=t(25),a=t(12),n=function(l,f,d){this.x=l,this.y=f,this.width=d},i=function(l,f,d){this.points=[],this.pointsLength=1,this.points[0]=new n(l,f,d)},r=[],u=new s,o=function(l,f,d,v){if(f.commandBuffer.length!==0){d.addToRenderList(f);var p=l.pipelines.set(f.pipeline,f);l.pipelines.preBatch(f);for(var m=c(f,d,v).calc,x=u.loadIdentity(),T=f.commandBuffer,S=d.alpha*f.alpha,E=1,C=p.fillTint,A=p.strokeTint,P=0,M=0,O=0,F=.01,I=Math.PI*2,N,G=[],Y=0,z=!0,W=null,D=a.getTintAppendFloatAlpha,L=0;L<T.length;L++)switch(N=T[L],N){case e.BEGIN_PATH:{G.length=0,W=null,z=!0;break}case e.CLOSE_PATH:{z=!1,W&&W.points.length&&W.points.push(W.points[0]);break}case e.FILL_PATH:{for(Y=0;Y<G.length;Y++)p.batchFillPath(G[Y].points,x,m);break}case e.STROKE_PATH:{for(Y=0;Y<G.length;Y++)p.batchStrokePath(G[Y].points,E,z,x,m);break}case e.LINE_STYLE:{E=T[++L];var B=T[++L],w=T[++L]*S,V=D(B,w);A.TL=V,A.TR=V,A.BL=V,A.BR=V;break}case e.FILL_STYLE:{var U=T[++L],X=T[++L]*S,H=D(U,X);C.TL=H,C.TR=H,C.BL=H,C.BR=H;break}case e.GRADIENT_FILL_STYLE:{var b=T[++L]*S,Z=T[++L]*S,K=T[++L]*S,Q=T[++L]*S;C.TL=D(T[++L],b),C.TR=D(T[++L],Z),C.BL=D(T[++L],K),C.BR=D(T[++L],Q);break}case e.GRADIENT_LINE_STYLE:{E=T[++L];var j=T[++L]*S;A.TL=D(T[++L],j),A.TR=D(T[++L],j),A.BL=D(T[++L],j),A.BR=D(T[++L],j);break}case e.ARC:{var q=0,k=T[++L],J=T[++L],_=T[++L],it=T[++L],tt=T[++L],$=T[++L],st=T[++L];for(tt-=it,$?tt<-I?tt=-I:tt>0&&(tt=-I+tt%I):tt>I?tt=I:tt<0&&(tt=I+tt%I),W===null&&(W=new i(k+Math.cos(it)*_,J+Math.sin(it)*_,E),G.push(W),q+=F);q<1+st;)O=tt*q+it,P=k+Math.cos(O)*_,M=J+Math.sin(O)*_,W.points.push(new n(P,M,E)),q+=F;O=tt+it,P=k+Math.cos(O)*_,M=J+Math.sin(O)*_,W.points.push(new n(P,M,E));break}case e.FILL_RECT:{p.batchFillRect(T[++L],T[++L],T[++L],T[++L],x,m);break}case e.FILL_TRIANGLE:{p.batchFillTriangle(T[++L],T[++L],T[++L],T[++L],T[++L],T[++L],x,m);break}case e.STROKE_TRIANGLE:{p.batchStrokeTriangle(T[++L],T[++L],T[++L],T[++L],T[++L],T[++L],E,x,m);break}case e.LINE_TO:{W!==null?W.points.push(new n(T[++L],T[++L],E)):(W=new i(T[++L],T[++L],E),G.push(W));break}case e.MOVE_TO:{W=new i(T[++L],T[++L],E),G.push(W);break}case e.SAVE:{r.push(x.copyToArray());break}case e.RESTORE:{x.copyFromArray(r.pop());break}case e.TRANSLATE:{k=T[++L],J=T[++L],x.translate(k,J);break}case e.SCALE:{k=T[++L],J=T[++L],x.scale(k,J);break}case e.ROTATE:{x.rotate(T[++L]);break}}l.pipelines.postBatch(f)}};h.exports=o},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1066),c=t(1067),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s.addToRenderList(c),c.pipeline.batchSprite(c,s,a)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s.addToRenderList(c),e.batchSprite(c,c.frame,s,a)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1069),c=t(1070),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s.addToRenderList(c),this.pipeline.batchSprite(c,s,a)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s.addToRenderList(c),e.batchSprite(c,c.frame,s,a)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1072),c=t(1073),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=c.list,n=a.length;if(n!==0){c.depthSort(),e.pipelines.preBatch(c);var i=c.blendMode!==-1;i||e.setBlendMode(0);for(var r=c.alpha,u=0;u<n;u++){var o=a[u];if(o.willRender(s)){var l,f,d,v;if(o.alphaTopLeft!==void 0)l=o.alphaTopLeft,f=o.alphaTopRight,d=o.alphaBottomLeft,v=o.alphaBottomRight;else{var p=o.alpha;l=p,f=p,d=p,v=p}!i&&o.blendMode!==e.currentBlendMode&&e.setBlendMode(o.blendMode);var m=o.mask;m&&m.preRenderWebGL(e,o,s);var x=o.type;x!==e.currentType&&(e.newType=!0,e.currentType=x),e.nextTypeMatch=u<n-1?a[u+1].type===e.currentType:!1,o.setAlpha(l*r,f*r,d*r,v*r),o.renderWebGL(e,o,s),o.setAlpha(l,f,d,v),m&&m.postRenderWebGL(e,s),e.newType=!1}}e.pipelines.postBatch(c)}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=c.list;if(a.length!==0){c.depthSort();var n=c.blendMode!==-1;n||e.setBlendMode(0);var i=c._alpha;c.mask&&c.mask.preRenderCanvas(e,null,s);for(var r=0;r<a.length;r++){var u=a[r];if(u.willRender(s)){var o=u.alpha;!n&&u.blendMode!==e.currentBlendMode&&e.setBlendMode(u.blendMode),u.setAlpha(o*i),u.renderCanvas(e,u,s),u.setAlpha(o)}}c.mask&&c.mask.postRenderCanvas(e)}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={EmitterOp:t(449),GravityWell:t(450),Particle:t(451),ParticleEmitter:t(452),ParticleEmitterManager:t(220),Zones:t(1078)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1076),c=t(1077),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),c=t(12),s=new e,a=new e,n=new e,i=new e,r=function(u,o,l,f){var d=o.emitters.list,v=d.length;if(v!==0){var p=u.pipelines.set(o.pipeline),m=s,x=a,T=n,S=i;f?(S.loadIdentity(),S.multiply(f),S.translate(o.x,o.y),S.rotate(o.rotation),S.scale(o.scaleX,o.scaleY)):S.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);var E=l.roundPixels,C=o.defaultFrame.glTexture,A=c.getTintAppendFloatAlpha,P=p.setGameObject(o,o.defaultFrame);u.pipelines.preBatch(o);for(var M=0;M<v;M++){var O=d[M],F=O.alive,I=F.length;if(!(!O.visible||I===0)){l.addToRenderList(O);var N=O.scrollFactorX,G=O.scrollFactorY;u.setBlendMode(O.blendMode),O.mask&&(O.mask.preRenderWebGL(u,O,l),u.pipelines.set(o.pipeline));for(var Y=0,z=0;z<I;z++){var W=F[z],D=W.alpha*l.alpha;if(!(D<=0)){T.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),m.copyFrom(l.matrix),m.multiplyWithOffset(S,-l.scrollX*N,-l.scrollY*G),T.e=W.x,T.f=W.y,m.multiply(T,x);var L=W.frame,B=-L.halfWidth,w=-L.halfHeight,V=B+L.width,U=w+L.height,X=x.getXRound(B,w,E),H=x.getYRound(B,w,E),b=x.getXRound(B,U,E),Z=x.getYRound(B,U,E),K=x.getXRound(V,U,E),Q=x.getYRound(V,U,E),j=x.getXRound(V,w,E),q=x.getYRound(V,w,E),k=A(W.tint,D);p.batchQuad(O,X,H,b,Z,K,Q,j,q,L.u0,L.v0,L.u1,L.v1,k,k,k,k,Y,C,P)}}O.mask&&O.mask.postRenderWebGL(u,l)}}u.pipelines.postBatch(o)}};h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),c=new e,s=new e,a=new e,n=new e,i=function(r,u,o,l){var f=u.emitters.list,d=f.length;if(d!==0){var v=c.copyFrom(o.matrix),p=s,m=a,x=n;l?(x.loadIdentity(),x.multiply(l),x.translate(u.x,u.y),x.rotate(u.rotation),x.scale(u.scaleX,u.scaleY)):x.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);for(var T=r.currentContext,S=o.roundPixels,E=0;E<d;E++){var C=f[E],A=C.alive,P=A.length;if(!(!C.visible||P===0)){o.addToRenderList(C);var M=C.scrollFactorX,O=C.scrollFactorY;T.save(),T.globalCompositeOperation=r.blendModes[C.blendMode];for(var F=0;F<P;F++){var I=A[F],N=I.alpha*o.alpha;if(!(N<=0)){m.applyITRS(I.x,I.y,I.rotation,I.scaleX,I.scaleY),v.copyFrom(o.matrix),v.multiplyWithOffset(x,-o.scrollX*M,-o.scrollY*O),m.e=I.x,m.f=I.y,v.multiply(m,p);var G=I.frame,Y=G.canvasData,z=-G.halfWidth,W=-G.halfHeight;T.globalAlpha=N,T.save(),p.setToContext(T),S&&(z=Math.round(z),W=Math.round(W)),T.imageSmoothingEnabled=!(!r.antialias||G.source.scaleMode),T.drawImage(G.source.image,Y.x,Y.y,Y.width,Y.height,z,W,Y.width,Y.height),T.restore()}}T.restore()}}}};h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DeathZone:t(453),EdgeZone:t(454),RandomZone:t(456)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1080),c=t(1081),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),c=function(s,a,n,i){n.addToRenderList(a);var r=n.alpha,u=a.renderTarget,o=u.width,l=u.height,f=e.getTintAppendFloatAlpha,d=s.pipelines.set(a.pipeline),v=d.setTexture2D(u.texture);s.pipelines.preBatch(a),d.batchTexture(a,u.texture,o,l,a.x,a.y,o,l,a.scaleX,a.scaleY,a.rotation,a.flipX,!a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,o,l,f(a.tintTopLeft,r*a._alphaTL),f(a.tintTopRight,r*a._alphaTR),f(a.tintBottomLeft,r*a._alphaBL),f(a.tintBottomRight,r*a._alphaBR),a.tintFill,0,0,n,i,!0,v),s.resetTextures(),s.pipelines.postBatch(a)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){s.addToRenderList(c),e.batchSprite(c,c.frame,s,a)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1083),c=t(17),s={Parse:t(1084)};s=c(!1,s,e),h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),c=function(s,a){var n=a.width,i=a.height,r=Math.floor(n/2),u=Math.floor(i/2),o=e(a,"chars","");if(o!==""){var l=e(a,"image",""),f=s.sys.textures.getFrame(l),d=f.cutX,v=f.cutY,p=f.source.width,m=f.source.height,x=e(a,"offset.x",0),T=e(a,"offset.y",0),S=e(a,"spacing.x",0),E=e(a,"spacing.y",0),C=e(a,"lineSpacing",0),A=e(a,"charsPerRow",null);A===null&&(A=p/n,A>o.length&&(A=o.length));for(var P=x,M=T,O={retroFont:!0,font:l,size:n,lineHeight:i+C,chars:{}},F=0,I=0;I<o.length;I++){var N=o.charCodeAt(I),G=(d+P)/p,Y=(v+M)/m,z=(d+P+n)/p,W=(v+M+i)/m;O.chars[N]={x:P,y:M,width:n,height:i,centerX:r,centerY:u,xOffset:0,yOffset:0,xAdvance:n,data:{},kerning:{},u0:G,v0:Y,u1:z,v1:W},F++,F===A?(F=0,P=x,M+=i+E):P+=n+S}var D={data:O,frame:null,texture:l};return D}};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1086),c=t(1087),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=t(12),s=function(a,n,i,r){i.addToRenderList(n);var u=a.pipelines.set(n.pipeline,n),o=e(n,i,r).calc,l=n.vertices,f=n.uv,d=n.colors,v=n.alphas,p=n.alpha,m=c.getTintAppendFloatAlpha,x=i.roundPixels,T=l.length,S=Math.floor(T*.5);u.flush(),a.pipelines.preBatch(n);var E=u.setGameObject(n),C=u.vertexViewF32,A=u.vertexViewU32,P=u.vertexCount*u.currentShader.vertexComponentCount-1,M=0,O=n.tintFill;n.dirty&&n.updateVertices();for(var F=n.debugCallback,I=[],N=0;N<T;N+=2){var G=l[N+0],Y=l[N+1],z=G*o.a+Y*o.c+o.e,W=G*o.b+Y*o.d+o.f;x&&(z=Math.round(z),W=Math.round(W)),C[++P]=z,C[++P]=W,C[++P]=f[N+0],C[++P]=f[N+1],C[++P]=E,C[++P]=O,A[++P]=m(d[M],i.alpha*(v[M]*p)),M++,F&&(I[N+0]=z,I[N+1]=W)}F&&F.call(n,n,T,I),u.vertexCount+=S,a.pipelines.postBatch(n)};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1089),c=t(1090),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),c=function(s,a,n,i){if(!(a.width===0||a.height===0)){n.addToRenderList(a);var r=a.frame,u=r.width,o=r.height,l=e.getTintAppendFloatAlpha,f=s.pipelines.set(a.pipeline,a),d=f.setTexture2D(r.glTexture,a);s.pipelines.preBatch(a),f.batchTexture(a,r.glTexture,u,o,a.x,a.y,u/a.style.resolution,o/a.style.resolution,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,u,o,l(a.tintTopLeft,n.alpha*a._alphaTL),l(a.tintTopRight,n.alpha*a._alphaTR),l(a.tintBottomLeft,n.alpha*a._alphaBL),l(a.tintBottomRight,n.alpha*a._alphaBR),a.tintFill,0,0,n,i,!1,d),s.pipelines.postBatch(a)}};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){c.width===0||c.height===0||(s.addToRenderList(c),e.batchSprite(c,c.frame,s,a))};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1092),c=t(1093),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),c=function(s,a,n,i){a.updateCanvas();var r=a.width,u=a.height;if(!(r===0||u===0)){n.addToRenderList(a),s.pipelines.preBatch(a);var o=e.getTintAppendFloatAlpha,l=s.pipelines.set(a.pipeline,a),f=l.setTexture2D(a.fillPattern,a);l.batchTexture(a,a.fillPattern,a.displayFrame.width*a.tileScaleX,a.displayFrame.height*a.tileScaleY,a.x,a.y,r,u,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.originX*r,a.originY*u,0,0,r,u,o(a.tintTopLeft,n.alpha*a._alphaTL),o(a.tintTopRight,n.alpha*a._alphaTR),o(a.tintBottomLeft,n.alpha*a._alphaBL),o(a.tintBottomRight,n.alpha*a._alphaBR),a.tintFill,a.tilePositionX%a.displayFrame.width/a.displayFrame.width,a.tilePositionY%a.displayFrame.height/a.displayFrame.height,n,i,!1,f),s.pipelines.postBatch(a)}};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){c.updateCanvas(),s.addToRenderList(c),e.batchSprite(c,c.frame,s,a)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1095),c=t(1096),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){c.videoTexture&&(s.addToRenderList(c),c.pipeline.batchSprite(c,s,a))};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){c.videoTexture&&(s.addToRenderList(c),e.batchSprite(c,c.frame,s,a))};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1098),c=t(1099),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=t(114),s=t(81),a=function(n,i,r,u){r.addToRenderList(i);var o=n.pipelines.set(i.pipeline),l=e(i,r,u),f=o.calcMatrix.copyFrom(l.calc),d=i._displayOriginX,v=i._displayOriginY,p=r.alpha*i.alpha;n.pipelines.preBatch(i),i.isFilled&&c(o,f,i,p,d,v),i.isStroked&&s(o,i,p,d,v),n.pipelines.postBatch(i)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(36),c=t(48),s=t(60),a=t(30),n=function(i,r,u,o){u.addToRenderList(r);var l=i.currentContext;if(a(i,l,r,u,o)){var f=r.radius;l.beginPath(),l.arc(f-r.originX*(f*2),f-r.originY*(f*2),f,e(r._startAngle),e(r._endAngle),r.anticlockwise),r.closePath&&l.closePath(),r.isFilled&&(c(l,r),l.fill()),r.isStroked&&(s(l,r),l.stroke()),l.restore()}};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1101),c=t(1102),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),c=t(19),s=t(81),a=function(n,i,r,u){r.addToRenderList(i);var o=n.pipelines.set(i.pipeline),l=c(i,r,u),f=o.calcMatrix.copyFrom(l.calc),d=i._displayOriginX+i._curveBounds.x,v=i._displayOriginY+i._curveBounds.y,p=r.alpha*i.alpha;n.pipelines.preBatch(i),i.isFilled&&e(o,f,i,p,d,v),i.isStroked&&s(o,i,p,d,v),n.pipelines.postBatch(i)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),c=t(60),s=t(30),a=function(n,i,r,u){r.addToRenderList(i);var o=n.currentContext;if(s(n,o,i,r,u)){var l=i._displayOriginX+i._curveBounds.x,f=i._displayOriginY+i._curveBounds.y,d=i.pathData,v=d.length-1,p=d[0]-l,m=d[1]-f;o.beginPath(),o.moveTo(p,m),i.closePath||(v-=2);for(var x=2;x<v;x+=2){var T=d[x]-l,S=d[x+1]-f;o.lineTo(T,S)}i.closePath&&o.closePath(),i.isFilled&&(e(o,i),o.fill()),i.isStroked&&(c(o,i),o.stroke()),o.restore()}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1104),c=t(1105),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),c=t(19),s=t(81),a=function(n,i,r,u){r.addToRenderList(i);var o=n.pipelines.set(i.pipeline),l=c(i,r,u),f=o.calcMatrix.copyFrom(l.calc),d=i._displayOriginX,v=i._displayOriginY,p=r.alpha*i.alpha;n.pipelines.preBatch(i),i.isFilled&&e(o,f,i,p,d,v),i.isStroked&&s(o,i,p,d,v),n.pipelines.postBatch(i)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),c=t(60),s=t(30),a=function(n,i,r,u){r.addToRenderList(i);var o=n.currentContext;if(s(n,o,i,r,u)){var l=i._displayOriginX,f=i._displayOriginY,d=i.pathData,v=d.length-1,p=d[0]-l,m=d[1]-f;o.beginPath(),o.moveTo(p,m),i.closePath||(v-=2);for(var x=2;x<v;x+=2){var T=d[x]-l,S=d[x+1]-f;o.lineTo(T,S)}o.closePath(),i.isFilled&&(e(o,i),o.fill()),i.isStroked&&(c(o,i),o.stroke()),o.restore()}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1107),c=t(1108),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=t(12),s=function(a,n,i,r){i.addToRenderList(n);var u=a.pipelines.set(n.pipeline),o=e(n,i,r),l=u.calcMatrix.copyFrom(o.calc);l.translate(-n._displayOriginX,-n._displayOriginY);var f=i.alpha*n.alpha,d=n.width,v=n.height,p=n.cellWidth,m=n.cellHeight,x=Math.ceil(d/p),T=Math.ceil(v/m),S=p,E=m,C=p-(x*p-d),A=m-(T*m-v),P,M,O=n.showCells,F=n.showAltCells,I=n.showOutline,N=0,G=0,Y=0,z=0,W=0;if(I&&(S--,E--,C===p&&C--,A===m&&A--),a.pipelines.preBatch(n),O&&n.fillAlpha>0)for(P=u.fillTint,M=c.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*f),P.TL=M,P.TR=M,P.BL=M,P.BR=M,G=0;G<T;G++)for(F&&(Y=G%2),N=0;N<x;N++){if(F&&Y){Y=0;continue}Y++,z=N<x-1?S:C,W=G<T-1?E:A,u.batchFillRect(N*p,G*m,z,W)}if(F&&n.altFillAlpha>0)for(P=u.fillTint,M=c.getTintAppendFloatAlpha(n.altFillColor,n.altFillAlpha*f),P.TL=M,P.TR=M,P.BL=M,P.BR=M,G=0;G<T;G++)for(F&&(Y=G%2),N=0;N<x;N++){if(F&&!Y){Y=1;continue}Y=0,z=N<x-1?S:C,W=G<T-1?E:A,u.batchFillRect(N*p,G*m,z,W)}if(I&&n.outlineFillAlpha>0){var D=u.strokeTint,L=c.getTintAppendFloatAlpha(n.outlineFillColor,n.outlineFillAlpha*f);for(D.TL=L,D.TR=L,D.BL=L,D.BR=L,N=1;N<x;N++){var B=N*p;u.batchLine(B,0,B,v,1,1,1,0,!1)}for(G=1;G<T;G++){var w=G*m;u.batchLine(0,w,d,w,1,1,1,0,!1)}}a.pipelines.postBatch(n)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),c=t(60),s=t(30),a=function(n,i,r,u){r.addToRenderList(i);var o=n.currentContext;if(s(n,o,i,r,u)){var l=-i._displayOriginX,f=-i._displayOriginY,d=r.alpha*i.alpha,v=i.width,p=i.height,m=i.cellWidth,x=i.cellHeight,T=Math.ceil(v/m),S=Math.ceil(p/x),E=m,C=x,A=m-(T*m-v),P=x-(S*x-p),M=i.showCells,O=i.showAltCells,F=i.showOutline,I=0,N=0,G=0,Y=0,z=0;if(F&&(E--,C--,A===m&&A--,P===x&&P--),M&&i.fillAlpha>0)for(e(o,i),N=0;N<S;N++)for(O&&(G=N%2),I=0;I<T;I++){if(O&&G){G=0;continue}G++,Y=I<T-1?E:A,z=N<S-1?C:P,o.fillRect(l+I*m,f+N*x,Y,z)}if(O&&i.altFillAlpha>0)for(e(o,i,i.altFillColor,i.altFillAlpha*d),N=0;N<S;N++)for(O&&(G=N%2),I=0;I<T;I++){if(O&&!G){G=1;continue}G=0,Y=I<T-1?E:A,z=N<S-1?C:P,o.fillRect(l+I*m,f+N*x,Y,z)}if(F&&i.outlineFillAlpha>0){for(c(o,i,i.outlineFillColor,i.outlineFillAlpha*d),I=1;I<T;I++){var W=I*m;o.beginPath(),o.moveTo(W+l,f),o.lineTo(W+l,p+f),o.stroke()}for(N=1;N<S;N++){var D=N*x;o.beginPath(),o.moveTo(l,D+f),o.lineTo(l+v,D+f),o.stroke()}}o.restore()}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1110),c=t(1111),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=t(12),s=function(a,n,i,r){i.addToRenderList(n);var u=a.pipelines.set(n.pipeline),o=e(n,i,r),l=u.calcMatrix.copyFrom(o.calc),f=n.width,d=n.height,v=f/2,p=f/n.projection,m=i.alpha*n.alpha;if(n.isFilled){var x,T,S,E,C,A,P,M,O;a.pipelines.preBatch(n),n.showTop&&(x=c.getTintAppendFloatAlpha(n.fillTop,m),T=l.getX(-v,-d),S=l.getY(-v,-d),E=l.getX(0,-p-d),C=l.getY(0,-p-d),A=l.getX(v,-d),P=l.getY(v,-d),M=l.getX(0,p-d),O=l.getY(0,p-d),u.batchQuad(n,T,S,E,C,A,P,M,O,0,0,1,1,x,x,x,x,2)),n.showLeft&&(x=c.getTintAppendFloatAlpha(n.fillLeft,m),T=l.getX(-v,0),S=l.getY(-v,0),E=l.getX(0,p),C=l.getY(0,p),A=l.getX(0,p-d),P=l.getY(0,p-d),M=l.getX(-v,-d),O=l.getY(-v,-d),u.batchQuad(n,T,S,E,C,A,P,M,O,0,0,1,1,x,x,x,x,2)),n.showRight&&(x=c.getTintAppendFloatAlpha(n.fillRight,m),T=l.getX(v,0),S=l.getY(v,0),E=l.getX(0,p),C=l.getY(0,p),A=l.getX(0,p-d),P=l.getY(0,p-d),M=l.getX(v,-d),O=l.getY(v,-d),u.batchQuad(n,T,S,E,C,A,P,M,O,0,0,1,1,x,x,x,x,2)),a.pipelines.postBatch(n)}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),c=t(30),s=function(a,n,i,r){i.addToRenderList(n);var u=a.currentContext;if(c(a,u,n,i,r)&&n.isFilled){var o=n.width,l=n.height,f=o/2,d=o/n.projection;n.showTop&&(e(u,n,n.fillTop),u.beginPath(),u.moveTo(-f,-l),u.lineTo(0,-d-l),u.lineTo(f,-l),u.lineTo(f,-1),u.lineTo(0,d-1),u.lineTo(-f,-1),u.lineTo(-f,-l),u.fill()),n.showLeft&&(e(u,n,n.fillLeft),u.beginPath(),u.moveTo(-f,0),u.lineTo(0,d),u.lineTo(0,d-l),u.lineTo(-f,-l),u.lineTo(-f,0),u.fill()),n.showRight&&(e(u,n,n.fillRight),u.beginPath(),u.moveTo(f,0),u.lineTo(0,d),u.lineTo(0,d-l),u.lineTo(f,-l),u.lineTo(f,0),u.fill()),u.restore()}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1113),c=t(1114),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=t(12),s=function(a,n,i,r){i.addToRenderList(n);var u=a.pipelines.set(n.pipeline),o=e(n,i,r),l=u.calcMatrix.copyFrom(o.calc),f=n.width,d=n.height,v=f/2,p=f/n.projection,m=n.isReversed,x=i.alpha*n.alpha;if(n.isFilled){a.pipelines.preBatch(n);var T,S,E,C,A,P,M;if(n.showTop&&m){T=c.getTintAppendFloatAlpha(n.fillTop,x),S=l.getX(-v,-d),E=l.getY(-v,-d),C=l.getX(0,-p-d),A=l.getY(0,-p-d),P=l.getX(v,-d),M=l.getY(v,-d);var O=l.getX(0,p-d),F=l.getY(0,p-d);u.batchQuad(n,S,E,C,A,P,M,O,F,0,0,1,1,T,T,T,T,2)}n.showLeft&&(T=c.getTintAppendFloatAlpha(n.fillLeft,x),m?(S=l.getX(-v,-d),E=l.getY(-v,-d),C=l.getX(0,p),A=l.getY(0,p),P=l.getX(0,p-d),M=l.getY(0,p-d)):(S=l.getX(-v,0),E=l.getY(-v,0),C=l.getX(0,p),A=l.getY(0,p),P=l.getX(0,p-d),M=l.getY(0,p-d)),u.batchTri(n,S,E,C,A,P,M,0,0,1,1,T,T,T,2)),n.showRight&&(T=c.getTintAppendFloatAlpha(n.fillRight,x),m?(S=l.getX(v,-d),E=l.getY(v,-d),C=l.getX(0,p),A=l.getY(0,p),P=l.getX(0,p-d),M=l.getY(0,p-d)):(S=l.getX(v,0),E=l.getY(v,0),C=l.getX(0,p),A=l.getY(0,p),P=l.getX(0,p-d),M=l.getY(0,p-d)),u.batchTri(n,S,E,C,A,P,M,0,0,1,1,T,T,T,2)),a.pipelines.postBatch(n)}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),c=t(30),s=function(a,n,i,r){i.addToRenderList(n);var u=a.currentContext;if(c(a,u,n,i,r)&&n.isFilled){var o=n.width,l=n.height,f=o/2,d=o/n.projection,v=n.isReversed;n.showTop&&v&&(e(u,n,n.fillTop),u.beginPath(),u.moveTo(-f,-l),u.lineTo(0,-d-l),u.lineTo(f,-l),u.lineTo(0,d-l),u.fill()),n.showLeft&&(e(u,n,n.fillLeft),u.beginPath(),v?(u.moveTo(-f,-l),u.lineTo(0,d),u.lineTo(0,d-l)):(u.moveTo(-f,0),u.lineTo(0,d),u.lineTo(0,d-l)),u.fill()),n.showRight&&(e(u,n,n.fillRight),u.beginPath(),v?(u.moveTo(f,-l),u.lineTo(0,d),u.lineTo(0,d-l)):(u.moveTo(f,0),u.lineTo(0,d),u.lineTo(0,d-l)),u.fill()),u.restore()}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1116),c=t(1117),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=t(12),s=function(a,n,i,r){i.addToRenderList(n);var u=a.pipelines.set(n.pipeline),o=e(n,i,r);u.calcMatrix.copyFrom(o.calc);var l=n._displayOriginX,f=n._displayOriginY,d=i.alpha*n.alpha;if(a.pipelines.preBatch(n),n.isStroked){var v=u.strokeTint,p=c.getTintAppendFloatAlpha(n.strokeColor,n.strokeAlpha*d);v.TL=p,v.TR=p,v.BL=p,v.BR=p;var m=n._startWidth,x=n._endWidth;u.batchLine(n.geom.x1-l,n.geom.y1-f,n.geom.x2-l,n.geom.y2-f,m,x,1,0,!1,o.sprite,o.camera)}a.pipelines.postBatch(n)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(60),c=t(30),s=function(a,n,i,r){i.addToRenderList(n);var u=a.currentContext;if(c(a,u,n,i,r)){var o=n._displayOriginX,l=n._displayOriginY;n.isStroked&&(e(u,n),u.beginPath(),u.moveTo(n.geom.x1-o,n.geom.y1-l),u.lineTo(n.geom.x2-o,n.geom.y2-l),u.stroke()),u.restore()}};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1119),c=t(1120),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),c=t(19),s=t(81),a=function(n,i,r,u){r.addToRenderList(i);var o=n.pipelines.set(i.pipeline),l=c(i,r,u),f=o.calcMatrix.copyFrom(l.calc),d=i._displayOriginX,v=i._displayOriginY,p=r.alpha*i.alpha;n.pipelines.preBatch(i),i.isFilled&&e(o,f,i,p,d,v),i.isStroked&&s(o,i,p,d,v),n.pipelines.postBatch(i)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),c=t(60),s=t(30),a=function(n,i,r,u){r.addToRenderList(i);var o=n.currentContext;if(s(n,o,i,r,u)){var l=i._displayOriginX,f=i._displayOriginY,d=i.pathData,v=d.length-1,p=d[0]-l,m=d[1]-f;o.beginPath(),o.moveTo(p,m),i.closePath||(v-=2);for(var x=2;x<v;x+=2){var T=d[x]-l,S=d[x+1]-f;o.lineTo(T,S)}o.closePath(),i.isFilled&&(e(o,i),o.fill()),i.isStroked&&(c(o,i),o.stroke()),o.restore()}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1122),c=t(1123),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=t(81),s=t(12),a=function(n,i,r,u){r.addToRenderList(i);var o=n.pipelines.set(i.pipeline),l=e(i,r,u);o.calcMatrix.copyFrom(l.calc);var f=i._displayOriginX,d=i._displayOriginY,v=r.alpha*i.alpha;if(n.pipelines.preBatch(i),i.isFilled){var p=o.fillTint,m=s.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*v);p.TL=m,p.TR=m,p.BL=m,p.BR=m,o.batchFillRect(-f,-d,i.width,i.height)}i.isStroked&&c(o,i,v,f,d),n.pipelines.postBatch(i)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),c=t(60),s=t(30),a=function(n,i,r,u){r.addToRenderList(i);var o=n.currentContext;if(s(n,o,i,r,u)){var l=i._displayOriginX,f=i._displayOriginY;i.isFilled&&(e(o,i),o.fillRect(-l,-f,i.width,i.height)),i.isStroked&&(c(o,i),o.beginPath(),o.rect(-l,-f,i.width,i.height),o.stroke()),o.restore()}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1125),c=t(1126),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),c=t(19),s=t(81),a=function(n,i,r,u){r.addToRenderList(i);var o=n.pipelines.set(i.pipeline),l=c(i,r,u),f=o.calcMatrix.copyFrom(l.calc),d=i._displayOriginX,v=i._displayOriginY,p=r.alpha*i.alpha;n.pipelines.preBatch(i),i.isFilled&&e(o,f,i,p,d,v),i.isStroked&&s(o,i,p,d,v),n.pipelines.postBatch(i)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),c=t(60),s=t(30),a=function(n,i,r,u){r.addToRenderList(i);var o=n.currentContext;if(s(n,o,i,r,u)){var l=i._displayOriginX,f=i._displayOriginY,d=i.pathData,v=d.length-1,p=d[0]-l,m=d[1]-f;o.beginPath(),o.moveTo(p,m),i.closePath||(v-=2);for(var x=2;x<v;x+=2){var T=d[x]-l,S=d[x+1]-f;o.lineTo(T,S)}o.closePath(),i.isFilled&&(e(o,i),o.fill()),i.isStroked&&(c(o,i),o.stroke()),o.restore()}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1128),c=t(1129),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=t(81),s=t(12),a=function(n,i,r,u){r.addToRenderList(i);var o=n.pipelines.set(i.pipeline),l=e(i,r,u);o.calcMatrix.copyFrom(l.calc);var f=i._displayOriginX,d=i._displayOriginY,v=r.alpha*i.alpha;if(n.pipelines.preBatch(i),i.isFilled){var p=o.fillTint,m=s.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*v);p.TL=m,p.TR=m,p.BL=m,p.BR=m;var x=i.geom.x1-f,T=i.geom.y1-d,S=i.geom.x2-f,E=i.geom.y2-d,C=i.geom.x3-f,A=i.geom.y3-d;o.batchFillTriangle(x,T,S,E,C,A,l.sprite,l.camera)}i.isStroked&&c(o,i,v,f,d),n.pipelines.postBatch(i)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),c=t(60),s=t(30),a=function(n,i,r,u){r.addToRenderList(i);var o=n.currentContext;if(s(n,o,i,r,u)){var l=i._displayOriginX,f=i._displayOriginY,d=i.geom.x1-l,v=i.geom.y1-f,p=i.geom.x2-l,m=i.geom.y2-f,x=i.geom.x3-l,T=i.geom.y3-f;o.beginPath(),o.moveTo(d,v),o.lineTo(p,m),o.lineTo(x,T),o.closePath(),i.isFilled&&(e(o,i),o.fill()),i.isStroked&&(c(o,i),o.stroke()),o.restore()}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(213),c=t(5);c.register("blitter",function(s,a,n,i){return this.displayList.add(new e(this.scene,s,a,n,i))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(214),c=t(5);c.register("container",function(s,a,n){return this.displayList.add(new e(this.scene,s,a,n))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(442),c=t(5);c.register("dom",function(s,a,n,i,r){var u=new e(this.scene,s,a,n,i,r);return this.displayList.add(u),u})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(215),c=t(5);c.register("dynamicBitmapText",function(s,a,n,i,r){return this.displayList.add(new e(this.scene,s,a,n,i,r))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(444),c=t(5);c.register("extern",function(){var s=new e(this.scene);return this.displayList.add(s),s})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(216),c=t(5);c.register("graphics",function(s){return this.displayList.add(new e(this.scene,s))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(113),c=t(5);c.register("group",function(s,a){return this.updateList.add(new e(this.scene,s,a))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(125),c=t(5);c.register("image",function(s,a,n,i){return this.displayList.add(new e(this.scene,s,a,n,i))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(219),c=t(5);c.register("layer",function(s){return this.displayList.add(new e(this.scene,s))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(220);e.register("particles",function(s,a,n){return this.displayList.add(new c(this.scene,s,a,n))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(457);e.register("follower",function(s,a,n,i,r){var u=new c(this.scene,s,a,n,i,r);return this.displayList.add(u),this.updateList.add(u),u})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(221);e.register("renderTexture",function(s,a,n,i,r,u){return this.displayList.add(new c(this.scene,s,a,n,i,r,u))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(223),c=t(5);c.register("rope",function(s,a,n,i,r,u,o,l){return this.displayList.add(new e(this.scene,s,a,n,i,r,u,o,l))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(73);e.register("sprite",function(s,a,n,i){var r=new c(this.scene,s,a,n,i);return this.displayList.add(r),r})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),c=t(5);c.register("bitmapText",function(s,a,n,i,r,u){return this.displayList.add(new e(this.scene,s,a,n,i,r,u))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(224),c=t(5);c.register("text",function(s,a,n,i){return this.displayList.add(new e(this.scene,s,a,n,i))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(225),c=t(5);c.register("tileSprite",function(s,a,n,i,r,u){return this.displayList.add(new e(this.scene,s,a,n,i,r,u))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(129),c=t(5);c.register("zone",function(s,a,n,i){return this.displayList.add(new e(this.scene,s,a,n,i))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(226),c=t(5);c.register("video",function(s,a,n){return this.displayList.add(new e(this.scene,s,a,n))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(461),c=t(5);c.register("arc",function(s,a,n,i,r,u,o,l){return this.displayList.add(new e(this.scene,s,a,n,i,r,u,o,l))}),c.register("circle",function(s,a,n,i,r){return this.displayList.add(new e(this.scene,s,a,n,0,360,!1,i,r))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(462);e.register("curve",function(s,a,n,i,r){return this.displayList.add(new c(this.scene,s,a,n,i,r))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(463),c=t(5);c.register("ellipse",function(s,a,n,i,r,u){return this.displayList.add(new e(this.scene,s,a,n,i,r,u))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(464);e.register("grid",function(s,a,n,i,r,u,o,l,f,d){return this.displayList.add(new c(this.scene,s,a,n,i,r,u,o,l,f,d))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(465);e.register("isobox",function(s,a,n,i,r,u,o){return this.displayList.add(new c(this.scene,s,a,n,i,r,u,o))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(466);e.register("isotriangle",function(s,a,n,i,r,u,o,l){return this.displayList.add(new c(this.scene,s,a,n,i,r,u,o,l))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(467);e.register("line",function(s,a,n,i,r,u,o,l){return this.displayList.add(new c(this.scene,s,a,n,i,r,u,o,l))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(468);e.register("polygon",function(s,a,n,i,r){return this.displayList.add(new c(this.scene,s,a,n,i,r))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(473);e.register("rectangle",function(s,a,n,i,r,u){return this.displayList.add(new c(this.scene,s,a,n,i,r,u))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(474),c=t(5);c.register("star",function(s,a,n,i,r,u,o){return this.displayList.add(new e(this.scene,s,a,n,i,r,u,o))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(475);e.register("triangle",function(s,a,n,i,r,u,o,l,f,d){return this.displayList.add(new c(this.scene,s,a,n,i,r,u,o,l,f,d))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(213),c=t(28),s=t(16),a=t(13);s.register("blitter",function(n,i){n===void 0&&(n={});var r=a(n,"key",null),u=a(n,"frame",null),o=new e(this.scene,0,0,r,u);return i!==void 0&&(n.add=i),c(this.scene,o,n),o})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(214),s=t(16),a=t(13);s.register("container",function(n,i){n===void 0&&(n={});var r=a(n,"x",0),u=a(n,"y",0),o=a(n,"children",null),l=new c(this.scene,r,u,o);return i!==void 0&&(n.add=i),e(this.scene,l,n),l})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(215),c=t(28),s=t(16),a=t(13);s.register("dynamicBitmapText",function(n,i){n===void 0&&(n={});var r=a(n,"font",""),u=a(n,"text",""),o=a(n,"size",!1),l=new e(this.scene,0,0,r,u,o);return i!==void 0&&(n.add=i),c(this.scene,l,n),l})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),c=t(216);e.register("graphics",function(s,a){s===void 0&&(s={}),a!==void 0&&(s.add=a);var n=new c(this.scene,s);return s.add&&this.scene.sys.displayList.add(n),n})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),c=t(113);e.register("group",function(s){return new c(this.scene,null,s)})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(16),s=t(13),a=t(125);c.register("image",function(n,i){n===void 0&&(n={});var r=s(n,"key",null),u=s(n,"frame",null),o=new a(this.scene,0,0,r,u);return i!==void 0&&(n.add=i),e(this.scene,o,n),o})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(219),s=t(16),a=t(13);s.register("layer",function(n,i){n===void 0&&(n={});var r=a(n,"children",null),u=new c(this.scene,r);return i!==void 0&&(n.add=i),e(this.scene,u,n),u})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),c=t(13),s=t(2),a=t(220);e.register("particles",function(n,i){n===void 0&&(n={});var r=c(n,"key",null),u=c(n,"frame",null),o=s(n,"emitters",null),l=new a(this.scene,r,u,o);i!==void 0&&(n.add=i);var f=s(n,"add",!1);return f?this.displayList.add(l):this.updateList.add(l),l})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(16),s=t(13),a=t(221);c.register("renderTexture",function(n,i){n===void 0&&(n={});var r=s(n,"x",0),u=s(n,"y",0),o=s(n,"width",32),l=s(n,"height",32),f=s(n,"key",void 0),d=s(n,"frame",void 0),v=new a(this.scene,r,u,o,l,f,d);return i!==void 0&&(n.add=i),e(this.scene,v,n),v})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(16),s=t(13),a=t(6),n=t(223);c.register("rope",function(i,r){i===void 0&&(i={});var u=s(i,"key",null),o=s(i,"frame",null),l=s(i,"horizontal",!0),f=a(i,"points",void 0),d=a(i,"colors",void 0),v=a(i,"alphas",void 0),p=new n(this.scene,0,0,u,o,f,l,d,v);return r!==void 0&&(i.add=r),e(this.scene,p,i),i.add||this.updateList.add(p),p})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(439),s=t(16),a=t(13),n=t(73);s.register("sprite",function(i,r){i===void 0&&(i={});var u=a(i,"key",null),o=a(i,"frame",null),l=new n(this.scene,0,0,u,o);return r!==void 0&&(i.add=r),e(this.scene,l,i),c(l,i),l})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),c=t(28),s=t(16),a=t(13),n=t(6);s.register("bitmapText",function(i,r){i===void 0&&(i={});var u=n(i,"font",""),o=a(i,"text",""),l=a(i,"size",!1),f=n(i,"align",0),d=new e(this.scene,0,0,u,o,l,f);return r!==void 0&&(i.add=r),c(this.scene,d,i),d})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(16),s=t(13),a=t(224);c.register("text",function(n,i){n===void 0&&(n={});var r=s(n,"text",""),u=s(n,"style",null),o=s(n,"padding",null);o!==null&&(u.padding=o);var l=new a(this.scene,0,0,r,u);return i!==void 0&&(n.add=i),e(this.scene,l,n),l.autoRound=s(n,"autoRound",!0),l.resolution=s(n,"resolution",1),l})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(16),s=t(13),a=t(225);c.register("tileSprite",function(n,i){n===void 0&&(n={});var r=s(n,"x",0),u=s(n,"y",0),o=s(n,"width",512),l=s(n,"height",512),f=s(n,"key",""),d=s(n,"frame",""),v=new a(this.scene,r,u,o,l,f,d);return i!==void 0&&(n.add=i),e(this.scene,v,n),v})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),c=t(13),s=t(129);e.register("zone",function(a){var n=c(a,"x",0),i=c(a,"y",0),r=c(a,"width",1),u=c(a,"height",r);return new s(this.scene,n,i,r,u)})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(16),s=t(13),a=t(226);c.register("video",function(n,i){n===void 0&&(n={});var r=s(n,"key",null),u=new a(this.scene,0,0,r);return i!==void 0&&(n.add=i),e(this.scene,u,n),n.add||this.updateList.add(u),u})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1177),c=t(1178),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=function(s,a,n,i){if(a.shader){if(n.addToRenderList(a),s.pipelines.clear(),a.renderToTexture)a.load(),a.flush();else{var r=e(a,n,i).calc;(s.width!==a._rendererWidth||s.height!==a._rendererHeight)&&a.projOrtho(0,s.width,s.height,0),a.load(r.matrix),a.flush()}s.pipelines.rebind()}};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1180),c=t(1181),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=function(s,a,n,i){var r=a.faces,u=r.length;if(u!==0){n.addToRenderList(a);var o=s.pipelines.set(a.pipeline,a),l=e(a,n,i).calc,f=o.setGameObject(a),d=o.vertexViewF32,v=o.vertexViewU32,p=o.vertexCount*o.currentShader.vertexComponentCount-1,m=a.tintFill,x=[],T=a.debugCallback,S=l.a,E=l.b,C=l.c,A=l.d,P=l.e,M=l.f,O=a.viewPosition.z,F=a.hideCCW,I=n.roundPixels,N=n.alpha*a.alpha,G=0;s.pipelines.preBatch(a);for(var Y=0;Y<u;Y++){var z=r[Y];z.isInView(n,F,O,N,S,E,C,A,P,M,I)&&(o.shouldFlush(3)&&(o.flush(),p=0),p=z.load(d,v,p,f,m),G++,o.vertexCount+=3,T&&x.push(z))}a.totalFrame+=G,T&&T.call(a,a,x),s.pipelines.postBatch(a)}};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1183),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),c=function(s,a,n,i){n.addToRenderList(a);var r=s.pipelines.set(a.pipeline),u=e(a,n,i).calc,o=a.width,l=a.height,f=-a._radius,d=-a._radius,v=f+o,p=d+l,m=u.getX(0,0),x=u.getY(0,0),T=u.getX(f,d),S=u.getY(f,d),E=u.getX(f,p),C=u.getY(f,p),A=u.getX(v,p),P=u.getY(v,p),M=u.getX(v,d),O=u.getY(v,d);s.pipelines.preBatch(a),r.batchPointLight(a,n,T,S,E,C,A,P,M,O,m,x),s.pipelines.postBatch(a)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(229),c=t(5);c.register("shader",function(s,a,n,i,r,u,o){return this.displayList.add(new e(this.scene,s,a,n,i,r,u,o))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(230),c=t(5);c.register("mesh",function(s,a,n,i,r,u,o,l,f,d,v){return this.displayList.add(new e(this.scene,s,a,n,i,r,u,o,l,f,d,v))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(150);e.register("pointlight",function(s,a,n,i,r,u){return this.displayList.add(new c(this.scene,s,a,n,i,r,u))})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(16),s=t(13),a=t(229);c.register("shader",function(n,i){n===void 0&&(n={});var r=s(n,"key",null),u=s(n,"x",0),o=s(n,"y",0),l=s(n,"width",128),f=s(n,"height",128),d=new a(this.scene,r,u,o,l,f);return i!==void 0&&(n.add=i),e(this.scene,d,n),d})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(16),s=t(13),a=t(6),n=t(230);c.register("mesh",function(i,r){i===void 0&&(i={});var u=s(i,"key",null),o=s(i,"frame",null),l=a(i,"vertices",[]),f=a(i,"uvs",[]),d=a(i,"indicies",[]),v=a(i,"containsZ",!1),p=a(i,"normals",[]),m=a(i,"colors",16777215),x=a(i,"alphas",1),T=new n(this.scene,0,0,u,o,l,f,d,v,p,m,x);return r!==void 0&&(i.add=r),e(this.scene,T,i),T})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),c=t(16),s=t(13),a=t(150);c.register("pointlight",function(n,i){n===void 0&&(n={});var r=s(n,"color",16777215),u=s(n,"radius",128),o=s(n,"intensity",1),l=s(n,"attenuation",.1),f=new a(this.scene,0,0,r,u,o,l);return i!==void 0&&(n.add=i),e(this.scene,f,n),f})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(482),s=t(24),a=t(20),n=new e({Extends:c,initialize:function(r){this.scene=r,this.systems=r.sys,r.sys.settings.isBooted||r.sys.events.once(a.BOOT,this.boot,this),c.call(this)},boot:function(){var i=this.systems.events;i.on(a.SHUTDOWN,this.shutdown,this),i.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});s.register("LightsPlugin",n,"lights"),h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65);e.Area=t(1192),e.Circumference=t(302),e.CircumferencePoint=t(169),e.Clone=t(1193),e.Contains=t(66),e.ContainsPoint=t(1194),e.ContainsRect=t(1195),e.CopyFrom=t(1196),e.Equals=t(1197),e.GetBounds=t(1198),e.GetPoint=t(300),e.GetPoints=t(301),e.Offset=t(1199),e.OffsetPoint=t(1200),e.Random=t(170),h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),c=function(s){return new e(s.x,s.y,s.radius)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),c=function(s,a){return e(s,a.x,a.y)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),c=function(s,a){return e(s,a.x,a.y)&&e(s,a.right,a.y)&&e(s,a.x,a.bottom)&&e(s,a.right,a.bottom)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c.setTo(e.x,e.y,e.radius)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x===c.x&&e.y===c.y&&e.radius===c.radius};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=function(s,a){return a===void 0&&(a=new e),a.x=s.left,a.y=s.top,a.width=s.diameter,a.height=s.diameter,a};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e.x+=c,e.y+=s,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x+=c.x,e.y+=c.y,e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(111);e.Area=t(1202),e.Circumference=t(447),e.CircumferencePoint=t(218),e.Clone=t(1203),e.Contains=t(112),e.ContainsPoint=t(1204),e.ContainsRect=t(1205),e.CopyFrom=t(1206),e.Equals=t(1207),e.GetBounds=t(1208),e.GetPoint=t(445),e.GetPoints=t(446),e.Offset=t(1209),e.OffsetPoint=t(1210),e.Random=t(180),h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(111),c=function(s){return new e(s.x,s.y,s.width,s.height)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(112),c=function(s,a){return e(s,a.x,a.y)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(112),c=function(s,a){return e(s,a.x,a.y)&&e(s,a.right,a.y)&&e(s,a.x,a.bottom)&&e(s,a.right,a.bottom)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c.setTo(e.x,e.y,e.width,e.height)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x===c.x&&e.y===c.y&&e.width===c.width&&e.height===c.height};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=function(s,a){return a===void 0&&(a=new e),a.x=s.left,a.y=s.top,a.width=s.width,a.height=s.height,a};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e.x+=c,e.y+=s,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x+=c.x,e.y+=c.y,e};h.exports=t},function(h,g,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=t(231),s=function(a,n,i){if(i===void 0&&(i=[]),c(a,n)){var r=a.x,u=a.y,o=a.radius,l=n.x,f=n.y,d=n.radius,v,p,m,x,T;if(u===f)T=(d*d-o*o-l*l+r*r)/(2*(r-l)),v=1,p=-2*f,m=l*l+T*T-2*l*T+f*f-d*d,x=p*p-4*v*m,x===0?i.push(new e(T,-p/(2*v))):x>0&&(i.push(new e(T,(-p+Math.sqrt(x))/(2*v))),i.push(new e(T,(-p-Math.sqrt(x))/(2*v))));else{var S=(r-l)/(u-f),E=(d*d-o*o-l*l+r*r-f*f+u*u)/(2*(u-f));v=S*S+1,p=2*u*S-2*E*S-2*r,m=r*r+u*u+E*E-o*o-2*u*E,x=p*p-4*v*m,x===0?(T=-p/(2*v),i.push(new e(T,E-T*S))):x>0&&(T=(-p+Math.sqrt(x))/(2*v),i.push(new e(T,E-T*S)),T=(-p-Math.sqrt(x))/(2*v),i.push(new e(T,E-T*S)))}}return i};h.exports=s},function(h,g,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(232),c=t(151),s=function(a,n,i){if(i===void 0&&(i=[]),c(a,n)){var r=n.getLineA(),u=n.getLineB(),o=n.getLineC(),l=n.getLineD();e(r,a,i),e(u,a,i),e(o,a,i),e(l,a,i)}return i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(140),c=t(487),s=t(47),a=new s;function n(u,o,l,f,d){var v=Math.cos(u),p=Math.sin(u);a.setTo(o,l,o+v,l+p);var m=c(a,f);m&&d.push(new e(m.x,m.y,u,m.w))}function i(u,o){return u.z-o.z}var r=function(u,o,l){Array.isArray(l)||(l=[l]);for(var f=[],d=[],v=0;v<l.length;v++)for(var p=l[v].points,m=0;m<p.length;m++){var x=Math.atan2(p[m].y-o,p[m].x-u);d.indexOf(x)===-1&&(n(x,u,o,l,f),n(x-1e-5,u,o,l,f),n(x+1e-5,u,o,l,f),d.push(x))}return f.sort(i)};h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=t(152),s=function(a,n,i){return i===void 0&&(i=new e),c(a,n)&&(i.x=Math.max(a.x,n.x),i.y=Math.max(a.y,n.y),i.width=Math.min(a.right,n.right)-i.x,i.height=Math.min(a.bottom,n.bottom)-i.y),i};h.exports=s},function(h,g,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(234),c=t(152),s=function(a,n,i){if(i===void 0&&(i=[]),c(a,n)){var r=a.getLineA(),u=a.getLineB(),o=a.getLineC(),l=a.getLineD();e(r,n,i),e(u,n,i),e(o,n,i),e(l,n,i)}return i};h.exports=s},function(h,g,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(489),c=t(234),s=function(a,n,i){if(i===void 0&&(i=[]),e(a,n)){var r=n.getLineA(),u=n.getLineB(),o=n.getLineC();c(r,a,i),c(u,a,i),c(o,a,i)}return i};h.exports=s},function(h,g,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(232),c=t(491),s=function(a,n,i){if(i===void 0&&(i=[]),c(a,n)){var r=a.getLineA(),u=a.getLineB(),o=a.getLineC();e(r,n,i),e(u,n,i),e(o,n,i)}return i};h.exports=s},function(h,g,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(494),c=t(492),s=function(a,n,i){if(i===void 0&&(i=[]),e(a,n)){var r=n.getLineA(),u=n.getLineB(),o=n.getLineC();c(a,r,i),c(a,u,i),c(a,o,i)}return i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(496),c=function(s,a){if(!e(s,a))return!1;var n=Math.min(a.x1,a.x2),i=Math.max(a.x1,a.x2),r=Math.min(a.y1,a.y2),u=Math.max(a.y1,a.y2);return s.x>=n&&s.x<=i&&s.y>=r&&s.y<=u};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n,i){return i===void 0&&(i=0),!(c>e.right+i||s<e.left-i||a>e.bottom+i||n<e.top-i)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(47);e.Angle=t(97),e.BresenhamPoints=t(317),e.CenterOn=t(1222),e.Clone=t(1223),e.CopyFrom=t(1224),e.Equals=t(1225),e.Extend=t(1226),e.GetEasedPoints=t(1227),e.GetMidPoint=t(1228),e.GetNearestPoint=t(1229),e.GetNormal=t(1230),e.GetPoint=t(307),e.GetPoints=t(172),e.GetShortestDistance=t(1231),e.Height=t(1232),e.Length=t(67),e.NormalAngle=t(497),e.NormalX=t(1233),e.NormalY=t(1234),e.Offset=t(1235),e.PerpSlope=t(1236),e.Random=t(173),e.ReflectAngle=t(1237),e.Rotate=t(1238),e.RotateAroundPoint=t(1239),e.RotateAroundXY=t(236),e.SetToAngle=t(1240),e.Slope=t(1241),e.Width=t(1242),h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=c-(e.x1+e.x2)/2,n=s-(e.y1+e.y2)/2;return e.x1+=a,e.y1+=n,e.x2+=a,e.y2+=n,e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(47),c=function(s){return new e(s.x1,s.y1,s.x2,s.y2)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c.setTo(e.x1,e.y1,e.x2,e.y2)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x1===c.x1&&e.y1===c.y1&&e.x2===c.x2&&e.y2===c.y2};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),c=function(s,a,n){n===void 0&&(n=a);var i=e(s),r=s.x2-s.x1,u=s.y2-s.y1;return a&&(s.x1=s.x1-r/i*a,s.y1=s.y1-u/i*a),n&&(s.x2=s.x2+r/i*n,s.y2=s.y2+u/i*n),s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(352),c=t(80),s=t(4),a=function(n,i,r,u,o){u===void 0&&(u=0),o===void 0&&(o=[]);var l=[],f=n.x1,d=n.y1,v=n.x2-f,p=n.y2-d,m=c(i,o),x,T,S=r-1;for(x=0;x<S;x++)T=m(x/S),l.push(new s(f+v*T,d+p*T));if(T=m(1),l.push(new s(f+v*T,d+p*T)),u>0){var E=l[0],C=[E];for(x=1;x<l.length-1;x++){var A=l[x];e(E,A)>=u&&(C.push(A),E=A)}var P=l[l.length-1];return e(E,P)<u&&C.pop(),C.push(P),C}else return l};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){return a===void 0&&(a=new e),a.x=(s.x1+s.x2)/2,a.y=(s.y1+s.y2)/2,a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a,n){n===void 0&&(n=new e);var i=s.x1,r=s.y1,u=s.x2,o=s.y2,l=(u-i)*(u-i)+(o-r)*(o-r);if(l===0)return n;var f=((a.x-i)*(u-i)+(a.y-r)*(o-r))/l;return n.x=i+f*(u-i),n.y=r+f*(o-r),n};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),c=t(97),s=t(4),a=function(n,i){i===void 0&&(i=new s);var r=c(n)-e.TAU;return i.x=Math.cos(r),i.y=Math.sin(r),i};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=e.x1,a=e.y1,n=e.x2,i=e.y2,r=(n-s)*(n-s)+(i-a)*(i-a);if(r===0)return!1;var u=((a-c.y)*(n-s)-(s-c.x)*(i-a))/r;return Math.abs(u)*Math.sqrt(r)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.abs(e.y1-e.y2)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),c=t(97),s=function(a){return Math.cos(c(a)-e.TAU)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),c=t(97),s=function(a){return Math.sin(c(a)-e.TAU)};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e.x1+=c,e.y1+=s,e.x2+=c,e.y2+=s,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(97),c=t(497),s=function(a,n){return 2*c(n)-Math.PI-e(a)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(236),c=function(s,a){var n=(s.x1+s.x2)/2,i=(s.y1+s.y2)/2;return e(s,n,i,a)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(236),c=function(s,a,n){return e(s,a.x,a.y,n)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a,n){return e.x1=c,e.y1=s,e.x2=c+Math.cos(a)*n,e.y2=s+Math.sin(a)*n,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.abs(e.x1-e.x2)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Face:t(116),GenerateGridVerts:t(1244),GenerateObjVerts:t(480),GenerateVerts:t(479),ParseObj:t(498),ParseObjMaterial:t(499),RotateFace:t(1245),Vertex:t(117)};h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),c=t(2),s=t(69),a=t(39),n=t(117),i=new a,r=new a,u=new s,o=function(l){var f=c(l,"mesh"),d=c(l,"texture",null),v=c(l,"frame"),p=c(l,"width",1),m=c(l,"height",p),x=c(l,"widthSegments",1),T=c(l,"heightSegments",x),S=c(l,"x",0),E=c(l,"y",0),C=c(l,"z",0),A=c(l,"rotateX",0),P=c(l,"rotateY",0),M=c(l,"rotateZ",0),O=c(l,"zIsUp",!0),F=c(l,"isOrtho",f?f.dirtyCache[11]:!1),I=c(l,"colors",[16777215]),N=c(l,"alphas",[1]),G=c(l,"tile",!1),Y=c(l,"flipY",!1),z=c(l,"width",null),W={faces:[],verts:[]};if(i.set(S,E,C),r.set(A,P,M),u.fromRotationXYTranslation(r,i,O),!d&&f)d=f.texture;else if(f&&typeof d=="string")d=f.scene.sys.textures.get(d);else return W;var D=d.get(v);!z&&F&&d&&f&&(p=D.width/f.height,m=D.height/f.height);var L=p/2,B=m/2,w=Math.floor(x),V=Math.floor(T),U=w+1,X=V+1,H=p/w,b=m/V,Z=[],K=[],Q,j,q=0,k=1,J=0,_=1;D&&(q=D.u0,k=D.u1,Y?(J=D.v1,_=D.v0):(J=D.v0,_=D.v1));var it=k-q,tt=_-J;for(j=0;j<X;j++){var $=j*b-B;for(Q=0;Q<U;Q++){var st=Q*H-L;K.push(st,-$);var nt=q+it*(Q/w),rt=J+tt*(j/V);Z.push(nt,rt)}}Array.isArray(I)||(I=[I]),Array.isArray(N)||(N=[N]);var Rt=0,Dt=0;for(j=0;j<V;j++)for(Q=0;Q<w;Q++){var ft=(Q+U*j)*2,lt=(Q+U*(j+1))*2,Ot=(Q+1+U*(j+1))*2,Et=(Q+1+U*j)*2,Tt=I[Dt],Wt=N[Rt],ue=new n(K[ft],K[ft+1],0,Z[ft],Z[ft+1],Tt,Wt).transformMat4(u),fe=new n(K[lt],K[lt+1],0,Z[lt],Z[lt+1],Tt,Wt).transformMat4(u),ce=new n(K[Et],K[Et+1],0,Z[Et],Z[Et+1],Tt,Wt).transformMat4(u),de=new n(K[lt],K[lt+1],0,Z[lt],Z[lt+1],Tt,Wt).transformMat4(u),ve=new n(K[Ot],K[Ot+1],0,Z[Ot],Z[Ot+1],Tt,Wt).transformMat4(u),pe=new n(K[Et],K[Et+1],0,Z[Et],Z[Et+1],Tt,Wt).transformMat4(u);G&&(ue.setUVs(q,_),fe.setUVs(q,J),ce.setUVs(k,_),de.setUVs(q,J),ve.setUVs(k,J),pe.setUVs(k,_)),Dt++,Dt===I.length&&(Dt=0),Rt++,Rt===N.length&&(Rt=0),W.verts.push(ue,fe,ce,de,ve,pe),W.faces.push(new e(ue,fe,ce),new e(de,ve,pe))}return f&&(f.faces=f.faces.concat(W.faces),f.vertices=f.vertices.concat(W.verts)),W};h.exports=o},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){var n,i;if(s===void 0&&a===void 0){var r=e.getInCenter();n=r.x,i=r.y}var u=Math.cos(c),o=Math.sin(c),l=e.vertex1,f=e.vertex2,d=e.vertex3,v=l.x-n,p=l.y-i;l.set(v*u-p*o+n,v*o+p*u+i),v=f.x-n,p=f.y-i,f.set(v*u-p*o+n,v*o+p*u+i),v=d.x-n,p=d.y-i,d.set(v*u-p*o+n,v*o+p*u+i)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4);e.Ceil=t(1247),e.Clone=t(1248),e.CopyFrom=t(1249),e.Equals=t(1250),e.Floor=t(1251),e.GetCentroid=t(1252),e.GetMagnitude=t(500),e.GetMagnitudeSq=t(501),e.GetRectangleFromPoints=t(1253),e.Interpolate=t(1254),e.Invert=t(1255),e.Negative=t(1256),e.Project=t(1257),e.ProjectUnit=t(1258),e.SetMagnitude=t(1259),h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s){return new e(s.x,s.y)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c.setTo(e.x,e.y)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x===c.x&&e.y===c.y};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){if(a===void 0&&(a=new e),!Array.isArray(s))throw new Error("GetCentroid points argument must be an array");var n=s.length;if(n<1)throw new Error("GetCentroid points array must not be empty");if(n===1)a.x=s[0].x,a.y=s[0].y;else{for(var i=0;i<n;i++)a.x+=s[i].x,a.y+=s[i].y;a.x/=n,a.y/=n}return a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=function(s,a){a===void 0&&(a=new e);for(var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,o=0;o<s.length;o++){var l=s[o];l.x>n&&(n=l.x),l.x<i&&(i=l.x),l.y>r&&(r=l.y),l.y<u&&(u=l.y)}return a.x=i,a.y=u,a.width=n-i,a.height=r-u,a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a,n,i){return n===void 0&&(n=0),i===void 0&&(i=new e),i.x=s.x+(a.x-s.x)*n,i.y=s.y+(a.y-s.y)*n,i};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(e.y,e.x)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){return a===void 0&&(a=new e),a.setTo(-s.x,-s.y)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=t(501),s=function(a,n,i){i===void 0&&(i=new e);var r=a.x*n.x+a.y*n.y,u=r/c(n);return u!==0&&(i.x=u*n.x,i.y=u*n.y),i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a,n){n===void 0&&(n=new e);var i=s.x*a.x+s.y*a.y;return i!==0&&(n.x=i*a.x,n.y=i*a.y),n};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(500),c=function(s,a){if(s.x!==0||s.y!==0){var n=e(s);s.x/=n,s.y/=n}return s.x*=a,s.y*=a,s};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(227);e.Clone=t(1261),e.Contains=t(228),e.ContainsPoint=t(1262),e.Earcut=t(59),e.GetAABB=t(469),e.GetNumberArray=t(1263),e.GetPoints=t(470),e.Perimeter=t(471),e.Reverse=t(1264),e.Simplify=t(1265),e.Smooth=t(472),e.Translate=t(1266),h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(227),c=function(s){return new e(s.points)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(228),c=function(s,a){return e(s,a.x,a.y)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c===void 0&&(c=[]);for(var s=0;s<e.points.length;s++)c.push(e.points[s].x),c.push(e.points[s].y);return c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.points.reverse(),e};h.exports=t},function(h,g){function t(i,r){var u=i.x-r.x,o=i.y-r.y;return u*u+o*o}function e(i,r,u){var o=r.x,l=r.y,f=u.x-o,d=u.y-l;if(f!==0||d!==0){var v=((i.x-o)*f+(i.y-l)*d)/(f*f+d*d);v>1?(o=u.x,l=u.y):v>0&&(o+=f*v,l+=d*v)}return f=i.x-o,d=i.y-l,f*f+d*d}function c(i,r){for(var u=i[0],o=[u],l,f=1,d=i.length;f<d;f++)l=i[f],t(l,u)>r&&(o.push(l),u=l);return u!==l&&o.push(l),o}function s(i,r,u,o,l){for(var f=o,d,v=r+1;v<u;v++){var p=e(i[v],i[r],i[u]);p>f&&(d=v,f=p)}f>o&&(d-r>1&&s(i,r,d,o,l),l.push(i[d]),u-d>1&&s(i,d,u,o,l))}function a(i,r){var u=i.length-1,o=[i[0]];return s(i,0,u,r,o),o.push(i[u]),o}var n=function(i,r,u){r===void 0&&(r=1),u===void 0&&(u=!1);var o=i.points;if(o.length>2){var l=r*r;u||(o=c(o,l)),i.setTo(a(o,l))}return i};h.exports=n},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){for(var a=e.points,n=0;n<a.length;n++)a[n].x+=c,a[n].y+=s;return e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.width*e.height};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=function(s){return new e(s.x,s.y,s.width,s.height)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(57),c=function(s,a){return e(s,a.x,a.y)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c.setTo(e.x,e.y,e.width,e.height)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x===c.x&&e.y===c.y&&e.width===c.width&&e.height===c.height};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(237),c=function(s,a){var n=e(s);return n<e(a)?s.setSize(a.height*n,a.height):s.setSize(a.width,a.width/n),s.setPosition(a.centerX-s.width/2,a.centerY-s.height/2)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(237),c=function(s,a){var n=e(s);return n>e(a)?s.setSize(a.height*n,a.height):s.setSize(a.width,a.width/n),s.setPosition(a.centerX-s.width/2,a.centerY-s.height/2)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};h.exports=t},function(h,g,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=function(s,a,n,i,r){return r===void 0&&(r=new e),r.setTo(Math.min(s,n),Math.min(a,i),Math.abs(s-n),Math.abs(a-i))};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){return a===void 0&&(a=new e),a.x=s.centerX,a.y=s.centerY,a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=function(s,a){return a===void 0&&(a=new e),a.x=s.width,a.y=s.height,a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(190),c=function(s,a,n){var i=s.centerX,r=s.centerY;return s.setSize(s.width+a*2,s.height+n*2),e(s,i,r)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),c=t(152),s=function(a,n,i){return i===void 0&&(i=new e),c(a,n)?(i.x=Math.max(a.x,n.x),i.y=Math.max(a.y,n.y),i.width=Math.min(a.right,n.right)-i.x,i.height=Math.min(a.bottom,n.bottom)-i.y):i.setEmpty(),i};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){for(var s=e.x,a=e.right,n=e.y,i=e.bottom,r=0;r<c.length;r++)s=Math.min(s,c[r].x),a=Math.max(a,c[r].x),n=Math.min(n,c[r].y),i=Math.max(i,c[r].y);return e.x=s,e.y=n,e.width=a-s,e.height=i-n,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){var s=Math.min(e.x,c.x),a=Math.max(e.right,c.right);e.x=s,e.width=a-s;var n=Math.min(e.y,c.y),i=Math.max(e.bottom,c.bottom);return e.y=n,e.height=i-n,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){var a=Math.min(e.x,c),n=Math.max(e.right,c);e.x=a,e.width=n-a;var i=Math.min(e.y,s),r=Math.max(e.bottom,s);return e.y=i,e.height=r-i,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return e.x+=c,e.y+=s,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x+=c.x,e.y+=c.y,e};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x<c.right&&e.right>c.x&&e.y<c.bottom&&e.bottom>c.y};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),c=t(36),s=function(a,n,i){i===void 0&&(i=new e),n=c(n);var r=Math.sin(n),u=Math.cos(n),o=u>0?a.width/2:a.width/-2,l=r>0?a.height/2:a.height/-2;return Math.abs(o*r)<Math.abs(l*u)?l=o*r/u:o=l*u/r,i.x=o+a.centerX,i.y=l+a.centerY,i};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(195),c=t(503),s=t(4),a=function(n,i,r){if(r===void 0&&(r=new s),c(n,i))switch(e(0,3)){case 0:r.x=n.x+Math.random()*(i.right-n.x),r.y=n.y+Math.random()*(i.top-n.y);break;case 1:r.x=i.x+Math.random()*(n.right-i.x),r.y=i.bottom+Math.random()*(n.bottom-i.bottom);break;case 2:r.x=n.x+Math.random()*(i.x-n.x),r.y=i.y+Math.random()*(n.bottom-i.y);break;case 3:r.x=i.right+Math.random()*(n.right-i.right),r.y=n.y+Math.random()*(i.bottom-n.y);break}return r};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.width===c.width&&e.height===c.height};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s){return s===void 0&&(s=c),e.width*=c,e.height*=s,e};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82);e.Area=t(1294),e.BuildEquilateral=t(1295),e.BuildFromPolygon=t(1296),e.BuildRight=t(1297),e.CenterOn=t(1298),e.Centroid=t(504),e.CircumCenter=t(1299),e.CircumCircle=t(1300),e.Clone=t(1301),e.Contains=t(115),e.ContainsArray=t(235),e.ContainsPoint=t(1302),e.CopyFrom=t(1303),e.Decompose=t(495),e.Equals=t(1304),e.GetPoint=t(476),e.GetPoints=t(477),e.InCenter=t(506),e.Perimeter=t(1305),e.Offset=t(505),e.Random=t(181),e.Rotate=t(1306),e.RotateAroundPoint=t(1307),e.RotateAroundXY=t(238),h.exports=e},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var c=e.x1,s=e.y1,a=e.x2,n=e.y2,i=e.x3,r=e.y3;return Math.abs(((i-c)*(n-s)-(a-c)*(r-s))/2)};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),c=function(s,a,n){var i=n*(Math.sqrt(3)/2),r=s,u=a,o=s+n/2,l=a+i,f=s-n/2,d=a+i;return new e(r,u,o,l,f,d)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(59),c=t(82),s=function(a,n,i,r,u){n===void 0&&(n=null),i===void 0&&(i=1),r===void 0&&(r=1),u===void 0&&(u=[]);for(var o=e(a,n),l,f,d,v,p,m,x,T,S,E=0;E<o.length;E+=3)l=o[E],f=o[E+1],d=o[E+2],v=a[l*2]*i,p=a[l*2+1]*r,m=a[f*2]*i,x=a[f*2+1]*r,T=a[d*2]*i,S=a[d*2+1]*r,u.push(new c(v,p,m,x,T,S));return u};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),c=function(s,a,n,i){i===void 0&&(i=n);var r=s,u=a,o=s,l=a-i,f=s+n,d=a;return new e(r,u,o,l,f,d)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(504),c=t(505),s=function(a,n,i,r){r===void 0&&(r=e);var u=r(a),o=n-u.x,l=i-u.y;return c(a,o,l)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3);function c(a,n,i,r){return a*r-n*i}var s=function(a,n){n===void 0&&(n=new e);var i=a.x3,r=a.y3,u=a.x1-i,o=a.y1-r,l=a.x2-i,f=a.y2-r,d=2*c(u,o,l,f),v=c(o,u*u+o*o,f,l*l+f*f),p=c(u,u*u+o*o,l,l*l+f*f);return n.x=i-v/d,n.y=r+p/d,n};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),c=function(s,a){a===void 0&&(a=new e);var n=s.x1,i=s.y1,r=s.x2,u=s.y2,o=s.x3,l=s.y3,f=r-n,d=u-i,v=o-n,p=l-i,m=f*(n+r)+d*(i+u),x=v*(n+o)+p*(i+l),T=2*(f*(l-u)-d*(o-r)),S,E;if(Math.abs(T)<1e-6){var C=Math.min(n,r,o),A=Math.min(i,u,l);S=(Math.max(n,r,o)-C)*.5,E=(Math.max(i,u,l)-A)*.5,a.x=C+S,a.y=A+E,a.radius=Math.sqrt(S*S+E*E)}else a.x=(p*m-d*x)/T,a.y=(f*x-v*m)/T,S=a.x-n,E=a.y-i,a.radius=Math.sqrt(S*S+E*E);return a};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),c=function(s){return new e(s.x1,s.y1,s.x2,s.y2,s.x3,s.y3)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(115),c=function(s,a){return e(s,a.x,a.y)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.x1===c.x1&&e.y1===c.y1&&e.x2===c.x2&&e.y2===c.y2&&e.x3===c.x3&&e.y3===c.y3};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),c=function(s){var a=s.getLineA(),n=s.getLineB(),i=s.getLineC();return e(a)+e(n)+e(i)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(238),c=t(506),s=function(a,n){var i=c(a);return e(a,i.x,i.y,n)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(238),c=function(s,a,n){return e(s,a.x,a.y,n)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(203),c=t(17),s={CreatePixelPerfectHandler:t(507),CreateInteractiveObject:t(508),Events:t(51),Gamepad:t(1309),InputManager:t(409),InputPlugin:t(1321),InputPluginCache:t(153),Keyboard:t(1322),Mouse:t(1336),Pointer:t(412),Touch:t(1337)};s=c(!1,s,e),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Axis:t(509),Button:t(510),Events:t(239),Gamepad:t(511),GamepadPlugin:t(1316),Configs:t(1317)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="down"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="up"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="connected"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="disconnected"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="down"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="up"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(9),s=t(239),a=t(511),n=t(6),i=t(153),r=t(51),u=new e({Extends:c,initialize:function(l){c.call(this),this.scene=l.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=l,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,l.pluginEvents.once(r.BOOT,this.boot,this),l.pluginEvents.on(r.START,this.start,this)},boot:function(){var o=this.scene.sys.game,l=this.settings.input,f=o.config;this.enabled=n(l,"gamepad",f.inputGamepad)&&o.device.input.gamepads,this.target=n(l,"gamepad.target",f.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var o=this,l=this.target,f=function(d){d.defaultPrevented||!o.isActive()||(o.refreshPads(),o.queue.push(d))};this.onGamepadHandler=f,l.addEventListener("gamepadconnected",f,!1),l.addEventListener("gamepaddisconnected",f,!1),this.sceneInputPlugin.pluginEvents.on(r.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(r.UPDATE,this.update);for(var o=0;o<this.gamepads.length;o++)this.gamepads[o].removeAllListeners()},disconnectAll:function(){for(var o=0;o<this.gamepads.length;o++)this.gamepads[o].pad.connected=!1},refreshPads:function(){var o=navigator.getGamepads();if(!o)this.disconnectAll();else for(var l=this.gamepads,f=0;f<o.length;f++){var d=o[f];if(d){var v=d.id,p=d.index,m=l[p];if(m)m.id!==v?(m.destroy(),l[p]=new a(this,d)):m.update(d);else{var x=new a(this,d);l[p]=x,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=x):this._pad3=x:this._pad2=x:this._pad1=x}}}},getAll:function(){for(var o=[],l=this.gamepads,f=0;f<l.length;f++)l[f]&&o.push(l[f]);return o},getPad:function(o){for(var l=this.gamepads,f=0;f<l.length;f++)if(l[f]&&l[f].index===o)return l[f]},update:function(){if(this.enabled){this.refreshPads();var o=this.queue.length;if(o!==0)for(var l=this.queue.splice(0,o),f=0;f<o;f++){var d=l[f],v=this.getPad(d.gamepad.index);d.type==="gamepadconnected"?this.emit(s.CONNECTED,v,d):d.type==="gamepaddisconnected"&&this.emit(s.DISCONNECTED,v,d)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var o=0;o<this.gamepads.length;o++)this.gamepads[o]&&this.gamepads[o].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});i.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DUALSHOCK_4:t(1318),SNES_USB:t(1319),XBOX_360:t(1320)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),c=t(66),s=t(0),a=t(203),n=t(508),i=t(507),r=t(50),u=t(111),o=t(112),l=t(51),f=t(9),d=t(2),v=t(56),p=t(153),m=t(7),x=t(24),T=t(10),S=t(57),E=t(20),C=t(82),A=t(115),P=new s({Extends:f,initialize:function(O){f.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new f,this.enabled=!0,this.displayList,this.cameras,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var F={cancelled:!1};this._eventContainer={stopPropagation:function(){F.cancelled=!0}},this._eventData=F,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(E.BOOT,this.boot,this),O.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(l.BOOT)},start:function(){var M=this.systems.events;M.on(E.TRANSITION_START,this.transitionIn,this),M.on(E.TRANSITION_OUT,this.transitionOut,this),M.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),M.on(E.PRE_UPDATE,this.preUpdate,this),M.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(l.GAME_OUT,this.onGameOut,this),this.manager.events.on(l.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(l.START)},onGameOver:function(M){this.isActive()&&this.emit(l.GAME_OVER,M.timeStamp,M)},onGameOut:function(M){this.isActive()&&this.emit(l.GAME_OUT,M.timeStamp,M)},preUpdate:function(){this.pluginEvents.emit(l.PRE_UPDATE);var M=this._pendingRemoval,O=this._pendingInsertion,F=M.length,I=O.length;if(!(F===0&&I===0)){for(var N=this._list,G=0;G<F;G++){var Y=M[G],z=N.indexOf(Y);z>-1&&(N.splice(z,1),this.clear(Y,!0))}M.length=0,this._pendingRemoval.length=0,this._list=N.concat(O.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(M,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(l.UPDATE,M,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var F,I=this.manager,N=I.pointers,G=I.pointersTotal;for(F=0;F<G;F++)N[F].updateMotion();if(this._list.length===0)return!1;var Y=this.pollRate;if(Y===-1)return!1;if(Y>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var z=!1;for(F=0;F<G;F++){var W=0,D=N[F];this._tempZones=[],this._temp=this.hitTestPointer(D),this.sortGameObjects(this._temp,D),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),W+=this.processOverOutEvents(D),this.getDragState(D)===2&&this.processDragThresholdEvent(D,M),W>0&&(z=!0)}return z},update:function(M,O){if(!this.isActive())return!1;for(var F=O.length,I=!1,N=0;N<F;N++){var G=0,Y=O[N];switch(this._tempZones=[],this._temp=this.hitTestPointer(Y),this.sortGameObjects(this._temp,Y),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),M){case a.MOUSE_DOWN:G+=this.processDragDownEvent(Y),G+=this.processDownEvents(Y),G+=this.processOverOutEvents(Y);break;case a.MOUSE_UP:G+=this.processDragUpEvent(Y),G+=this.processUpEvents(Y),G+=this.processOverOutEvents(Y);break;case a.TOUCH_START:G+=this.processDragDownEvent(Y),G+=this.processDownEvents(Y),G+=this.processOverEvents(Y);break;case a.TOUCH_END:case a.TOUCH_CANCEL:G+=this.processDragUpEvent(Y),G+=this.processUpEvents(Y),G+=this.processOutEvents(Y);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:G+=this.processDragMoveEvent(Y),G+=this.processMoveEvents(Y),G+=this.processOverOutEvents(Y);break;case a.MOUSE_WHEEL:G+=this.processWheelEvent(Y);break}G>0&&(I=!0)}return this._updatedThisFrame=!0,I},clear:function(M,O){O===void 0&&(O=!1);var F=M.input;if(F){O||this.queueForRemoval(M),F.gameObject=void 0,F.target=void 0,F.hitArea=void 0,F.hitAreaCallback=void 0,F.callbackContext=void 0,M.input=null;var I=this._draggable.indexOf(M);return I>-1&&this._draggable.splice(I,1),I=this._drag[0].indexOf(M),I>-1&&this._drag[0].splice(I,1),I=this._over[0].indexOf(M),I>-1&&(this._over[0].splice(I,1),this.manager.resetCursor(F)),M}},disable:function(M){M.input.enabled=!1},enable:function(M,O,F,I){return I===void 0&&(I=!1),M.input?M.input.enabled=!0:this.setHitArea(M,O,F),M.input&&I&&!M.input.dropZone&&(M.input.dropZone=I),this},hitTestPointer:function(M){for(var O=this.cameras.getCamerasBelowPointer(M),F=0;F<O.length;F++){for(var I=O[F],N=this.manager.hitTest(M,this._list,I),G=0;G<N.length;G++){var Y=N[G];Y.input.dropZone&&this._tempZones.push(Y)}if(N.length>0)return M.camera=I,N}return M.camera=O[0],[]},processDownEvents:function(M){var O=0,F=this._temp,I=this._eventData,N=this._eventContainer;I.cancelled=!1;for(var G=!1,Y=0;Y<F.length;Y++){var z=F[Y];if(z.input){if(O++,z.emit(l.GAMEOBJECT_POINTER_DOWN,M,z.input.localX,z.input.localY,N),I.cancelled||!z.input){G=!0;break}if(this.emit(l.GAMEOBJECT_DOWN,M,z,N),I.cancelled||!z.input){G=!0;break}}}return!G&&this.manager&&(M.downElement===this.manager.game.canvas?this.emit(l.POINTER_DOWN,M,F):this.emit(l.POINTER_DOWN_OUTSIDE,M)),O},getDragState:function(M){return this._dragState[M.id]},setDragState:function(M,O){this._dragState[M.id]=O},processDragThresholdEvent:function(M,O){var F=!1,I=this.dragTimeThreshold,N=this.dragDistanceThreshold;if((N>0&&r(M.x,M.y,M.downX,M.downY)>=N||I>0&&O>=M.downTime+I)&&(F=!0),F)return this.setDragState(M,3),this.processDragStartList(M)},processDragStartList:function(M){if(this.getDragState(M)!==3)return 0;for(var O=this._drag[M.id],F=0;F<O.length;F++){var I=O[F],N=I.input;N.dragState=2,N.dragStartX=I.x,N.dragStartY=I.y,N.dragStartXGlobal=M.worldX,N.dragStartYGlobal=M.worldY,N.dragX=N.dragStartXGlobal-N.dragStartX,N.dragY=N.dragStartYGlobal-N.dragStartY,I.emit(l.GAMEOBJECT_DRAG_START,M,N.dragX,N.dragY),this.emit(l.DRAG_START,M,I)}return this.setDragState(M,4),O.length},processDragDownEvent:function(M){var O=this._temp;if(this._draggable.length===0||O.length===0||!M.primaryDown||this.getDragState(M)!==0)return 0;this.setDragState(M,1);for(var F=[],I=0;I<O.length;I++){var N=O[I];N.input.draggable&&N.input.dragState===0&&F.push(N)}return F.length===0?(this.setDragState(M,0),0):(F.length>1&&(this.sortGameObjects(F,M),this.topOnly&&F.splice(1)),this._drag[M.id]=F,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(M,3),this.processDragStartList(M)):(this.setDragState(M,2),0))},processDragMoveEvent:function(M){if(this.getDragState(M)===2&&this.processDragThresholdEvent(M,this.manager.game.loop.now),this.getDragState(M)!==4)return 0;for(var O=this._tempZones,F=this._drag[M.id],I=0;I<F.length;I++){var N=F[I],G=N.input,Y=G.target;if(Y){var z=O.indexOf(Y);z===0?(N.emit(l.GAMEOBJECT_DRAG_OVER,M,Y),this.emit(l.DRAG_OVER,M,N,Y)):z>0?(N.emit(l.GAMEOBJECT_DRAG_LEAVE,M,Y),this.emit(l.DRAG_LEAVE,M,N,Y),G.target=O[0],Y=G.target,N.emit(l.GAMEOBJECT_DRAG_ENTER,M,Y),this.emit(l.DRAG_ENTER,M,N,Y)):(N.emit(l.GAMEOBJECT_DRAG_LEAVE,M,Y),this.emit(l.DRAG_LEAVE,M,N,Y),O[0]?(G.target=O[0],Y=G.target,N.emit(l.GAMEOBJECT_DRAG_ENTER,M,Y),this.emit(l.DRAG_ENTER,M,N,Y)):G.target=null)}else!Y&&O[0]&&(G.target=O[0],Y=G.target,N.emit(l.GAMEOBJECT_DRAG_ENTER,M,Y),this.emit(l.DRAG_ENTER,M,N,Y));var W,D;if(!N.parentContainer)W=M.worldX-G.dragX,D=M.worldY-G.dragY;else{var L=M.worldX-G.dragStartXGlobal,B=M.worldY-G.dragStartYGlobal,w=N.getParentRotation(),V=L*Math.cos(w)+B*Math.sin(w),U=B*Math.cos(w)-L*Math.sin(w);V*=1/N.parentContainer.scaleX,U*=1/N.parentContainer.scaleY,W=V+G.dragStartX,D=U+G.dragStartY}N.emit(l.GAMEOBJECT_DRAG,M,W,D),this.emit(l.DRAG,M,N,W,D)}return F.length},processDragUpEvent:function(M){for(var O=this._drag[M.id],F=0;F<O.length;F++){var I=O[F],N=I.input;if(N&&N.dragState===2){N.dragState=0,N.dragX=N.localX-I.displayOriginX,N.dragY=N.localY-I.displayOriginY;var G=!1,Y=N.target;Y&&(I.emit(l.GAMEOBJECT_DROP,M,Y),this.emit(l.DROP,M,I,Y),N.target=null,G=!0),I.input&&(I.emit(l.GAMEOBJECT_DRAG_END,M,N.dragX,N.dragY,G),this.emit(l.DRAG_END,M,I,G))}}return this.setDragState(M,0),O.splice(0),0},processMoveEvents:function(M){var O=0,F=this._temp,I=this._eventData,N=this._eventContainer;I.cancelled=!1;for(var G=!1,Y=0;Y<F.length;Y++){var z=F[Y];if(z.input){if(O++,z.emit(l.GAMEOBJECT_POINTER_MOVE,M,z.input.localX,z.input.localY,N),I.cancelled||!z.input){G=!0;break}if(this.emit(l.GAMEOBJECT_MOVE,M,z,N),I.cancelled||!z.input){G=!0;break}if(this.topOnly)break}}return G||this.emit(l.POINTER_MOVE,M,F),O},processWheelEvent:function(M){var O=0,F=this._temp,I=this._eventData,N=this._eventContainer;I.cancelled=!1;for(var G=!1,Y=M.deltaX,z=M.deltaY,W=M.deltaZ,D=0;D<F.length;D++){var L=F[D];if(L.input){if(O++,L.emit(l.GAMEOBJECT_POINTER_WHEEL,M,Y,z,W,N),I.cancelled||!L.input){G=!0;break}if(this.emit(l.GAMEOBJECT_WHEEL,M,L,Y,z,W,N),I.cancelled||!L.input){G=!0;break}}}return G||this.emit(l.POINTER_WHEEL,M,F,Y,z,W),O},processOverEvents:function(M){var O=this._temp,F=0,I=O.length,N=[];if(I>0){var G=this.manager,Y=this._eventData,z=this._eventContainer;Y.cancelled=!1;for(var W=!1,D=0;D<I;D++){var L=O[D];if(L.input){if(N.push(L),G.setCursor(L.input),L.emit(l.GAMEOBJECT_POINTER_OVER,M,L.input.localX,L.input.localY,z),F++,Y.cancelled||!L.input){W=!0;break}if(this.emit(l.GAMEOBJECT_OVER,M,L,z),Y.cancelled||!L.input){W=!0;break}}}W||this.emit(l.POINTER_OVER,M,N)}return this._over[M.id]=N,F},processOutEvents:function(M){var O=this._over[M.id],F=0,I=O.length;if(I>0){var N=this.manager,G=this._eventData,Y=this._eventContainer;G.cancelled=!1;var z=!1;this.sortGameObjects(O,M);for(var W=0;W<I;W++){var D=O[W];if(D=O[W],!!D.input){if(N.resetCursor(D.input),D.emit(l.GAMEOBJECT_POINTER_OUT,M,Y),F++,G.cancelled||!D.input){z=!0;break}if(this.emit(l.GAMEOBJECT_OUT,M,D,Y),G.cancelled||!D.input){z=!0;break}z||this.emit(l.POINTER_OUT,M,O)}}this._over[M.id]=[]}return F},processOverOutEvents:function(M){var O=this._temp,F,I,N=[],G=[],Y=[],z=this._over[M.id],W=this._drag[M.id],D=this.manager;for(F=0;F<z.length;F++)I=z[F],O.indexOf(I)===-1&&W.indexOf(I)===-1?N.push(I):Y.push(I);for(F=0;F<O.length;F++)I=O[F],z.indexOf(I)===-1&&G.push(I);var L=N.length,B=0,w=this._eventData,V=this._eventContainer;w.cancelled=!1;var U=!1;if(L>0){for(this.sortGameObjects(N,M),F=0;F<L;F++)if(I=N[F],!!I.input){if(D.resetCursor(I.input),I.emit(l.GAMEOBJECT_POINTER_OUT,M,V),B++,w.cancelled||!I.input){U=!0;break}if(this.emit(l.GAMEOBJECT_OUT,M,I,V),w.cancelled||!I.input){U=!0;break}}U||this.emit(l.POINTER_OUT,M,N)}if(L=G.length,w.cancelled=!1,U=!1,L>0){for(this.sortGameObjects(G,M),F=0;F<L;F++)if(I=G[F],!!I.input){if(D.setCursor(I.input),I.emit(l.GAMEOBJECT_POINTER_OVER,M,I.input.localX,I.input.localY,V),B++,w.cancelled||!I.input){U=!0;break}if(this.emit(l.GAMEOBJECT_OVER,M,I,V),w.cancelled||!I.input){U=!0;break}}U||this.emit(l.POINTER_OVER,M,G)}return z=Y.concat(G),this._over[M.id]=this.sortGameObjects(z,M),B},processUpEvents:function(M){var O=this._temp,F=this._eventData,I=this._eventContainer;F.cancelled=!1;for(var N=!1,G=0;G<O.length;G++){var Y=O[G];if(Y.input){if(Y.emit(l.GAMEOBJECT_POINTER_UP,M,Y.input.localX,Y.input.localY,I),F.cancelled||!Y.input){N=!0;break}if(this.emit(l.GAMEOBJECT_UP,M,Y,I),F.cancelled||!Y.input){N=!0;break}}}return!N&&this.manager&&(M.upElement===this.manager.game.canvas?this.emit(l.POINTER_UP,M,O):this.emit(l.POINTER_UP_OUTSIDE,M)),O.length},queueForInsertion:function(M){return this._pendingInsertion.indexOf(M)===-1&&this._list.indexOf(M)===-1&&this._pendingInsertion.push(M),this},queueForRemoval:function(M){return this._pendingRemoval.push(M),this},setDraggable:function(M,O){O===void 0&&(O=!0),Array.isArray(M)||(M=[M]);for(var F=0;F<M.length;F++){var I=M[F];I.input.draggable=O;var N=this._draggable.indexOf(I);O&&N===-1?this._draggable.push(I):!O&&N>-1&&this._draggable.splice(N,1)}return this},makePixelPerfect:function(M){M===void 0&&(M=1);var O=this.systems.textures;return i(O,M)},setHitArea:function(M,O,F){if(O===void 0)return this.setHitAreaFromTexture(M);Array.isArray(M)||(M=[M]);var I=!1,N=!1,G=!1,Y=!1,z=!1,W=!0;if(m(O)){var D=O;O=d(D,"hitArea",null),F=d(D,"hitAreaCallback",null),I=d(D,"draggable",!1),N=d(D,"dropZone",!1),G=d(D,"cursor",!1),Y=d(D,"useHandCursor",!1),z=d(D,"pixelPerfect",!1);var L=d(D,"alphaTolerance",1);z&&(O={},F=this.makePixelPerfect(L)),(!O||!F)&&(this.setHitAreaFromTexture(M),W=!1)}else typeof O=="function"&&!F&&(F=O,O={});for(var B=0;B<M.length;B++){var w=M[B];if(z&&w.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var V=w.input?w.input:n(w,O,F);V.customHitArea=W,V.dropZone=N,V.cursor=Y?"pointer":G,w.input=V,I&&this.setDraggable(w),this.queueForInsertion(w)}return this},setHitAreaCircle:function(M,O,F,I,N){N===void 0&&(N=c);var G=new e(O,F,I);return this.setHitArea(M,G,N)},setHitAreaEllipse:function(M,O,F,I,N,G){G===void 0&&(G=o);var Y=new u(O,F,I,N);return this.setHitArea(M,Y,G)},setHitAreaFromTexture:function(M,O){O===void 0&&(O=S),Array.isArray(M)||(M=[M]);for(var F=0;F<M.length;F++){var I=M[F],N=I.frame,G=0,Y=0;if(I.width?(G=I.width,Y=I.height):N&&(G=N.realWidth,Y=N.realHeight),I.type==="Container"&&(G===0||Y===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}G!==0&&Y!==0&&(I.input=n(I,new T(0,0,G,Y),O),this.queueForInsertion(I))}return this},setHitAreaRectangle:function(M,O,F,I,N,G){G===void 0&&(G=S);var Y=new T(O,F,I,N);return this.setHitArea(M,Y,G)},setHitAreaTriangle:function(M,O,F,I,N,G,Y,z){z===void 0&&(z=A);var W=new C(O,F,I,N,G,Y);return this.setHitArea(M,W,z)},enableDebug:function(M,O){O===void 0&&(O=65280);var F=M.input;if(!F||!F.hitArea)return this;var I=F.hitArea,N=I.type,G=F.hitAreaDebug,Y=this.systems.add,z=this.systems.updateList;G&&(z.remove(G),G.destroy(),G=null);var W=0,D=0;switch(N){case v.CIRCLE:G=Y.arc(0,0,I.radius),W=I.x-I.radius,D=I.y-I.radius;break;case v.ELLIPSE:G=Y.ellipse(0,0,I.width,I.height),W=I.x-I.width/2,D=I.y-I.height/2;break;case v.LINE:G=Y.line(0,0,I.x1,I.y1,I.x2,I.y2);break;case v.POLYGON:G=Y.polygon(0,0,I.points);break;case v.RECTANGLE:G=Y.rectangle(0,0,I.width,I.height),W=I.x,D=I.y;break;case v.TRIANGLE:G=Y.triangle(0,0,I.x1,I.y1,I.x2,I.y2,I.x3,I.y3);break}return G&&(G.isFilled=!1,G.preUpdate=function(){G.setStrokeStyle(1/M.scale,O),G.setDisplayOrigin(M.displayOriginX,M.displayOriginY);var L=M.x,B=M.y,w=M.rotation,V=M.scaleX,U=M.scaleY;if(M.parentContainer){var X=M.getWorldTransformMatrix();L=X.tx,B=X.ty,w=X.rotation,V=X.scaleX,U=X.scaleY}G.setRotation(w),G.setScale(V,U),G.setPosition(L+W,B+D),G.setScrollFactor(M.scrollFactorX,M.scrollFactorY),G.setDepth(M.depth)},z.add(G),F.hitAreaDebug=G),this},removeDebug:function(M){var O=M.input;if(O&&O.hitAreaDebug){var F=O.hitAreaDebug;this.systems.updateList.remove(F),F.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(M){return this.pollRate=M,this._pollTimer=0,this},setGlobalTopOnly:function(M){return this.manager.globalTopOnly=M,this},setTopOnly:function(M){return this.topOnly=M,this},sortGameObjects:function(M,O){if(M.length<2)return M;var F=O.camera.renderList;return M.sort(function(I,N){return F.indexOf(N)-F.indexOf(I)})},sortDropZones:function(M){return M.length<2?M:(this.scene.sys.depthSort(),M.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(M,O){if(!M.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(M);if(M.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-M.parentContainer.getIndex(M);if(M.parentContainer===O)return-1;if(O.parentContainer===M)return 1;for(var F=M.getIndexList(),I=O.getIndexList(),N=Math.min(F.length,I.length),G=0;G<N;G++){var Y=F[G],z=I[G];if(Y!==z)return z-Y}return I.length-F.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(M){return this.manager.addPointer(M)},setDefaultCursor:function(M){return this.manager.setDefaultCursor(M),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(l.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var M=0;M<10;M++)this._drag[M]=[],this._over[M]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var F=this.systems.events;F.off(E.TRANSITION_START,this.transitionIn,this),F.off(E.TRANSITION_OUT,this.transitionOut,this),F.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),F.off(E.PRE_UPDATE,this.preUpdate,this),O.events.off(l.GAME_OUT,this.onGameOut,this),O.events.off(l.GAME_OVER,this.onGameOver,this),F.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(l.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});x.register("InputPlugin",P,"input"),h.exports=P},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Events:t(154),KeyboardManager:t(410),KeyboardPlugin:t(1330),Key:t(512),KeyCodes:t(143),KeyCombo:t(513),AdvanceKeyCombo:t(515),ProcessKeyCombo:t(514),ResetKeyCombo:t(516),JustDown:t(1332),JustUp:t(1333),DownDuration:t(1334),UpDuration:t(1335)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keydown"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keyup"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keycombomatch"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="down"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keydown-"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keyup-"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="up"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(9),s=t(154),a=t(22),n=t(6),i=t(51),r=t(153),u=t(512),o=t(143),l=t(513),f=t(1331),d=t(20),v=t(76),p=new e({Extends:c,initialize:function(x){c.call(this),this.game=x.systems.game,this.scene=x.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=x,this.manager=x.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,x.pluginEvents.once(i.BOOT,this.boot,this),x.pluginEvents.on(i.START,this.start,this)},boot:function(){var m=this.settings.input;this.enabled=n(m,"keyboard",!0);var x=n(m,"keyboard.capture",null);x&&this.addCaptures(x),this.sceneInputPlugin.pluginEvents.once(i.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(i.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(i.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this),this.scene.sys.events.on(d.PAUSE,this.resetKeys,this),this.scene.sys.events.on(d.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(m){return this.manager.addCapture(m),this},removeCapture:function(m){return this.manager.removeCapture(m),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:o.UP,down:o.DOWN,left:o.LEFT,right:o.RIGHT,space:o.SPACE,shift:o.SHIFT})},addKeys:function(m,x,T){x===void 0&&(x=!0),T===void 0&&(T=!1);var S={};if(typeof m=="string"){m=m.split(",");for(var E=0;E<m.length;E++){var C=m[E].trim();C&&(S[C]=this.addKey(C,x,T))}}else for(var A in m)S[A]=this.addKey(m[A],x,T);return S},addKey:function(m,x,T){x===void 0&&(x=!0),T===void 0&&(T=!1);var S=this.keys;if(m instanceof u){var E=S.indexOf(m);return E>-1?S[E]=m:S[m.keyCode]=m,x&&this.addCapture(m.keyCode),m.setEmitOnRepeat(T),m}return typeof m=="string"&&(m=o[m.toUpperCase()]),S[m]||(S[m]=new u(this,m),x&&this.addCapture(m),S[m].setEmitOnRepeat(T)),S[m]},removeKey:function(m,x){x===void 0&&(x=!1);var T=this.keys,S;if(m instanceof u){var E=T.indexOf(m);E>-1&&(S=this.keys[E],this.keys[E]=void 0)}else typeof m=="string"&&(m=o[m.toUpperCase()]);return T[m]&&(S=T[m],T[m]=void 0),S&&(S.plugin=null,x&&S.destroy()),this},removeAllKeys:function(m){for(var x=this.keys,T=0;T<x.length;T++){var S=x[T];S&&(x[T]=void 0,m&&S.destroy())}return this},createCombo:function(m,x){return new l(this,m,x)},checkDown:function(m,x){if(x===void 0&&(x=0),this.enabled&&m.isDown){var T=v(this.time-m.timeDown,x);if(T>m._tick)return m._tick=T,!0}return!1},update:function(){var m=this.manager.queue,x=m.length;if(!(!this.isActive()||x===0))for(var T=this.keys,S=0;S<x;S++){var E=m[S],C=E.keyCode,A=T[C],P=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(C===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=C,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(A&&(P=A.isDown,A.onDown(E)),!E.cancelled&&(!A||!P)&&(f[C]&&this.emit(s.KEY_DOWN+f[C],E),E.cancelled||this.emit(s.ANY_KEY_DOWN,E))):(A&&A.onUp(E),E.cancelled||(f[C]&&this.emit(s.KEY_UP+f[C],E),E.cancelled||this.emit(s.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var m=this.keys,x=0;x<m.length;x++)m[x]&&m[x].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(i.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.scene.sys.events.off(d.PAUSE,this.resetKeys,this),this.scene.sys.events.off(d.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var m=this.keys,x=0;x<m.length;x++)m[x]&&m[x].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});r.register("KeyboardPlugin",p,"keyboard","keyboard","inputKeyboard"),h.exports=p},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(143),c={};for(var s in e)c[e[s]]=s;h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e._justDown?(e._justDown=!1,!0):!1};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e._justUp?(e._justUp=!1,!0):!1};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c===void 0&&(c=50);var s=e.plugin.game.loop.time-e.timeDown;return e.isDown&&s<c};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){c===void 0&&(c=50);var s=e.plugin.game.loop.time-e.timeUp;return e.isUp&&s<c};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={MouseManager:t(411)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={TouchManager:t(413)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(21),c=t(17),s={Events:t(95),FileTypes:t(1339),File:t(23),FileTypesManager:t(8),GetURL:t(155),LoaderPlugin:t(1365),MergeXHRSettings:t(240),MultiFile:t(49),XHRLoader:t(517),XHRSettings:t(156)};s=c(!1,s,e),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AnimationJSONFile:t(1340),AsepriteFile:t(1341),AtlasJSONFile:t(1342),AtlasXMLFile:t(1343),AudioFile:t(518),AudioSpriteFile:t(1344),BinaryFile:t(1345),BitmapFontFile:t(1346),CSSFile:t(1347),GLSLFile:t(1348),HTML5AudioFile:t(519),HTMLFile:t(1349),HTMLTextureFile:t(1350),ImageFile:t(71),JSONFile:t(61),MultiAtlasFile:t(1351),MultiScriptFile:t(1352),OBJFile:t(1353),PackFile:t(1354),PluginFile:t(1355),SceneFile:t(1356),ScenePluginFile:t(1357),ScriptFile:t(520),SpriteSheetFile:t(1358),SVGFile:t(1359),TextFile:t(242),TilemapCSVFile:t(1360),TilemapImpactFile:t(1361),TilemapJSONFile:t(1362),UnityAtlasFile:t(1363),VideoFile:t(1364),XMLFile:t(241)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(61),a=t(95),n=new e({Extends:s,initialize:function(r,u,o,l,f){s.call(this,r,u,o,l,f),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),s.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});c.register("animation",function(i,r,u,o){if(Array.isArray(i))for(var l=0;l<i.length;l++)this.addFile(new n(this,i[l]));else this.addFile(new n(this,i,r,o,u));return this}),h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(2),a=t(71),n=t(7),i=t(61),r=t(49),u=new e({Extends:r,initialize:function(l,f,d,v,p,m){var x,T;if(n(f)){var S=f;f=s(S,"key"),x=new a(l,{key:f,url:s(S,"textureURL"),extension:s(S,"textureExtension","png"),normalMap:s(S,"normalMap"),xhrSettings:s(S,"textureXhrSettings")}),T=new i(l,{key:f,url:s(S,"atlasURL"),extension:s(S,"atlasExtension","json"),xhrSettings:s(S,"atlasXhrSettings")})}else x=new a(l,f,d,p),T=new i(l,f,v,m);x.linkFile?r.call(this,l,"atlasjson",f,[x,T,x.linkFile]):r.call(this,l,"atlasjson",f,[x,T])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(o.key,o.data,l.data,f),l.addToCache(),this.complete=!0}}});c.register("aseprite",function(o,l,f,d,v){var p;if(Array.isArray(o))for(var m=0;m<o.length;m++)p=new u(this,o[m]),this.addFile(p.files);else p=new u(this,o,l,f,d,v),this.addFile(p.files);return this}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(2),a=t(71),n=t(7),i=t(61),r=t(49),u=new e({Extends:r,initialize:function(l,f,d,v,p,m){var x,T;if(n(f)){var S=f;f=s(S,"key"),x=new a(l,{key:f,url:s(S,"textureURL"),extension:s(S,"textureExtension","png"),normalMap:s(S,"normalMap"),xhrSettings:s(S,"textureXhrSettings")}),T=new i(l,{key:f,url:s(S,"atlasURL"),extension:s(S,"atlasExtension","json"),xhrSettings:s(S,"atlasXhrSettings")})}else x=new a(l,f,d,p),T=new i(l,f,v,m);x.linkFile?r.call(this,l,"atlasjson",f,[x,T,x.linkFile]):r.call(this,l,"atlasjson",f,[x,T])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(o.key,o.data,l.data,f),l.pendingDestroy(),this.complete=!0}}});c.register("atlas",function(o,l,f,d,v){var p;if(Array.isArray(o))for(var m=0;m<o.length;m++)p=new u(this,o[m]),this.addFile(p.files);else p=new u(this,o,l,f,d,v),this.addFile(p.files);return this}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(2),a=t(71),n=t(7),i=t(49),r=t(241),u=new e({Extends:i,initialize:function(l,f,d,v,p,m){var x,T;if(n(f)){var S=f;f=s(S,"key"),x=new a(l,{key:f,url:s(S,"textureURL"),extension:s(S,"textureExtension","png"),normalMap:s(S,"normalMap"),xhrSettings:s(S,"textureXhrSettings")}),T=new r(l,{key:f,url:s(S,"atlasURL"),extension:s(S,"atlasExtension","xml"),xhrSettings:s(S,"atlasXhrSettings")})}else x=new a(l,f,d,p),T=new r(l,f,v,m);x.linkFile?i.call(this,l,"atlasxml",f,[x,T,x.linkFile]):i.call(this,l,"atlasxml",f,[x,T])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(o.key,o.data,l.data,f),l.pendingDestroy(),this.complete=!0}}});c.register("atlasXML",function(o,l,f,d,v){var p;if(Array.isArray(o))for(var m=0;m<o.length;m++)p=new u(this,o[m]),this.addFile(p.files);else p=new u(this,o,l,f,d,v),this.addFile(p.files);return this}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(518),c=t(0),s=t(8),a=t(2),n=t(7),i=t(61),r=t(49),u=new c({Extends:r,initialize:function(l,f,d,v,p,m,x){if(n(f)){var T=f;f=a(T,"key"),d=a(T,"jsonURL"),v=a(T,"audioURL"),p=a(T,"audioConfig"),m=a(T,"audioXhrSettings"),x=a(T,"jsonXhrSettings")}var S;if(!v)S=new i(l,f,d,x),r.call(this,l,"audiosprite",f,[S]),this.config.resourceLoad=!0,this.config.audioConfig=p,this.config.audioXhrSettings=m;else{var E=e.create(l,f,v,p,m);E&&(S=new i(l,f,d,x),r.call(this,l,"audiosprite",f,[E,S]),this.config.resourceLoad=!1)}},onFileComplete:function(o){var l=this.files.indexOf(o);if(l!==-1&&(this.pending--,this.config.resourceLoad&&o.type==="json"&&o.data.hasOwnProperty("resources"))){var f=o.data.resources,d=a(this.config,"audioConfig"),v=a(this.config,"audioXhrSettings"),p=e.create(this.loader,o.key,f,d,v);p&&(this.addToMultiFile(p),this.loader.addFile(p))}},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],l=this.files[1];o.addToCache(),l.addToCache(),this.complete=!0}}});s.register("audioSprite",function(o,l,f,d,v,p){var m=this.systems.game,x=m.config.audio,T=m.device.audio;if(x&&x.noAudio||!T.webAudio&&!T.audioData)return this;var S;if(Array.isArray(o))for(var E=0;E<o.length;E++)S=new u(this,o[E]),S.files&&this.addFile(S.files);else S=new u(this,o,l,f,d,v,p),S.files&&this.addFile(S.files);return this})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d,v){var p="bin";if(i(l)){var m=l;l=n(m,"key"),f=n(m,"url"),d=n(m,"xhrSettings"),p=n(m,"extension",p),v=n(m,"dataType",v)}var x={type:"binary",cache:o.cacheManager.binary,extension:p,responseType:"arraybuffer",key:l,url:f,xhrSettings:d,config:{dataType:v}};s.call(this,o,x)},onProcess:function(){this.state=c.FILE_PROCESSING;var u=this.config.dataType;this.data=u?new u(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",function(u,o,l,f){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,o,f,l));return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(2),a=t(71),n=t(7),i=t(49),r=t(212),u=t(241),o=new e({Extends:i,initialize:function(f,d,v,p,m,x){var T,S;if(n(d)){var E=d;d=s(E,"key"),T=new a(f,{key:d,url:s(E,"textureURL"),extension:s(E,"textureExtension","png"),normalMap:s(E,"normalMap"),xhrSettings:s(E,"textureXhrSettings")}),S=new u(f,{key:d,url:s(E,"fontDataURL"),extension:s(E,"fontDataExtension","xml"),xhrSettings:s(E,"fontDataXhrSettings")})}else T=new a(f,d,v,m),S=new u(f,d,p,x);T.linkFile?i.call(this,f,"bitmapfont",d,[T,S,T.linkFile]):i.call(this,f,"bitmapfont",d,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1];l.addToCache(),f.pendingDestroy();var d=l.cache.get(l.key),v=r(f.data,l.cache.getFrame(l.key),0,0,d);this.loader.cacheManager.bitmapFont.add(l.key,{data:v,texture:l.key,frame:null}),this.complete=!0}}});c.register("bitmapFont",function(l,f,d,v,p){var m;if(Array.isArray(l))for(var x=0;x<l.length;x++)m=new o(this,l[x]),this.addFile(m.files);else m=new o(this,l,f,d,v,p),this.addFile(m.files);return this}),h.exports=o},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d){var v="css";if(i(l)){var p=l;l=n(p,"key"),f=n(p,"url"),d=n(p,"xhrSettings"),v=n(p,"extension",v)}var m={type:"script",cache:!1,extension:v,responseType:"text",key:l,url:f,xhrSettings:d};s.call(this,o,m)},onProcess:function(){this.state=c.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",function(u,o,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new r(this,u[f]));else this.addFile(new r(this,u,o,l));return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=t(396),u=new e({Extends:s,initialize:function(l,f,d,v,p){var m="glsl";if(i(f)){var x=f;f=n(x,"key"),d=n(x,"url"),v=n(x,"shaderType","fragment"),p=n(x,"xhrSettings"),m=n(x,"extension",m)}else v===void 0&&(v="fragment");var T={type:"glsl",cache:l.cacheManager.shader,extension:m,responseType:"text",key:f,url:d,config:{shaderType:v},xhrSettings:p};s.call(this,l,T)},onProcess:function(){this.state=c.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var o=this.data.split(`
`),l=this.extractBlock(o,0);if(l)for(;l;){var f=this.getShaderName(l.header),d=this.getShaderType(l.header),v=this.getShaderUniforms(l.header),p=l.shader;if(this.cache.has(f)){var m=this.cache.get(f);d==="fragment"?m.fragmentSrc=p:m.vertexSrc=p,m.uniforms||(m.uniforms=v)}else d==="fragment"?this.cache.add(f,new r(f,p,"",v)):this.cache.add(f,new r(f,"",p,v));l=this.extractBlock(o,l.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new r(this.key,this.data)):this.cache.add(this.key,new r(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(o){for(var l=0;l<o.length;l++){var f=o[l].trim();if(f.substring(0,5)==="name:")return f.substring(5).trim()}return this.key},getShaderType:function(o){for(var l=0;l<o.length;l++){var f=o[l].trim();if(f.substring(0,5)==="type:")return f.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(o){for(var l={},f=0;f<o.length;f++){var d=o[f].trim();if(d.substring(0,8)==="uniform."){var v=d.indexOf(":");if(v){var p=d.substring(8,v);try{l[p]=JSON.parse(d.substring(v+1))}catch{console.warn("Invalid uniform JSON: "+p)}}}}return l},extractBlock:function(o,l){for(var f=-1,d=-1,v=-1,p=!1,m=!1,x=[],T=[],S=l;S<o.length;S++){var E=o[S].trim();if(E==="---")if(f===-1)f=S,p=!0;else if(p)d=S,p=!1,m=!0;else{m=!1;break}else p?x.push(E):m&&(T.push(E),v=S)}return!p&&d!==-1?{header:x,shader:T.join(`
`),offset:v}:null}});a.register("glsl",function(o,l,f,d){if(Array.isArray(o))for(var v=0;v<o.length;v++)this.addFile(new u(this,o[v]));else this.addFile(new u(this,o,l,f,d));return this}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d){var v="html";if(i(l)){var p=l;l=n(p,"key"),f=n(p,"url"),d=n(p,"xhrSettings"),v=n(p,"extension",v)}var m={type:"text",cache:o.cacheManager.html,extension:v,responseType:"text",key:l,url:f,xhrSettings:d};s.call(this,o,m)},onProcess:function(){this.state=c.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",function(u,o,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new r(this,u[f]));else this.addFile(new r(this,u,o,l));return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d,v,p){d===void 0&&(d=512),v===void 0&&(v=512);var m="html";if(i(l)){var x=l;l=n(x,"key"),f=n(x,"url"),p=n(x,"xhrSettings"),m=n(x,"extension",m),d=n(x,"width",d),v=n(x,"height",v)}var T={type:"html",cache:o.textureManager,extension:m,responseType:"text",key:l,url:f,xhrSettings:p,config:{width:d,height:v}};s.call(this,o,T)},onProcess:function(){this.state=c.FILE_PROCESSING;var u=this.config.width,o=this.config.height,l=[];l.push('<svg width="'+u+'px" height="'+o+'px" viewBox="0 0 '+u+" "+o+'" xmlns="http://www.w3.org/2000/svg">'),l.push('<foreignObject width="100%" height="100%">'),l.push('<body xmlns="http://www.w3.org/1999/xhtml">'),l.push(this.xhrLoader.responseText),l.push("</body>"),l.push("</foreignObject>"),l.push("</svg>");var f=[l.join(`
`)],d=this;try{var v=new window.Blob(f,{type:"image/svg+xml;charset=utf-8"})}catch{d.state=c.FILE_ERRORED,d.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){s.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(d.data),d.onProcessError()},s.createObjectURL(this.data,v,"image/svg+xml")},addToCache:function(){var u=this.cache.addImage(this.key,this.data);this.pendingDestroy(u)}});a.register("htmlTexture",function(u,o,l,f,d){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new r(this,u[v]));else this.addFile(new r(this,u,o,l,f,d));return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(2),a=t(71),n=t(7),i=t(61),r=t(49),u=new e({Extends:r,initialize:function(l,f,d,v,p,m,x){if(n(f)){var T=f;f=s(T,"key"),s(T,"url",!1)?d=s(T,"url"):d=s(T,"atlasURL"),m=s(T,"xhrSettings"),v=s(T,"path"),p=s(T,"baseURL"),x=s(T,"textureXhrSettings")}var S=new i(l,f,d,m);r.call(this,l,"multiatlas",f,[S]),this.config.path=v,this.config.baseURL=p,this.config.textureXhrSettings=x},onFileComplete:function(o){var l=this.files.indexOf(o);if(l!==-1&&(this.pending--,o.type==="json"&&o.data.hasOwnProperty("textures"))){var f=o.data.textures,d=this.config,v=this.loader,p=v.baseURL,m=v.path,x=v.prefix,T=s(d,"baseURL",this.baseURL),S=s(d,"path",this.path),E=s(d,"prefix",this.prefix),C=s(d,"textureXhrSettings");v.setBaseURL(T),v.setPath(S),v.setPrefix(E);for(var A=0;A<f.length;A++){var P=f[A].image,M="MA"+this.multiKeyIndex+"_"+P,O=new a(v,M,P,C);if(this.addToMultiFile(O),v.addFile(O),f[A].normalMap){var F=new a(v,M,f[A].normalMap,C);F.type="normalMap",O.setLink(F),this.addToMultiFile(F),v.addFile(F)}}v.setBaseURL(p),v.setPath(m),v.setPrefix(x)}},addToCache:function(){if(this.isReadyToProcess()){for(var o=this.files[0],l=[],f=[],d=[],v=1;v<this.files.length;v++){var p=this.files[v];if(p.type!=="normalMap")for(var m=p.key.indexOf("_"),x=p.key.substr(m+1),T=p.data,S=0;S<o.data.textures.length;S++){var E=o.data.textures[S];if(E.image===x){f.push(T),l.push(E),p.linkFile&&d.push(p.linkFile.data);break}}}for(d.length===0&&(d=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,f,l,d),this.complete=!0,v=0;v<this.files.length;v++)this.files[v].pendingDestroy()}}});c.register("multiatlas",function(o,l,f,d,v){var p;if(Array.isArray(o))for(var m=0;m<o.length;m++)p=new u(this,o[m]),this.addFile(p.files);else p=new u(this,o,l,f,d,v),this.addFile(p.files);return this}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(2),a=t(7),n=t(49),i=t(520),r=new e({Extends:n,initialize:function(o,l,f,d){var v="js",p=[];if(a(l)){var m=l;l=s(m,"key"),f=s(m,"url"),d=s(m,"xhrSettings"),v=s(m,"extension",v)}Array.isArray(f)||(f=[f]);for(var x=0;x<f.length;x++){var T=new i(o,{key:l+"_"+x.toString(),url:f[x],extension:v,xhrSettings:d});T.onProcess=function(){this.onProcessComplete()},p.push(T)}n.call(this,o,"scripts",l,p)},addToCache:function(){if(this.isReadyToProcess()){for(var u=0;u<this.files.length;u++){var o=this.files[u];o.data=document.createElement("script"),o.data.language="javascript",o.data.type="text/javascript",o.data.defer=!1,o.data.text=o.xhrLoader.responseText,document.head.appendChild(o.data)}this.complete=!0}}});c.register("scripts",function(u,o,l){var f;if(Array.isArray(u))for(var d=0;d<u.length;d++)f=new r(this,u[d]),this.addFile(f.files);else f=new r(this,u,o,l),this.addFile(f.files);return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(2),a=t(7),n=t(49),i=t(498),r=t(499),u=t(242),o=new e({Extends:n,initialize:function(f,d,v,p,m,x){var T,S,E=f.cacheManager.obj;if(a(d)){var C=d;d=s(C,"key"),T=new u(f,{key:d,type:"obj",cache:E,url:s(C,"url"),extension:s(C,"extension","obj"),xhrSettings:s(C,"xhrSettings"),config:{flipUV:s(C,"flipUV",m)}}),p=s(C,"matURL"),p&&(S=new u(f,{key:d,type:"mat",cache:E,url:p,extension:s(C,"matExtension","mat"),xhrSettings:s(C,"xhrSettings")}))}else T=new u(f,{key:d,url:v,type:"obj",cache:E,extension:"obj",xhrSettings:x,config:{flipUV:m}}),p&&(S=new u(f,{key:d,url:p,type:"mat",cache:E,extension:"mat",xhrSettings:x}));n.call(this,f,"obj",d,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],d=i(l.data,l.config.flipUV);f&&(d.materials=r(f.data)),l.cache.add(l.key,d),this.complete=!0}}});c.register("obj",function(l,f,d,v,p){var m;if(Array.isArray(l))for(var x=0;x<l.length;x++)m=new o(this,l[x]),this.addFile(m.files);else m=new o(this,l,f,d,v,p),this.addFile(m.files);return this}),h.exports=o},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(8),a=t(61),n=new e({Extends:a,initialize:function(r,u,o,l,f){a.call(this,r,u,o,l,f),this.type="packfile"},onProcess:function(){this.state!==c.FILE_POPULATED&&(this.state=c.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});s.register("pack",function(i,r,u,o){if(Array.isArray(i))for(var l=0;l<i.length;l++)this.addFile(new n(this,i[l]));else this.addFile(new n(this,i,r,o,u));return this}),h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d,v,p){var m="js";if(i(l)){var x=l;l=n(x,"key"),f=n(x,"url"),p=n(x,"xhrSettings"),m=n(x,"extension",m),d=n(x,"start"),v=n(x,"mapping")}var T={type:"plugin",cache:!1,extension:m,responseType:"text",key:l,url:f,xhrSettings:p,config:{start:d,mapping:v}};s.call(this,o,T),typeof f=="function"&&(this.data=f,this.state=c.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,o=this.config,l=n(o,"start",!1),f=n(o,"mapping",null);if(this.state===c.FILE_POPULATED)u.install(this.key,this.data,l,f);else{this.state=c.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var d=u.install(this.key,window[this.key],l,f);(l||f)&&(this.loader.systems[f]=d,this.loader.scene[f]=d)}this.onProcessComplete()}});a.register("plugin",function(u,o,l,f,d){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new r(this,u[v]));else this.addFile(new r(this,u,o,l,f,d));return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d){var v="js";if(i(l)){var p=l;l=n(p,"key"),f=n(p,"url"),d=n(p,"xhrSettings"),v=n(p,"extension",v)}var m={type:"text",extension:v,responseType:"text",key:l,url:f,xhrSettings:d};s.call(this,o,m)},onProcess:function(){this.state=c.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),o=eval;this.loader.sceneManager.add(this.key,o(u)),this.complete=!0}});a.register("sceneFile",function(u,o,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new r(this,u[f]));else this.addFile(new r(this,u,o,l));return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d,v,p){var m="js";if(i(l)){var x=l;l=n(x,"key"),f=n(x,"url"),p=n(x,"xhrSettings"),m=n(x,"extension",m),d=n(x,"systemKey"),v=n(x,"sceneKey")}var T={type:"scenePlugin",cache:!1,extension:m,responseType:"text",key:l,url:f,xhrSettings:p,config:{systemKey:d,sceneKey:v}};s.call(this,o,T),typeof f=="function"&&(this.data=f,this.state=c.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,o=this.config,l=this.key,f=n(o,"systemKey",l),d=n(o,"sceneKey",l);this.state===c.FILE_POPULATED?u.installScenePlugin(f,this.data,d,this.loader.scene,!0):(this.state=c.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),u.installScenePlugin(f,window[this.key],d,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",function(u,o,l,f,d){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new r(this,u[v]));else this.addFile(new r(this,u,o,l,f,d));return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(71),a=new e({Extends:s,initialize:function(i,r,u,o,l){s.call(this,i,r,u,l,o),this.type="spritesheet"},addToCache:function(){var n=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(n)}});c.register("spritesheet",function(n,i,r,u){if(Array.isArray(n))for(var o=0;o<n.length;o++)this.addFile(new a(this,n[o]));else this.addFile(new a(this,n,i,r,u));return this}),h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=new e({Extends:s,initialize:function(o,l,f,d,v){var p="svg";if(i(l)){var m=l;l=n(m,"key"),f=n(m,"url"),d=n(m,"svgConfig",{}),v=n(m,"xhrSettings"),p=n(m,"extension",p)}var x={type:"svg",cache:o.textureManager,extension:p,responseType:"text",key:l,url:f,xhrSettings:v,config:{width:n(d,"width"),height:n(d,"height"),scale:n(d,"scale")}};s.call(this,o,x)},onProcess:function(){this.state=c.FILE_PROCESSING;var u=this.xhrLoader.responseText,o=[u],l=this.config.width,f=this.config.height,d=this.config.scale;t:if(l&&f||d){var v=null,p=new DOMParser;v=p.parseFromString(u,"text/xml");var m=v.getElementsByTagName("svg")[0],x=m.hasAttribute("viewBox"),T=parseFloat(m.getAttribute("width")),S=parseFloat(m.getAttribute("height"));if(!x&&T&&S)m.setAttribute("viewBox","0  0 "+T+" "+S);else if(x&&!T&&!S){var E=m.getAttribute("viewBox").split(/\s+|,/);T=E[2],S=E[3]}if(d)if(T&&S)l=T*d,f=S*d;else break t;m.setAttribute("width",l.toString()+"px"),m.setAttribute("height",f.toString()+"px"),o=[new XMLSerializer().serializeToString(m)]}try{var C=new window.Blob(o,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var A=this,P=!1;this.data.onload=function(){P||s.revokeObjectURL(A.data),A.onProcessComplete()},this.data.onerror=function(){P?A.onProcessError():(P=!0,s.revokeObjectURL(A.data),A.data.src="data:image/svg+xml,"+encodeURIComponent(o.join("")))},s.createObjectURL(this.data,C,"image/svg+xml")},addToCache:function(){var u=this.cache.addImage(this.key,this.data);this.pendingDestroy(u)}});a.register("svg",function(u,o,l,f){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,o,l,f));return this}),h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(2),i=t(7),r=t(40),u=new e({Extends:s,initialize:function(l,f,d,v){var p="csv";if(i(f)){var m=f;f=n(m,"key"),d=n(m,"url"),v=n(m,"xhrSettings"),p=n(m,"extension",p)}var x={type:"tilemapCSV",cache:l.cacheManager.tilemap,extension:p,responseType:"text",key:f,url:d,xhrSettings:v};s.call(this,l,x),this.tilemapFormat=r.CSV},onProcess:function(){this.state=c.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var o={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,o),this.pendingDestroy(o)}});a.register("tilemapCSV",function(o,l,f){if(Array.isArray(o))for(var d=0;d<o.length;d++)this.addFile(new u(this,o[d]));else this.addFile(new u(this,o,l,f));return this}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(61),a=t(40),n=new e({Extends:s,initialize:function(r,u,o,l){s.call(this,r,u,o,l),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var i={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,i),this.pendingDestroy(i)}});c.register("tilemapImpact",function(i,r,u){if(Array.isArray(i))for(var o=0;o<i.length;o++)this.addFile(new n(this,i[o]));else this.addFile(new n(this,i,r,u));return this}),h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(61),a=t(40),n=new e({Extends:s,initialize:function(r,u,o,l){s.call(this,r,u,o,l),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var i={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,i),this.pendingDestroy(i)}});c.register("tilemapTiledJSON",function(i,r,u){if(Array.isArray(i))for(var o=0;o<i.length;o++)this.addFile(new n(this,i[o]));else this.addFile(new n(this,i,r,u));return this}),h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(8),s=t(2),a=t(71),n=t(7),i=t(49),r=t(242),u=new e({Extends:i,initialize:function(l,f,d,v,p,m){var x,T;if(n(f)){var S=f;f=s(S,"key"),x=new a(l,{key:f,url:s(S,"textureURL"),extension:s(S,"textureExtension","png"),normalMap:s(S,"normalMap"),xhrSettings:s(S,"textureXhrSettings")}),T=new r(l,{key:f,url:s(S,"atlasURL"),extension:s(S,"atlasExtension","txt"),xhrSettings:s(S,"atlasXhrSettings")})}else x=new a(l,f,d,p),T=new r(l,f,v,m);x.linkFile?i.call(this,l,"unityatlas",f,[x,T,x.linkFile]):i.call(this,l,"unityatlas",f,[x,T])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(o.key,o.data,l.data,f),l.pendingDestroy(),this.complete=!0}}});c.register("unityAtlas",function(o,l,f,d,v){var p;if(Array.isArray(o))for(var m=0;m<o.length;m++)p=new u(this,o[m]),this.addFile(p.files);else p=new u(this,o,l,f,d,v),this.addFile(p.files);return this}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(23),a=t(8),n=t(155),i=t(2),r=t(7),u=new e({Extends:s,initialize:function(l,f,d,v,p,m,x){v===void 0&&(v="loadeddata"),p===void 0&&(p=!1),m===void 0&&(m=!1),v!=="loadeddata"&&v!=="canplay"&&v!=="canplaythrough"&&(v="loadeddata");var T={type:"video",cache:l.cacheManager.video,extension:d.type,responseType:"blob",key:f,url:d.url,xhrSettings:x,config:{loadEvent:v,asBlob:p,noAudio:m}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),s.call(this,l,T)},onProcess:function(){if(this.state=c.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var o=this.createVideoElement();this.data=o;var l=this;this.data.onloadeddata=function(){l.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(l.data),l.onProcessError()},s.createObjectURL(o,this.xhrLoader.response,""),o.load()},createVideoElement:function(){var o=document.createElement("video");return o.controls=!1,o.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(o.muted=!0,o.defaultMuted=!0,o.setAttribute("autoplay","autoplay")),o.setAttribute("playsinline","playsinline"),o.setAttribute("preload","auto"),o},onVideoLoadHandler:function(o){var l=o.target;l.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),l.removeEventListener("error",this.onErrorCallback,!0),this.data=l,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(o){var l=o.target;l&&(l.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),l.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var o=this.config.loadEvent;if(this.config.asBlob)s.prototype.load.call(this);else{this.percentComplete=0;var l=this.createVideoElement();l.addEventListener(o,this.onLoadCallback,!0),l.addEventListener("error",this.onErrorCallback,!0),l.src=n(this,this.loader.baseURL),l.load()}}});u.create=function(o,l,f,d,v,p,m){var x=o.systems.game;r(l)&&(f=i(l,"url",[]),d=i(l,"loadEvent","loadeddata"),v=i(l,"asBlob",!1),p=i(l,"noAudio",!1),m=i(l,"xhrSettings"),l=i(l,"key"));var T=u.getVideoURL(x,f);if(T)return new u(o,l,T,d,v,p,m)},u.getVideoURL=function(o,l){Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++){var d=i(l[f],"url",l[f]);if(d.indexOf("blob:")===0)return{url:d,type:""};var v;if(d.indexOf("data:")===0?v=d.split(",")[0].match(/\/(.*?);/):v=d.match(/\.([a-zA-Z0-9]+)($|\?)/),v=i(l[f],"type",v?v[1]:"").toLowerCase(),o.device.video[v])return{url:d,type:v}}return null},a.register("video",function(o,l,f,d,v,p){var m;if(Array.isArray(o))for(var x=0;x<o.length;x++)m=u.create(this,o[x]),m&&this.addFile(m);else m=u.create(this,o,l,f,d,v,p),m&&this.addFile(m);return this}),h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(21),s=t(149),a=t(9),n=t(95),i=t(8),r=t(2),u=t(24),o=t(20),l=t(156),f=new e({Extends:a,initialize:function(v){a.call(this);var p=v.sys.game.config,m=v.sys.settings.loader;this.scene=v,this.systems=v.sys,this.cacheManager=v.sys.cache,this.textureManager=v.sys.textures,this.sceneManager=v.sys.game.scene,i.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(r(m,"baseURL",p.loaderBaseURL)),this.setPath(r(m,"path",p.loaderPath)),this.setPrefix(r(m,"prefix",p.loaderPrefix)),this.maxParallelDownloads=r(m,"maxParallelDownloads",p.loaderMaxParallelDownloads),this.xhr=l(r(m,"responseType",p.loaderResponseType),r(m,"async",p.loaderAsync),r(m,"user",p.loaderUser),r(m,"password",p.loaderPassword),r(m,"timeout",p.loaderTimeout),r(m,"withCredentials",p.loaderWithCredentials)),this.crossOrigin=r(m,"crossOrigin",p.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.queue=new s,this._deleteQueue=new s,this.totalFailed=0,this.totalComplete=0,this.state=c.LOADER_IDLE,this.multiKeyIndex=0,v.sys.events.once(o.BOOT,this.boot,this),v.sys.events.on(o.START,this.pluginStart,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},setBaseURL:function(d){return d===void 0&&(d=""),d!==""&&d.substr(-1)!=="/"&&(d=d.concat("/")),this.baseURL=d,this},setPath:function(d){return d===void 0&&(d=""),d!==""&&d.substr(-1)!=="/"&&(d=d.concat("/")),this.path=d,this},setPrefix:function(d){return d===void 0&&(d=""),this.prefix=d,this},setCORS:function(d){return this.crossOrigin=d,this},addFile:function(d){Array.isArray(d)||(d=[d]);for(var v=0;v<d.length;v++){var p=d[v];this.keyExists(p)||(this.list.set(p),this.emit(n.ADD,p.key,p.type,this,p),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(d){var v=d.hasCacheConflict();return v||this.list.iterate(function(p){if(p.type===d.type&&p.key===d.key)return v=!0,!1}),!v&&this.isLoading()&&(this.inflight.iterate(function(p){if(p.type===d.type&&p.key===d.key)return v=!0,!1}),this.queue.iterate(function(p){if(p.type===d.type&&p.key===d.key)return v=!0,!1})),v},addPack:function(d,v){v&&d.hasOwnProperty(v)&&(d={packKey:d[v]});var p=0,m=this.baseURL,x=this.path,T=this.prefix;for(var S in d)if(Object.prototype.hasOwnProperty.call(d,S)){var E=d[S],C=r(E,"baseURL",m),A=r(E,"path",x),P=r(E,"prefix",T),M=r(E,"files",null),O=r(E,"defaultType","void");if(Array.isArray(M)){this.setBaseURL(C),this.setPath(A),this.setPrefix(P);for(var F=0;F<M.length;F++){var I=M[F],N=I.hasOwnProperty("type")?I.type:O;this[N]&&(this[N](I),p++)}}}return this.setBaseURL(m),this.setPath(x),this.setPrefix(T),p>0},isLoading:function(){return this.state===c.LOADER_LOADING||this.state===c.LOADER_PROCESSING},isReady:function(){return this.state===c.LOADER_IDLE||this.state===c.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(n.START,this),this.list.size===0?this.loadComplete():(this.state=c.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(o.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(n.PROGRESS,this.progress)},update:function(){this.state===c.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(d){if((d.state===c.FILE_POPULATED||d.state===c.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(d),this.list.delete(d),d.crossOrigin||(d.crossOrigin=this.crossOrigin),d.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(d,v){this.inflight&&(this.inflight.delete(d),this.updateProgress(),v?(this.totalComplete++,this.queue.set(d),this.emit(n.FILE_LOAD,d),d.onProcess()):(this.totalFailed++,this._deleteQueue.set(d),this.emit(n.FILE_LOAD_ERROR,d),this.fileProcessComplete(d)))},fileProcessComplete:function(d){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(d.state===c.FILE_ERRORED?d.multiFile&&d.multiFile.onFileFailed(d):d.state===c.FILE_COMPLETE&&(d.multiFile?d.multiFile.isReadyToProcess()&&d.multiFile.addToCache():d.addToCache()),this.queue.delete(d),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(n.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=c.LOADER_COMPLETE,this.systems.events.off(o.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(n.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(d){this._deleteQueue.set(d)},saveJSON:function(d,v){return this.save(JSON.stringify(d),v)},save:function(d,v,p){v===void 0&&(v="file.json"),p===void 0&&(p="application/json");var m=new Blob([d],{type:p}),x=URL.createObjectURL(m),T=document.createElement("a");return T.download=v,T.textContent="Download "+v,T.href=x,T.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var d=this.systems.game.config,v=this.systems.settings.loader;this.setBaseURL(r(v,"baseURL",d.loaderBaseURL)),this.setPath(r(v,"path",d.loaderPath)),this.setPrefix(r(v,"prefix",d.loaderPrefix)),this.state=c.LOADER_IDLE},shutdown:function(){this.reset(),this.state=c.LOADER_SHUTDOWN,this.systems.events.off(o.UPDATE,this.update,this),this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=c.LOADER_DESTROYED,this.systems.events.off(o.UPDATE,this.update,this),this.systems.events.off(o.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",f,"load"),h.exports=f},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),c=t(17),s={ArcadePhysics:t(1367),Body:t(527),Collider:t(528),Components:t(243),Events:t(245),Factory:t(521),GetOverlapX:t(246),GetOverlapY:t(247),SeparateX:t(537),SeparateY:t(538),Group:t(524),Image:t(522),Sprite:t(157),StaticBody:t(539),StaticGroup:t(525),Tilemap:t(1391),World:t(526)};s=c(!1,s,e),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(36),s=t(50),a=t(353),n=t(521),i=t(2),r=t(127),u=t(523),o=t(244),l=t(24),f=t(20),d=t(3),v=t(526),p=new e({initialize:function(x){this.scene=x,this.systems=x.sys,this.config=this.getConfig(),this.world,this.add,x.sys.events.once(f.BOOT,this.boot,this),x.sys.events.on(f.START,this.start,this)},boot:function(){this.world=new v(this.scene,this.config),this.add=new n(this.world),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new v(this.scene,this.config),this.add=new n(this.world));var m=this.systems.events;i(this.config,"customUpdate",!1)||m.on(f.UPDATE,this.world.update,this.world),m.on(f.POST_UPDATE,this.world.postUpdate,this.world),m.once(f.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(f.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(f.UPDATE,this.world.update,this.world)},getConfig:function(){var m=this.systems.game.config.physics,x=this.systems.settings.physics,T=r(i(x,"arcade",{}),i(m,"arcade",{}));return T},overlap:function(m,x,T,S,E){return T===void 0&&(T=null),S===void 0&&(S=null),E===void 0&&(E=T),this.world.collideObjects(m,x,T,S,E,!0)},collide:function(m,x,T,S,E){return T===void 0&&(T=null),S===void 0&&(S=null),E===void 0&&(E=T),this.world.collideObjects(m,x,T,S,E,!1)},collideTiles:function(m,x,T,S,E){return this.world.collideTiles(m,x,T,S,E)},overlapTiles:function(m,x,T,S,E){return this.world.overlapTiles(m,x,T,S,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(m,x,T,S,E,C){S===void 0&&(S=60);var A=Math.atan2(T-m.y,x-m.x);return m.body.acceleration.setToPolar(A,S),E!==void 0&&C!==void 0&&m.body.maxVelocity.set(E,C),A},accelerateToObject:function(m,x,T,S,E){return this.accelerateTo(m,x.x,x.y,T,S,E)},closest:function(m,x){x||(x=this.world.bodies.entries);for(var T=Number.MAX_VALUE,S=null,E=m.x,C=m.y,A=x.length,P=0;P<A;P++){var M=x[P],O=M.body||M;if(!(m===M||m===O||m===O.gameObject||m===O.center)){var F=a(E,C,O.center.x,O.center.y);F<T&&(S=M,T=F)}}return S},furthest:function(m,x){x||(x=this.world.bodies.entries);for(var T=-1,S=null,E=m.x,C=m.y,A=x.length,P=0;P<A;P++){var M=x[P],O=M.body||M;if(!(m===M||m===O||m===O.gameObject||m===O.center)){var F=a(E,C,O.center.x,O.center.y);F>T&&(S=M,T=F)}}return S},moveTo:function(m,x,T,S,E){S===void 0&&(S=60),E===void 0&&(E=0);var C=Math.atan2(T-m.y,x-m.x);return E>0&&(S=s(m.x,m.y,x,T)/(E/1e3)),m.body.velocity.setToPolar(C,S),C},moveToObject:function(m,x,T,S){return this.moveTo(m,x.x,x.y,T,S)},velocityFromAngle:function(m,x,T){return x===void 0&&(x=60),T===void 0&&(T=new d),T.setToPolar(c(m),x)},velocityFromRotation:function(m,x,T){return x===void 0&&(x=60),T===void 0&&(T=new d),T.setToPolar(m,x)},overlapRect:function(m,x,T,S,E,C){return o(this.world,m,x,T,S,E,C)},overlapCirc:function(m,x,T,S,E){return u(this.world,m,x,T,S,E)},shutdown:function(){if(this.world){var m=this.systems.events;m.off(f.UPDATE,this.world.update,this.world),m.off(f.POST_UPDATE,this.world.postUpdate,this.world),m.off(f.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});l.register("ArcadePhysics",p,"arcadePhysics"),h.exports=p},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAcceleration:function(e,c){return this.body.acceleration.set(e,c),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(e,c){return this.body.bounce.set(e,c),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,c,s){return this.body.setCollideWorldBounds(e,c,s),this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDebug:function(e,c,s){return this.debugShowBody=e,this.debugShowVelocity=c,this.debugBodyColor=s,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDrag:function(e,c){return this.body.drag.set(e,c),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={enableBody:function(e,c,s,a,n){return e&&this.body.reset(c,s),a&&(this.body.gameObject.active=!0),n&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,c){return e===void 0&&(e=!1),c===void 0&&(c=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),c&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(e,c){return this.body.friction.set(e,c),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setGravity:function(e,c){return this.body.gravity.set(e,c),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setMass:function(e){return this.body.mass=e,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setOffset:function(e,c){return this.body.setOffset(e,c),this},setSize:function(e,c,s){return this.body.setSize(e,c,s),this},setBodySize:function(e,c,s){return this.body.setSize(e,c,s),this},setCircle:function(e,c,s){return this.body.setCircle(e,c,s),this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setVelocity:function(e,c){return this.body.setVelocity(e,c),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,c){return this.body.maxVelocity.set(e,c),this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collide"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="overlap"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="tilecollide"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="tileoverlap"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="worldbounds"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="worldstep"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,e,c,s,a,n,i,r,u,o,l,f,d,v,p,m,x,T=function(M,O,F){t=M,e=O;var I=t.velocity.x,N=e.velocity.x;return c=t.pushable,u=t._dx<0,o=t._dx>0,l=t._dx===0,p=Math.abs(t.right-e.x)<=Math.abs(e.right-t.x),i=N-I*t.bounce.x,s=e.pushable,f=e._dx<0,d=e._dx>0,v=e._dx===0,m=!p,r=I-N*e.bounce.x,x=Math.abs(F),S()},S=function(){return o&&p&&e.blocked.right?(t.processX(-x,i,!1,!0),1):u&&m&&e.blocked.left?(t.processX(x,i,!0),1):d&&m&&t.blocked.right?(e.processX(-x,r,!1,!0),2):f&&p&&t.blocked.left?(e.processX(x,r,!0),2):0},E=function(){var M=t.velocity.x,O=e.velocity.x,F=Math.sqrt(O*O*e.mass/t.mass)*(O>0?1:-1),I=Math.sqrt(M*M*t.mass/e.mass)*(M>0?1:-1),N=(F+I)*.5;return F-=N,I-=N,a=N+F*t.bounce.x,n=N+I*e.bounce.x,u&&m?C(0):f&&p?C(1):o&&p?C(2):d&&m?C(3):!1},C=function(M){if(c&&s)x*=.5,M===0||M===3?(t.processX(x,a),e.processX(-x,n)):(t.processX(-x,a),e.processX(x,n));else if(c&&!s)M===0||M===3?t.processX(x,i,!0):t.processX(-x,i,!1,!0);else if(!c&&s)M===0||M===3?e.processX(-x,r,!1,!0):e.processX(x,r,!0);else{var O=x*.5;M===0?v?(t.processX(x,0,!0),e.processX(0,null,!1,!0)):d?(t.processX(O,0,!0),e.processX(-O,0,!1,!0)):(t.processX(O,e.velocity.x,!0),e.processX(-O,null,!1,!0)):M===1?l?(t.processX(0,null,!1,!0),e.processX(x,0,!0)):o?(t.processX(-O,0,!1,!0),e.processX(O,0,!0)):(t.processX(-O,null,!1,!0),e.processX(O,t.velocity.x,!0)):M===2?v?(t.processX(-x,0,!1,!0),e.processX(0,null,!0)):f?(t.processX(-O,0,!1,!0),e.processX(O,0,!0)):(t.processX(-O,e.velocity.x,!1,!0),e.processX(O,null,!0)):M===3&&(l?(t.processX(0,null,!0),e.processX(-x,0,!1,!0)):u?(t.processX(O,0,!0),e.processX(-O,0,!1,!0)):(t.processX(O,e.velocity.y,!0),e.processX(-O,null,!1,!0)))}return!0},A=function(M){M===1?e.velocity.x=0:p?e.processX(x,r,!0):e.processX(-x,r,!1,!0),t.moves&&(e.y+=(t.y-t.prev.y)*t.friction.y,e._dy=e.y-e.prev.y)},P=function(M){M===2?t.velocity.x=0:m?t.processX(x,i,!0):t.processX(-x,i,!1,!0),e.moves&&(t.y+=(e.y-e.prev.y)*e.friction.y,t._dy=t.y-t.prev.y)};h.exports={BlockCheck:S,Check:E,Set:T,Run:C,RunImmovableBody1:A,RunImmovableBody2:P}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,e,c,s,a,n,i,r,u,o,l,f,d,v,p,m,x,T=function(M,O,F){t=M,e=O;var I=t.velocity.y,N=e.velocity.y;return c=t.pushable,u=t._dy<0,o=t._dy>0,l=t._dy===0,p=Math.abs(t.bottom-e.y)<=Math.abs(e.bottom-t.y),i=N-I*t.bounce.y,s=e.pushable,f=e._dy<0,d=e._dy>0,v=e._dy===0,m=!p,r=I-N*e.bounce.y,x=Math.abs(F),S()},S=function(){return o&&p&&e.blocked.down?(t.processY(-x,i,!1,!0),1):u&&m&&e.blocked.up?(t.processY(x,i,!0),1):d&&m&&t.blocked.down?(e.processY(-x,r,!1,!0),2):f&&p&&t.blocked.up?(e.processY(x,r,!0),2):0},E=function(){var M=t.velocity.y,O=e.velocity.y,F=Math.sqrt(O*O*e.mass/t.mass)*(O>0?1:-1),I=Math.sqrt(M*M*t.mass/e.mass)*(M>0?1:-1),N=(F+I)*.5;return F-=N,I-=N,a=N+F*t.bounce.y,n=N+I*e.bounce.y,u&&m?C(0):f&&p?C(1):o&&p?C(2):d&&m?C(3):!1},C=function(M){if(c&&s)x*=.5,M===0||M===3?(t.processY(x,a),e.processY(-x,n)):(t.processY(-x,a),e.processY(x,n));else if(c&&!s)M===0||M===3?t.processY(x,i,!0):t.processY(-x,i,!1,!0);else if(!c&&s)M===0||M===3?e.processY(-x,r,!1,!0):e.processY(x,r,!0);else{var O=x*.5;M===0?v?(t.processY(x,0,!0),e.processY(0,null,!1,!0)):d?(t.processY(O,0,!0),e.processY(-O,0,!1,!0)):(t.processY(O,e.velocity.y,!0),e.processY(-O,null,!1,!0)):M===1?l?(t.processY(0,null,!1,!0),e.processY(x,0,!0)):o?(t.processY(-O,0,!1,!0),e.processY(O,0,!0)):(t.processY(-O,null,!1,!0),e.processY(O,t.velocity.y,!0)):M===2?v?(t.processY(-x,0,!1,!0),e.processY(0,null,!0)):f?(t.processY(-O,0,!1,!0),e.processY(O,0,!0)):(t.processY(-O,e.velocity.y,!1,!0),e.processY(O,null,!0)):M===3&&(l?(t.processY(0,null,!0),e.processY(-x,0,!1,!0)):u?(t.processY(O,0,!0),e.processY(-O,0,!1,!0)):(t.processY(O,e.velocity.y,!0),e.processY(-O,null,!1,!0)))}return!0},A=function(M){M===1?e.velocity.y=0:p?e.processY(x,r,!0):e.processY(-x,r,!1,!0),t.moves&&(e.x+=(t.x-t.prev.x)*t.friction.x,e._dx=e.x-e.prev.x)},P=function(M){M===2?t.velocity.y=0:m?t.processY(x,i,!0):t.processY(-x,i,!1,!0),e.moves&&(t.x+=(e.x-e.prev.x)*e.friction.x,t._dx=t.x-t.prev.x)};h.exports={BlockCheck:S,Check:E,Set:T,Run:C,RunImmovableBody1:A,RunImmovableBody2:P}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={ProcessTileCallbacks:t(530),ProcessTileSeparationX:t(534),ProcessTileSeparationY:t(536),SeparateTile:t(532),TileCheckX:t(533),TileCheckY:t(535),TileIntersectsBody:t(248)};h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(3),s=new e({initialize:function(){this.boundsCenter=new c,this.centerDiff=new c},parseBody:function(a){if(a=a.hasOwnProperty("body")?a.body:a,!a.hasOwnProperty("bounds")||!a.hasOwnProperty("centerOfMass"))return!1;var n=this.boundsCenter,i=this.centerDiff,r=a.bounds.max.x-a.bounds.min.x,u=a.bounds.max.y-a.bounds.min.y,o=r*a.centerOfMass.x,l=u*a.centerOfMass.y;return n.set(r/2,u/2),i.set(o-n.x,l-n.y),!0},getTopLeft:function(a,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(a)){var r=this.boundsCenter,u=this.centerDiff;return new c(n+r.x+u.x,i+r.y+u.y)}return!1},getTopCenter:function(a,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(a)){var r=this.boundsCenter,u=this.centerDiff;return new c(n+u.x,i+r.y+u.y)}return!1},getTopRight:function(a,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(a)){var r=this.boundsCenter,u=this.centerDiff;return new c(n-(r.x-u.x),i+r.y+u.y)}return!1},getLeftCenter:function(a,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(a)){var r=this.boundsCenter,u=this.centerDiff;return new c(n+r.x+u.x,i+u.y)}return!1},getCenter:function(a,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(a)){var r=this.centerDiff;return new c(n+r.x,i+r.y)}return!1},getRightCenter:function(a,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(a)){var r=this.boundsCenter,u=this.centerDiff;return new c(n-(r.x-u.x),i+u.y)}return!1},getBottomLeft:function(a,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(a)){var r=this.boundsCenter,u=this.centerDiff;return new c(n+r.x+u.x,i-(r.y-u.y))}return!1},getBottomCenter:function(a,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(a)){var r=this.boundsCenter,u=this.centerDiff;return new c(n+u.x,i-(r.y-u.y))}return!1},getBottomRight:function(a,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(a)){var r=this.boundsCenter,u=this.centerDiff;return new c(n-(r.x-u.x),i-(r.y-u.y))}return!1}});h.exports=s},function(h,g){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={decomp:M,quickDecomp:N,isSimple:F,removeCollinearPoints:G,removeDuplicatePoints:Y,makeCCW:p};function t(D,L,B){B=B||0;var w=[0,0],V,U,X,H,b,Z,K;return V=D[1][1]-D[0][1],U=D[0][0]-D[1][0],X=V*D[0][0]+U*D[0][1],H=L[1][1]-L[0][1],b=L[0][0]-L[1][0],Z=H*L[0][0]+b*L[0][1],K=V*b-H*U,z(K,0,B)||(w[0]=(b*X-U*Z)/K,w[1]=(V*Z-H*X)/K),w}function e(D,L,B,w){var V=L[0]-D[0],U=L[1]-D[1],X=w[0]-B[0],H=w[1]-B[1];if(X*U-H*V===0)return!1;var b=(V*(B[1]-D[1])+U*(D[0]-B[0]))/(X*U-H*V),Z=(X*(D[1]-B[1])+H*(B[0]-D[0]))/(H*V-X*U);return b>=0&&b<=1&&Z>=0&&Z<=1}function c(D,L,B){return(L[0]-D[0])*(B[1]-D[1])-(B[0]-D[0])*(L[1]-D[1])}function s(D,L,B){return c(D,L,B)>0}function a(D,L,B){return c(D,L,B)>=0}function n(D,L,B){return c(D,L,B)<0}function i(D,L,B){return c(D,L,B)<=0}var r=[],u=[];function o(D,L,B,w){if(w){var V=r,U=u;V[0]=L[0]-D[0],V[1]=L[1]-D[1],U[0]=B[0]-L[0],U[1]=B[1]-L[1];var X=V[0]*U[0]+V[1]*U[1],H=Math.sqrt(V[0]*V[0]+V[1]*V[1]),b=Math.sqrt(U[0]*U[0]+U[1]*U[1]),Z=Math.acos(X/(H*b));return Z<w}else return c(D,L,B)===0}function l(D,L){var B=L[0]-D[0],w=L[1]-D[1];return B*B+w*w}function f(D,L){var B=D.length;return D[L<0?L%B+B:L%B]}function d(D){D.length=0}function v(D,L,B,w){for(var V=B;V<w;V++)D.push(L[V])}function p(D){for(var L=0,B=D,w=1;w<D.length;++w)(B[w][1]<B[L][1]||B[w][1]===B[L][1]&&B[w][0]>B[L][0])&&(L=w);return s(f(D,L-1),f(D,L),f(D,L+1))?!1:(m(D),!0)}function m(D){for(var L=[],B=D.length,w=0;w!==B;w++)L.push(D.pop());for(var w=0;w!==B;w++)D[w]=L[w]}function x(D,L){return n(f(D,L-1),f(D,L),f(D,L+1))}var T=[],S=[];function E(D,L,B){var w,V,U=T,X=S;if(a(f(D,L+1),f(D,L),f(D,B))&&i(f(D,L-1),f(D,L),f(D,B)))return!1;V=l(f(D,L),f(D,B));for(var H=0;H!==D.length;++H)if(!((H+1)%D.length===L||H===L)&&a(f(D,L),f(D,B),f(D,H+1))&&i(f(D,L),f(D,B),f(D,H))&&(U[0]=f(D,L),U[1]=f(D,B),X[0]=f(D,H),X[1]=f(D,H+1),w=t(U,X),l(f(D,L),w)<V))return!1;return!0}function C(D,L,B){for(var w=0;w!==D.length;++w)if(!(w===L||w===B||(w+1)%D.length===L||(w+1)%D.length===B)&&e(f(D,L),f(D,B),f(D,w),f(D,w+1)))return!1;return!0}function A(D,L,B,w){var V=w||[];if(d(V),L<B)for(var U=L;U<=B;U++)V.push(D[U]);else{for(var U=0;U<=B;U++)V.push(D[U]);for(var U=L;U<D.length;U++)V.push(D[U])}return V}function P(D){for(var L=[],B=[],w=[],V=[],U=Number.MAX_VALUE,X=0;X<D.length;++X)if(x(D,X)){for(var H=0;H<D.length;++H)if(E(D,X,H)){B=P(A(D,X,H,V)),w=P(A(D,H,X,V));for(var b=0;b<w.length;b++)B.push(w[b]);B.length<U&&(L=B,U=B.length,L.push([f(D,X),f(D,H)]))}}return L}function M(D){var L=P(D);return L.length>0?O(D,L):[D]}function O(D,L){if(L.length===0)return[D];if(L instanceof Array&&L.length&&L[0]instanceof Array&&L[0].length===2&&L[0][0]instanceof Array){for(var B=[D],w=0;w<L.length;w++)for(var V=L[w],U=0;U<B.length;U++){var X=B[U],H=O(X,V);if(H){B.splice(U,1),B.push(H[0],H[1]);break}}return B}else{var V=L,w=D.indexOf(V[0]),U=D.indexOf(V[1]);return w!==-1&&U!==-1?[A(D,w,U),A(D,U,w)]:!1}}function F(D){var L=D,B;for(B=0;B<L.length-1;B++)for(var w=0;w<B-1;w++)if(e(L[B],L[B+1],L[w],L[w+1]))return!1;for(B=1;B<L.length-2;B++)if(e(L[0],L[L.length-1],L[B],L[B+1]))return!1;return!0}function I(D,L,B,w,V){V=V||0;var U=L[1]-D[1],X=D[0]-L[0],H=U*D[0]+X*D[1],b=w[1]-B[1],Z=B[0]-w[0],K=b*B[0]+Z*B[1],Q=U*Z-b*X;return z(Q,0,V)?[0,0]:[(Z*H-X*K)/Q,(U*K-b*H)/Q]}function N(D,L,B,w,V,U,X){U=U||100,X=X||0,V=V||25,L=typeof L<"u"?L:[],B=B||[],w=w||[];var H=[0,0],b=[0,0],Z=[0,0],K=0,Q=0,j=0,q=0,k=0,J=0,_=0,it=[],tt=[],$=D,st=D;if(st.length<3)return L;if(X++,X>U)return console.warn("quickDecomp: max level ("+U+") reached."),L;for(var nt=0;nt<D.length;++nt)if(x($,nt)){B.push($[nt]),K=Q=Number.MAX_VALUE;for(var rt=0;rt<D.length;++rt)s(f($,nt-1),f($,nt),f($,rt))&&i(f($,nt-1),f($,nt),f($,rt-1))&&(Z=I(f($,nt-1),f($,nt),f($,rt),f($,rt-1)),n(f($,nt+1),f($,nt),Z)&&(j=l($[nt],Z),j<Q&&(Q=j,b=Z,J=rt))),s(f($,nt+1),f($,nt),f($,rt+1))&&i(f($,nt+1),f($,nt),f($,rt))&&(Z=I(f($,nt+1),f($,nt),f($,rt),f($,rt+1)),s(f($,nt-1),f($,nt),Z)&&(j=l($[nt],Z),j<K&&(K=j,H=Z,k=rt)));if(J===(k+1)%D.length)Z[0]=(b[0]+H[0])/2,Z[1]=(b[1]+H[1])/2,w.push(Z),nt<k?(v(it,$,nt,k+1),it.push(Z),tt.push(Z),J!==0&&v(tt,$,J,$.length),v(tt,$,0,nt+1)):(nt!==0&&v(it,$,nt,$.length),v(it,$,0,k+1),it.push(Z),tt.push(Z),v(tt,$,J,nt+1));else{if(J>k&&(k+=D.length),q=Number.MAX_VALUE,k<J)return L;for(var rt=J;rt<=k;++rt)a(f($,nt-1),f($,nt),f($,rt))&&i(f($,nt+1),f($,nt),f($,rt))&&(j=l(f($,nt),f($,rt)),j<q&&C($,nt,rt)&&(q=j,_=rt%D.length));nt<_?(v(it,$,nt,_+1),_!==0&&v(tt,$,_,st.length),v(tt,$,0,nt+1)):(nt!==0&&v(it,$,nt,st.length),v(it,$,0,_+1),v(tt,$,_,nt+1))}return it.length<tt.length?(N(it,L,B,w,V,U,X),N(tt,L,B,w,V,U,X)):(N(tt,L,B,w,V,U,X),N(it,L,B,w,V,U,X)),L}return L.push(D),L}function G(D,L){for(var B=0,w=D.length-1;D.length>3&&w>=0;--w)o(f(D,w-1),f(D,w),f(D,w+1),L)&&(D.splice(w%D.length,1),B++);return B}function Y(D,L){for(var B=D.length-1;B>=1;--B)for(var w=D[B],V=B-1;V>=0;--V)if(W(w,D[V],L)){D.splice(B,1);continue}}function z(D,L,B){return B=B||0,Math.abs(D-L)<=B}function W(D,L,B){return z(D[0],L[0],B)&&z(D[1],L[1],B)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),c=t(0),s=t(591),a=t(128),n=t(592),i=t(1395),r=t(1396),u=t(1397),o=t(593),l=t(589),f=t(590),d=t(1398),v=t(64),p=new c({initialize:function(x){this.world=x,this.scene=x.scene,this.sys=x.scene.sys},rectangle:function(m,x,T,S,E){var C=e.rectangle(m,x,T,S,E);return this.world.add(C),C},trapezoid:function(m,x,T,S,E,C){var A=e.trapezoid(m,x,T,S,E,C);return this.world.add(A),A},circle:function(m,x,T,S,E){var C=e.circle(m,x,T,S,E);return this.world.add(C),C},polygon:function(m,x,T,S,E){var C=e.polygon(m,x,T,S,E);return this.world.add(C),C},fromVertices:function(m,x,T,S,E,C,A){typeof T=="string"&&(T=v.fromPath(T));var P=e.fromVertices(m,x,T,S,E,C,A);return this.world.add(P),P},fromPhysicsEditor:function(m,x,T,S,E){E===void 0&&(E=!0);var C=l.parseBody(m,x,T,S);return E&&!this.world.has(C)&&this.world.add(C),C},fromSVG:function(m,x,T,S,E,C){S===void 0&&(S=1),E===void 0&&(E={}),C===void 0&&(C=!0);for(var A=T.getElementsByTagName("path"),P=[],M=0;M<A.length;M++){var O=n.pathToVertices(A[M],30);S!==1&&v.scale(O,S,S),P.push(O)}var F=e.fromVertices(m,x,P,E);return C&&this.world.add(F),F},fromJSON:function(m,x,T,S,E){S===void 0&&(S={}),E===void 0&&(E=!0);var C=f.parseBody(m,x,T,S);return C&&E&&this.world.add(C),C},imageStack:function(m,x,T,S,E,C,A,P,M){A===void 0&&(A=0),P===void 0&&(P=0),M===void 0&&(M={});var O=this.world,F=this.sys.displayList;M.addToWorld=!1;var I=s.stack(T,S,E,C,A,P,function(N,G){var Y=new r(O,N,G,m,x,M);return F.add(Y),Y.body});return O.add(I),I},stack:function(m,x,T,S,E,C,A){var P=s.stack(m,x,T,S,E,C,A);return this.world.add(P),P},pyramid:function(m,x,T,S,E,C,A){var P=s.pyramid(m,x,T,S,E,C,A);return this.world.add(P),P},chain:function(m,x,T,S,E,C){return s.chain(m,x,T,S,E,C)},mesh:function(m,x,T,S,E){return s.mesh(m,x,T,S,E)},newtonsCradle:function(m,x,T,S,E){var C=s.newtonsCradle(m,x,T,S,E);return this.world.add(C),C},car:function(m,x,T,S,E){var C=s.car(m,x,T,S,E);return this.world.add(C),C},softBody:function(m,x,T,S,E,C,A,P,M,O){var F=s.softBody(m,x,T,S,E,C,A,P,M,O);return this.world.add(F),F},joint:function(m,x,T,S,E){return this.constraint(m,x,T,S,E)},spring:function(m,x,T,S,E){return this.constraint(m,x,T,S,E)},constraint:function(m,x,T,S,E){S===void 0&&(S=1),E===void 0&&(E={}),E.bodyA=m.type==="body"?m:m.body,E.bodyB=x.type==="body"?x:x.body,isNaN(T)||(E.length=T),E.stiffness=S;var C=a.create(E);return this.world.add(C),C},worldConstraint:function(m,x,T,S){T===void 0&&(T=1),S===void 0&&(S={}),S.bodyB=m.type==="body"?m:m.body,isNaN(x)||(S.length=x),S.stiffness=T;var E=a.create(S);return this.world.add(E),E},mouseSpring:function(m){return this.pointerConstraint(m)},pointerConstraint:function(m){m===void 0&&(m={}),m.hasOwnProperty("render")||(m.render={visible:!1});var x=new d(this.scene,this.world,m);return this.world.add(x.constraint),x},image:function(m,x,T,S,E){var C=new r(this.world,m,x,T,S,E);return this.sys.displayList.add(C),C},tileBody:function(m,x){return new o(this.world,m,x)},sprite:function(m,x,T,S,E){var C=new u(this.world,m,x,T,S,E);return this.sys.displayList.add(C),this.sys.updateList.add(C),C},gameObject:function(m,x,T){return i(this.world,m,x,T)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});h.exports=p},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(249),c=t(2),s=t(3);function a(i){return!!i.get&&typeof i.get=="function"||!!i.set&&typeof i.set=="function"}var n=function(i,r,u,o){u===void 0&&(u={}),o===void 0&&(o=!0);var l=r.x,f=r.y;r.body={temp:!0,position:{x:l,y:f}};var d=[e.Bounce,e.Collision,e.Force,e.Friction,e.Gravity,e.Mass,e.Sensor,e.SetBody,e.Sleep,e.Static,e.Transform,e.Velocity];if(d.forEach(function(p){for(var m in p)a(p[m])?Object.defineProperty(r,m,{get:p[m].get,set:p[m].set}):Object.defineProperty(r,m,{value:p[m]})}),r.world=i,r._tempVec2=new s(l,f),u.hasOwnProperty("type")&&u.type==="body")r.setExistingBody(u,o);else{var v=c(u,"shape",null);v||(v="rectangle"),u.addToWorld=o,r.setBody(v,u)}return r};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(249),s=t(15),a=t(2),n=t(125),i=t(167),r=t(3),u=new e({Extends:n,Mixins:[c.Bounce,c.Collision,c.Force,c.Friction,c.Gravity,c.Mass,c.Sensor,c.SetBody,c.Sleep,c.Static,c.Transform,c.Velocity,i],initialize:function(l,f,d,v,p,m){s.call(this,l.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,p),this.setSizeToFrame(),this.setOrigin(),this.world=l,this._tempVec2=new r(f,d);var x=a(m,"shape",null);x?this.setBody(x,m):this.setRectangle(this.width,this.height,m),this.setPosition(f,d),this.initPipeline()}});h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),c=t(0),s=t(249),a=t(15),n=t(2),i=t(167),r=t(73),u=t(3),o=new c({Extends:r,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,i],initialize:function(f,d,v,p,m,x){a.call(this,f.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new e(this),this.setTexture(p,m),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new u(d,v);var T=n(x,"shape",null);T?this.setBody(T,x):this.setRectangle(this.width,this.height,x),this.setPosition(d,v),this.initPipeline()}});h.exports=o},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(84),c=t(0),s=t(118),a=t(128),n=t(273),i=t(272),r=t(51),u=t(127),o=t(165),l=t(3),f=t(64),d=new c({initialize:function(p,m,x){x===void 0&&(x={});var T={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=p,this.world=m,this.camera=null,this.pointer=null,this.active=!0,this.position=new l,this.body=null,this.part=null,this.constraint=a.create(u(x,T)),this.world.on(i.BEFORE_UPDATE,this.update,this),p.sys.input.on(r.POINTER_DOWN,this.onDown,this),p.sys.input.on(r.POINTER_UP,this.onUp,this)},onDown:function(v){this.pointer||(this.pointer=v,this.camera=v.camera)},onUp:function(v){v===this.pointer&&(this.pointer=null)},getBody:function(v){var p=this.position,m=this.constraint;this.camera.getWorldPoint(v.x,v.y,p);for(var x=s.allBodies(this.world.localWorld),T=0;T<x.length;T++){var S=x[T];if(!S.ignorePointer&&e.contains(S.bounds,p)&&n.canCollide(S.collisionFilter,m.collisionFilter)&&this.hitTestBody(S,p))return this.world.emit(i.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(v,p){for(var m=this.constraint,x=v.parts.length,T=x>1?1:0,S=T;S<x;S++){var E=v.parts[S];if(f.contains(E.vertices,p))return m.pointA=p,m.pointB={x:p.x-v.position.x,y:p.y-v.position.y},m.bodyB=v,m.angleB=v.angle,o.set(v,!1),this.part=E,this.body=v,!0}return!1},update:function(){var v=this.pointer,p=this.body;if(!this.active||!v){p&&this.stopDrag();return}if(!v.isDown&&p){this.stopDrag();return}else if(v.isDown){if(!p&&!this.getBody(v))return;p=this.body;var m=this.position,x=this.constraint;this.camera.getWorldPoint(v.x,v.y,m),x.pointA.x=m.x,x.pointA.y=m.y,o.set(p,!1),this.world.emit(i.DRAG,p,this)}},stopDrag:function(){var v=this.body,p=this.constraint;p.bodyB=null,p.pointB=null,this.pointer=null,this.body=null,this.part=null,v&&this.world.emit(i.DRAG_END,v,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(i.BEFORE_UPDATE,this.update),this.scene.sys.input.off(r.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(r.POINTER_UP,this.onUp,this)}});h.exports=d},function(h,g,t){var e={};h.exports=e;var c=t(595),s=t(32);(function(){e.name="matter-js",e.version="0.14.2",e.uses=[],e.used=[],e.use=function(){c.use(e,Array.prototype.slice.call(arguments))},e.before=function(a,n){return a=a.replace(/^Matter./,""),s.chainPathBefore(e,a,n)},e.after=function(a,n){return a=a.replace(/^Matter./,""),s.chainPathAfter(e,a,n)}})()},function(h,g,t){var e={};h.exports=e;var c=t(83),s=t(274),a=t(84),n=t(86),i=t(64);(function(){e.collides=function(r,u){for(var o=[],l=0;l<u.length;l++){var f=u[l];if(r!==f&&a.overlaps(f.bounds,r.bounds))for(var d=f.parts.length===1?0:1;d<f.parts.length;d++){var v=f.parts[d];if(a.overlaps(v.bounds,r.bounds)){var p=s.collides(v,r);if(p.collided){o.push(p);break}}}}return o},e.ray=function(r,u,o,l){l=l||1e-100;for(var f=c.angle(u,o),d=c.magnitude(c.sub(u,o)),v=(o.x+u.x)*.5,p=(o.y+u.y)*.5,m=n.rectangle(v,p,d,l,{angle:f}),x=e.collides(m,r),T=0;T<x.length;T+=1){var S=x[T];S.body=S.bodyB=S.bodyA}return x},e.region=function(r,u,o){for(var l=[],f=0;f<r.length;f++){var d=r[f],v=a.overlaps(d.bounds,u);(v&&!o||!v&&o)&&l.push(d)}return l},e.point=function(r,u){for(var o=[],l=0;l<r.length;l++){var f=r[l];if(a.contains(f.bounds,u))for(var d=f.parts.length===1?0:1;d<f.parts.length;d++){var v=f.parts[d];if(a.contains(v.bounds,u)&&i.contains(v.vertices,u)){o.push(f);break}}}return o}})()},function(h,g,t){var e={};h.exports=e;var c=t(596),s=t(165),a=t(599),n=t(598),i=t(1523),r=t(597),u=t(166),o=t(118),l=t(128),f=t(32),d=t(41);(function(){e.create=function(v,p){p=f.isElement(v)?p:v,v=f.isElement(v)?v:null,p=p||{},(v||p.render)&&f.warn("Engine.create: engine.render is deprecated (see docs)");var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:r}},x=f.extend(m,p);return x.world=p.world||c.create(x.world),x.pairs=n.create(),x.broadphase=x.broadphase.controller.create(x.broadphase),x.metrics=x.metrics||{extended:!1},x.metrics=i.create(x.metrics),x},e.update=function(v,p,m){p=p||1e3/60,m=m||1;var x=v.world,T=v.timing,S=v.broadphase,E=[],C;T.timestamp+=p*T.timeScale;var A={timestamp:T.timestamp};u.trigger(v,"beforeUpdate",A);var P=o.allBodies(x),M=o.allConstraints(x);for(i.reset(v.metrics),v.enableSleeping&&s.update(P,T.timeScale),e._bodiesApplyGravity(P,x.gravity),e._bodiesUpdate(P,p,T.timeScale,m,x.bounds),l.preSolveAll(P),C=0;C<v.constraintIterations;C++)l.solveAll(M,T.timeScale);l.postSolveAll(P),S.controller?(x.isModified&&S.controller.clear(S),S.controller.update(S,P,v,x.isModified),E=S.pairsList):E=P,x.isModified&&o.setModified(x,!1,!1,!0);var O=S.detector(E,v),F=v.pairs,I=T.timestamp;for(n.update(F,O,I),n.removeOld(F,I),v.enableSleeping&&s.afterCollisions(F.list,T.timeScale),F.collisionStart.length>0&&u.trigger(v,"collisionStart",{pairs:F.collisionStart}),a.preSolvePosition(F.list),C=0;C<v.positionIterations;C++)a.solvePosition(F.list,P,T.timeScale);for(a.postSolvePosition(P),l.preSolveAll(P),C=0;C<v.constraintIterations;C++)l.solveAll(M,T.timeScale);for(l.postSolveAll(P),a.preSolveVelocity(F.list),C=0;C<v.velocityIterations;C++)a.solveVelocity(F.list,T.timeScale);return F.collisionActive.length>0&&u.trigger(v,"collisionActive",{pairs:F.collisionActive}),F.collisionEnd.length>0&&u.trigger(v,"collisionEnd",{pairs:F.collisionEnd}),i.update(v.metrics,v),e._bodiesClearForces(P),u.trigger(v,"afterUpdate",A),v},e.merge=function(v,p){if(f.extend(v,p),p.world){v.world=p.world,e.clear(v);for(var m=o.allBodies(v.world),x=0;x<m.length;x++){var T=m[x];s.set(T,!1),T.id=f.nextId()}}},e.clear=function(v){var p=v.world;n.clear(v.pairs);var m=v.broadphase;if(m.controller){var x=o.allBodies(p);m.controller.clear(m),m.controller.update(m,x,v,!0)}},e._bodiesClearForces=function(v){for(var p=0;p<v.length;p++){var m=v[p];m.force.x=0,m.force.y=0,m.torque=0}},e._bodiesApplyGravity=function(v,p){var m=typeof p.scale<"u"?p.scale:.001;if(!(p.x===0&&p.y===0||m===0))for(var x=0;x<v.length;x++){var T=v[x];T.ignoreGravity||T.isStatic||T.isSleeping||(T.force.x+=T.mass*p.x*m*T.gravityScale.x,T.force.y+=T.mass*p.y*m*T.gravityScale.y)}},e._bodiesUpdate=function(v,p,m,x,T){for(var S=0;S<v.length;S++){var E=v[S];E.isStatic||E.isSleeping||d.update(E,p,m,x)}}})()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),c=t(41),s=t(0),a=t(32),n=t(118),i=t(1401),r=t(9),u=t(272),o=t(2),l=t(6),f=t(41),d=t(166),v=t(593),p=t(596),m=t(83),x=new s({Extends:r,initialize:function(S,E){r.call(this),this.scene=S,this.engine=i.create(E),this.localWorld=this.engine.world;var C=l(E,"gravity",null);C?this.setGravity(C.x,C.y,C.scale):C===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=l(E,"enabled",!0),this.correction=l(E,"correction",1),this.getDelta=l(E,"getDelta",this.update60Hz);var A=o(E,"runner",{}),P=o(A,"fps",!1),M=o(A,"fps",60),O=o(A,"delta",1e3/M),F=o(A,"deltaMin",1e3/M),I=o(A,"deltaMax",1e3/(M*.5));P||(M=1e3/O),this.runner={fps:M,correction:o(A,"correction",1),deltaSampleSize:o(A,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:o(A,"isFixed",!1),delta:O,deltaMin:F,deltaMax:I},this.autoUpdate=l(E,"autoUpdate",!0);var N=l(E,"debug",!1);if(this.drawDebug=typeof N=="object"?!0:N,this.debugGraphic,this.debugConfig={showAxes:o(N,"showAxes",!1),showAngleIndicator:o(N,"showAngleIndicator",!1),angleColor:o(N,"angleColor",15208787),showBroadphase:o(N,"showBroadphase",!1),broadphaseColor:o(N,"broadphaseColor",16757760),showBounds:o(N,"showBounds",!1),boundsColor:o(N,"boundsColor",16777215),showVelocity:o(N,"showVelocity",!1),velocityColor:o(N,"velocityColor",44783),showCollisions:o(N,"showCollisions",!1),collisionColor:o(N,"collisionColor",16094476),showSeparations:o(N,"showSeparations",!1),separationColor:o(N,"separationColor",16753920),showBody:o(N,"showBody",!0),showStaticBody:o(N,"showStaticBody",!0),showInternalEdges:o(N,"showInternalEdges",!1),renderFill:o(N,"renderFill",!1),renderLine:o(N,"renderLine",!0),fillColor:o(N,"fillColor",1075465),fillOpacity:o(N,"fillOpacity",1),lineColor:o(N,"lineColor",2678297),lineOpacity:o(N,"lineOpacity",1),lineThickness:o(N,"lineThickness",1),staticFillColor:o(N,"staticFillColor",857979),staticLineColor:o(N,"staticLineColor",1255396),showSleeping:o(N,"showSleeping",!1),staticBodySleepOpacity:o(N,"staticBodySleepOpacity",.7),sleepFillColor:o(N,"sleepFillColor",4605510),sleepLineColor:o(N,"sleepLineColor",10066585),showSensors:o(N,"showSensors",!0),sensorFillColor:o(N,"sensorFillColor",857979),sensorLineColor:o(N,"sensorLineColor",1255396),showPositions:o(N,"showPositions",!0),positionSize:o(N,"positionSize",4),positionColor:o(N,"positionColor",14697178),showJoint:o(N,"showJoint",!0),jointColor:o(N,"jointColor",14737474),jointLineOpacity:o(N,"jointLineOpacity",1),jointLineThickness:o(N,"jointLineThickness",2),pinSize:o(N,"pinSize",4),pinColor:o(N,"pinColor",4382944),springColor:o(N,"springColor",14697184),anchorColor:o(N,"anchorColor",15724527),anchorSize:o(N,"anchorSize",4),showConvexHulls:o(N,"showConvexHulls",!1),hullColor:o(N,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),o(E,"setBounds",!1)){var G=E.setBounds;if(typeof G=="boolean")this.setBounds();else{var Y=o(G,"x",0),z=o(G,"y",0),W=o(G,"width",S.sys.scale.width),D=o(G,"height",S.sys.scale.height),L=o(G,"thickness",64),B=o(G,"left",!0),w=o(G,"right",!0),V=o(G,"top",!0),U=o(G,"bottom",!0);this.setBounds(Y,z,W,D,L,B,w,V,U)}}},setCompositeRenderStyle:function(T){var S=T.bodies,E=T.constraints,C=T.composites,A,P,M;for(A=0;A<S.length;A++)P=S[A],M=P.render,this.setBodyRenderStyle(P,M.lineColor,M.lineOpacity,M.lineThickness,M.fillColor,M.fillOpacity);for(A=0;A<E.length;A++)P=E[A],M=P.render,this.setConstraintRenderStyle(P,M.lineColor,M.lineOpacity,M.lineThickness,M.pinSize,M.anchorColor,M.anchorSize);for(A=0;A<C.length;A++)P=C[A],this.setCompositeRenderStyle(P);return this},setBodyRenderStyle:function(T,S,E,C,A,P){var M=T.render,O=this.debugConfig;return M?(S==null&&(S=T.isStatic?O.staticLineColor:O.lineColor),E==null&&(E=O.lineOpacity),C==null&&(C=O.lineThickness),A==null&&(A=T.isStatic?O.staticFillColor:O.fillColor),P==null&&(P=O.fillOpacity),S!==!1&&(M.lineColor=S),E!==!1&&(M.lineOpacity=E),C!==!1&&(M.lineThickness=C),A!==!1&&(M.fillColor=A),P!==!1&&(M.fillOpacity=P),this):this},setConstraintRenderStyle:function(T,S,E,C,A,P,M){var O=T.render,F=this.debugConfig;if(!O)return this;if(S==null){var I=O.type;I==="line"?S=F.jointColor:I==="pin"?S=F.pinColor:I==="spring"&&(S=F.springColor)}return E==null&&(E=F.jointLineOpacity),C==null&&(C=F.jointLineThickness),A==null&&(A=F.pinSize),P==null&&(P=F.anchorColor),M==null&&(M=F.anchorSize),S!==!1&&(O.lineColor=S),E!==!1&&(O.lineOpacity=E),C!==!1&&(O.lineThickness=C),A!==!1&&(O.pinSize=A),P!==!1&&(O.anchorColor=P),M!==!1&&(O.anchorSize=M),this},setEventsProxy:function(){var T=this,S=this.engine,E=this.localWorld;this.drawDebug&&(d.on(E,"compositeModified",function(C){T.setCompositeRenderStyle(C)}),d.on(E,"beforeAdd",function(C){for(var A=[].concat(C.object),P=0;P<A.length;P++){var M=A[P],O=M.render;M.type==="body"?T.setBodyRenderStyle(M,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity):M.type==="composite"?T.setCompositeRenderStyle(M):M.type==="constraint"&&T.setConstraintRenderStyle(M,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize)}})),d.on(E,"beforeAdd",function(C){T.emit(u.BEFORE_ADD,C)}),d.on(E,"afterAdd",function(C){T.emit(u.AFTER_ADD,C)}),d.on(E,"beforeRemove",function(C){T.emit(u.BEFORE_REMOVE,C)}),d.on(E,"afterRemove",function(C){T.emit(u.AFTER_REMOVE,C)}),d.on(S,"beforeUpdate",function(C){T.emit(u.BEFORE_UPDATE,C)}),d.on(S,"afterUpdate",function(C){T.emit(u.AFTER_UPDATE,C)}),d.on(S,"collisionStart",function(C){var A=C.pairs,P,M;A.length>0&&(P=A[0].bodyA,M=A[0].bodyB),T.emit(u.COLLISION_START,C,P,M)}),d.on(S,"collisionActive",function(C){var A=C.pairs,P,M;A.length>0&&(P=A[0].bodyA,M=A[0].bodyB),T.emit(u.COLLISION_ACTIVE,C,P,M)}),d.on(S,"collisionEnd",function(C){var A=C.pairs,P,M;A.length>0&&(P=A[0].bodyA,M=A[0].bodyB),T.emit(u.COLLISION_END,C,P,M)})},setBounds:function(T,S,E,C,A,P,M,O,F){return T===void 0&&(T=0),S===void 0&&(S=0),E===void 0&&(E=this.scene.sys.scale.width),C===void 0&&(C=this.scene.sys.scale.height),A===void 0&&(A=64),P===void 0&&(P=!0),M===void 0&&(M=!0),O===void 0&&(O=!0),F===void 0&&(F=!0),this.updateWall(P,"left",T-A,S-A,A,C+A*2),this.updateWall(M,"right",T+E,S-A,A,C+A*2),this.updateWall(O,"top",T,S-A,E,A),this.updateWall(F,"bottom",T,S+C,E,A),this},updateWall:function(T,S,E,C,A,P){var M=this.walls[S];T?(M&&p.remove(this.localWorld,M),E+=A/2,C+=P/2,this.walls[S]=this.create(E,C,A,P,{isStatic:!0,friction:0,frictionStatic:0})):(M&&p.remove(this.localWorld,M),this.walls[S]=null)},createDebugGraphic:function(){var T=this.scene.sys.add.graphics({x:0,y:0});return T.setDepth(Number.MAX_VALUE),this.debugGraphic=T,this.drawDebug=!0,T},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(T,S,E){return T===void 0&&(T=0),S===void 0&&(S=1),this.localWorld.gravity.x=T,this.localWorld.gravity.y=S,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(T,S,E,C,A){var P=e.rectangle(T,S,E,C,A);return p.add(this.localWorld,P),P},add:function(T){return p.add(this.localWorld,T),this},remove:function(T,S){Array.isArray(T)||(T=[T]);for(var E=0;E<T.length;E++){var C=T[E],A=C.body?C.body:C;n.remove(this.localWorld,A,S)}return this},removeConstraint:function(T,S){return n.remove(this.localWorld,T,S),this},convertTilemapLayer:function(T,S){var E=T.layer,C=T.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(C,S),this},convertTiles:function(T,S){if(T.length===0)return this;for(var E=0;E<T.length;E++)new v(this,T[E],S);return this},nextGroup:function(T){return f.nextGroup(T)},nextCategory:function(){return f.nextCategory()},pause:function(){return this.enabled=!1,this.emit(u.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(u.RESUME),this},update:function(T,S){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,C=this.runner,A=E.timing,P=this.correction;C.isFixed?S=this.getDelta(T,S):(S=T-C.timePrev||C.delta,C.timePrev=T,C.deltaHistory.push(S),C.deltaHistory=C.deltaHistory.slice(-C.deltaSampleSize),S=Math.min.apply(null,C.deltaHistory),S=S<C.deltaMin?C.deltaMin:S,S=S>C.deltaMax?C.deltaMax:S,P=S/C.delta,C.delta=S),C.timeScalePrev!==0&&(P*=A.timeScale/C.timeScalePrev),A.timeScale===0&&(P=0),C.timeScalePrev=A.timeScale,C.correction=P,C.frameCounter+=1,T-C.counterTimestamp>=1e3&&(C.fps=C.frameCounter*((T-C.counterTimestamp)/1e3),C.counterTimestamp=T,C.frameCounter=0),i.update(E,S,P)}},step:function(T,S){i.update(this.engine,T,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(T){var S=T.hasOwnProperty("body")?T.body:T;return n.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return n.allBodies(this.localWorld)},getAllConstraints:function(){return n.allConstraints(this.localWorld)},getAllComposites:function(){return n.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var T=this.debugConfig,S=this.engine,E=this.debugGraphic,C=n.allBodies(this.localWorld);this.debugGraphic.clear(),T.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,E,T.broadphaseColor,.5),T.showBounds&&this.renderBodyBounds(C,E,T.boundsColor,.5),(T.showBody||T.showStaticBody)&&this.renderBodies(C),T.showJoint&&this.renderJoints(),(T.showAxes||T.showAngleIndicator)&&this.renderBodyAxes(C,E,T.showAxes,T.angleColor,.5),T.showVelocity&&this.renderBodyVelocity(C,E,T.velocityColor,1,2),T.showSeparations&&this.renderSeparations(S.pairs.list,E,T.separationColor),T.showCollisions&&this.renderCollisions(S.pairs.list,E,T.collisionColor)}},renderGrid:function(T,S,E,C){S.lineStyle(1,E,C);for(var A=a.keys(T.buckets),P=0;P<A.length;P++){var M=A[P];if(!(T.buckets[M].length<2)){var O=M.split(/C|R/);S.strokeRect(parseInt(O[1],10)*T.bucketWidth,parseInt(O[2],10)*T.bucketHeight,T.bucketWidth,T.bucketHeight)}}return this},renderSeparations:function(T,S,E){S.lineStyle(1,E,1);for(var C=0;C<T.length;C++){var A=T[C];if(A.isActive){var P=A.collision,M=P.bodyA,O=P.bodyB,F=M.position,I=O.position,N=P.penetration,G=!M.isStatic&&!O.isStatic?4:1;O.isStatic&&(G=0),S.lineBetween(I.x,I.y,I.x-N.x*G,I.y-N.y*G),G=!M.isStatic&&!O.isStatic?4:1,M.isStatic&&(G=0),S.lineBetween(F.x,F.y,F.x-N.x*G,F.y-N.y*G)}}return this},renderCollisions:function(T,S,E){S.lineStyle(1,E,.5),S.fillStyle(E,1);var C,A;for(C=0;C<T.length;C++)if(A=T[C],!!A.isActive)for(var P=0;P<A.activeContacts.length;P++){var M=A.activeContacts[P],O=M.vertex;S.fillRect(O.x-2,O.y-2,5,5)}for(C=0;C<T.length;C++)if(A=T[C],!!A.isActive){var F=A.collision,I=A.activeContacts;if(I.length>0){var N=I[0].vertex.x,G=I[0].vertex.y;I.length===2&&(N=(I[0].vertex.x+I[1].vertex.x)/2,G=(I[0].vertex.y+I[1].vertex.y)/2),F.bodyB===F.supports[0].body||F.bodyA.isStatic?S.lineBetween(N-F.normal.x*8,G-F.normal.y*8,N,G):S.lineBetween(N+F.normal.x*8,G+F.normal.y*8,N,G)}}return this},renderBodyBounds:function(T,S,E,C){S.lineStyle(1,E,C);for(var A=0;A<T.length;A++){var P=T[A];if(P.render.visible){var M=P.bounds;if(M)S.strokeRect(M.min.x,M.min.y,M.max.x-M.min.x,M.max.y-M.min.y);else for(var O=P.parts,F=O.length>1?1:0;F<O.length;F++){var I=O[F];S.strokeRect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}}return this},renderBodyAxes:function(T,S,E,C,A){S.lineStyle(1,C,A);for(var P=0;P<T.length;P++){var M=T[P],O=M.parts;if(M.render.visible){var F,I,N;if(E)for(I=O.length>1?1:0;I<O.length;I++)for(F=O[I],N=0;N<F.axes.length;N++){var G=F.axes[N];S.lineBetween(F.position.x,F.position.y,F.position.x+G.x*20,F.position.y+G.y*20)}else for(I=O.length>1?1:0;I<O.length;I++)for(F=O[I],N=0;N<F.axes.length;N++)S.lineBetween(F.position.x,F.position.y,(F.vertices[0].x+F.vertices[F.vertices.length-1].x)/2,(F.vertices[0].y+F.vertices[F.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(T,S,E,C,A){S.lineStyle(A,E,C);for(var P=0;P<T.length;P++){var M=T[P];M.render.visible&&S.lineBetween(M.position.x,M.position.y,M.position.x+(M.position.x-M.positionPrev.x)*2,M.position.y+(M.position.y-M.positionPrev.y)*2)}return this},renderBodies:function(T){for(var S=this.debugGraphic,E=this.debugConfig,C=E.showBody,A=E.showStaticBody,P=E.showSleeping,M=E.showInternalEdges,O=E.showConvexHulls,F=E.renderFill,I=E.renderLine,N=E.staticBodySleepOpacity,G=E.sleepFillColor,Y=E.sleepLineColor,z=E.hullColor,W=0;W<T.length;W++){var D=T[W];if(D.render.visible&&!(!A&&D.isStatic||!C&&!D.isStatic)){var L=D.render.lineColor,B=D.render.lineOpacity,w=D.render.lineThickness,V=D.render.fillColor,U=D.render.fillOpacity;P&&D.isSleeping&&(D.isStatic?(B*=N,U*=N):(L=Y,V=G)),F||(V=null),I||(L=null),this.renderBody(D,S,M,L,B,w,V,U);var X=D.parts.length;O&&X>1&&this.renderConvexHull(D,S,z,w)}}},renderBody:function(T,S,E,C,A,P,M,O){C===void 0&&(C=null),A===void 0&&(A=null),P===void 0&&(P=1),M===void 0&&(M=null),O===void 0&&(O=null);for(var F=this.debugConfig,I=F.sensorFillColor,N=F.sensorLineColor,G=T.parts,Y=G.length,z=Y>1?1:0;z<Y;z++){var W=G[z],D=W.render,L=D.opacity;if(!(!D.visible||L===0||W.isSensor&&!F.showSensors)){var B=W.circleRadius;if(S.beginPath(),W.isSensor?(M!==null&&S.fillStyle(I,O*L),C!==null&&S.lineStyle(P,N,A*L)):(M!==null&&S.fillStyle(M,O*L),C!==null&&S.lineStyle(P,C,A*L)),B)S.arc(W.position.x,W.position.y,B,0,2*Math.PI);else{var w=W.vertices,V=w.length;S.moveTo(w[0].x,w[0].y);for(var U=1;U<V;U++){var X=w[U];if(!w[U-1].isInternal||E?S.lineTo(X.x,X.y):S.moveTo(X.x,X.y),U<V&&X.isInternal&&!E){var H=(U+1)%V;S.moveTo(w[H].x,w[H].y)}}S.closePath()}M!==null&&S.fillPath(),C!==null&&S.strokePath()}}if(F.showPositions&&!T.isStatic){var b=T.position.x,Z=T.position.y,K=Math.ceil(F.positionSize/2);S.fillStyle(F.positionColor,1),S.fillRect(b-K,Z-K,F.positionSize,F.positionSize)}return this},renderConvexHull:function(T,S,E,C){C===void 0&&(C=1);var A=T.parts,P=A.length;if(P>1){var M=T.vertices;S.lineStyle(C,E),S.beginPath(),S.moveTo(M[0].x,M[0].y);for(var O=1;O<M.length;O++)S.lineTo(M[O].x,M[O].y);S.lineTo(M[0].x,M[0].y),S.strokePath()}return this},renderJoints:function(){for(var T=this.debugGraphic,S=n.allConstraints(this.localWorld),E=0;E<S.length;E++){var C=S[E].render,A=C.lineColor,P=C.lineOpacity,M=C.lineThickness,O=C.pinSize,F=C.anchorColor,I=C.anchorSize;this.renderConstraint(S[E],T,A,P,M,O,F,I)}},renderConstraint:function(T,S,E,C,A,P,M,O){var F=T.render;if(!F.visible||!T.pointA||!T.pointB)return this;S.lineStyle(A,E,C);var I=T.bodyA,N=T.bodyB,G,Y;if(I?G=m.add(I.position,T.pointA):G=T.pointA,F.type==="pin")S.strokeCircle(G.x,G.y,P);else{if(N?Y=m.add(N.position,T.pointB):Y=T.pointB,S.beginPath(),S.moveTo(G.x,G.y),F.type==="spring")for(var z=m.sub(Y,G),W=m.perp(m.normalise(z)),D=Math.ceil(a.clamp(T.length/5,12,20)),L,B=1;B<D;B+=1)L=B%2===0?1:-1,S.lineTo(G.x+z.x*(B/D)+W.x*L*4,G.y+z.y*(B/D)+W.y*L*4);S.lineTo(Y.x,Y.y)}return S.strokePath(),F.anchors&&O>0&&(S.fillStyle(M),S.fillCircle(G.x,G.y,O),S.fillCircle(Y.x,Y.y,O)),this},resetCollisionIDs:function(){return c._nextCollidingGroupId=1,c._nextNonCollidingGroupId=-1,c._nextCategory=1,this},shutdown:function(){d.off(this.engine),this.removeAllListeners(),p.clear(this.localWorld,!1),i.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});h.exports=x},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BasePlugin:t(540),DefaultPlugins:t(197),PluginCache:t(24),PluginManager:t(414),ScenePlugin:t(1404)}},function(h,g,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var e=t(540),c=t(0),s=t(20),a=new c({Extends:e,initialize:function(i,r,u){e.call(this,r),this.scene=i,this.systems=i.sys,this.pluginKey=u,i.sys.events.once(s.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Canvas:t(1406),Events:t(91),Snapshot:t(1407),WebGL:t(1408)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CanvasRenderer:t(368),GetBlendModes:t(370),SetTransform:t(30)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Canvas:t(369),WebGL:t(383)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(107),c=t(17),s={PipelineManager:t(372),Pipelines:t(1409),RenderTarget:t(141),Utils:t(12),WebGLPipeline:t(58),WebGLRenderer:t(371),WebGLShader:t(375)};s=c(!1,s,e),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(92),c=t(17),s={BitmapMaskPipeline:t(373),Events:t(374),GraphicsPipeline:t(376),LightPipeline:t(377),MultiPipeline:t(108),PointLightPipeline:t(378),PostFXPipeline:t(1410),RopePipeline:t(379),SinglePipeline:t(380),UtilityPipeline:t(381)};s=c(!1,s,e),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(198),s=t(2),a=t(1411),n=t(382),i=t(58),r=new e({Extends:i,initialize:function(o){o.renderTarget=s(o,"renderTarget",1),o.fragShader=s(o,"fragShader",a),o.vertShader=s(o,"vertShader",n),o.attributes=s(o,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),o.batchSize=1,o.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],i.call(this,o),this.isPostFX=!0,this.gameObject,this.colorMatrix=new c,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){i.prototype.boot.call(this);var u=this.manager.UTILITY_PIPELINE;this.fullFrame1=u.fullFrame1,this.fullFrame2=u.fullFrame2,this.halfFrame1=u.halfFrame1,this.halfFrame2=u.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(u){this.bindAndDraw(u)},copyFrame:function(u,o,l,f,d){this.manager.copyFrame(u,o,l,f,d)},copyToGame:function(u){this.manager.copyToGame(u)},drawFrame:function(u,o,l){this.manager.drawFrame(u,o,l,this.colorMatrix)},blendFrames:function(u,o,l,f,d){this.manager.blendFrames(u,o,l,f,d)},blendFramesAdditive:function(u,o,l,f,d){this.manager.blendFramesAdditive(u,o,l,f,d)},clearFrame:function(u,o){this.manager.clearFrame(u,o)},blitFrame:function(u,o,l,f,d,v){this.manager.blitFrame(u,o,l,f,d,v)},copyFrameRect:function(u,o,l,f,d,v,p,m){this.manager.copyFrameRect(u,o,l,f,d,v,p,m)},bindAndDraw:function(u,o,l,f,d){l===void 0&&(l=!0),f===void 0&&(f=!0);var v=this.gl,p=this.renderer;this.bind(d),this.set1i("uMainSampler",0),o?(v.viewport(0,0,o.width,o.height),v.bindFramebuffer(v.FRAMEBUFFER,o.framebuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,o.texture,0),l&&(f?v.clearColor(0,0,0,0):v.clearColor(0,0,0,1),v.clear(v.COLOR_BUFFER_BIT))):(p.popFramebuffer(!1,!1,!1),p.currentFramebuffer||v.viewport(0,0,p.width,p.height)),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,u.texture),v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW),v.drawArrays(v.TRIANGLES,0,6),o?(v.bindTexture(v.TEXTURE_2D,null),v.bindFramebuffer(v.FRAMEBUFFER,null)):p.resetTextures()}});h.exports=r},function(h,g){h.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),c=t(201),s={Center:t(403),Events:t(104),Orientation:t(404),ScaleManager:t(415),ScaleModes:t(405),Zoom:t(406)};s=e(!1,s,c.CENTER),s=e(!1,s,c.ORIENTATION),s=e(!1,s,c.SCALE_MODE),s=e(!1,s,c.ZOOM),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(144),c=t(17),s={Events:t(20),GetPhysicsPlugins:t(419),GetScenePlugins:t(420),SceneManager:t(417),ScenePlugin:t(1414),Settings:t(421),Systems:t(204)};s=c(!1,s,e),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),c=t(0),s=t(20),a=t(2),n=t(24),i=new c({initialize:function(u){this.scene=u,this.systems=u.sys,this.settings=u.sys.settings,this.key=u.sys.settings.key,this.manager=u.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,u.sys.events.once(s.BOOT,this.boot,this),u.sys.events.on(s.START,this.pluginStart,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},start:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",r,u),this},restart:function(r){var u=this.key;return this.manager.queueOp("stop",u),this.manager.queueOp("start",u,r),this},transition:function(r){r===void 0&&(r={});var u=a(r,"target",!1),o=this.manager.getScene(u);if(!u||!this.checkValidTransition(o))return!1;var l=a(r,"duration",1e3);this._elapsed=0,this._target=o,this._duration=l,this._willSleep=a(r,"sleep",!1),this._willRemove=a(r,"remove",!1);var f=a(r,"onUpdate",null);f&&(this._onUpdate=f,this._onUpdateScope=a(r,"onUpdateScope",this.scene));var d=a(r,"allowInput",!1);this.settings.transitionAllowInput=d;var v=o.sys.settings;return v.isTransition=!0,v.transitionFrom=this.scene,v.transitionDuration=l,v.transitionAllowInput=d,a(r,"moveAbove",!1)?this.manager.moveAbove(this.key,u):a(r,"moveBelow",!1)&&this.manager.moveBelow(this.key,u),o.sys.isSleeping()?o.sys.wake(a(r,"data")):this.manager.start(u,a(r,"data")),this.systems.events.emit(s.TRANSITION_OUT,o,l),this.systems.events.on(s.UPDATE,this.step,this),!0},checkValidTransition:function(r){return!(!r||r.sys.isActive()||r.sys.isTransitioning()||r===this.scene||this.systems.isTransitioning())},step:function(r,u){this._elapsed+=u,this.transitionProgress=e(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var r=this._target.sys,u=this._target.sys.settings;this.systems.events.off(s.UPDATE,this.step,this),r.events.emit(s.TRANSITION_COMPLETE,this.scene),u.isTransition=!1,u.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(r,u,o,l){return this.manager.add(r,u,o,l)},launch:function(r,u){return r&&r!==this.key&&this.manager.queueOp("start",r,u),this},run:function(r,u){return r&&r!==this.key&&this.manager.queueOp("run",r,u),this},pause:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("pause",r,u),this},resume:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("resume",r,u),this},sleep:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("sleep",r,u),this},wake:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("wake",r,u),this},switch:function(r){return r!==this.key&&this.manager.queueOp("switch",this.key,r),this},stop:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("stop",r,u),this},setActive:function(r,u,o){u===void 0&&(u=this.key);var l=this.manager.getScene(u);return l&&l.sys.setActive(r,o),this},setVisible:function(r,u){u===void 0&&(u=this.key);var o=this.manager.getScene(u);return o&&o.sys.setVisible(r),this},isSleeping:function(r){return r===void 0&&(r=this.key),this.manager.isSleeping(r)},isActive:function(r){return r===void 0&&(r=this.key),this.manager.isActive(r)},isPaused:function(r){return r===void 0&&(r=this.key),this.manager.isPaused(r)},isVisible:function(r){return r===void 0&&(r=this.key),this.manager.isVisible(r)},swapPosition:function(r,u){return u===void 0&&(u=this.key),r!==u&&this.manager.swapPosition(r,u),this},moveAbove:function(r,u){return u===void 0&&(u=this.key),r!==u&&this.manager.moveAbove(r,u),this},moveBelow:function(r,u){return u===void 0&&(u=this.key),r!==u&&this.manager.moveBelow(r,u),this},remove:function(r){return r===void 0&&(r=this.key),this.manager.remove(r),this},moveUp:function(r){return r===void 0&&(r=this.key),this.manager.moveUp(r),this},moveDown:function(r){return r===void 0&&(r=this.key),this.manager.moveDown(r),this},bringToTop:function(r){return r===void 0&&(r=this.key),this.manager.bringToTop(r),this},sendToBack:function(r){return r===void 0&&(r=this.key),this.manager.sendToBack(r),this},get:function(r){return this.manager.getScene(r)},getIndex:function(r){return r===void 0&&(r=this.key),this.manager.getIndex(r)},shutdown:function(){var r=this.systems.events;r.off(s.SHUTDOWN,this.shutdown,this),r.off(s.POST_UPDATE,this.step,this),r.off(s.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});n.register("ScenePlugin",i,"scenePlugin"),h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Events:t(438),List:t(110),Map:t(102),ProcessQueue:t(211),RTree:t(531),Set:t(149),Size:t(416)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),c=t(1417),s={CanvasTexture:t(423),Events:t(106),FilterMode:c,Frame:t(109),Parsers:t(425),Texture:t(206),TextureManager:t(422),TextureSource:t(424)};s=e(!1,s,c),h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LINEAR:0,NEAREST:1};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),c=t(1419),s={Components:t(251),Parsers:t(1452),Formats:t(40),ImageCollection:t(576),ParseToTilemap:t(262),Tile:t(85),Tilemap:t(580),TilemapCreator:t(1459),TilemapFactory:t(1460),Tileset:t(122),TilemapLayer:t(581),Orientation:t(29),LayerData:t(120),MapData:t(121),ObjectLayer:t(572)};s=e(!1,s,c.ORIENTATION),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={ORIENTATION:t(29)};h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=t(63),s=function(a,n,i,r,u,o,l,f){l===void 0&&(l=!0),a<0&&(a=0),n<0&&(n=0);for(var d=e(a,n,i,r,null,f),v=u-a,p=o-n,m=0;m<d.length;m++){var x=d[m].x+v,T=d[m].y+p;x>=0&&x<f.width&&T>=0&&T<f.height&&f.data[T][x]&&f.data[T][x].copy(d[m])}l&&c(u-1,o-1,i+2,r+2,f)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=t(542),s=function(a,n,i,r,u,o){i||(i={}),Array.isArray(a)||(a=[a]);var l=o.tilemapLayer;r||(r=l.scene),u||(u=r.cameras.main);var f=e(0,0,o.width,o.height,null,o),d=[],v;for(v=0;v<f.length;v++){var p=f[v];if(a.indexOf(p.index)!==-1){var m=l.tileToWorldXY(p.x,p.y,void 0,u,o);i.x=m.x,i.y=m.y,d.push(r.make.sprite(i))}}if(typeof n=="number")for(v=0;v<a.length;v++)c(a[v],n,0,0,o.width,o.height,o);else if(Array.isArray(n))for(v=0;v<a.length;v++)c(a[v],n[v],0,0,o.width,o.height,o);return d};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=t(63),s=t(72),a=function(n,i,r,u,o,l,f){for(var d=f.collideIndexes.indexOf(n)!==-1,v=e(i,r,u,o,null,f),p=0;p<v.length;p++)v[p].index=n,s(v[p],d);l&&c(i-1,r-1,u+2,o+2,f)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=function(s,a,n,i,r,u,o,l){var f=e(n,i,r,u,o,l);return f.filter(s,a)};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){c===void 0&&(c=0),s===void 0&&(s=!1);var n=0,i,r,u;if(s){for(r=a.height-1;r>=0;r--)for(i=a.width-1;i>=0;i--)if(u=a.data[r][i],u&&u.index===e){if(n===c)return u;n+=1}}else for(r=0;r<a.height;r++)for(i=0;i<a.width;i++)if(u=a.data[r][i],u&&u.index===e){if(n===c)return u;n+=1}return null};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=function(s,a,n,i,r,u,o,l){var f=e(n,i,r,u,o,l);return f.find(s,a)||null};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=function(s,a,n,i,r,u,o,l){var f=e(n,i,r,u,o,l);f.forEach(s,a)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),c=t(544),s=t(545),a=t(547),n=t(1),i=t(548),r=function(u){return u===e.ORTHOGONAL?c:u===e.HEXAGONAL?s:u===e.STAGGERED?i:u===e.ISOMETRIC?a:n};h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),c=t(3),s=new c,a=function(n,i,r,u,o){return o.tilemapLayer.worldToTileXY(n,i,!0,s,u),e(s.x,s.y,r,o)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(483),c=t(26),s=t(484),a=t(1),n=t(3),i=function(f,d){return s.RectangleToTriangle(d,f)},r=new n,u=new n,o=new n,l=function(f,d,v,p){if(f===void 0)return[];var m=a;f instanceof e.Circle?m=s.CircleToRectangle:f instanceof e.Rectangle?m=s.RectangleToRectangle:f instanceof e.Triangle?m=i:f instanceof e.Line&&(m=s.LineToRectangle),p.tilemapLayer.worldToTileXY(f.left,f.top,!0,u,v);var x=u.x,T=u.y;p.tilemapLayer.worldToTileXY(f.right,f.bottom,!0,o,v);var S=Math.ceil(o.x),E=Math.ceil(o.y),C=Math.max(S-x,1),A=Math.max(E-T,1),P=c(x,T,C,A,d,p),M=p.tileWidth,O=p.tileHeight;p.tilemapLayer&&(M*=p.tilemapLayer.scaleX,O*=p.tilemapLayer.scaleY);for(var F=[],I=new e.Rectangle(0,0,M,O),N=0;N<P.length;N++){var G=P[N];p.tilemapLayer.tileToWorldXY(G.x,G.y,r,v),I.x=r.x,I.y=r.y,m(f,I)&&F.push(G)}return F};h.exports=l},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),c=t(1),s=t(253),a=function(n){return n===e.ORTHOGONAL?s:c};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),c=t(550),s=t(551),a=t(1),n=t(552),i=t(553),r=function(u){return u===e.ORTHOGONAL?i:u===e.ISOMETRIC?s:u===e.HEXAGONAL?c:u===e.STAGGERED?n:a};h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),c=t(554),s=t(1),a=t(555),n=t(254),i=function(r){return r===e.ORTHOGONAL?n:r===e.HEXAGONAL?c:r===e.STAGGERED?a:s};h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),c=t(1),s=t(255),a=function(n){return n===e.ORTHOGONAL?s:c};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),c=t(556),s=t(557),a=t(1),n=t(558),i=t(559),r=function(u){return u===e.ORTHOGONAL?i:u===e.ISOMETRIC?s:u===e.HEXAGONAL?c:u===e.STAGGERED?n:a};h.exports=r},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),c=t(560),s=t(1),a=t(561),n=t(256),i=function(r){return r===e.ORTHOGONAL?n:r===e.HEXAGONAL?c:r===e.STAGGERED?a:s};h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(562),c=t(3),s=new c,a=function(n,i,r,u){u.tilemapLayer.worldToTileXY(n,i,!0,s,r);var o=s.x,l=s.y;return e(o,l,u)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(257),c=t(3),s=new c,a=function(n,i,r,u,o,l){return l.tilemapLayer.worldToTileXY(i,r,!0,s,o,l),e(n,s.x,s.y,u,l)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(63),c=t(257),s=function(a,n,i,r,u){if(r===void 0&&(r=!0),!Array.isArray(a))return null;Array.isArray(a[0])||(a=[a]);for(var o=a.length,l=a[0].length,f=0;f<o;f++)for(var d=0;d<l;d++){var v=a[f][d];c(v,n+d,i+f,!1,u)}r&&e(n-1,i-1,l+2,o+2,u)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=t(210),s=function(a,n,i,r,u,o){var l,f=e(a,n,i,r,{},o);if(!u)for(u=[],l=0;l<f.length;l++)u.indexOf(f[l].index)===-1&&u.push(f[l].index);for(l=0;l<f.length;l++)f[l].index=c(u)};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(563),c=t(3),s=new c,a=function(n,i,r,u,o,l){return l.tilemapLayer.worldToTileXY(n,i,!0,s,o,l),e(s.x,s.y,r,u,l)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=t(397),s=new c(105,210,231,150),a=new c(243,134,48,200),n=new c(40,39,37,150),i=function(r,u,o){u===void 0&&(u={});var l=u.tileColor!==void 0?u.tileColor:s,f=u.collidingTileColor!==void 0?u.collidingTileColor:a,d=u.faceColor!==void 0?u.faceColor:n,v=e(0,0,o.width,o.height,null,o);r.translateCanvas(o.tilemapLayer.x,o.tilemapLayer.y),r.scaleCanvas(o.tilemapLayer.scaleX,o.tilemapLayer.scaleY);for(var p=0;p<v.length;p++){var m=v[p],x=m.width,T=m.height,S=m.pixelX,E=m.pixelY,C=m.collides?f:l;C!==null&&(r.fillStyle(C.color,C.alpha/255),r.fillRect(S,E,x,T)),S+=1,E+=1,x-=2,T-=2,d!==null&&(r.lineStyle(1,d.color,d.alpha/255),m.faceTop&&r.lineBetween(S,E,S+x,E),m.faceRight&&r.lineBetween(S+x,E,S+x,E+T),m.faceBottom&&r.lineBetween(S,E+T,S+x,E+T),m.faceLeft&&r.lineBetween(S,E,S,E+T))}};h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),c=t(63),s=t(160),a=function(n,i,r,u,o){i===void 0&&(i=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++)s(n[l],i,u);if(o)for(var f=0;f<u.height;f++)for(var d=0;d<u.width;d++){var v=u.data[f][d];v&&n.indexOf(v.index)!==-1&&e(v,i)}r&&c(0,0,u.width,u.height,u)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),c=t(63),s=t(160),a=function(n,i,r,u,o,l){if(r===void 0&&(r=!0),u===void 0&&(u=!0),l===void 0&&(l=!0),!(n>i)){for(var f=n;f<=i;f++)s(f,r,o);if(l)for(var d=0;d<o.height;d++)for(var v=0;v<o.width;v++){var p=o.data[d][v];p&&p.index>=n&&p.index<=i&&e(p,r)}u&&c(0,0,o.width,o.height,o)}};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),c=t(63),s=t(160),a=function(n,i,r,u){i===void 0&&(i=!0),r===void 0&&(r=!0),Array.isArray(n)||(n=[n]);for(var o=0;o<u.height;o++)for(var l=0;l<u.width;l++){var f=u.data[o][l];f&&n.indexOf(f.index)===-1&&(e(f,i),s(f.index,i,u))}r&&c(0,0,u.width,u.height,u)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),c=t(63),s=t(126),a=function(n,i,r,u){i===void 0&&(i=!0),r===void 0&&(r=!0);for(var o=0;o<u.height;o++)for(var l=0;l<u.width;l++){var f=u.data[o][l];if(f){for(var d in n)if(s(f.properties,d)){var v=n[d];Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++)f.properties[d]===v[p]&&e(f,i)}}}r&&c(0,0,u.width,u.height,u)};h.exports=a},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),c=t(63),s=function(a,n,i){a===void 0&&(a=!0),n===void 0&&(n=!0);for(var r=0;r<i.height;r++)for(var u=0;u<i.width;u++){var o=i.data[r][u];if(o){var l=o.getCollisionGroup();l&&l.objects&&l.objects.length>0&&e(o,a)}}n&&c(0,0,i.width,i.height,i)};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c,s,a){if(typeof e=="number")a.callbacks[e]=c!==null?{callback:c,callbackContext:s}:void 0;else for(var n=0,i=e.length;n<i;n++)a.callbacks[e[n]]=c!==null?{callback:c,callbackContext:s}:void 0};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=function(s,a,n,i,r,u,o){for(var l=e(s,a,n,i,null,o),f=0;f<l.length;f++)l[f].setCollisionCallback(r,u)};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=t(131),s=function(a,n,i,r,u){var o=e(a,n,i,r,null,u),l=o.map(function(d){return d.index});c(l);for(var f=0;f<o.length;f++)o[f].index=l[f]};h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=function(s,a,n,i,r,u,o){for(var l=e(n,i,r,u,null,o),f=0;f<l.length;f++)l[f]&&(l[f].index===s?l[f].index=a:l[f].index===a&&(l[f].index=s))};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),c=function(s,a,n,i,r,u){if(r){var o,l=e(s,a,n,i,null,u),f=0;for(o=0;o<r.length;o++)f+=r[o].weight;if(!(f<=0))for(o=0;o<l.length;o++){for(var d=Math.random()*f,v=0,p=-1,m=0;m<r.length;m++)if(v+=r[m].weight,d<=v){var x=r[m].index;p=Array.isArray(x)?x[Math.floor(Math.random()*x.length)]:x;break}l[o].index=p}}};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={FromOrientationString:t(258),Parse:t(564),Parse2DArray:t(259),ParseCSV:t(565),Impact:t(1454),Tiled:t(1455)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){for(var s=0;s<e.length;s++){var a=e[s],n=s;if(a.name&&a.name!==""&&(n=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var i={},r={},u,o,l;if(Array.isArray(a.edgecolors))for(u=0;u<a.edgecolors.length;u++)l=1+u,o=a.edgecolors[u],o.name!==""&&(i[l]=o.name);if(Array.isArray(a.cornercolors))for(u=0;u<a.cornercolors.length;u++)l=1+u,o=a.cornercolors[u],o.name!==""&&(r[l]=o.name);if(Array.isArray(a.colors))for(u=0;u<a.colors.length;u++)o=a.colors[u],l=1+u,o.name!==""&&(i[l]=r[l]=o.name);for(var f=[i,r,i,r,i,r,i,r],d=0;d<a.wangtiles.length;d++){var v=a.wangtiles[d],p=c[v.tileid]||(c[v.tileid]={});p=p.wangid||(p.wangid={});for(var m=[],x=0;x<Math.min(f.length,v.wangid.length);x++){if(o=v.wangid[x],o===0){m.push(void 0);continue}var T=f[x][o];if(T!==void 0){m.push(T);continue}m.push(o)}p[n]=m}}}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ParseTileLayers:t(578),ParseTilesets:t(579),ParseWeltmeister:t(577)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AssignTileProperties:t(567),Base64Decode:t(574),BuildTilesetIndex:t(568),CreateGroupLayer:t(161),ParseGID:t(261),ParseImageLayers:t(569),ParseJSONTiled:t(566),ParseObject:t(260),ParseObjectLayers:t(570),ParseTileLayers:t(573),ParseTilesets:t(575)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),c=t(1);e=t(1457),c=t(1458),h.exports={renderWebGL:e,renderCanvas:c}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),c=function(s,a,n){var i=a.cull(n),r=i.length,u=n.alpha*a.alpha;if(!(r===0||u<=0)){var o=a.gidMap,l=s.pipelines.set(a.pipeline,a),f=e.getTintAppendFloatAlpha,d=a.scrollFactorX,v=a.scrollFactorY,p=a.x,m=a.y,x=a.scaleX,T=a.scaleY;s.pipelines.preBatch(a);for(var S=0;S<r;S++){var E=i[S],C=o[E.index];if(C){var A=C.getTileTextureCoordinates(E.index);if(A!==null){var P=C.glTexture,M=l.setTexture2D(P,a),O=C.tileWidth,F=C.tileHeight,I=A.x,N=A.y,G=C.tileWidth*.5,Y=C.tileHeight*.5,z=f(E.tint,u*E.alpha);l.batchTexture(a,P,P.width,P.height,p+(G+E.pixelX)*x,m+(Y+E.pixelY)*T,E.width,E.height,x,T,E.rotation,E.flipX,E.flipY,d,v,G,Y,I,N,O,F,z,z,z,z,!1,0,0,n,null,!0,M)}}}s.pipelines.postBatch(a)}};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),c=new e,s=new e,a=new e,n=function(i,r,u,o){var l=r.cull(u),f=l.length,d=u.alpha*r.alpha;if(!(f===0||d<=0)){var v=c,p=s,m=a;p.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),v.copyFrom(u.matrix);var x=i.currentContext,T=r.gidMap;x.save(),o?(v.multiplyWithOffset(o,-u.scrollX*r.scrollFactorX,-u.scrollY*r.scrollFactorY),p.e=r.x,p.f=r.y,v.multiply(p,m),m.copyToContext(x)):(p.e-=u.scrollX*r.scrollFactorX,p.f-=u.scrollY*r.scrollFactorY,p.copyToContext(x)),(!i.antialias||r.scaleX>1||r.scaleY>1)&&(x.imageSmoothingEnabled=!1);for(var S=0;S<f;S++){var E=l[S],C=T[E.index];if(C){var A=C.image.getSourceImage(),P=C.getTileTextureCoordinates(E.index);if(P!==null){var M=C.tileWidth,O=C.tileHeight,F=M*.5,I=O*.5;x.save(),x.translate(E.pixelX+F,E.pixelY+I),E.rotation!==0&&x.rotate(E.rotation),(E.flipX||E.flipY)&&x.scale(E.flipX?-1:1,E.flipY?-1:1),x.globalAlpha=d*E.alpha,x.drawImage(A,P.x,P.y,M,O,-F,-I,M,O),x.restore()}}}x.restore()}};h.exports=n},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),c=t(262);e.register("tilemap",function(s){var a=s!==void 0?s:{};return c(this.scene,a.key,a.tileWidth,a.tileHeight,a.width,a.height,a.data,a.insertNull)})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),c=t(262);e.register("tilemap",function(s,a,n,i,r,u,o){return s===null&&(s=void 0),a===null&&(a=void 0),n===null&&(n=void 0),i===null&&(i=void 0),r===null&&(r=void 0),c(this.scene,s,a,n,i,r,u,o)})},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Clock:t(1462),TimerEvent:t(582)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),c=t(24),s=t(20),a=t(582),n=t(93),i=new e({initialize:function(u){this.scene=u,this.systems=u.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],u.sys.events.once(s.BOOT,this.boot,this),u.sys.events.on(s.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(s.PRE_UPDATE,this.preUpdate,this),r.on(s.UPDATE,this.update,this),r.once(s.SHUTDOWN,this.shutdown,this)},addEvent:function(r){var u;return r instanceof a?(u=r,this.removeEvent(u),u.elapsed=u.startAt,u.hasDispatched=!1,u.repeatCount=u.repeat===-1||u.loop?999999999999:u.repeat):u=new a(r),this._pendingInsertion.push(u),u},delayedCall:function(r,u,o,l){return this.addEvent({delay:r,callback:u,args:o,callbackScope:l})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(r){Array.isArray(r)||(r=[r]);for(var u=0;u<r.length;u++){var o=r[u];n(this._pendingRemoval,o),n(this._pendingInsertion,o),n(this._active,o)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var r=this._pendingRemoval.length,u=this._pendingInsertion.length;if(!(r===0&&u===0)){var o,l;for(o=0;o<r;o++){l=this._pendingRemoval[o];var f=this._active.indexOf(l);f>-1&&this._active.splice(f,1),l.destroy()}for(o=0;o<u;o++)l=this._pendingInsertion[o],this._active.push(l);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(r,u){if(this.now=r,!this.paused){u*=this.timeScale;for(var o=0;o<this._active.length;o++){var l=this._active[o];if(!l.paused&&(l.elapsed+=u*l.timeScale,l.elapsed>=l.delay)){var f=l.elapsed-l.delay;l.elapsed=l.delay,!l.hasDispatched&&l.callback&&(l.hasDispatched=!0,l.callback.apply(l.callbackScope,l.args)),l.repeatCount>0?(l.repeatCount--,l.elapsed=f,l.hasDispatched=!1):this._pendingRemoval.push(l)}}}},shutdown:function(){var r;for(r=0;r<this._pendingInsertion.length;r++)this._pendingInsertion[r].destroy();for(r=0;r<this._active.length;r++)this._active[r].destroy();for(r=0;r<this._pendingRemoval.length;r++)this._pendingRemoval[r].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var u=this.systems.events;u.off(s.PRE_UPDATE,this.preUpdate,this),u.off(s.UPDATE,this.update,this),u.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});c.register("Clock",i,"time"),h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(100),c=t(17),s={Builders:t(1464),Events:t(267),TweenManager:t(1480),Tween:t(266),TweenData:t(268),Timeline:t(588)};s=c(!1,s,e),h.exports=s},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={GetBoolean:t(99),GetEaseFunction:t(80),GetNewValue:t(162),GetProps:t(583),GetTargets:t(263),GetTweens:t(584),GetValueOp:t(264),NumberTweenBuilder:t(585),StaggerBuilder:t(586),TimelineBuilder:t(587),TweenBuilder:t(163)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loop"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="active"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loop"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="repeat"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},function(h,g){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="yoyo"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),c=t(0),s=t(585),a=t(24),n=t(20),i=t(586),r=t(587),u=t(100),o=t(163),l=new c({initialize:function(d){this.scene=d,this.systems=d.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,d.sys.events.once(n.BOOT,this.boot,this),d.sys.events.on(n.START,this.start,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){var f=this.systems.events;f.on(n.PRE_UPDATE,this.preUpdate,this),f.on(n.UPDATE,this.update,this),f.once(n.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(f){return r(this,f)},timeline:function(f){var d=r(this,f);return d.paused||(this._add.push(d),this._toProcess++),d},create:function(f){return o(this,f)},add:function(f){var d=o(this,f);return this._add.push(d),this._toProcess++,d},existing:function(f){return this._add.push(f),this._toProcess++,this},addCounter:function(f){var d=s(this,f);return this._add.push(d),this._toProcess++,d},stagger:function(f,d){return i(f,d)},preUpdate:function(){if(this._toProcess!==0){var f=this._destroy,d=this._active,v=this._pending,p,m;for(p=0;p<f.length;p++){m=f[p];var x=d.indexOf(m);x===-1?(x=v.indexOf(m),x>-1&&(m.state=u.REMOVED,v.splice(x,1))):(m.state=u.REMOVED,d.splice(x,1))}for(f.length=0,f=this._add,p=0;p<f.length;p++)m=f[p],m.state===u.PENDING_ADD&&(m.init()?(m.play(),this._active.push(m)):this._pending.push(m));f.length=0,this._toProcess=0}},update:function(f,d){var v=this._active,p;d*=this.timeScale;for(var m=0;m<v.length;m++)p=v[m],p.update(f,d)&&(this._destroy.push(p),this._toProcess++)},remove:function(f){return e(this._add,f),e(this._pending,f),e(this._active,f),e(this._destroy,f),f.state=u.REMOVED,this},makeActive:function(f){if(this._add.indexOf(f)!==-1||this._active.indexOf(f)!==-1)return this;var d=this._pending.indexOf(f);return d!==-1&&this._pending.splice(d,1),this._add.push(f),f.state=u.PENDING_ADD,this._toProcess++,this},each:function(f,d){for(var v=[null],p=1;p<arguments.length;p++)v.push(arguments[p]);for(var m in this.list)v[0]=this.list[m],f.apply(d,v)},getAllTweens:function(){for(var f=this._active,d=[],v=0;v<f.length;v++)d.push(f[v]);return d},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(f,d){d===void 0&&(d=!1);var v=this._active,p,m=[],x,T;for(Array.isArray(f)||(f=[f]),x=0;x<v.length;x++)for(p=v[x],T=0;T<f.length;T++)p.hasTarget(f[T])&&m.push(p);if(d)for(v=this._pending,x=0;x<v.length;x++)for(p=v[x],T=0;T<f.length;T++)p.hasTarget(f[T])&&m.push(p);return m},isTweening:function(f){for(var d=this._active,v,p=0;p<d.length;p++)if(v=d[p],v.hasTarget(f)&&v.isPlaying())return!0;return!1},killAll:function(){for(var f=this.getAllTweens(),d=0;d<f.length;d++)f[d].stop();return this},killTweensOf:function(f){for(var d=this.getTweensOf(f),v=0;v<d.length;v++)d[v].stop();return this},pauseAll:function(){for(var f=this._active,d=0;d<f.length;d++)f[d].pause();return this},resumeAll:function(){for(var f=this._active,d=0;d<f.length;d++)f[d].resume();return this},setGlobalTimeScale:function(f){return this.timeScale=f,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var f=this.systems.events;f.off(n.PRE_UPDATE,this.preUpdate,this),f.off(n.UPDATE,this.update,this),f.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});a.register("TweenManager",l,"tweens"),h.exports=l},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Array:t(208),Base64:t(1482),Objects:t(1484),String:t(1488),NOOP:t(1)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ArrayBufferToBase64:t(1483),Base64ToArrayBuffer:t(433)}},function(h,g){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(c,s){for(var a=new Uint8Array(c),n=a.length,i=s?"data:"+s+";base64,":"",r=0;r<n;r+=3)i+=t[a[r]>>2],i+=t[(a[r]&3)<<4|a[r+1]>>4],i+=t[(a[r+1]&15)<<2|a[r+2]>>6],i+=t[a[r+2]&63];return n%3===2?i=i.substring(0,i.length-1)+"=":n%3===1&&(i=i.substring(0,i.length-2)+"=="),i};h.exports=e},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Clone:t(77),DeepCopy:t(175),Extend:t(17),GetAdvancedValue:t(13),GetFastValue:t(2),GetMinMaxValue:t(1485),GetValue:t(6),HasAll:t(1486),HasAny:t(455),HasValue:t(126),IsPlainObject:t(7),Merge:t(127),MergeRight:t(1487),Pick:t(571),SetValue:t(478)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),c=t(18),s=function(a,n,i,r,u){u===void 0&&(u=i);var o=e(a,n,u);return c(o,i,r)};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){for(var s=0;s<c.length;s++)if(!e.hasOwnProperty(c[s]))return!1;return!0};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),c=function(s,a){var n=e(s);for(var i in a)n.hasOwnProperty(i)&&(n[i]=a[i]);return n};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Format:t(1489),Pad:t(186),RemoveAt:t(1490),Reverse:t(1491),UppercaseFirst:t(205),UUID:t(222)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return e.replace(/%([0-9]+)/g,function(s,a){return c[Number(a)-1]})};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,c){return c===0?e.slice(1):e.slice(0,c-1)+e.slice(c)};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.split("").reverse().join("")};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={SoundManagerCreator:t(426),Events:t(70),BaseSound:t(146),BaseSoundManager:t(145),WebAudioSound:t(434),WebAudioSoundManager:t(432),HTML5AudioSound:t(429),HTML5AudioSoundManager:t(427),NoAudioSound:t(431),NoAudioSoundManager:t(430)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Arcade:t(1366),Matter:t(1494)}},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BodyBounds:t(1392),Components:t(249),Events:t(272),Factory:t(1394),MatterGameObject:t(1395),Image:t(1396),Matter:t(594),MatterPhysics:t(1524),PolyDecomp:t(1393),Sprite:t(1397),TileBody:t(593),PhysicsEditorParser:t(589),PhysicsJSONParser:t(590),PointerConstraint:t(1398),World:t(1402)}},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(e){return this.body.restitution=e,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var c=0;if(!Array.isArray(e))c=e;else for(var s=0;s<e.length;s++)c|=e[s];return this.body.collisionFilter.mask=c,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,c){Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++){var a=e[s].hasOwnProperty("body")?e[s].body:e[s];this.body.setOnCollideWith(a,c)}return this}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),c={applyForce:function(s){return this._tempVec2.set(this.body.position.x,this.body.position.y),e.applyForce(this.body,this._tempVec2,s),this},applyForceFrom:function(s,a){return e.applyForce(this.body,s,a),this},thrust:function(s){var a=this.body.angle;return this._tempVec2.set(s*Math.cos(a),s*Math.sin(a)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(s){var a=this.body.angle-Math.PI/2;return this._tempVec2.set(s*Math.cos(a),s*Math.sin(a)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(s){var a=this.body.angle+Math.PI/2;return this._tempVec2.set(s*Math.cos(a),s*Math.sin(a)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(s){var a=this.body.angle-Math.PI;return this._tempVec2.set(s*Math.cos(a),s*Math.sin(a)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};h.exports=c},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(e,c,s){return this.body.friction=e,c!==void 0&&(this.body.frictionAir=c),s!==void 0&&(this.body.frictionStatic=s),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};h.exports=t},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),c=t(3),s={setMass:function(a){return e.setMass(this.body,a),this},setDensity:function(a){return e.setDensity(this.body,a),this},centerOfMass:{get:function(){return new c(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};h.exports=s},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};h.exports=t},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),c=t(41),s=t(124),a=t(2),n=t(589),i=t(590),r=t(64),u={setRectangle:function(o,l,f){return this.setBody({type:"rectangle",width:o,height:l},f)},setCircle:function(o,l){return this.setBody({type:"circle",radius:o},l)},setPolygon:function(o,l,f){return this.setBody({type:"polygon",sides:l,radius:o},f)},setTrapezoid:function(o,l,f,d){return this.setBody({type:"trapezoid",width:o,height:l,slope:f},d)},setExistingBody:function(o,l){l===void 0&&(l=!0),this.body&&this.world.remove(this.body,!0),this.body=o;for(var f=0;f<o.parts.length;f++)o.parts[f].gameObject=this;var d=this;if(o.destroy=function(){d.world.remove(d.body,!0),d.body.gameObject=null},l&&(this.world.has(o)&&this.world.remove(o,!0),this.world.add(o)),this._originComponent){var v=o.render.sprite.xOffset,p=o.render.sprite.yOffset,m=o.centerOfMass.x,x=o.centerOfMass.y;if(s(m,.5)&&s(x,.5))this.setOrigin(v+.5,p+.5);else{var T=o.centerOffset.x,S=o.centerOffset.y;this.setOrigin(v+T/this.displayWidth,p+S/this.displayHeight)}}return this},setBody:function(o,l){if(!o)return this;var f;typeof o=="string"&&(o={type:o});var d=a(o,"type","rectangle"),v=a(o,"x",this._tempVec2.x),p=a(o,"y",this._tempVec2.y),m=a(o,"width",this.width),x=a(o,"height",this.height);switch(d){case"rectangle":f=e.rectangle(v,p,m,x,l);break;case"circle":var T=a(o,"radius",Math.max(m,x)/2),S=a(o,"maxSides",25);f=e.circle(v,p,T,l,S);break;case"trapezoid":var E=a(o,"slope",.5);f=e.trapezoid(v,p,m,x,E,l);break;case"polygon":var C=a(o,"sides",5),A=a(o,"radius",Math.max(m,x)/2);f=e.polygon(v,p,C,A,l);break;case"fromVertices":case"fromVerts":var P=a(o,"verts",null);if(P)if(typeof P=="string"&&(P=r.fromPath(P)),this.body&&!this.body.hasOwnProperty("temp"))c.setVertices(this.body,P),f=this.body;else{var M=a(o,"flagInternal",!1),O=a(o,"removeCollinear",.01),F=a(o,"minimumArea",10);f=e.fromVertices(v,p,P,l,M,O,F)}break;case"fromPhysicsEditor":f=n.parseBody(v,p,o,l);break;case"fromPhysicsTracer":f=i.parseBody(v,p,o,l);break}return f&&this.setExistingBody(f,o.addToWorld),this}};h.exports=u},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(272),c=t(165),s=t(166),a={setToSleep:function(){return c.set(this.body,!0),this},setAwake:function(){return c.set(this.body,!1),this},setSleepThreshold:function(n){return n===void 0&&(n=60),this.body.sleepThreshold=n,this},setSleepEvents:function(n,i){return this.setSleepStartEvent(n),this.setSleepEndEvent(i),this},setSleepStartEvent:function(n){if(n){var i=this.world;s.on(this.body,"sleepStart",function(r){i.emit(e.SLEEP_START,r,this)})}else s.off(this.body,"sleepStart");return this},setSleepEndEvent:function(n){if(n){var i=this.world;s.on(this.body,"sleepEnd",function(r){i.emit(e.SLEEP_END,r,this)})}else s.off(this.body,"sleepEnd");return this}};h.exports=a},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="afteradd"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="afterremove"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="afterupdate"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="beforeadd"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="beforeremove"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="beforeupdate"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collisionactive"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collisionend"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collisionstart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragend"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drag"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragstart"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="sleepend"},function(h,g){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="sleepstart"},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),c={setStatic:function(s){return e.setStatic(this.body,s),this},isStatic:function(){return this.body.isStatic}};h.exports=c},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),c=t(14),s=t(269),a=t(270),n=4,i={x:{get:function(){return this.body.position.x},set:function(r){this._tempVec2.set(r,this.y),e.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(r){this._tempVec2.set(this.x,r),e.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(r){var u=1/this._scaleX,o=1/this._scaleY;this._scaleX=r,this._scaleX===0?this.renderFlags&=~n:this.renderFlags|=n,e.scale(this.body,u,o),e.scale(this.body,r,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(r){var u=1/this._scaleX,o=1/this._scaleY;this._scaleY=r,this._scaleY===0?this.renderFlags&=~n:this.renderFlags|=n,e.scale(this.body,u,o),e.scale(this.body,this._scaleX,r)}},angle:{get:function(){return a(this.body.angle*c.RAD_TO_DEG)},set:function(r){this.rotation=a(r)*c.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(r){this._rotation=s(r),e.setAngle(this.body,this._rotation)}},setPosition:function(r,u){return r===void 0&&(r=0),u===void 0&&(u=r),this._tempVec2.set(r,u),e.setPosition(this.body,this._tempVec2),this},setRotation:function(r){return r===void 0&&(r=0),this._rotation=s(r),e.setAngle(this.body,r),this},setFixedRotation:function(){return e.setInertia(this.body,1/0),this},setAngle:function(r){return r===void 0&&(r=0),this.angle=r,e.setAngle(this.body,this.rotation),this},setScale:function(r,u,o){r===void 0&&(r=1),u===void 0&&(u=r);var l=1/this._scaleX,f=1/this._scaleY;return this._scaleX=r,this._scaleY=u,e.scale(this.body,l,f,o),e.scale(this.body,r,u,o),this}};h.exports=i},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),c={setAngularVelocity:function(s){return e.setAngularVelocity(this.body,s),this},setVelocityX:function(s){return this._tempVec2.set(s,this.body.velocity.y),e.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(s){return this._tempVec2.set(this.body.velocity.x,s),e.setVelocity(this.body,this._tempVec2),this},setVelocity:function(s,a){return this._tempVec2.set(s,a),e.setVelocity(this.body,this._tempVec2),this}};h.exports=c},function(h,g,t){var e={};h.exports=e;var c=t(118),s=t(32);(function(){e.create=function(a){var n={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return s.extend(n,!1,a)},e.reset=function(a){a.extended&&(a.narrowDetections=0,a.narrowphaseTests=0,a.narrowReuse=0,a.narrowReuseCount=0,a.midphaseTests=0,a.broadphaseTests=0,a.narrowEff=0,a.midEff=0,a.broadEff=0,a.collisions=0,a.buckets=0,a.pairs=0,a.bodies=0)},e.update=function(a,n){if(a.extended){var i=n.world,r=c.allBodies(i);a.collisions=a.narrowDetections,a.pairs=n.pairs.list.length,a.bodies=r.length,a.midEff=(a.narrowDetections/(a.midphaseTests||1)).toFixed(2),a.narrowEff=(a.narrowDetections/(a.narrowphaseTests||1)).toFixed(2),a.broadEff=(1-a.broadphaseTests/(r.length||1)).toFixed(2),a.narrowReuse=(a.narrowReuseCount/(a.narrowphaseTests||1)).toFixed(2)}}})()},function(h,g,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),c=t(271),s=t(86),a=t(41),n=t(1392),i=t(84),r=t(0),u=t(118),o=t(591),l=t(128),f=t(273),d=t(50),v=t(1394),p=t(2),m=t(6),x=t(597),T=t(1525),S=t(1526),E=t(1399),C=t(1527),A=t(127),P=t(250),M=t(598),O=t(595),F=t(24),I=t(1400),N=t(599),G=t(274),Y=t(20),z=t(592),W=t(83),D=t(64),L=t(1402),B=new r({initialize:function(V){this.scene=V,this.systems=V.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=a,this.composite=u,this.detector=f,this.grid=x,this.pair=P,this.pairs=M,this.query=I,this.resolver=N,this.sat=G,this.constraint=l,this.bodies=s,this.composites=o,this.axes=c,this.bounds=i,this.svg=z,this.vector=W,this.vertices=D,this.verts=D,this._tempVec2=W.create(),m(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),m(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),m(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),N._restingThresh=m(this.config,"restingThresh",4),N._restingThreshTangent=m(this.config,"restingThreshTangent",6),N._positionDampen=m(this.config,"positionDampen",.9),N._positionWarming=m(this.config,"positionWarming",.8),N._frictionNormalMultiplier=m(this.config,"frictionNormalMultiplier",5),V.sys.events.once(Y.BOOT,this.boot,this),V.sys.events.on(Y.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new v(this.world),this.bodyBounds=new n,this.systems.events.once(Y.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new v(this.world));var w=this.systems.events;w.on(Y.UPDATE,this.world.update,this.world),w.on(Y.POST_UPDATE,this.world.postUpdate,this.world),w.once(Y.SHUTDOWN,this.shutdown,this)},getConfig:function(){var w=this.systems.game.config.physics,V=this.systems.settings.physics,U=A(p(V,"matter",{}),p(w,"matter",{}));return U},enableAttractorPlugin:function(){return O.register(T),O.use(E,T),this},enableWrapPlugin:function(){return O.register(C),O.use(E,C),this},enableCollisionEventsPlugin:function(){return O.register(S),O.use(E,S),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(w,V){this.world.step(w,V)},containsPoint:function(w,V,U){w=this.getMatterBodies(w);var X=W.create(V,U),H=I.point(w,X);return H.length>0},intersectPoint:function(w,V,U){U=this.getMatterBodies(U);var X=W.create(w,V),H=[],b=I.point(U,X);return b.forEach(function(Z){H.indexOf(Z)===-1&&H.push(Z)}),H},intersectRect:function(w,V,U,X,H,b){H===void 0&&(H=!1),b=this.getMatterBodies(b);var Z={min:{x:w,y:V},max:{x:w+U,y:V+X}},K=[],Q=I.region(b,Z,H);return Q.forEach(function(j){K.indexOf(j)===-1&&K.push(j)}),K},intersectRay:function(w,V,U,X,H,b){H===void 0&&(H=1),b=this.getMatterBodies(b);for(var Z=[],K=I.ray(b,W.create(w,V),W.create(U,X),H),Q=0;Q<K.length;Q++)Z.push(K[Q].body);return Z},intersectBody:function(w,V){V=this.getMatterBodies(V);for(var U=[],X=I.collides(w,V),H=0;H<X.length;H++){var b=X[H];b.bodyA===w?U.push(b.bodyB):U.push(b.bodyA)}return U},overlap:function(w,V,U,X,H){U===void 0&&(U=null),X===void 0&&(X=null),H===void 0&&(H=U),Array.isArray(w)||(w=[w]),w=this.getMatterBodies(w),V=this.getMatterBodies(V);for(var b=!1,Z=0;Z<w.length;Z++)for(var K=w[Z],Q=I.collides(K,V),j=0;j<Q.length;j++){var q=Q[j],k=q.bodyA.id===K.id?q.bodyB:q.bodyA;if(!X||X.call(H,K,k,q)){if(b=!0,U)U.call(H,K,k,q);else if(!X)return!0}}return b},setCollisionCategory:function(w,V){return w=this.getMatterBodies(w),w.forEach(function(U){U.collisionFilter.category=V}),this},setCollisionGroup:function(w,V){return w=this.getMatterBodies(w),w.forEach(function(U){U.collisionFilter.group=V}),this},setCollidesWith:function(w,V){w=this.getMatterBodies(w);var U=0;if(!Array.isArray(V))U=V;else for(var X=0;X<V.length;X++)U|=V[X];return w.forEach(function(H){H.collisionFilter.mask=U}),this},getMatterBodies:function(w){if(!w)return this.world.getAllBodies();Array.isArray(w)||(w=[w]);for(var V=[],U=0;U<w.length;U++){var X=w[U].hasOwnProperty("body")?w[U].body:w[U];V.push(X)}return V},setVelocity:function(w,V,U){w=this.getMatterBodies(w);var X=this._tempVec2;return X.x=V,X.y=U,w.forEach(function(H){a.setVelocity(H,X)}),this},setVelocityX:function(w,V){w=this.getMatterBodies(w);var U=this._tempVec2;return U.x=V,w.forEach(function(X){U.y=X.velocity.y,a.setVelocity(X,U)}),this},setVelocityY:function(w,V){w=this.getMatterBodies(w);var U=this._tempVec2;return U.y=V,w.forEach(function(X){U.x=X.velocity.x,a.setVelocity(X,U)}),this},setAngularVelocity:function(w,V){return w=this.getMatterBodies(w),w.forEach(function(U){a.setAngularVelocity(U,V)}),this},applyForce:function(w,V){w=this.getMatterBodies(w);var U=this._tempVec2;return w.forEach(function(X){U.x=X.position.x,U.y=X.position.y,a.applyForce(X,U,V)}),this},applyForceFromPosition:function(w,V,U,X){w=this.getMatterBodies(w);var H=this._tempVec2;return w.forEach(function(b){X===void 0&&(X=b.angle),H.x=U*Math.cos(X),H.y=U*Math.sin(X),a.applyForce(b,V,H)}),this},applyForceFromAngle:function(w,V,U){w=this.getMatterBodies(w);var X=this._tempVec2;return w.forEach(function(H){U===void 0&&(U=H.angle),X.x=V*Math.cos(U),X.y=V*Math.sin(U),a.applyForce(H,{x:H.position.x,y:H.position.y},X)}),this},getConstraintLength:function(w){var V=w.pointA.x,U=w.pointA.y,X=w.pointB.x,H=w.pointB.y;return w.bodyA&&(V+=w.bodyA.position.x,U+=w.bodyA.position.y),w.bodyB&&(X+=w.bodyB.position.x,H+=w.bodyB.position.y),d(V,U,X,H)},alignBody:function(w,V,U,X){w=w.hasOwnProperty("body")?w.body:w;var H;switch(X){case e.TOP_LEFT:case e.LEFT_TOP:H=this.bodyBounds.getTopLeft(w,V,U);break;case e.TOP_CENTER:H=this.bodyBounds.getTopCenter(w,V,U);break;case e.TOP_RIGHT:case e.RIGHT_TOP:H=this.bodyBounds.getTopRight(w,V,U);break;case e.LEFT_CENTER:H=this.bodyBounds.getLeftCenter(w,V,U);break;case e.CENTER:H=this.bodyBounds.getCenter(w,V,U);break;case e.RIGHT_CENTER:H=this.bodyBounds.getRightCenter(w,V,U);break;case e.LEFT_BOTTOM:case e.BOTTOM_LEFT:H=this.bodyBounds.getBottomLeft(w,V,U);break;case e.BOTTOM_CENTER:H=this.bodyBounds.getBottomCenter(w,V,U);break;case e.BOTTOM_RIGHT:case e.RIGHT_BOTTOM:H=this.bodyBounds.getBottomRight(w,V,U);break}return H&&a.setPosition(w,H),this},shutdown:function(){var w=this.systems.events;this.world&&(w.off(Y.UPDATE,this.world.update,this.world),w.off(Y.POST_UPDATE,this.world.postUpdate,this.world)),w.off(Y.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(Y.START,this.start,this),this.scene=null,this.systems=null}});F.register("MatterPhysics",B,"matterPhysics"),h.exports=B},function(h,g,t){var e=t(594),c={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Body.create",function(){c.Body.init(this)}),s.before("Engine.update",function(a){c.Engine.update(a)})},Body:{init:function(s){s.plugin.attractors=s.plugin.attractors||[]}},Engine:{update:function(s){for(var a=e.Composite.allBodies(s.world),n=0;n<a.length;n++){var i=a[n],r=i.plugin.attractors;if(r&&r.length>0)for(var u=0;u<a.length;u++){var o=a[u];if(n!==u)for(var l=0;l<r.length;l++){var f=r[l],d=f;e.Common.isFunction(f)&&(d=f(i,o)),d&&e.Body.applyForce(o,o.position,d)}}}}},Attractors:{gravityConstant:.001,gravity:function(s,a){var n=e.Vector.sub(a.position,s.position),i=e.Vector.magnitudeSquared(n)||1e-4,r=e.Vector.normalise(n),u=-c.Attractors.gravityConstant*(s.mass*a.mass/i),o=e.Vector.mult(r,u);e.Body.applyForce(s,s.position,e.Vector.neg(o)),e.Body.applyForce(a,a.position,o)}}};h.exports=c},function(h,g){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(c){c.pairs.map(function(s){var a=s.bodyA,n=s.bodyB;a.gameObject&&a.gameObject.emit("collide",a,n,s),n.gameObject&&n.gameObject.emit("collide",n,a,s),e.Events.trigger(a,"onCollide",{pair:s}),e.Events.trigger(n,"onCollide",{pair:s}),a.onCollideCallback&&a.onCollideCallback(s),n.onCollideCallback&&n.onCollideCallback(s),a.onCollideWith[n.id]&&a.onCollideWith[n.id](n,s),n.onCollideWith[a.id]&&n.onCollideWith[a.id](a,s)})}),e.Events.on(this,"collisionActive",function(c){c.pairs.map(function(s){var a=s.bodyA,n=s.bodyB;a.gameObject&&a.gameObject.emit("collideActive",a,n,s),n.gameObject&&n.gameObject.emit("collideActive",n,a,s),e.Events.trigger(a,"onCollideActive",{pair:s}),e.Events.trigger(n,"onCollideActive",{pair:s}),a.onCollideActiveCallback&&a.onCollideActiveCallback(s),n.onCollideActiveCallback&&n.onCollideActiveCallback(s)})}),e.Events.on(this,"collisionEnd",function(c){c.pairs.map(function(s){var a=s.bodyA,n=s.bodyB;a.gameObject&&a.gameObject.emit("collideEnd",a,n,s),n.gameObject&&n.gameObject.emit("collideEnd",n,a,s),e.Events.trigger(a,"onCollideEnd",{pair:s}),e.Events.trigger(n,"onCollideEnd",{pair:s}),a.onCollideEndCallback&&a.onCollideEndCallback(s),n.onCollideEndCallback&&n.onCollideEndCallback(s)})})})}};h.exports=t},function(h,g,t){var e=t(594),c={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Engine.update",function(){c.Engine.update(this)})},Engine:{update:function(s){for(var a=s.world,n=e.Composite.allBodies(a),i=e.Composite.allComposites(a),r=0;r<n.length;r+=1){var u=n[r];u.plugin.wrap&&c.Body.wrap(u,u.plugin.wrap)}for(r=0;r<i.length;r+=1){var o=i[r];o.plugin.wrap&&c.Composite.wrap(o,o.plugin.wrap)}}},Bounds:{wrap:function(s,a){var n=null,i=null;if(typeof a.min.x<"u"&&typeof a.max.x<"u"&&(s.min.x>a.max.x?n=a.min.x-s.max.x:s.max.x<a.min.x&&(n=a.max.x-s.min.x)),typeof a.min.y<"u"&&typeof a.max.y<"u"&&(s.min.y>a.max.y?i=a.min.y-s.max.y:s.max.y<a.min.y&&(i=a.max.y-s.min.y)),n!==null||i!==null)return{x:n||0,y:i||0}}},Body:{wrap:function(s,a){var n=c.Bounds.wrap(s.bounds,a);return n&&e.Body.translate(s,n),n}},Composite:{bounds:function(s){for(var a=e.Composite.allBodies(s),n=[],i=0;i<a.length;i+=1){var r=a[i];n.push(r.bounds.min,r.bounds.max)}return e.Bounds.create(n)},wrap:function(s,a){var n=c.Bounds.wrap(c.Composite.bounds(s),a);return n&&e.Composite.translate(s,n),n}}};h.exports=c},function(h,g,t){(function(e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var c=t(33),s=t(17),a={Actions:t(275),Animations:t(723),BlendModes:t(35),Cache:t(735),Cameras:t(738),Core:t(806),Class:t(0),Create:t(888),Curves:t(894),Data:t(896),Display:t(898),DOM:t(917),Events:t(918),Game:t(920),GameObjects:t(1011),Geom:t(483),Input:t(1308),Loader:t(1338),Math:t(193),Physics:t(1493),Plugins:t(1403),Renderer:t(1405),Scale:t(1412),ScaleModes:t(168),Scene:t(418),Scenes:t(1413),Structs:t(1415),Textures:t(1416),Tilemaps:t(1418),Time:t(1461),Tweens:t(1463),Utils:t(1481)};a.Sound=t(1492),a=s(!1,a,c),h.exports=a,e.Phaser=a}).call(this,t(600))}])})})(ga);const ei=1150,Un=500;var wn={},Gn={},vi={},jn={},Sn={},Di={},bi=Ft&&Ft.__classPrivateFieldSet||function(R,y,h){if(!y.has(R))throw new TypeError("attempted to set private field on non-instance");return y.set(R,h),h},$e=Ft&&Ft.__classPrivateFieldGet||function(R,y){if(!y.has(R))throw new TypeError("attempted to get private field on non-instance");return y.get(R)},mi,me;Object.defineProperty(Di,"__esModule",{value:!0});Di.OmnibusRegistrator=void 0;class xa{constructor(y){mi.set(this,void 0),me.set(this,void 0),bi(this,mi,y),bi(this,me,[])}on(y,h){return $e(this,mi).on(y,h),$e(this,me).push({name:y,fn:h}),()=>{this.off(y,h)}}off(y,h){if(!$e(this,me).find(t=>t.name===y&&t.fn===h))throw new Error("Event you are trying to unregister was not registered via this Registrator");this.off(y,h),bi(this,me,$e(this,me).filter(t=>!(t.name===y&&t.fn===h)))}offAll(){$e(this,me).forEach(({name:y,fn:h})=>{$e(this,mi).off(y,h)}),bi(this,me,[])}}Di.OmnibusRegistrator=xa;mi=new WeakMap,me=new WeakMap;var Fs=Ft&&Ft.__classPrivateFieldSet||function(R,y,h){if(!y.has(R))throw new TypeError("attempted to set private field on non-instance");return y.set(R,h),h},je=Ft&&Ft.__classPrivateFieldGet||function(R,y){if(!y.has(R))throw new TypeError("attempted to get private field on non-instance");return y.get(R)},ie;Object.defineProperty(Sn,"__esModule",{value:!0});Sn.Omnibus=void 0;const ya=Di;class Ta{constructor(){ie.set(this,void 0),Fs(this,ie,new Map)}on(y,h){return je(this,ie).has(y)||je(this,ie).set(y,[]),je(this,ie).get(y).push(h),()=>{this.off(y,h)}}off(y,h){const g=je(this,ie).get(y)||[];je(this,ie).set(y,g.filter(t=>t!==h))}offAll(){Fs(this,ie,new Map)}async trigger(y,...h){const g=je(this,ie).get(y)||[];return Promise.all(g.map(t=>t(...h))).then(()=>{})}getRegistrator(){return new ya.OmnibusRegistrator(this)}}Sn.Omnibus=Ta;ie=new WeakMap;(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.OmnibusRegistrator=R.Omnibus=void 0;const y=Sn;Object.defineProperty(R,"Omnibus",{enumerable:!0,get:function(){return y.Omnibus}});const h=Di;Object.defineProperty(R,"OmnibusRegistrator",{enumerable:!0,get:function(){return h.OmnibusRegistrator}})})(jn);var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.toMidiMessage=Oe.makeMessage=Oe.isChannelMode=void 0;const Sa=R=>R>=120;Oe.isChannelMode=Sa;const Ea=({channel:R,command:y,data1:h,data2:g})=>Uint8Array.from([y+(R-1),h,g]);Oe.makeMessage=Ea;const Ca=([R,y,h])=>{const g=R>>4<<4;return{channel:R-g+1,command:g,data1:y,data2:h}};Oe.toMidiMessage=Ca;var kn={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.splitValueIntoFraction=R.uIntsIntoNumber=R.splitNumberIntoUInt8s=R.fractionToPitchBendAsUints=R.fractionToPitchBend=void 0;const y=c=>{if(c<-1||c>1)throw new Error("Pitch bend value outside the range");return Math.ceil((c+1)*16383/2)};R.fractionToPitchBend=y;const h=c=>(0,R.splitNumberIntoUInt8s)((0,R.fractionToPitchBend)(c));R.fractionToPitchBendAsUints=h;const g=c=>{let s=[];return s[0]=(1<<7)-1&c,s[1]=c>>7,s};R.splitNumberIntoUInt8s=g;const t=c=>c[0]+(c[1]<<7);R.uIntsIntoNumber=t;const e=c=>((0,R.uIntsIntoNumber)(c)/16363-.5)*2;R.splitValueIntoFraction=e})(kn);var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.MidiCommand=void 0;Ni.MidiCommand={NoteOn:9<<4,NoteOff:8<<4,PolyKeyPressure:10<<4,ControlChange:11<<4,ProgramChange:12<<4,ChannelPressure:13<<4,PitchBend:14<<4,Sysex:15<<4,Clock:{Start:250,Continue:251,Stop:252,Pulse:248}};var qn={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.MidiControlChange=void 0,function(y){y[y.BankSelect=0]="BankSelect",y[y.ModulationWheel=1]="ModulationWheel",y[y.BreathController=2]="BreathController",y[y.FootController=4]="FootController",y[y.PortamentoTile=5]="PortamentoTile",y[y.DataEntryMSB=6]="DataEntryMSB",y[y.ChannelVolume=7]="ChannelVolume",y[y.Balance=8]="Balance",y[y.Pan=10]="Pan",y[y.ExpressionController=11]="ExpressionController",y[y.EffectControl1=12]="EffectControl1",y[y.EffectControl2=13]="EffectControl2",y[y.GeneralPurposeController1=16]="GeneralPurposeController1",y[y.GeneralPurposeController2=17]="GeneralPurposeController2",y[y.GeneralPurposeController3=18]="GeneralPurposeController3",y[y.GeneralPurposeController4=19]="GeneralPurposeController4",y[y.BankSelectLSB=32]="BankSelectLSB",y[y.ModulationWheelLSB=33]="ModulationWheelLSB",y[y.BreathControllerLSB=34]="BreathControllerLSB",y[y.FootControllerLSB=36]="FootControllerLSB",y[y.PortamentoTileLSB=37]="PortamentoTileLSB",y[y.DataEntryLSB=38]="DataEntryLSB",y[y.ChannelVolumeLSB=39]="ChannelVolumeLSB",y[y.BalanceLSB=40]="BalanceLSB",y[y.PanLSB=42]="PanLSB",y[y.ExpressionControllerLSB=43]="ExpressionControllerLSB",y[y.EffectControl1LSB=48]="EffectControl1LSB",y[y.EffectControl2LSB=49]="EffectControl2LSB",y[y.EffectControl3LSB=50]="EffectControl3LSB",y[y.EffectControl4LSB=51]="EffectControl4LSB",y[y.Sustain=64]="Sustain",y[y.Portamento=65]="Portamento",y[y.Sostenuto=66]="Sostenuto",y[y.SoftPedal=67]="SoftPedal",y[y.LegatoFootswitch=68]="LegatoFootswitch",y[y.Hold2=69]="Hold2",y[y.SoundController1=70]="SoundController1",y[y.SoundController2=71]="SoundController2",y[y.SoundController3=72]="SoundController3",y[y.SoundController4=73]="SoundController4",y[y.SoundController5=74]="SoundController5",y[y.SoundController6=75]="SoundController6",y[y.SoundController7=76]="SoundController7",y[y.SoundController8=77]="SoundController8",y[y.SoundController9=78]="SoundController9",y[y.SoundController10=79]="SoundController10",y[y.SoundVariation=70]="SoundVariation",y[y.TimbreIntensitivity=71]="TimbreIntensitivity",y[y.ReleaseTime=72]="ReleaseTime",y[y.AttackTime=73]="AttackTime",y[y.Brightness=74]="Brightness",y[y.DecayTime=75]="DecayTime",y[y.VibratoRate=76]="VibratoRate",y[y.VibratoDepth=77]="VibratoDepth",y[y.VibratoDelay=78]="VibratoDelay",y[y.GeneralPurposeController5=80]="GeneralPurposeController5",y[y.GeneralPurposeController6=81]="GeneralPurposeController6",y[y.GeneralPurposeController7=82]="GeneralPurposeController7",y[y.GeneralPurposeController8=83]="GeneralPurposeController8",y[y.PortamentoControl=84]="PortamentoControl",y[y.HighResolutionVelocityPrefix=88]="HighResolutionVelocityPrefix",y[y.Effects1Depth=91]="Effects1Depth",y[y.Effects2Depth=92]="Effects2Depth",y[y.Effects3Depth=93]="Effects3Depth",y[y.Effects4Depth=94]="Effects4Depth",y[y.Effects5Depth=95]="Effects5Depth",y[y.DataIncrement=96]="DataIncrement",y[y.DataDecrement=97]="DataDecrement",y[y.NonRegisteredParameterNumberLSB=98]="NonRegisteredParameterNumberLSB",y[y.NonRegisteredParameterNumberMSB=99]="NonRegisteredParameterNumberMSB",y[y.RegisteredParameterNumberLSB=100]="RegisteredParameterNumberLSB",y[y.RegisteredParameterNumberMSB=101]="RegisteredParameterNumberMSB",y[y.AllSoundsOff=120]="AllSoundsOff",y[y.ResetAllControllers=121]="ResetAllControllers",y[y.LocalControlOnOff=122]="LocalControlOnOff",y[y.AllNotesOff=123]="AllNotesOff",y[y.OmniModeOff=124]="OmniModeOff",y[y.OmniModeOn=125]="OmniModeOn",y[y.MonoModeOn=126]="MonoModeOn",y[y.PolyModeOn=127]="PolyModeOn"}(R.MidiControlChange||(R.MidiControlChange={}))})(qn);var _s={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.ticksToBPM=R.quarternoteToBPM=R.averageIntervals=R.computeIntervalsInMs=void 0;const y=(c,s)=>c+s,h=c=>{const s=[];for(let a=1;a<c.length;a++)s.push(c[a]-c[a-1]);return s};R.computeIntervalsInMs=h;const g=c=>!c||!c.length?0:c.reduce(y)/c.length;R.averageIntervals=g;const t=c=>6e4/(c*24);R.quarternoteToBPM=t;const e=c=>!c||c.length<2?0:(0,R.quarternoteToBPM)((0,R.averageIntervals)((0,R.computeIntervalsInMs)(c)));R.ticksToBPM=e})(_s);var ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.MIDIValConfigurationError=ii.MIDIValError=void 0;class tr extends Error{constructor(y){super(y)}get name(){return this.constructor.name}}ii.MIDIValError=tr;class Aa extends tr{}ii.MIDIValConfigurationError=Aa;var Le={};Object.defineProperty(Le,"__esModule",{value:!0});Le.toProgramMessage=Le.toControlChangeMessage=Le.toNoteMessage=void 0;const Ma=R=>Object.assign(Object.assign({},R),{note:R.data1,velocity:R.data2});Le.toNoteMessage=Ma;const Pa=R=>Object.assign(Object.assign({},R),{control:R.data1,value:R.data2});Le.toControlChangeMessage=Pa;const Ra=R=>Object.assign(Object.assign({},R),{program:R.data1,value:R.data2});Le.toProgramMessage=Ra;var Is;function er(){if(Is)return vi;Is=1;var R=Ft&&Ft.__awaiter||function(o,l,f,d){function v(p){return p instanceof f?p:new f(function(m){m(p)})}return new(f||(f=Promise))(function(p,m){function x(E){try{S(d.next(E))}catch(C){m(C)}}function T(E){try{S(d.throw(E))}catch(C){m(C)}}function S(E){E.done?p(E.value):v(E.value).then(x,T)}S((d=d.apply(o,l||[])).next())})};Object.defineProperty(vi,"__esModule",{value:!0}),vi.MIDIValInput=void 0;const y=jn,h=Oe,g=_n(),t=kn,e=Ni,c=qn,s=_s,a=ii,n=Le,i=20,r={computeClockTempo:!1};let u=class Yn{constructor(l,f=r){this.omnibus=new y.Omnibus,this.tempoSamples=[],this.registerInput(l),this.options=f}static fromInterfaceId(l,f){return R(this,void 0,void 0,function*(){const v=(yield this.getMidiAccess()).inputs.find(({id:p})=>p===l);if(!v)throw new a.MIDIValError(`${l} not found`);return new Yn(v,f)})}static fromInterfaceName(l,f){return R(this,void 0,void 0,function*(){const v=(yield this.getMidiAccess()).inputs.find(({name:p})=>p===l);if(!v)throw new a.MIDIValError(`${l} not found`);return new Yn(v,f)})}static getMidiAccess(){return R(this,void 0,void 0,function*(){return yield g.MIDIVal.connect()})}get tempo(){if(!this.options.computeClockTempo)throw new a.MIDIValConfigurationError("To use MIDIValInput.tempo you need to enable computeClockTempo option.");return(0,s.ticksToBPM)(this.tempoSamples)}registerInput(l){return R(this,void 0,void 0,function*(){if(this.midiInput=l,this.unregisterInput=yield l.onMessage(f=>{if(f.data[0]===240){this.omnibus.trigger("sysex",f.data);return}if(this.isClockCommand(f))return;const d=(0,h.toMidiMessage)(f.data);switch(d.command){case e.MidiCommand.NoteOn:this.omnibus.trigger("noteOn",(0,n.toNoteMessage)(d));break;case e.MidiCommand.NoteOff:this.omnibus.trigger("noteOff",(0,n.toNoteMessage)(d));break;case e.MidiCommand.ControlChange:this.omnibus.trigger("controlChange",(0,n.toControlChangeMessage)(d));break;case e.MidiCommand.ProgramChange:this.omnibus.trigger("programChange",(0,n.toProgramMessage)(d));break;case e.MidiCommand.PolyKeyPressure:this.omnibus.trigger("polyKeyPressure",d);break;case e.MidiCommand.PitchBend:this.omnibus.trigger("pitchBend",(0,t.splitValueIntoFraction)([d.data1,d.data2]));break;default:console.log("unknown msg",d);break}}),this.options.computeClockTempo){this.onClockPulse(()=>{this.tempoSamples.push(performance.now()),this.tempoSamples.length>i&&this.tempoSamples.shift()});const f=()=>{this.tempoSamples=[]};this.onClockContinue(f),this.onClockStart(f)}})}isClockCommand(l){switch(l.data[0]){case e.MidiCommand.Clock.Pulse:return this.omnibus.trigger("clockPulse"),!0;case e.MidiCommand.Clock.Start:return this.omnibus.trigger("clockStart"),!0;case e.MidiCommand.Clock.Continue:return this.omnibus.trigger("clockContinue"),!0;case e.MidiCommand.Clock.Stop:return this.omnibus.trigger("clockStop"),!0;default:return!1}}onBusKeyValue(l,f,d,v){return this.omnibus.on(l,(...p)=>{if(!p.length)return;const m=p[0];m[f]===d&&v(m)})}disconnect(){this.omnibus.offAll(),this.unregisterInput&&this.unregisterInput()}onAllNoteOn(l){return this.omnibus.on("noteOn",l)}onNoteOn(l,f){return this.omnibus.on("noteOn",d=>{if(d.note===l)return f(d)})}onAllNoteOff(l){return this.omnibus.on("noteOff",l)}onNoteOff(l,f){return this.onBusKeyValue("noteOff","note",l,f)}onPitchBend(l){return this.omnibus.on("pitchBend",l)}onAllControlChange(l){return this.omnibus.on("controlChange",l)}onControlChange(l,f){return(0,h.isChannelMode)(l)&&console.warn("use designated Channel Mode callback instead of onControlChange for "+l),this.omnibus.on("controlChange",d=>{d.control===l&&f(d)})}onAllProgramChange(l){return this.omnibus.on("programChange",l)}onProgramChange(l,f){return this.onBusKeyValue("programChange","program",l,f)}onAllPolyKeyPressure(l){return this.omnibus.on("polyKeyPressure",l)}onPolyKeyPressure(l,f){return this.onBusKeyValue("polyKeyPressure","data1",l,f)}onSysex(l){return this.omnibus.on("sysex",l)}onAllSoundsOff(l){return this.onBusKeyValue("controlChange","control",c.MidiControlChange.AllSoundsOff,l)}onResetAllControllers(l){return this.onBusKeyValue("controlChange","control",c.MidiControlChange.ResetAllControllers,l)}onLocalControlChange(l){return this.onBusKeyValue("controlChange","control",c.MidiControlChange.LocalControlOnOff,f=>{l(f.data2===127,f)})}onAllNotesOff(l){return this.onBusKeyValue("controlChange","control",c.MidiControlChange.AllNotesOff,l)}onOmniModeOff(l){return this.onBusKeyValue("controlChange","control",c.MidiControlChange.OmniModeOff,l)}onOmniModeOn(l){return this.onBusKeyValue("controlChange","control",c.MidiControlChange.OmniModeOn,l)}onMonoModeOn(l){return this.onBusKeyValue("controlChange","control",c.MidiControlChange.MonoModeOn,l)}onPolyModeOn(l){return this.onBusKeyValue("controlChange","control",c.MidiControlChange.PolyModeOn,l)}onClockPulse(l){return this.omnibus.on("clockPulse",l)}onClockStart(l){return this.omnibus.on("clockStart",l)}onClockStop(l){return this.omnibus.on("clockStop",l)}onClockContinue(l){return this.omnibus.on("clockContinue",l)}};return vi.MIDIValInput=u,vi}var pi={},Ds;function nr(){if(Ds)return pi;Ds=1;var R=Ft&&Ft.__awaiter||function(c,s,a,n){function i(r){return r instanceof a?r:new a(function(u){u(r)})}return new(a||(a=Promise))(function(r,u){function o(d){try{f(n.next(d))}catch(v){u(v)}}function l(d){try{f(n.throw(d))}catch(v){u(v)}}function f(d){d.done?r(d.value):i(d.value).then(o,l)}f((n=n.apply(c,s||[])).next())})};Object.defineProperty(pi,"__esModule",{value:!0}),pi.MIDIValOutput=void 0;const y=_n(),h=kn,g=Ni,t=qn;let e=class ir{constructor(s){this.midiOutput=s,this.defaultChannel=1}send(s){this.midiOutput&&this.midiOutput.send(s)}setChannel(s){this.defaultChannel=s}getChannel(s){return s?s-1:this.defaultChannel-1}static fromInterfaceName(s){return R(this,void 0,void 0,function*(){const n=(yield this.getMidiAccess()).outputs.find(({name:i})=>i===s);if(!n)throw new Error(`${s} not found`);return new ir(n)})}static getMidiAccess(){return R(this,void 0,void 0,function*(){return yield y.MIDIVal.connect()})}sendNoteOn(s,a,n){return this.send([g.MidiCommand.NoteOn+this.getChannel(n),s,a])}sendNoteOff(s,a){return this.send([g.MidiCommand.NoteOff+this.getChannel(a),s,0])}sendPolyKeyPressure(s,a,n){return this.send([g.MidiCommand.PolyKeyPressure+this.getChannel(n),s,a])}sendControlChange(s,a,n){return this.send([g.MidiCommand.ControlChange+this.getChannel(n),s,a])}sendProgramChange(s,a){return this.send([g.MidiCommand.ProgramChange+this.getChannel(a),s])}sendChannelPressure(s,a){return this.send([g.MidiCommand.ChannelPressure+this.getChannel(a),s])}sendPitchBend(s,a){return this.send(new Uint8Array([g.MidiCommand.PitchBend+this.getChannel(a),...(0,h.fractionToPitchBendAsUints)(s)]))}sendAllSoundOff(s){return this.send([g.MidiCommand.ControlChange+this.getChannel(s),t.MidiControlChange.AllSoundsOff,0])}sendResetAllControllers(s){return this.send([g.MidiCommand.ControlChange+this.getChannel(s),t.MidiControlChange.ResetAllControllers,0])}sendLocalControlOff(s){return this.send([g.MidiCommand.ControlChange+this.getChannel(s),t.MidiControlChange.LocalControlOnOff,0])}sendLocalControlOn(s){return this.send([g.MidiCommand.ControlChange+this.getChannel(s),t.MidiControlChange.LocalControlOnOff,127])}sendAllNotesOff(s){return this.send([g.MidiCommand.ControlChange+this.getChannel(s),t.MidiControlChange.AllNotesOff,0])}sendClockStart(){return this.send([g.MidiCommand.Clock.Start])}sendClockStop(){return this.send([g.MidiCommand.Clock.Stop])}sendClockContinue(){return this.send([g.MidiCommand.Clock.Continue])}sendClockPulse(){return this.send([g.MidiCommand.Clock.Pulse])}};return pi.MIDIValOutput=e,pi}var En={},Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.BrowserMIDIOutput=void 0;class Oa{constructor(y){this.output=y}send(y){this.output.send(y)}get id(){return this.output.id}get name(){return this.output.name}get manufacturer(){return this.output.manufacturer}}Cn.BrowserMIDIOutput=Oa;var An={},La=Ft&&Ft.__awaiter||function(R,y,h,g){function t(e){return e instanceof h?e:new h(function(c){c(e)})}return new(h||(h=Promise))(function(e,c){function s(i){try{n(g.next(i))}catch(r){c(r)}}function a(i){try{n(g.throw(i))}catch(r){c(r)}}function n(i){i.done?e(i.value):t(i.value).then(s,a)}n((g=g.apply(R,y||[])).next())})};Object.defineProperty(An,"__esModule",{value:!0});An.BrowserMIDIInput=void 0;class Fa{constructor(y){this.input=y}onMessage(y){return La(this,void 0,void 0,function*(){return yield this.input.open(),this.input.addEventListener("midimessage",y),()=>{this.input.removeEventListener("midimessage",y)}})}get id(){return this.input.id}get name(){return this.input.name}get manufacturer(){return this.input.manufacturer}}An.BrowserMIDIInput=Fa;var Ia=Ft&&Ft.__awaiter||function(R,y,h,g){function t(e){return e instanceof h?e:new h(function(c){c(e)})}return new(h||(h=Promise))(function(e,c){function s(i){try{n(g.next(i))}catch(r){c(r)}}function a(i){try{n(g.throw(i))}catch(r){c(r)}}function n(i){i.done?e(i.value):t(i.value).then(s,a)}n((g=g.apply(R,y||[])).next())})};Object.defineProperty(En,"__esModule",{value:!0});En.BrowserMIDIAccess=void 0;const Zi=Cn,Ki=An,Da=jn;class Na{constructor(){this.bus=new Da.Omnibus}onInputConnected(y){return this.bus.on("inputConnected",y)}onInputDisconnected(y){return this.bus.on("inputDisconnected",y)}onOutputConnected(y){return this.bus.on("outputConnected",y)}onOutputDisconnected(y){return this.bus.on("outputDisconnected",y)}connect(y=!1){return Ia(this,void 0,void 0,function*(){if(!navigator.requestMIDIAccess)throw new Error("requestMIDIAccess not available, make sure you are using MIDI-compatible browser.");this.access=yield navigator.requestMIDIAccess({sysex:y}),this.listenOnStateChange()})}get outputs(){return Array.from(this.access.outputs).map(([,y])=>new Zi.BrowserMIDIOutput(y))}get inputs(){return Array.from(this.access.inputs).map(([,y])=>new Ki.BrowserMIDIInput(y))}getInputById(y){const h=Array.from(this.access.inputs).map(([,g])=>g).find(({id:g})=>g===y);if(!h)throw new Error(`Cannot find input ${y}`);return new Ki.BrowserMIDIInput(h)}getOutputById(y){const h=Array.from(this.access.outputs).map(([,g])=>g).find(({id:g})=>g===y);if(!h)throw new Error(`Cannot find output ${y}`);return new Zi.BrowserMIDIOutput(h)}listenOnStateChange(){this.access.addEventListener("statechange",y=>{if(y.port.type==="input")switch(y.port.state){case"disconnected":this.bus.trigger("inputDisconnected",new Ki.BrowserMIDIInput(y.port));break;case"connected":this.bus.trigger("inputConnected",new Ki.BrowserMIDIInput(y.port));break}else switch(y.port.state){case"disconnected":this.bus.trigger("outputDisconnected",new Zi.BrowserMIDIOutput(y.port));break;case"connected":this.bus.trigger("outputConnected",new Zi.BrowserMIDIOutput(y.port));break}})}}En.BrowserMIDIAccess=Na;var Ns;function Ba(){return Ns||(Ns=1,function(R){var y=Ft&&Ft.__awaiter||function(s,a,n,i){function r(u){return u instanceof n?u:new n(function(o){o(u)})}return new(n||(n=Promise))(function(u,o){function l(v){try{d(i.next(v))}catch(p){o(p)}}function f(v){try{d(i.throw(v))}catch(p){o(p)}}function d(v){v.done?u(v.value):r(v.value).then(l,f)}d((i=i.apply(s,a||[])).next())})};Object.defineProperty(R,"__esModule",{value:!0}),R.MIDIVal=R.matchesConfig=void 0;const h=er(),g=nr(),t=En,e=(s,a)=>Object.keys(a).reduce((n,i)=>{const r=a[i];return typeof r=="string"?n&&s[i]===r:n&&r.test(s[i])},!0);R.matchesConfig=e;class c{static configureAccessObject(a){this.isSetupComplete=!1,this.accessObject=a}static onInputDeviceConnected(a,n=!1){return y(this,void 0,void 0,function*(){return n&&this.accessObject.inputs.forEach(a),this.accessObject.onInputConnected(a)})}static onInputDeviceWithConfigConnected(a,n,i=!1){return y(this,void 0,void 0,function*(){return this.onInputDeviceConnected(r=>{(0,R.matchesConfig)(r,a)&&n(new h.MIDIValInput(r))},i)})}static onOutputDeviceWithConfigConnected(a,n,i=!1){return y(this,void 0,void 0,function*(){return this.onOutputDeviceConnected(r=>{(0,R.matchesConfig)(r,a)&&n(new g.MIDIValOutput(r))},i)})}static onOutputDeviceConnected(a,n=!1){return y(this,void 0,void 0,function*(){return n&&this.accessObject.outputs.forEach(a),this.accessObject.onOutputConnected(a)})}static onInputDeviceDisconnected(a){return y(this,void 0,void 0,function*(){return this.accessObject.onInputDisconnected(a)})}static onOutputDeviceDisconnected(a){return y(this,void 0,void 0,function*(){return this.accessObject.onOutputDisconnected(a)})}static fromMIDIInput(a){return new h.MIDIValInput(a)}static fromMIDIOutput(a){return new g.MIDIValOutput(a)}static connect(){return y(this,void 0,void 0,function*(){return yield this.setupDeviceWatchers(),this.accessObject})}static setupDeviceWatchers(){return y(this,void 0,void 0,function*(){this.isSetupComplete||(this.isSetupComplete=!0,this.accessObject||(this.accessObject=new t.BrowserMIDIAccess),yield this.accessObject.connect())})}}R.MIDIVal=c,c.isSetupComplete=!1}(Gn)),Gn}var Bs;function _n(){return Bs||(Bs=1,function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.MIDIValOutput=R.MIDIValInput=R.MIDIVal=void 0;const y=Ba();Object.defineProperty(R,"MIDIVal",{enumerable:!0,get:function(){return y.MIDIVal}});const h=er();Object.defineProperty(R,"MIDIValInput",{enumerable:!0,get:function(){return h.MIDIValInput}});const g=nr();Object.defineProperty(R,"MIDIValOutput",{enumerable:!0,get:function(){return g.MIDIValOutput}})}(wn)),wn}var sr=_n();class wa extends Phaser.GameObjects.Text{constructor(y,h,g,t,e){super(y,h||0,g||0,t||"",e||{fontSize:"28px",color:"green"}),y.add.existing(this),this.setOrigin(0)}update(){this.setText(`fps: ${Math.floor(this.scene.game.loop.actualFps)}`)}}const rr="14.7.77",ws=(R,y,h)=>({endTime:y,insertTime:h,type:"exponentialRampToValue",value:R}),Gs=(R,y,h)=>({endTime:y,insertTime:h,type:"linearRampToValue",value:R}),Xn=(R,y)=>({startTime:y,type:"setValue",value:R}),ar=(R,y,h)=>({duration:h,startTime:y,type:"setValueCurve",values:R}),or=(R,y,{startTime:h,target:g,timeConstant:t})=>g+(y-g)*Math.exp((h-R)/t),qe=R=>R.type==="exponentialRampToValue",_i=R=>R.type==="linearRampToValue",Re=R=>qe(R)||_i(R),ts=R=>R.type==="setValue",ge=R=>R.type==="setValueCurve",tn=(R,y,h,g)=>{const t=R[y];return t===void 0?g:Re(t)||ts(t)?t.value:ge(t)?t.values[t.values.length-1]:or(h,tn(R,y-1,t.startTime,g),t)},Vs=(R,y,h,g,t)=>h===void 0?[g.insertTime,t]:Re(h)?[h.endTime,h.value]:ts(h)?[h.startTime,h.value]:ge(h)?[h.startTime+h.duration,h.values[h.values.length-1]]:[h.startTime,tn(R,y-1,h.startTime,t)],Wn=R=>R.type==="cancelAndHold",zn=R=>R.type==="cancelScheduledValues",Pe=R=>Wn(R)||zn(R)?R.cancelTime:qe(R)||_i(R)?R.endTime:R.startTime,Us=(R,y,h,{endTime:g,value:t})=>h===t?t:0<h&&0<t||h<0&&t<0?h*(t/h)**((R-y)/(g-y)):0,Ys=(R,y,h,{endTime:g,value:t})=>h+(R-y)/(g-y)*(t-h),Ga=(R,y)=>{const h=Math.floor(y),g=Math.ceil(y);return h===g?R[h]:(1-(y-h))*R[h]+(1-(g-y))*R[g]},Va=(R,{duration:y,startTime:h,values:g})=>{const t=(R-h)/y*(g.length-1);return Ga(g,t)},Ji=R=>R.type==="setTarget";class Ua{constructor(y){this._automationEvents=[],this._currenTime=0,this._defaultValue=y}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(y){const h=Pe(y);if(Wn(y)||zn(y)){const g=this._automationEvents.findIndex(e=>zn(y)&&ge(e)?e.startTime+e.duration>=h:Pe(e)>=h),t=this._automationEvents[g];if(g!==-1&&(this._automationEvents=this._automationEvents.slice(0,g)),Wn(y)){const e=this._automationEvents[this._automationEvents.length-1];if(t!==void 0&&Re(t)){if(Ji(e))throw new Error("The internal list is malformed.");const c=ge(e)?e.startTime+e.duration:Pe(e),s=ge(e)?e.values[e.values.length-1]:e.value,a=qe(t)?Us(h,c,s,t):Ys(h,c,s,t),n=qe(t)?ws(a,h,this._currenTime):Gs(a,h,this._currenTime);this._automationEvents.push(n)}e!==void 0&&Ji(e)&&this._automationEvents.push(Xn(this.getValue(h),h)),e!==void 0&&ge(e)&&e.startTime+e.duration>h&&(this._automationEvents[this._automationEvents.length-1]=ar(new Float32Array([6,7]),e.startTime,h-e.startTime))}}else{const g=this._automationEvents.findIndex(c=>Pe(c)>h),t=g===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[g-1];if(t!==void 0&&ge(t)&&Pe(t)+t.duration>h)return!1;const e=qe(y)?ws(y.value,y.endTime,this._currenTime):_i(y)?Gs(y.value,h,this._currenTime):y;if(g===-1)this._automationEvents.push(e);else{if(ge(y)&&h+y.duration>Pe(this._automationEvents[g]))return!1;this._automationEvents.splice(g,0,e)}}return!0}flush(y){const h=this._automationEvents.findIndex(g=>Pe(g)>y);if(h>1){const g=this._automationEvents.slice(h-1),t=g[0];Ji(t)&&g.unshift(Xn(tn(this._automationEvents,h-2,t.startTime,this._defaultValue),t.startTime)),this._automationEvents=g}}getValue(y){if(this._automationEvents.length===0)return this._defaultValue;const h=this._automationEvents.findIndex(c=>Pe(c)>y),g=this._automationEvents[h],t=(h===-1?this._automationEvents.length:h)-1,e=this._automationEvents[t];if(e!==void 0&&Ji(e)&&(g===void 0||!Re(g)||g.insertTime>y))return or(y,tn(this._automationEvents,t-1,e.startTime,this._defaultValue),e);if(e!==void 0&&ts(e)&&(g===void 0||!Re(g)))return e.value;if(e!==void 0&&ge(e)&&(g===void 0||!Re(g)||e.startTime+e.duration>y))return y<e.startTime+e.duration?Va(y,e):e.values[e.values.length-1];if(e!==void 0&&Re(e)&&(g===void 0||!Re(g)))return e.value;if(g!==void 0&&qe(g)){const[c,s]=Vs(this._automationEvents,t,e,g,this._defaultValue);return Us(y,c,s,g)}if(g!==void 0&&_i(g)){const[c,s]=Vs(this._automationEvents,t,e,g,this._defaultValue);return Ys(y,c,s,g)}return this._defaultValue}}const Ya=R=>({cancelTime:R,type:"cancelAndHold"}),Xa=R=>({cancelTime:R,type:"cancelScheduledValues"}),Wa=(R,y)=>({endTime:y,type:"exponentialRampToValue",value:R}),za=(R,y)=>({endTime:y,type:"linearRampToValue",value:R}),Ha=(R,y,h)=>({startTime:y,target:R,timeConstant:h,type:"setTarget"}),ba=()=>new DOMException("","AbortError"),Za=R=>(y,h,[g,t,e],c)=>{R(y[t],[h,g,e],s=>s[0]===h&&s[1]===g,c)},Ka=R=>(y,h,g)=>{const t=[];for(let e=0;e<g.numberOfInputs;e+=1)t.push(new Set);R.set(y,{activeInputs:t,outputs:new Set,passiveInputs:new WeakMap,renderer:h})},Ja=R=>(y,h)=>{R.set(y,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:h})},ni=new WeakSet,hr=new WeakMap,es=new WeakMap,lr=new WeakMap,is=new WeakMap,Mn=new WeakMap,ur=new WeakMap,Hn=new WeakMap,bn=new WeakMap,Zn=new WeakMap,fr={construct(){return fr}},Qa=R=>{try{const y=new Proxy(R,fr);new y}catch{return!1}return!0},Xs=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Ws=(R,y)=>{const h=[];let g=R.replace(/^[\s]+/,""),t=g.match(Xs);for(;t!==null;){const e=t[1].slice(1,-1),c=t[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,y).toString());h.push(c),g=g.slice(t[0].length).replace(/^[\s]+/,""),t=g.match(Xs)}return[h.join(";"),g]},zs=R=>{if(R!==void 0&&!Array.isArray(R))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Hs=R=>{if(!Qa(R))throw new TypeError("The given value for processorCtor should be a constructor.");if(R.prototype===null||typeof R.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},$a=(R,y,h,g,t,e,c,s,a,n,i,r,u)=>{let o=0;return(l,f,d={credentials:"omit"})=>{const v=i.get(l);if(v!==void 0&&v.has(f))return Promise.resolve();const p=n.get(l);if(p!==void 0){const T=p.get(f);if(T!==void 0)return T}const m=e(l),x=m.audioWorklet===void 0?t(f).then(([T,S])=>{const[E,C]=Ws(T,S),A=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return h(A)}).then(()=>{const T=u._AWGS.pop();if(T===void 0)throw new SyntaxError;g(m.currentTime,m.sampleRate,()=>T(class{},void 0,(S,E)=>{if(S.trim()==="")throw y();const C=bn.get(m);if(C!==void 0){if(C.has(S))throw y();Hs(E),zs(E.parameterDescriptors),C.set(S,E)}else Hs(E),zs(E.parameterDescriptors),bn.set(m,new Map([[S,E]]))},m.sampleRate,void 0,void 0))}):Promise.all([t(f),Promise.resolve(R(r,r))]).then(([[T,S],E])=>{const C=o+1;o=C;const[A,P]=Ws(T,S),I=`${A};((AudioWorkletProcessor,registerProcessor)=>{${P}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,N=new Blob([I],{type:"application/javascript; charset=utf-8"}),G=URL.createObjectURL(N);return m.audioWorklet.addModule(G,d).then(()=>{if(s(m))return m;const Y=c(m);return Y.audioWorklet.addModule(G,d).then(()=>Y)}).then(Y=>{if(a===null)throw new SyntaxError;try{new a(Y,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(G))});return p===void 0?n.set(l,new Map([[f,x]])):p.set(f,x),x.then(()=>{const T=i.get(l);T===void 0?i.set(l,new Set([f])):T.add(f)}).finally(()=>{const T=n.get(l);T!==void 0&&T.delete(f)}),x}},kt=(R,y)=>{const h=R.get(y);if(h===void 0)throw new Error("A value with the given key could not be found.");return h},Pn=(R,y)=>{const h=Array.from(R).filter(y);if(h.length>1)throw Error("More than one element was found.");if(h.length===0)throw Error("No element was found.");const[g]=h;return R.delete(g),g},cr=(R,y,h,g)=>{const t=kt(R,y),e=Pn(t,c=>c[0]===h&&c[1]===g);return t.size===0&&R.delete(y),e},Bi=R=>kt(ur,R),si=R=>{if(ni.has(R))throw new Error("The AudioNode is already stored.");ni.add(R),Bi(R).forEach(y=>y(!0))},dr=R=>"port"in R,wi=R=>{if(!ni.has(R))throw new Error("The AudioNode is not stored.");ni.delete(R),Bi(R).forEach(y=>y(!1))},Kn=(R,y)=>{!dr(R)&&y.every(h=>h.size===0)&&wi(R)},ja=(R,y,h,g,t,e,c,s,a,n,i,r,u)=>{const o=new WeakMap;return(l,f,d,v,p)=>{const{activeInputs:m,passiveInputs:x}=e(f),{outputs:T}=e(l),S=s(l),E=C=>{const A=a(f),P=a(l);if(C){const M=cr(x,l,d,v);R(m,l,M,!1),!p&&!r(l)&&h(P,A,d,v),u(f)&&si(f)}else{const M=g(m,l,d,v);y(x,v,M,!1),!p&&!r(l)&&t(P,A,d,v);const O=c(f);if(O===0)i(f)&&Kn(f,m);else{const F=o.get(f);F!==void 0&&clearTimeout(F),o.set(f,setTimeout(()=>{i(f)&&Kn(f,m)},O*1e3))}}};return n(T,[f,d,v],C=>C[0]===f&&C[1]===d&&C[2]===v,!0)?(S.add(E),i(l)?R(m,l,[d,v,E],!0):y(x,v,[l,d,E],!0),!0):!1}},ka=R=>(y,h,[g,t,e],c)=>{const s=y.get(g);s===void 0?y.set(g,new Set([[t,h,e]])):R(s,[t,h,e],a=>a[0]===t&&a[1]===h,c)},qa=R=>(y,h)=>{const g=R(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});h.connect(g).connect(y.destination);const t=()=>{h.removeEventListener("ended",t),h.disconnect(g),g.disconnect()};h.addEventListener("ended",t)},_a=R=>(y,h)=>{R(y).add(h)},to={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},eo=(R,y,h,g,t,e)=>class extends R{constructor(s,a){const n=t(s),i={...to,...a},r=g(n,i),u=e(n)?y():null;super(s,!1,r,u),this._nativeAnalyserNode=r}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(s){this._nativeAnalyserNode.fftSize=s}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(s){const a=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=s,!(s>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=a,h()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(s){const a=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=s,!(this._nativeAnalyserNode.maxDecibels>s))throw this._nativeAnalyserNode.minDecibels=a,h()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(s){this._nativeAnalyserNode.smoothingTimeConstant=s}getByteFrequencyData(s){this._nativeAnalyserNode.getByteFrequencyData(s)}getByteTimeDomainData(s){this._nativeAnalyserNode.getByteTimeDomainData(s)}getFloatFrequencyData(s){this._nativeAnalyserNode.getFloatFrequencyData(s)}getFloatTimeDomainData(s){this._nativeAnalyserNode.getFloatTimeDomainData(s)}},Gt=(R,y)=>R.context===y,io=(R,y,h)=>()=>{const g=new WeakMap,t=async(e,c)=>{let s=y(e);if(!Gt(s,c)){const n={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,fftSize:s.fftSize,maxDecibels:s.maxDecibels,minDecibels:s.minDecibels,smoothingTimeConstant:s.smoothingTimeConstant};s=R(c,n)}return g.set(c,s),await h(e,c,s),s};return{render(e,c){const s=g.get(c);return s!==void 0?Promise.resolve(s):t(e,c)}}},en=R=>{try{R.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},ae=()=>new DOMException("","IndexSizeError"),ns=R=>{R.getChannelData=(y=>h=>{try{return y.call(R,h)}catch(g){throw g.code===12?ae():g}})(R.getChannelData)},no={numberOfChannels:1},so=(R,y,h,g,t,e,c,s)=>{let a=null;return class vr{constructor(i){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:r,numberOfChannels:u,sampleRate:o}={...no,...i};a===null&&(a=new t(1,1,44100));const l=g!==null&&y(e,e)?new g({length:r,numberOfChannels:u,sampleRate:o}):a.createBuffer(u,r,o);if(l.numberOfChannels===0)throw h();return typeof l.copyFromChannel!="function"?(c(l),ns(l)):y(en,()=>en(l))||s(l),R.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===vr.prototype||R.has(i)}}},zt=-34028234663852886e22,Vt=-zt,ye=R=>ni.has(R),ro={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ao=(R,y,h,g,t,e,c,s)=>class extends R{constructor(n,i){const r=e(n),u={...ro,...i},o=t(r,u),l=c(r),f=l?y():null;super(n,!1,o,f),this._audioBufferSourceNodeRenderer=f,this._isBufferNullified=!1,this._isBufferSet=u.buffer!==null,this._nativeAudioBufferSourceNode=o,this._onended=null,this._playbackRate=h(this,l,o.playbackRate,Vt,zt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(n){if(this._nativeAudioBufferSourceNode.buffer=n,n!==null){if(this._isBufferSet)throw g();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(n){this._nativeAudioBufferSourceNode.loop=n}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(n){this._nativeAudioBufferSourceNode.loopEnd=n}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(n){this._nativeAudioBufferSourceNode.loopStart=n}get onended(){return this._onended}set onended(n){const i=typeof n=="function"?s(this,n):null;this._nativeAudioBufferSourceNode.onended=i;const r=this._nativeAudioBufferSourceNode.onended;this._onended=r!==null&&r===i?n:r}get playbackRate(){return this._playbackRate}start(n=0,i=0,r){if(this._nativeAudioBufferSourceNode.start(n,i,r),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=r===void 0?[n,i]:[n,i,r]),this.context.state!=="closed"){si(this);const u=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",u),ye(this)&&wi(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",u)}}stop(n=0){this._nativeAudioBufferSourceNode.stop(n),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=n)}},oo=(R,y,h,g,t)=>()=>{const e=new WeakMap;let c=null,s=null;const a=async(n,i)=>{let r=h(n);const u=Gt(r,i);if(!u){const o={buffer:r.buffer,channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,loop:r.loop,loopEnd:r.loopEnd,loopStart:r.loopStart,playbackRate:r.playbackRate.value};r=y(i,o),c!==null&&r.start(...c),s!==null&&r.stop(s)}return e.set(i,r),u?await R(i,n.playbackRate,r.playbackRate):await g(i,n.playbackRate,r.playbackRate),await t(n,i,r),r};return{set start(n){c=n},set stop(n){s=n},render(n,i){const r=e.get(i);return r!==void 0?Promise.resolve(r):a(n,i)}}},ho=R=>"playbackRate"in R,lo=R=>"frequency"in R&&"gain"in R,uo=R=>"offset"in R,fo=R=>!("frequency"in R)&&"gain"in R,co=R=>"detune"in R&&"frequency"in R,vo=R=>"pan"in R,Ut=R=>kt(hr,R),Gi=R=>kt(lr,R),Jn=(R,y)=>{const{activeInputs:h}=Ut(R);h.forEach(t=>t.forEach(([e])=>{y.includes(R)||Jn(e,[...y,R])}));const g=ho(R)?[R.playbackRate]:dr(R)?Array.from(R.parameters.values()):lo(R)?[R.Q,R.detune,R.frequency,R.gain]:uo(R)?[R.offset]:fo(R)?[R.gain]:co(R)?[R.detune,R.frequency]:vo(R)?[R.pan]:[];for(const t of g){const e=Gi(t);e!==void 0&&e.activeInputs.forEach(([c])=>Jn(c,y))}ye(R)&&wi(R)},pr=R=>{Jn(R.destination,[])},po=R=>R===void 0||typeof R=="number"||typeof R=="string"&&(R==="balanced"||R==="interactive"||R==="playback"),mo=(R,y,h,g,t,e,c,s,a)=>class extends R{constructor(i={}){if(a===null)throw new Error("Missing the native AudioContext constructor.");let r;try{r=new a(i)}catch(l){throw l.code===12&&l.message==="sampleRate is not in range"?h():l}if(r===null)throw g();if(!po(i.latencyHint))throw new TypeError(`The provided value '${i.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(i.sampleRate!==void 0&&r.sampleRate!==i.sampleRate)throw h();super(r,2);const{latencyHint:u}=i,{sampleRate:o}=r;if(this._baseLatency=typeof r.baseLatency=="number"?r.baseLatency:u==="balanced"?512/o:u==="interactive"||u===void 0?256/o:u==="playback"?1024/o:Math.max(2,Math.min(128,Math.round(u*o/128)))*128/o,this._nativeAudioContext=r,a.name==="webkitAudioContext"?(this._nativeGainNode=r.createGain(),this._nativeOscillatorNode=r.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(r.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,r.state==="running"){this._state="suspended";const l=()=>{this._state==="suspended"&&(this._state=null),r.removeEventListener("statechange",l)};r.addEventListener("statechange",l)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw y()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),pr(this)}))}createMediaElementSource(i){return new t(this,{mediaElement:i})}createMediaStreamDestination(){return new e(this)}createMediaStreamSource(i){return new c(this,{mediaStream:i})}createMediaStreamTrackSource(i){return new s(this,{mediaStreamTrack:i})}resume(){return this._state==="suspended"?new Promise((i,r)=>{const u=()=>{this._nativeAudioContext.removeEventListener("statechange",u),this._nativeAudioContext.state==="running"?i():this.resume().then(i,r)};this._nativeAudioContext.addEventListener("statechange",u)}):this._nativeAudioContext.resume().catch(i=>{throw i===void 0||i.code===15?y():i})}suspend(){return this._nativeAudioContext.suspend().catch(i=>{throw i===void 0?y():i})}},go=(R,y,h,g,t,e,c,s)=>class extends R{constructor(n,i){const r=e(n),u=c(r),o=t(r,i,u),l=u?y(s):null;super(n,!1,o,l),this._isNodeOfNativeOfflineAudioContext=u,this._nativeAudioDestinationNode=o}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(n){if(this._isNodeOfNativeOfflineAudioContext)throw g();if(n>this._nativeAudioDestinationNode.maxChannelCount)throw h();this._nativeAudioDestinationNode.channelCount=n}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(n){if(this._isNodeOfNativeOfflineAudioContext)throw g();this._nativeAudioDestinationNode.channelCountMode=n}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},xo=R=>{const y=new WeakMap,h=async(g,t)=>{const e=t.destination;return y.set(t,e),await R(g,t,e),e};return{render(g,t){const e=y.get(t);return e!==void 0?Promise.resolve(e):h(g,t)}}},yo=(R,y,h,g,t,e,c,s)=>(a,n)=>{const i=n.listener,r=()=>{const T=new Float32Array(1),S=y(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=c(n);let C=!1,A=[0,0,-1,0,1,0],P=[0,0,0];const M=()=>{if(C)return;C=!0;const N=g(n,256,9,0);N.onaudioprocess=({inputBuffer:G})=>{const Y=[e(G,T,0),e(G,T,1),e(G,T,2),e(G,T,3),e(G,T,4),e(G,T,5)];Y.some((W,D)=>W!==A[D])&&(i.setOrientation(...Y),A=Y);const z=[e(G,T,6),e(G,T,7),e(G,T,8)];z.some((W,D)=>W!==P[D])&&(i.setPosition(...z),P=z)},S.connect(N)},O=N=>G=>{G!==A[N]&&(A[N]=G,i.setOrientation(...A))},F=N=>G=>{G!==P[N]&&(P[N]=G,i.setPosition(...P))},I=(N,G,Y)=>{const z=h(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:G});z.connect(S,0,N),z.start(),Object.defineProperty(z.offset,"defaultValue",{get(){return G}});const W=R({context:a},E,z.offset,Vt,zt);return s(W,"value",D=>()=>D.call(W),D=>L=>{try{D.call(W,L)}catch(B){if(B.code!==9)throw B}M(),E&&Y(L)}),W.cancelAndHoldAtTime=(D=>E?()=>{throw t()}:(...L)=>{const B=D.apply(W,L);return M(),B})(W.cancelAndHoldAtTime),W.cancelScheduledValues=(D=>E?()=>{throw t()}:(...L)=>{const B=D.apply(W,L);return M(),B})(W.cancelScheduledValues),W.exponentialRampToValueAtTime=(D=>E?()=>{throw t()}:(...L)=>{const B=D.apply(W,L);return M(),B})(W.exponentialRampToValueAtTime),W.linearRampToValueAtTime=(D=>E?()=>{throw t()}:(...L)=>{const B=D.apply(W,L);return M(),B})(W.linearRampToValueAtTime),W.setTargetAtTime=(D=>E?()=>{throw t()}:(...L)=>{const B=D.apply(W,L);return M(),B})(W.setTargetAtTime),W.setValueAtTime=(D=>E?()=>{throw t()}:(...L)=>{const B=D.apply(W,L);return M(),B})(W.setValueAtTime),W.setValueCurveAtTime=(D=>E?()=>{throw t()}:(...L)=>{const B=D.apply(W,L);return M(),B})(W.setValueCurveAtTime),W};return{forwardX:I(0,0,O(0)),forwardY:I(1,0,O(1)),forwardZ:I(2,-1,O(2)),positionX:I(6,0,F(0)),positionY:I(7,0,F(1)),positionZ:I(8,0,F(2)),upX:I(3,0,O(3)),upY:I(4,1,O(4)),upZ:I(5,0,O(5))}},{forwardX:u,forwardY:o,forwardZ:l,positionX:f,positionY:d,positionZ:v,upX:p,upY:m,upZ:x}=i.forwardX===void 0?r():i;return{get forwardX(){return u},get forwardY(){return o},get forwardZ(){return l},get positionX(){return f},get positionY(){return d},get positionZ(){return v},get upX(){return p},get upY(){return m},get upZ(){return x}}},nn=R=>"context"in R,Vi=R=>nn(R[0]),Ke=(R,y,h,g)=>{for(const t of R)if(h(t)){if(g)return!1;throw Error("The set contains at least one similar element.")}return R.add(y),!0},bs=(R,y,[h,g],t)=>{Ke(R,[y,h,g],e=>e[0]===y&&e[1]===h,t)},Zs=(R,[y,h,g],t)=>{const e=R.get(y);e===void 0?R.set(y,new Set([[h,g]])):Ke(e,[h,g],c=>c[0]===h,t)},hi=R=>"inputs"in R,sn=(R,y,h,g)=>{if(hi(y)){const t=y.inputs[g];return R.connect(t,h,0),[t,h,0]}return R.connect(y,h,g),[y,h,g]},mr=(R,y,h)=>{for(const g of R)if(g[0]===y&&g[1]===h)return R.delete(g),g;return null},To=(R,y,h)=>Pn(R,g=>g[0]===y&&g[1]===h),gr=(R,y)=>{if(!Bi(R).delete(y))throw new Error("Missing the expected event listener.")},xr=(R,y,h)=>{const g=kt(R,y),t=Pn(g,e=>e[0]===h);return g.size===0&&R.delete(y),t},rn=(R,y,h,g)=>{hi(y)?R.disconnect(y.inputs[g],h,0):R.disconnect(y,h,g)},mt=R=>kt(es,R),xi=R=>kt(is,R),ze=R=>Hn.has(R),ki=R=>!ni.has(R),Ks=(R,y)=>new Promise(h=>{if(y!==null)h(!0);else{const g=R.createScriptProcessor(256,1,1),t=R.createGain(),e=R.createBuffer(1,2,44100),c=e.getChannelData(0);c[0]=1,c[1]=1;const s=R.createBufferSource();s.buffer=e,s.loop=!0,s.connect(g).connect(R.destination),s.connect(t),s.disconnect(t),g.onaudioprocess=a=>{const n=a.inputBuffer.getChannelData(0);Array.prototype.some.call(n,i=>i===1)?h(!0):h(!1),s.stop(),g.onaudioprocess=null,s.disconnect(g),g.disconnect(R.destination)},s.start()}}),Vn=(R,y)=>{const h=new Map;for(const g of R)for(const t of g){const e=h.get(t);h.set(t,e===void 0?1:e+1)}h.forEach((g,t)=>y(t,g))},an=R=>"context"in R,So=R=>{const y=new Map;R.connect=(h=>(g,t=0,e=0)=>{const c=an(g)?h(g,t,e):h(g,t),s=y.get(g);return s===void 0?y.set(g,[{input:e,output:t}]):s.every(a=>a.input!==e||a.output!==t)&&s.push({input:e,output:t}),c})(R.connect.bind(R)),R.disconnect=(h=>(g,t,e)=>{if(h.apply(R),g===void 0)y.clear();else if(typeof g=="number")for(const[c,s]of y){const a=s.filter(n=>n.output!==g);a.length===0?y.delete(c):y.set(c,a)}else if(y.has(g))if(t===void 0)y.delete(g);else{const c=y.get(g);if(c!==void 0){const s=c.filter(a=>a.output!==t&&(a.input!==e||e===void 0));s.length===0?y.delete(g):y.set(g,s)}}for(const[c,s]of y)s.forEach(a=>{an(c)?R.connect(c,a.output,a.input):R.connect(c,a.output)})})(R.disconnect)},Eo=(R,y,h,g)=>{const{activeInputs:t,passiveInputs:e}=Gi(y),{outputs:c}=Ut(R),s=Bi(R),a=n=>{const i=mt(R),r=xi(y);if(n){const u=xr(e,R,h);bs(t,R,u,!1),!g&&!ze(R)&&i.connect(r,h)}else{const u=To(t,R,h);Zs(e,u,!1),!g&&!ze(R)&&i.disconnect(r,h)}};return Ke(c,[y,h],n=>n[0]===y&&n[1]===h,!0)?(s.add(a),ye(R)?bs(t,R,[h,a],!0):Zs(e,[R,h,a],!0),!0):!1},Co=(R,y,h,g)=>{const{activeInputs:t,passiveInputs:e}=Ut(y),c=mr(t[g],R,h);return c===null?[cr(e,R,h,g)[2],!1]:[c[2],!0]},Ao=(R,y,h)=>{const{activeInputs:g,passiveInputs:t}=Gi(y),e=mr(g,R,h);return e===null?[xr(t,R,h)[1],!1]:[e[2],!0]},ss=(R,y,h,g,t)=>{const[e,c]=Co(R,h,g,t);if(e!==null&&(gr(R,e),c&&!y&&!ze(R)&&rn(mt(R),mt(h),g,t)),ye(h)){const{activeInputs:s}=Ut(h);Kn(h,s)}},rs=(R,y,h,g)=>{const[t,e]=Ao(R,h,g);t!==null&&(gr(R,t),e&&!y&&!ze(R)&&mt(R).disconnect(xi(h),g))},Mo=(R,y)=>{const h=Ut(R),g=[];for(const t of h.outputs)Vi(t)?ss(R,y,...t):rs(R,y,...t),g.push(t[0]);return h.outputs.clear(),g},Po=(R,y,h)=>{const g=Ut(R),t=[];for(const e of g.outputs)e[1]===h&&(Vi(e)?ss(R,y,...e):rs(R,y,...e),t.push(e[0]),g.outputs.delete(e));return t},Ro=(R,y,h,g,t)=>{const e=Ut(R);return Array.from(e.outputs).filter(c=>c[0]===h&&(g===void 0||c[1]===g)&&(t===void 0||c[2]===t)).map(c=>(Vi(c)?ss(R,y,...c):rs(R,y,...c),e.outputs.delete(c),c[0]))},Oo=(R,y,h,g,t,e,c,s,a,n,i,r,u,o,l,f)=>class extends n{constructor(v,p,m,x){super(m),this._context=v,this._nativeAudioNode=m;const T=i(v);r(T)&&h(Ks,()=>Ks(T,f))!==!0&&So(m),es.set(this,m),ur.set(this,new Set),v.state!=="closed"&&p&&si(this),R(this,x,m)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,p=0,m=0){if(p<0||p>=this._nativeAudioNode.numberOfOutputs)throw t();const x=i(this._context),T=l(x);if(u(v)||o(v))throw e();if(nn(v)){const C=mt(v);try{const P=sn(this._nativeAudioNode,C,p,m),M=ki(this);(T||M)&&this._nativeAudioNode.disconnect(...P),this.context.state!=="closed"&&!M&&ki(v)&&si(v)}catch(P){throw P.code===12?e():P}if(y(this,v,p,m,T)){const P=a([this],v);Vn(P,g(T))}return v}const S=xi(v);if(S.name==="playbackRate"&&S.maxValue===1024)throw c();try{this._nativeAudioNode.connect(S,p),(T||ki(this))&&this._nativeAudioNode.disconnect(S,p)}catch(C){throw C.code===12?e():C}if(Eo(this,v,p,T)){const C=a([this],v);Vn(C,g(T))}}disconnect(v,p,m){let x;const T=i(this._context),S=l(T);if(v===void 0)x=Mo(this,S);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw t();x=Po(this,S,v)}else{if(p!==void 0&&(p<0||p>=this.numberOfOutputs)||nn(v)&&m!==void 0&&(m<0||m>=v.numberOfInputs))throw t();if(x=Ro(this,S,v,p,m),x.length===0)throw e()}for(const E of x){const C=a([this],E);Vn(C,s)}}},Lo=(R,y,h,g,t,e,c,s,a,n,i,r,u)=>(o,l,f,d=null,v=null)=>{const p=new Ua(f.defaultValue),m=l?g(p):null,x={get defaultValue(){return f.defaultValue},get maxValue(){return d===null?f.maxValue:d},get minValue(){return v===null?f.minValue:v},get value(){return f.value},set value(T){f.value=T,x.setValueAtTime(T,o.context.currentTime)},cancelAndHoldAtTime(T){if(typeof f.cancelAndHoldAtTime=="function")m===null&&p.flush(o.context.currentTime),p.add(t(T)),f.cancelAndHoldAtTime(T);else{const S=Array.from(p).pop();m===null&&p.flush(o.context.currentTime),p.add(t(T));const E=Array.from(p).pop();f.cancelScheduledValues(T),S!==E&&E!==void 0&&(E.type==="exponentialRampToValue"?f.exponentialRampToValueAtTime(E.value,E.endTime):E.type==="linearRampToValue"?f.linearRampToValueAtTime(E.value,E.endTime):E.type==="setValue"?f.setValueAtTime(E.value,E.startTime):E.type==="setValueCurve"&&f.setValueCurveAtTime(E.values,E.startTime,E.duration))}return x},cancelScheduledValues(T){return m===null&&p.flush(o.context.currentTime),p.add(e(T)),f.cancelScheduledValues(T),x},exponentialRampToValueAtTime(T,S){if(T===0)throw new RangeError;if(!Number.isFinite(S)||S<0)throw new RangeError;return m===null&&p.flush(o.context.currentTime),p.add(c(T,S)),f.exponentialRampToValueAtTime(T,S),x},linearRampToValueAtTime(T,S){return m===null&&p.flush(o.context.currentTime),p.add(s(T,S)),f.linearRampToValueAtTime(T,S),x},setTargetAtTime(T,S,E){return m===null&&p.flush(o.context.currentTime),p.add(a(T,S,E)),f.setTargetAtTime(T,S,E),x},setValueAtTime(T,S){return m===null&&p.flush(o.context.currentTime),p.add(n(T,S)),f.setValueAtTime(T,S),x},setValueCurveAtTime(T,S,E){const C=T instanceof Float32Array?T:new Float32Array(T);if(r!==null&&r.name==="webkitAudioContext"){const A=S+E,P=o.context.sampleRate,M=Math.ceil(S*P),O=Math.floor(A*P),F=O-M,I=new Float32Array(F);for(let G=0;G<F;G+=1){const Y=(C.length-1)/E*((M+G)/P-S),z=Math.floor(Y),W=Math.ceil(Y);I[G]=z===W?C[z]:(1-(Y-z))*C[z]+(1-(W-Y))*C[W]}m===null&&p.flush(o.context.currentTime),p.add(i(I,S,E)),f.setValueCurveAtTime(I,S,E);const N=O/P;N<A&&u(x,I[I.length-1],N),u(x,C[C.length-1],A)}else m===null&&p.flush(o.context.currentTime),p.add(i(C,S,E)),f.setValueCurveAtTime(C,S,E);return x}};return h.set(x,f),y.set(x,o),R(x,m),x},Fo=R=>({replay(y){for(const h of R)if(h.type==="exponentialRampToValue"){const{endTime:g,value:t}=h;y.exponentialRampToValueAtTime(t,g)}else if(h.type==="linearRampToValue"){const{endTime:g,value:t}=h;y.linearRampToValueAtTime(t,g)}else if(h.type==="setTarget"){const{startTime:g,target:t,timeConstant:e}=h;y.setTargetAtTime(t,g,e)}else if(h.type==="setValue"){const{startTime:g,value:t}=h;y.setValueAtTime(t,g)}else if(h.type==="setValueCurve"){const{duration:g,startTime:t,values:e}=h;y.setValueCurveAtTime(e,t,g)}else throw new Error("Can't apply an unknown automation.")}});class yr{constructor(y){this._map=new Map(y)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(y,h=null){return this._map.forEach((g,t)=>y.call(h,g,t,this))}get(y){return this._map.get(y)}has(y){return this._map.has(y)}keys(){return this._map.keys()}values(){return this._map.values()}}const Io={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Do=(R,y,h,g,t,e,c,s,a,n,i,r,u,o)=>class extends y{constructor(f,d,v){var p;const m=s(f),x=a(m),T=i({...Io,...v});u(T);const S=bn.get(m),E=S==null?void 0:S.get(d),C=x||m.state!=="closed"?m:(p=c(m))!==null&&p!==void 0?p:m,A=t(C,x?null:f.baseLatency,n,d,E,T),P=x?g(d,T,E):null;super(f,!0,A,P);const M=[];A.parameters.forEach((F,I)=>{const N=h(this,x,F);M.push([I,N])}),this._nativeAudioWorkletNode=A,this._onprocessorerror=null,this._parameters=new yr(M),x&&R(m,this);const{activeInputs:O}=e(this);r(A,O)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(f){const d=typeof f=="function"?o(this,f):null;this._nativeAudioWorkletNode.onprocessorerror=d;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===d?f:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function on(R,y,h,g,t){if(typeof R.copyFromChannel=="function")y[h].byteLength===0&&(y[h]=new Float32Array(128)),R.copyFromChannel(y[h],g,t);else{const e=R.getChannelData(g);if(y[h].byteLength===0)y[h]=e.slice(t,t+128);else{const c=new Float32Array(e.buffer,t*Float32Array.BYTES_PER_ELEMENT,128);y[h].set(c)}}}const Tr=(R,y,h,g,t)=>{typeof R.copyToChannel=="function"?y[h].byteLength!==0&&R.copyToChannel(y[h],g,t):y[h].byteLength!==0&&R.getChannelData(g).set(y[h],t)},hn=(R,y)=>{const h=[];for(let g=0;g<R;g+=1){const t=[],e=typeof y=="number"?y:y[g];for(let c=0;c<e;c+=1)t.push(new Float32Array(128));h.push(t)}return h},No=(R,y)=>{const h=kt(Zn,R),g=mt(y);return kt(h,g)},Bo=async(R,y,h,g,t,e,c)=>{const s=y===null?Math.ceil(R.context.length/128)*128:y.length,a=g.channelCount*g.numberOfInputs,n=t.reduce((d,v)=>d+v,0),i=n===0?null:h.createBuffer(n,s,h.sampleRate);if(e===void 0)throw new Error("Missing the processor constructor.");const r=Ut(R),u=await No(h,R),o=hn(g.numberOfInputs,g.channelCount),l=hn(g.numberOfOutputs,t),f=Array.from(R.parameters.keys()).reduce((d,v)=>({...d,[v]:new Float32Array(128)}),{});for(let d=0;d<s;d+=128){if(g.numberOfInputs>0&&y!==null)for(let v=0;v<g.numberOfInputs;v+=1)for(let p=0;p<g.channelCount;p+=1)on(y,o[v],p,p,d);e.parameterDescriptors!==void 0&&y!==null&&e.parameterDescriptors.forEach(({name:v},p)=>{on(y,f,v,a+p,d)});for(let v=0;v<g.numberOfInputs;v+=1)for(let p=0;p<t[v];p+=1)l[v][p].byteLength===0&&(l[v][p]=new Float32Array(128));try{const v=o.map((m,x)=>r.activeInputs[x].size===0?[]:m),p=c(d/h.sampleRate,h.sampleRate,()=>u.process(v,l,f));if(i!==null)for(let m=0,x=0;m<g.numberOfOutputs;m+=1){for(let T=0;T<t[m];T+=1)Tr(i,l[m],T,x+T,d);x+=t[m]}if(!p)break}catch(v){R.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return i},wo=(R,y,h,g,t,e,c,s,a,n,i,r,u,o,l,f)=>(d,v,p)=>{const m=new WeakMap;let x=null;const T=async(S,E)=>{let C=i(S),A=null;const P=Gt(C,E),M=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(r===null){const O=M.reduce((G,Y)=>G+Y,0),F=t(E,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),I=[];for(let G=0;G<S.numberOfOutputs;G+=1)I.push(g(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:M[G]}));const N=c(E,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});N.connect=y.bind(null,I),N.disconnect=a.bind(null,I),A=[F,I,N]}else P||(C=new r(E,d));if(m.set(E,A===null?C:A[2]),A!==null){if(x===null){if(p===void 0)throw new Error("Missing the processor constructor.");if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Y=S.channelCount*S.numberOfInputs,z=p.parameterDescriptors===void 0?0:p.parameterDescriptors.length,W=Y+z;x=Bo(S,W===0?null:await(async()=>{const L=new u(W,Math.ceil(S.context.length/128)*128,E.sampleRate),B=[],w=[];for(let X=0;X<v.numberOfInputs;X+=1)B.push(c(L,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),w.push(t(L,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const V=await Promise.all(Array.from(S.parameters.values()).map(async X=>{const H=e(L,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:X.value});return await o(L,X,H.offset),H})),U=g(L,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Y+z)});for(let X=0;X<v.numberOfInputs;X+=1){B[X].connect(w[X]);for(let H=0;H<v.channelCount;H+=1)w[X].connect(U,H,X*v.channelCount+H)}for(const[X,H]of V.entries())H.connect(U,0,Y+X),H.start(0);return U.connect(L.destination),await Promise.all(B.map(X=>l(S,L,X))),f(L)})(),E,v,M,p,n)}const O=await x,F=h(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[I,N,G]=A;O!==null&&(F.buffer=O,F.start(0)),F.connect(I);for(let Y=0,z=0;Y<S.numberOfOutputs;Y+=1){const W=N[Y];for(let D=0;D<M[Y];D+=1)I.connect(W,z+D,D);z+=M[Y]}return G}if(P)for(const[O,F]of S.parameters.entries())await R(E,F,C.parameters.get(O));else for(const[O,F]of S.parameters.entries())await o(E,F,C.parameters.get(O));return await l(S,E,C),C};return{render(S,E){s(E,S);const C=m.get(E);return C!==void 0?Promise.resolve(C):T(S,E)}}},Go=(R,y,h,g,t,e,c,s,a,n,i,r,u,o,l,f,d,v,p,m)=>class extends l{constructor(T,S){super(T,S),this._nativeContext=T,this._audioWorklet=R===void 0?void 0:{addModule:(E,C)=>R(this,E,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new y(this)}createBiquadFilter(){return new t(this)}createBuffer(T,S,E){return new h({length:S,numberOfChannels:T,sampleRate:E})}createBufferSource(){return new g(this)}createChannelMerger(T=6){return new e(this,{numberOfInputs:T})}createChannelSplitter(T=6){return new c(this,{numberOfOutputs:T})}createConstantSource(){return new s(this)}createConvolver(){return new a(this)}createDelay(T=1){return new i(this,{maxDelayTime:T})}createDynamicsCompressor(){return new r(this)}createGain(){return new u(this)}createIIRFilter(T,S){return new o(this,{feedback:S,feedforward:T})}createOscillator(){return new f(this)}createPanner(){return new d(this)}createPeriodicWave(T,S,E={disableNormalization:!1}){return new v(this,{...E,imag:S,real:T})}createStereoPanner(){return new p(this)}createWaveShaper(){return new m(this)}decodeAudioData(T,S,E){return n(this._nativeContext,T).then(C=>(typeof S=="function"&&S(C),C),C=>{throw typeof E=="function"&&E(C),C})}},Vo={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Uo=(R,y,h,g,t,e,c,s)=>class extends R{constructor(n,i){const r=e(n),u={...Vo,...i},o=t(r,u),l=c(r),f=l?h():null;super(n,!1,o,f),this._Q=y(this,l,o.Q,Vt,zt),this._detune=y(this,l,o.detune,1200*Math.log2(Vt),-1200*Math.log2(Vt)),this._frequency=y(this,l,o.frequency,n.sampleRate/2,0),this._gain=y(this,l,o.gain,40*Math.log10(Vt),zt),this._nativeBiquadFilterNode=o,s(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(n){this._nativeBiquadFilterNode.type=n}getFrequencyResponse(n,i,r){try{this._nativeBiquadFilterNode.getFrequencyResponse(n,i,r)}catch(u){throw u.code===11?g():u}if(n.length!==i.length||i.length!==r.length)throw g()}},Yo=(R,y,h,g,t)=>()=>{const e=new WeakMap,c=async(s,a)=>{let n=h(s);const i=Gt(n,a);if(!i){const r={Q:n.Q.value,channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,detune:n.detune.value,frequency:n.frequency.value,gain:n.gain.value,type:n.type};n=y(a,r)}return e.set(a,n),i?(await R(a,s.Q,n.Q),await R(a,s.detune,n.detune),await R(a,s.frequency,n.frequency),await R(a,s.gain,n.gain)):(await g(a,s.Q,n.Q),await g(a,s.detune,n.detune),await g(a,s.frequency,n.frequency),await g(a,s.gain,n.gain)),await t(s,a,n),n};return{render(s,a){const n=e.get(a);return n!==void 0?Promise.resolve(n):c(s,a)}}},Xo=(R,y)=>(h,g)=>{const t=y.get(h);if(t!==void 0)return t;const e=R.get(h);if(e!==void 0)return e;try{const c=g();return c instanceof Promise?(R.set(h,c),c.catch(()=>!1).then(s=>(R.delete(h),y.set(h,s),s))):(y.set(h,c),c)}catch{return y.set(h,!1),!1}},Wo={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},zo=(R,y,h,g,t)=>class extends R{constructor(c,s){const a=g(c),n={...Wo,...s},i=h(a,n),r=t(a)?y():null;super(c,!1,i,r)}},Ho=(R,y,h)=>()=>{const g=new WeakMap,t=async(e,c)=>{let s=y(e);if(!Gt(s,c)){const n={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfInputs:s.numberOfInputs};s=R(c,n)}return g.set(c,s),await h(e,c,s),s};return{render(e,c){const s=g.get(c);return s!==void 0?Promise.resolve(s):t(e,c)}}},bo={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Zo=(R,y,h,g,t,e)=>class extends R{constructor(s,a){const n=g(s),i=e({...bo,...a}),r=h(n,i),u=t(n)?y():null;super(s,!1,r,u)}},Ko=(R,y,h)=>()=>{const g=new WeakMap,t=async(e,c)=>{let s=y(e);if(!Gt(s,c)){const n={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfOutputs:s.numberOfOutputs};s=R(c,n)}return g.set(c,s),await h(e,c,s),s};return{render(e,c){const s=g.get(c);return s!==void 0?Promise.resolve(s):t(e,c)}}},Jo=R=>(y,h,g)=>R(h,y,g),Qo=R=>(y,h,g=0,t=0)=>{const e=y[g];if(e===void 0)throw R();return an(h)?e.connect(h,0,t):e.connect(h,0)},$o=R=>(y,h)=>{const g=R(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),t=y.createBuffer(1,2,44100);return g.buffer=t,g.loop=!0,g.connect(h),g.start(),()=>{g.stop(),g.disconnect(h)}},jo={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},ko=(R,y,h,g,t,e,c)=>class extends R{constructor(a,n){const i=t(a),r={...jo,...n},u=g(i,r),o=e(i),l=o?h():null;super(a,!1,u,l),this._constantSourceNodeRenderer=l,this._nativeConstantSourceNode=u,this._offset=y(this,o,u.offset,Vt,zt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(a){const n=typeof a=="function"?c(this,a):null;this._nativeConstantSourceNode.onended=n;const i=this._nativeConstantSourceNode.onended;this._onended=i!==null&&i===n?a:i}start(a=0){if(this._nativeConstantSourceNode.start(a),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=a),this.context.state!=="closed"){si(this);const n=()=>{this._nativeConstantSourceNode.removeEventListener("ended",n),ye(this)&&wi(this)};this._nativeConstantSourceNode.addEventListener("ended",n)}}stop(a=0){this._nativeConstantSourceNode.stop(a),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=a)}},qo=(R,y,h,g,t)=>()=>{const e=new WeakMap;let c=null,s=null;const a=async(n,i)=>{let r=h(n);const u=Gt(r,i);if(!u){const o={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,offset:r.offset.value};r=y(i,o),c!==null&&r.start(c),s!==null&&r.stop(s)}return e.set(i,r),u?await R(i,n.offset,r.offset):await g(i,n.offset,r.offset),await t(n,i,r),r};return{set start(n){c=n},set stop(n){s=n},render(n,i){const r=e.get(i);return r!==void 0?Promise.resolve(r):a(n,i)}}},_o=R=>y=>(R[0]=y,R[0]),th={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},eh=(R,y,h,g,t,e)=>class extends R{constructor(s,a){const n=g(s),i={...th,...a},r=h(n,i),o=t(n)?y():null;super(s,!1,r,o),this._isBufferNullified=!1,this._nativeConvolverNode=r,i.buffer!==null&&e(this,i.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(s){if(this._nativeConvolverNode.buffer=s,s===null&&this._nativeConvolverNode.buffer!==null){const a=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=a.createBuffer(1,1,a.sampleRate),this._isBufferNullified=!0,e(this,0)}else this._isBufferNullified=!1,e(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(s){this._nativeConvolverNode.normalize=s}},ih=(R,y,h)=>()=>{const g=new WeakMap,t=async(e,c)=>{let s=y(e);if(!Gt(s,c)){const n={buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,disableNormalization:!s.normalize};s=R(c,n)}return g.set(c,s),hi(s)?await h(e,c,s.inputs[0]):await h(e,c,s),s};return{render(e,c){const s=g.get(c);return s!==void 0?Promise.resolve(s):t(e,c)}}},nh=(R,y)=>(h,g,t)=>{if(y===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new y(h,g,t)}catch(e){throw e.name==="SyntaxError"?R():e}},sh=()=>new DOMException("","DataCloneError"),Js=R=>{const{port1:y,port2:h}=new MessageChannel;return new Promise(g=>{const t=()=>{h.onmessage=null,y.close(),h.close(),g()};h.onmessage=()=>t();try{y.postMessage(R,[R])}catch{}finally{t()}})},rh=(R,y,h,g,t,e,c,s,a,n,i)=>(r,u)=>{const o=c(r)?r:e(r);if(t.has(u)){const l=h();return Promise.reject(l)}try{t.add(u)}catch{}return y(a,()=>a(o))?o.decodeAudioData(u).then(l=>(Js(u).catch(()=>{}),y(s,()=>s(l))||i(l),R.add(l),l)):new Promise((l,f)=>{const d=async()=>{try{await Js(u)}catch{}},v=p=>{f(p),d()};try{o.decodeAudioData(u,p=>{typeof p.copyFromChannel!="function"&&(n(p),ns(p)),R.add(p),d().then(()=>l(p))},p=>{v(p===null?g():p)})}catch(p){v(p)}})},ah=(R,y,h,g,t,e,c,s)=>(a,n)=>{const i=y.get(a);if(i===void 0)throw new Error("Missing the expected cycle count.");const r=e(a.context),u=s(r);if(i===n){if(y.delete(a),!u&&c(a)){const o=g(a),{outputs:l}=h(a);for(const f of l)if(Vi(f)){const d=g(f[0]);R(o,d,f[1],f[2])}else{const d=t(f[0]);o.connect(d,f[1])}}}else y.set(a,i-n)},oh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},hh=(R,y,h,g,t,e,c)=>class extends R{constructor(a,n){const i=t(a),r={...oh,...n},u=g(i,r),o=e(i),l=o?h(r.maxDelayTime):null;super(a,!1,u,l),this._delayTime=y(this,o,u.delayTime),c(this,r.maxDelayTime)}get delayTime(){return this._delayTime}},lh=(R,y,h,g,t)=>e=>{const c=new WeakMap,s=async(a,n)=>{let i=h(a);const r=Gt(i,n);if(!r){const u={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,delayTime:i.delayTime.value,maxDelayTime:e};i=y(n,u)}return c.set(n,i),r?await R(n,a.delayTime,i.delayTime):await g(n,a.delayTime,i.delayTime),await t(a,n,i),i};return{render(a,n){const i=c.get(n);return i!==void 0?Promise.resolve(i):s(a,n)}}},uh=R=>(y,h,g,t)=>R(y[t],e=>e[0]===h&&e[1]===g),fh=R=>(y,h)=>{R(y).delete(h)},ch=R=>"delayTime"in R,dh=(R,y,h)=>function g(t,e){const c=nn(e)?e:h(R,e);if(ch(c))return[];if(t[0]===c)return[t];if(t.includes(c))return[];const{outputs:s}=y(c);return Array.from(s).map(a=>g([...t,c],a[0])).reduce((a,n)=>a.concat(n),[])},Qi=(R,y,h)=>{const g=y[h];if(g===void 0)throw R();return g},vh=R=>(y,h=void 0,g=void 0,t=0)=>h===void 0?y.forEach(e=>e.disconnect()):typeof h=="number"?Qi(R,y,h).disconnect():an(h)?g===void 0?y.forEach(e=>e.disconnect(h)):t===void 0?Qi(R,y,g).disconnect(h,0):Qi(R,y,g).disconnect(h,0,t):g===void 0?y.forEach(e=>e.disconnect(h)):Qi(R,y,g).disconnect(h,0),ph={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},mh=(R,y,h,g,t,e,c,s)=>class extends R{constructor(n,i){const r=e(n),u={...ph,...i},o=g(r,u),l=c(r),f=l?h():null;super(n,!1,o,f),this._attack=y(this,l,o.attack),this._knee=y(this,l,o.knee),this._nativeDynamicsCompressorNode=o,this._ratio=y(this,l,o.ratio),this._release=y(this,l,o.release),this._threshold=y(this,l,o.threshold),s(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(n){const i=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=n,n>2)throw this._nativeDynamicsCompressorNode.channelCount=i,t()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(n){const i=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=n,n==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=i,t()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},gh=(R,y,h,g,t)=>()=>{const e=new WeakMap,c=async(s,a)=>{let n=h(s);const i=Gt(n,a);if(!i){const r={attack:n.attack.value,channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,knee:n.knee.value,ratio:n.ratio.value,release:n.release.value,threshold:n.threshold.value};n=y(a,r)}return e.set(a,n),i?(await R(a,s.attack,n.attack),await R(a,s.knee,n.knee),await R(a,s.ratio,n.ratio),await R(a,s.release,n.release),await R(a,s.threshold,n.threshold)):(await g(a,s.attack,n.attack),await g(a,s.knee,n.knee),await g(a,s.ratio,n.ratio),await g(a,s.release,n.release),await g(a,s.threshold,n.threshold)),await t(s,a,n),n};return{render(s,a){const n=e.get(a);return n!==void 0?Promise.resolve(n):c(s,a)}}},xh=()=>new DOMException("","EncodingError"),yh=R=>y=>new Promise((h,g)=>{if(R===null){g(new SyntaxError);return}const t=R.document.head;if(t===null)g(new SyntaxError);else{const e=R.document.createElement("script"),c=new Blob([y],{type:"application/javascript"}),s=URL.createObjectURL(c),a=R.onerror,n=()=>{R.onerror=a,URL.revokeObjectURL(s)};R.onerror=(i,r,u,o,l)=>{if(r===s||r===R.location.href&&u===1&&o===1)return n(),g(l),!1;if(a!==null)return a(i,r,u,o,l)},e.onerror=()=>{n(),g(new SyntaxError)},e.onload=()=>{n(),h()},e.src=s,e.type="module",t.appendChild(e)}}),Th=R=>class{constructor(h){this._nativeEventTarget=h,this._listeners=new WeakMap}addEventListener(h,g,t){if(g!==null){let e=this._listeners.get(g);e===void 0&&(e=R(this,g),typeof g=="function"&&this._listeners.set(g,e)),this._nativeEventTarget.addEventListener(h,e,t)}}dispatchEvent(h){return this._nativeEventTarget.dispatchEvent(h)}removeEventListener(h,g,t){const e=g===null?void 0:this._listeners.get(g);this._nativeEventTarget.removeEventListener(h,e===void 0?null:e,t)}},Sh=R=>(y,h,g)=>{Object.defineProperties(R,{currentFrame:{configurable:!0,get(){return Math.round(y*h)}},currentTime:{configurable:!0,get(){return y}}});try{return g()}finally{R!==null&&(delete R.currentFrame,delete R.currentTime)}},Eh=R=>async y=>{try{const h=await fetch(y);if(h.ok)return[await h.text(),h.url]}catch{}throw R()},Ch={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ah=(R,y,h,g,t,e)=>class extends R{constructor(s,a){const n=t(s),i={...Ch,...a},r=g(n,i),u=e(n),o=u?h():null;super(s,!1,r,o),this._gain=y(this,u,r.gain,Vt,zt)}get gain(){return this._gain}},Mh=(R,y,h,g,t)=>()=>{const e=new WeakMap,c=async(s,a)=>{let n=h(s);const i=Gt(n,a);if(!i){const r={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,gain:n.gain.value};n=y(a,r)}return e.set(a,n),i?await R(a,s.gain,n.gain):await g(a,s.gain,n.gain),await t(s,a,n),n};return{render(s,a){const n=e.get(a);return n!==void 0?Promise.resolve(n):c(s,a)}}},Ph=(R,y)=>h=>y(R,h),Rh=R=>y=>{const h=R(y);if(h.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return h.renderer},Oh=R=>y=>{var h;return(h=R.get(y))!==null&&h!==void 0?h:0},Lh=R=>y=>{const h=R(y);if(h.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return h.renderer},Fh=R=>y=>R.get(y),Nt=()=>new DOMException("","InvalidStateError"),Ih=R=>y=>{const h=R.get(y);if(h===void 0)throw Nt();return h},Dh=(R,y)=>h=>{let g=R.get(h);if(g!==void 0)return g;if(y===null)throw new Error("Missing the native OfflineAudioContext constructor.");return g=new y(1,1,44100),R.set(h,g),g},Nh=R=>y=>{const h=R.get(y);if(h===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return h},Rn=()=>new DOMException("","InvalidAccessError"),Bh=R=>{R.getFrequencyResponse=(y=>(h,g,t)=>{if(h.length!==g.length||g.length!==t.length)throw Rn();return y.call(R,h,g,t)})(R.getFrequencyResponse)},wh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Gh=(R,y,h,g,t,e)=>class extends R{constructor(s,a){const n=g(s),i=t(n),r={...wh,...a},u=y(n,i?null:s.baseLatency,r),o=i?h(r.feedback,r.feedforward):null;super(s,!1,u,o),Bh(u),this._nativeIIRFilterNode=u,e(this,1)}getFrequencyResponse(s,a,n){return this._nativeIIRFilterNode.getFrequencyResponse(s,a,n)}},Sr=(R,y,h,g,t,e,c,s,a,n,i)=>{const r=n.length;let u=s;for(let o=0;o<r;o+=1){let l=h[0]*n[o];for(let f=1;f<t;f+=1){const d=u-f&a-1;l+=h[f]*e[d],l-=R[f]*c[d]}for(let f=t;f<g;f+=1)l+=h[f]*e[u-f&a-1];for(let f=t;f<y;f+=1)l-=R[f]*c[u-f&a-1];e[u]=n[o],c[u]=l,u=u+1&a-1,i[o]=l}return u},Vh=(R,y,h,g)=>{const t=h instanceof Float64Array?h:new Float64Array(h),e=g instanceof Float64Array?g:new Float64Array(g),c=t.length,s=e.length,a=Math.min(c,s);if(t[0]!==1){for(let l=0;l<c;l+=1)e[l]/=t[0];for(let l=1;l<s;l+=1)t[l]/=t[0]}const n=32,i=new Float32Array(n),r=new Float32Array(n),u=y.createBuffer(R.numberOfChannels,R.length,R.sampleRate),o=R.numberOfChannels;for(let l=0;l<o;l+=1){const f=R.getChannelData(l),d=u.getChannelData(l);i.fill(0),r.fill(0),Sr(t,c,e,s,a,i,r,0,n,f,d)}return u},Uh=(R,y,h,g,t)=>(e,c)=>{const s=new WeakMap;let a=null;const n=async(i,r)=>{let u=null,o=y(i);const l=Gt(o,r);if(r.createIIRFilter===void 0?u=R(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):l||(o=r.createIIRFilter(c,e)),s.set(r,u===null?o:u),u!==null){if(a===null){if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const d=new h(i.context.destination.channelCount,i.context.length,r.sampleRate);a=(async()=>{await g(i,d,d.destination);const v=await t(d);return Vh(v,r,e,c)})()}const f=await a;return u.buffer=f,u.start(0),u}return await g(i,r,o),o};return{render(i,r){const u=s.get(r);return u!==void 0?Promise.resolve(u):n(i,r)}}},Yh=(R,y,h,g,t,e)=>c=>(s,a)=>{const n=R.get(s);if(n===void 0){if(!c&&e(s)){const i=g(s),{outputs:r}=h(s);for(const u of r)if(Vi(u)){const o=g(u[0]);y(i,o,u[1],u[2])}else{const o=t(u[0]);i.disconnect(o,u[1])}}R.set(s,a)}else R.set(s,n+a)},Xh=(R,y)=>h=>{const g=R.get(h);return y(g)||y(h)},Wh=(R,y)=>h=>R.has(h)||y(h),zh=(R,y)=>h=>R.has(h)||y(h),Hh=(R,y)=>h=>{const g=R.get(h);return y(g)||y(h)},bh=R=>y=>R!==null&&y instanceof R,Zh=R=>y=>R!==null&&typeof R.AudioNode=="function"&&y instanceof R.AudioNode,Kh=R=>y=>R!==null&&typeof R.AudioParam=="function"&&y instanceof R.AudioParam,Jh=(R,y)=>h=>R(h)||y(h),Qh=R=>y=>R!==null&&y instanceof R,$h=R=>R!==null&&R.isSecureContext,jh=(R,y,h,g)=>class extends R{constructor(e,c){const s=h(e),a=y(s,c);if(g(s))throw TypeError();super(e,!0,a,null),this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},kh={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},qh=(R,y,h,g)=>class extends R{constructor(e,c){const s=h(e);if(g(s))throw new TypeError;const a={...kh,...c},n=y(s,a);super(e,!1,n,null),this._nativeMediaStreamAudioDestinationNode=n}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},_h=(R,y,h,g)=>class extends R{constructor(e,c){const s=h(e),a=y(s,c);if(g(s))throw new TypeError;super(e,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},tl=(R,y,h)=>class extends R{constructor(t,e){const c=h(t),s=y(c,e);super(t,!0,s,null)}},el=(R,y,h,g,t,e)=>class extends h{constructor(s,a){super(s),this._nativeContext=s,Mn.set(this,s),g(s)&&t.set(s,new Set),this._destination=new R(this,a),this._listener=y(this,s),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(s){const a=typeof s=="function"?e(this,s):null;this._nativeContext.onstatechange=a;const n=this._nativeContext.onstatechange;this._onstatechange=n!==null&&n===a?s:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},yi=R=>{const y=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const h=R.decodeAudioData(y.buffer,()=>{});return h===void 0?!1:(h.catch(()=>{}),!0)}catch{}return!1},il=(R,y)=>(h,g,t)=>{const e=new Set;return h.connect=(c=>(s,a=0,n=0)=>{const i=e.size===0;if(y(s))return c.call(h,s,a,n),R(e,[s,a,n],r=>r[0]===s&&r[1]===a&&r[2]===n,!0),i&&g(),s;c.call(h,s,a),R(e,[s,a],r=>r[0]===s&&r[1]===a,!0),i&&g()})(h.connect),h.disconnect=(c=>(s,a,n)=>{const i=e.size>0;if(s===void 0)c.apply(h),e.clear();else if(typeof s=="number"){c.call(h,s);for(const u of e)u[1]===s&&e.delete(u)}else{y(s)?c.call(h,s,a,n):c.call(h,s,a);for(const u of e)u[0]===s&&(a===void 0||u[1]===a)&&(n===void 0||u[2]===n)&&e.delete(u)}const r=e.size===0;i&&r&&t()})(h.disconnect),h},xt=(R,y,h)=>{const g=y[h];g!==void 0&&g!==R[h]&&(R[h]=g)},It=(R,y)=>{xt(R,y,"channelCount"),xt(R,y,"channelCountMode"),xt(R,y,"channelInterpretation")},Qs=R=>typeof R.getFloatTimeDomainData=="function",nl=R=>{R.getFloatTimeDomainData=y=>{const h=new Uint8Array(y.length);R.getByteTimeDomainData(h);const g=Math.max(h.length,R.fftSize);for(let t=0;t<g;t+=1)y[t]=(h[t]-128)*.0078125;return y}},sl=(R,y)=>(h,g)=>{const t=h.createAnalyser();if(It(t,g),!(g.maxDecibels>g.minDecibels))throw y();return xt(t,g,"fftSize"),xt(t,g,"maxDecibels"),xt(t,g,"minDecibels"),xt(t,g,"smoothingTimeConstant"),R(Qs,()=>Qs(t))||nl(t),t},rl=R=>R===null?null:R.hasOwnProperty("AudioBuffer")?R.AudioBuffer:null,St=(R,y,h)=>{const g=y[h];g!==void 0&&g!==R[h].value&&(R[h].value=g)},al=R=>{R.start=(y=>{let h=!1;return(g=0,t=0,e)=>{if(h)throw Nt();y.call(R,g,t,e),h=!0}})(R.start)},as=R=>{R.start=(y=>(h=0,g=0,t)=>{if(typeof t=="number"&&t<0||g<0||h<0)throw new RangeError("The parameters can't be negative.");y.call(R,h,g,t)})(R.start)},os=R=>{R.stop=(y=>(h=0)=>{if(h<0)throw new RangeError("The parameter can't be negative.");y.call(R,h)})(R.stop)},ol=(R,y,h,g,t,e,c,s,a,n,i)=>(r,u)=>{const o=r.createBufferSource();return It(o,u),St(o,u,"playbackRate"),xt(o,u,"buffer"),xt(o,u,"loop"),xt(o,u,"loopEnd"),xt(o,u,"loopStart"),y(h,()=>h(r))||al(o),y(g,()=>g(r))||a(o),y(t,()=>t(r))||n(o,r),y(e,()=>e(r))||as(o),y(c,()=>c(r))||i(o,r),y(s,()=>s(r))||os(o),R(r,o),o},hl=R=>R===null?null:R.hasOwnProperty("AudioContext")?R.AudioContext:R.hasOwnProperty("webkitAudioContext")?R.webkitAudioContext:null,ll=(R,y)=>(h,g,t)=>{const e=h.destination;if(e.channelCount!==g)try{e.channelCount=g}catch{}t&&e.channelCountMode!=="explicit"&&(e.channelCountMode="explicit"),e.maxChannelCount===0&&Object.defineProperty(e,"maxChannelCount",{value:g});const c=R(h,{channelCount:g,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation,gain:1});return y(c,"channelCount",s=>()=>s.call(c),s=>a=>{s.call(c,a);try{e.channelCount=a}catch(n){if(a>e.maxChannelCount)throw n}}),y(c,"channelCountMode",s=>()=>s.call(c),s=>a=>{s.call(c,a),e.channelCountMode=a}),y(c,"channelInterpretation",s=>()=>s.call(c),s=>a=>{s.call(c,a),e.channelInterpretation=a}),Object.defineProperty(c,"maxChannelCount",{get:()=>e.maxChannelCount}),c.connect(e),c},ul=R=>R===null?null:R.hasOwnProperty("AudioWorkletNode")?R.AudioWorkletNode:null,fl=R=>{const{port1:y}=new MessageChannel;try{y.postMessage(R)}finally{y.close()}},cl=(R,y,h,g,t)=>(e,c,s,a,n,i)=>{if(s!==null)try{const r=new s(e,a,i),u=new Map;let o=null;if(Object.defineProperties(r,{channelCount:{get:()=>i.channelCount,set:()=>{throw R()}},channelCountMode:{get:()=>"explicit",set:()=>{throw R()}},onprocessorerror:{get:()=>o,set:l=>{typeof o=="function"&&r.removeEventListener("processorerror",o),o=typeof l=="function"?l:null,typeof o=="function"&&r.addEventListener("processorerror",o)}}}),r.addEventListener=(l=>(...f)=>{if(f[0]==="processorerror"){const d=typeof f[1]=="function"?f[1]:typeof f[1]=="object"&&f[1]!==null&&typeof f[1].handleEvent=="function"?f[1].handleEvent:null;if(d!==null){const v=u.get(f[1]);v!==void 0?f[1]=v:(f[1]=p=>{p.type==="error"?(Object.defineProperties(p,{type:{value:"processorerror"}}),d(p)):d(new ErrorEvent(f[0],{...p}))},u.set(d,f[1]))}}return l.call(r,"error",f[1],f[2]),l.call(r,...f)})(r.addEventListener),r.removeEventListener=(l=>(...f)=>{if(f[0]==="processorerror"){const d=u.get(f[1]);d!==void 0&&(u.delete(f[1]),f[1]=d)}return l.call(r,"error",f[1],f[2]),l.call(r,f[0],f[1],f[2])})(r.removeEventListener),i.numberOfOutputs!==0){const l=h(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return r.connect(l).connect(e.destination),t(r,()=>l.disconnect(),()=>l.connect(e.destination))}return r}catch(r){throw r.code===11?g():r}if(n===void 0)throw g();return fl(i),y(e,c,n,i)},Er=(R,y)=>R===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(R*y))))),dl=R=>new Promise((y,h)=>{const{port1:g,port2:t}=new MessageChannel;g.onmessage=({data:e})=>{g.close(),t.close(),y(e)},g.onmessageerror=({data:e})=>{g.close(),t.close(),h(e)},t.postMessage(R)}),vl=async(R,y)=>{const h=await dl(y);return new R(h)},pl=(R,y,h,g)=>{let t=Zn.get(R);t===void 0&&(t=new WeakMap,Zn.set(R,t));const e=vl(h,g);return t.set(y,e),e},ml=(R,y,h,g,t,e,c,s,a,n,i,r,u)=>(o,l,f,d)=>{if(d.numberOfInputs===0&&d.numberOfOutputs===0)throw a();const v=Array.isArray(d.outputChannelCount)?d.outputChannelCount:Array.from(d.outputChannelCount);if(v.some(J=>J<1))throw a();if(v.length!==d.numberOfOutputs)throw y();if(d.channelCountMode!=="explicit")throw a();const p=d.channelCount*d.numberOfInputs,m=v.reduce((J,_)=>J+_,0),x=f.parameterDescriptors===void 0?0:f.parameterDescriptors.length;if(p+x>6||m>6)throw a();const T=new MessageChannel,S=[],E=[];for(let J=0;J<d.numberOfInputs;J+=1)S.push(c(o,{channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:1})),E.push(t(o,{channelCount:d.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:d.channelCount}));const C=[];if(f.parameterDescriptors!==void 0)for(const{defaultValue:J,maxValue:_,minValue:it,name:tt}of f.parameterDescriptors){const $=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:d.parameterData[tt]!==void 0?d.parameterData[tt]:J===void 0?0:J});Object.defineProperties($.offset,{defaultValue:{get:()=>J===void 0?0:J},maxValue:{get:()=>_===void 0?Vt:_},minValue:{get:()=>it===void 0?zt:it}}),C.push($)}const A=g(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,p+x)}),P=Er(l,o.sampleRate),M=s(o,P,p+x,Math.max(1,m)),O=t(o,{channelCount:Math.max(1,m),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,m)}),F=[];for(let J=0;J<d.numberOfOutputs;J+=1)F.push(g(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[J]}));for(let J=0;J<d.numberOfInputs;J+=1){S[J].connect(E[J]);for(let _=0;_<d.channelCount;_+=1)E[J].connect(A,_,J*d.channelCount+_)}const I=new yr(f.parameterDescriptors===void 0?[]:f.parameterDescriptors.map(({name:J},_)=>{const it=C[_];return it.connect(A,0,p+_),it.start(0),[J,it.offset]}));A.connect(M);let N=d.channelInterpretation,G=null;const Y=d.numberOfOutputs===0?[M]:F,z={get bufferSize(){return P},get channelCount(){return d.channelCount},set channelCount(J){throw h()},get channelCountMode(){return d.channelCountMode},set channelCountMode(J){throw h()},get channelInterpretation(){return N},set channelInterpretation(J){for(const _ of S)_.channelInterpretation=J;N=J},get context(){return M.context},get inputs(){return S},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get onprocessorerror(){return G},set onprocessorerror(J){typeof G=="function"&&z.removeEventListener("processorerror",G),G=typeof J=="function"?J:null,typeof G=="function"&&z.addEventListener("processorerror",G)},get parameters(){return I},get port(){return T.port2},addEventListener(...J){return M.addEventListener(J[0],J[1],J[2])},connect:R.bind(null,Y),disconnect:n.bind(null,Y),dispatchEvent(...J){return M.dispatchEvent(J[0])},removeEventListener(...J){return M.removeEventListener(J[0],J[1],J[2])}},W=new Map;T.port1.addEventListener=(J=>(..._)=>{if(_[0]==="message"){const it=typeof _[1]=="function"?_[1]:typeof _[1]=="object"&&_[1]!==null&&typeof _[1].handleEvent=="function"?_[1].handleEvent:null;if(it!==null){const tt=W.get(_[1]);tt!==void 0?_[1]=tt:(_[1]=$=>{i(o.currentTime,o.sampleRate,()=>it($))},W.set(it,_[1]))}}return J.call(T.port1,_[0],_[1],_[2])})(T.port1.addEventListener),T.port1.removeEventListener=(J=>(..._)=>{if(_[0]==="message"){const it=W.get(_[1]);it!==void 0&&(W.delete(_[1]),_[1]=it)}return J.call(T.port1,_[0],_[1],_[2])})(T.port1.removeEventListener);let D=null;Object.defineProperty(T.port1,"onmessage",{get:()=>D,set:J=>{typeof D=="function"&&T.port1.removeEventListener("message",D),D=typeof J=="function"?J:null,typeof D=="function"&&(T.port1.addEventListener("message",D),T.port1.start())}}),f.prototype.port=T.port1;let L=null;pl(o,z,f,d).then(J=>L=J);const w=hn(d.numberOfInputs,d.channelCount),V=hn(d.numberOfOutputs,v),U=f.parameterDescriptors===void 0?[]:f.parameterDescriptors.reduce((J,{name:_})=>({...J,[_]:new Float32Array(128)}),{});let X=!0;const H=()=>{d.numberOfOutputs>0&&M.disconnect(O);for(let J=0,_=0;J<d.numberOfOutputs;J+=1){const it=F[J];for(let tt=0;tt<v[J];tt+=1)O.disconnect(it,_+tt,tt);_+=v[J]}},b=new Map;M.onaudioprocess=({inputBuffer:J,outputBuffer:_})=>{if(L!==null){const it=r(z);for(let tt=0;tt<P;tt+=128){for(let $=0;$<d.numberOfInputs;$+=1)for(let st=0;st<d.channelCount;st+=1)on(J,w[$],st,st,tt);f.parameterDescriptors!==void 0&&f.parameterDescriptors.forEach(({name:$},st)=>{on(J,U,$,p+st,tt)});for(let $=0;$<d.numberOfInputs;$+=1)for(let st=0;st<v[$];st+=1)V[$][st].byteLength===0&&(V[$][st]=new Float32Array(128));try{const $=w.map((nt,rt)=>{if(it[rt].size>0)return b.set(rt,P/128),nt;const Dt=b.get(rt);return Dt===void 0?[]:(nt.every(ft=>ft.every(lt=>lt===0))&&(Dt===1?b.delete(rt):b.set(rt,Dt-1)),nt)});X=i(o.currentTime+tt/o.sampleRate,o.sampleRate,()=>L.process($,V,U));for(let nt=0,rt=0;nt<d.numberOfOutputs;nt+=1){for(let Rt=0;Rt<v[nt];Rt+=1)Tr(_,V[nt],Rt,rt+Rt,tt);rt+=v[nt]}}catch($){X=!1,z.dispatchEvent(new ErrorEvent("processorerror",{colno:$.colno,filename:$.filename,lineno:$.lineno,message:$.message}))}if(!X){for(let $=0;$<d.numberOfInputs;$+=1){S[$].disconnect(E[$]);for(let st=0;st<d.channelCount;st+=1)E[tt].disconnect(A,st,$*d.channelCount+st)}if(f.parameterDescriptors!==void 0){const $=f.parameterDescriptors.length;for(let st=0;st<$;st+=1){const nt=C[st];nt.disconnect(A,0,p+st),nt.stop()}}A.disconnect(M),M.onaudioprocess=null,Z?H():j();break}}}};let Z=!1;const K=c(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Q=()=>M.connect(K).connect(o.destination),j=()=>{M.disconnect(K),K.disconnect()},q=()=>{if(X){j(),d.numberOfOutputs>0&&M.connect(O);for(let J=0,_=0;J<d.numberOfOutputs;J+=1){const it=F[J];for(let tt=0;tt<v[J];tt+=1)O.connect(it,_+tt,tt);_+=v[J]}}Z=!0},k=()=>{X&&(Q(),H()),Z=!1};return Q(),u(z,q,k)},Cr=(R,y)=>{const h=R.createBiquadFilter();return It(h,y),St(h,y,"Q"),St(h,y,"detune"),St(h,y,"frequency"),St(h,y,"gain"),xt(h,y,"type"),h},gl=(R,y)=>(h,g)=>{const t=h.createChannelMerger(g.numberOfInputs);return R!==null&&R.name==="webkitAudioContext"&&y(h,t),It(t,g),t},xl=R=>{const y=R.numberOfOutputs;Object.defineProperty(R,"channelCount",{get:()=>y,set:h=>{if(h!==y)throw Nt()}}),Object.defineProperty(R,"channelCountMode",{get:()=>"explicit",set:h=>{if(h!=="explicit")throw Nt()}}),Object.defineProperty(R,"channelInterpretation",{get:()=>"discrete",set:h=>{if(h!=="discrete")throw Nt()}})},Ui=(R,y)=>{const h=R.createChannelSplitter(y.numberOfOutputs);return It(h,y),xl(h),h},yl=(R,y,h,g,t)=>(e,c)=>{if(e.createConstantSource===void 0)return h(e,c);const s=e.createConstantSource();return It(s,c),St(s,c,"offset"),y(g,()=>g(e))||as(s),y(t,()=>t(e))||os(s),R(e,s),s},li=(R,y)=>(R.connect=y.connect.bind(y),R.disconnect=y.disconnect.bind(y),R),Tl=(R,y,h,g)=>(t,{offset:e,...c})=>{const s=t.createBuffer(1,2,44100),a=y(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),n=h(t,{...c,gain:e}),i=s.getChannelData(0);i[0]=1,i[1]=1,a.buffer=s,a.loop=!0;const r={get bufferSize(){},get channelCount(){return n.channelCount},set channelCount(l){n.channelCount=l},get channelCountMode(){return n.channelCountMode},set channelCountMode(l){n.channelCountMode=l},get channelInterpretation(){return n.channelInterpretation},set channelInterpretation(l){n.channelInterpretation=l},get context(){return n.context},get inputs(){return[]},get numberOfInputs(){return a.numberOfInputs},get numberOfOutputs(){return n.numberOfOutputs},get offset(){return n.gain},get onended(){return a.onended},set onended(l){a.onended=l},addEventListener(...l){return a.addEventListener(l[0],l[1],l[2])},dispatchEvent(...l){return a.dispatchEvent(l[0])},removeEventListener(...l){return a.removeEventListener(l[0],l[1],l[2])},start(l=0){a.start.call(a,l)},stop(l=0){a.stop.call(a,l)}},u=()=>a.connect(n),o=()=>a.disconnect(n);return R(t,a),g(li(r,n),u,o)},Sl=(R,y)=>(h,g)=>{const t=h.createConvolver();if(It(t,g),g.disableNormalization===t.normalize&&(t.normalize=!g.disableNormalization),xt(t,g,"buffer"),g.channelCount>2||(y(t,"channelCount",e=>()=>e.call(t),e=>c=>{if(c>2)throw R();return e.call(t,c)}),g.channelCountMode==="max"))throw R();return y(t,"channelCountMode",e=>()=>e.call(t),e=>c=>{if(c==="max")throw R();return e.call(t,c)}),t},Ar=(R,y)=>{const h=R.createDelay(y.maxDelayTime);return It(h,y),St(h,y,"delayTime"),h},El=R=>(y,h)=>{const g=y.createDynamicsCompressor();if(It(g,h),h.channelCount>2||h.channelCountMode==="max")throw R();return St(g,h,"attack"),St(g,h,"knee"),St(g,h,"ratio"),St(g,h,"release"),St(g,h,"threshold"),g},bt=(R,y)=>{const h=R.createGain();return It(h,y),St(h,y,"gain"),h},Cl=R=>(y,h,g)=>{if(y.createIIRFilter===void 0)return R(y,h,g);const t=y.createIIRFilter(g.feedforward,g.feedback);return It(t,g),t};function Al(R,y){const h=y[0]*y[0]+y[1]*y[1];return[(R[0]*y[0]+R[1]*y[1])/h,(R[1]*y[0]-R[0]*y[1])/h]}function Ml(R,y){return[R[0]*y[0]-R[1]*y[1],R[0]*y[1]+R[1]*y[0]]}function $s(R,y){let h=[0,0];for(let g=R.length-1;g>=0;g-=1)h=Ml(h,y),h[0]+=R[g];return h}const Pl=(R,y,h,g)=>(t,e,{channelCount:c,channelCountMode:s,channelInterpretation:a,feedback:n,feedforward:i})=>{const r=Er(e,t.sampleRate),u=n instanceof Float64Array?n:new Float64Array(n),o=i instanceof Float64Array?i:new Float64Array(i),l=u.length,f=o.length,d=Math.min(l,f);if(l===0||l>20)throw g();if(u[0]===0)throw y();if(f===0||f>20)throw g();if(o[0]===0)throw y();if(u[0]!==1){for(let C=0;C<f;C+=1)o[C]/=u[0];for(let C=1;C<l;C+=1)u[C]/=u[0]}const v=h(t,r,c,c);v.channelCount=c,v.channelCountMode=s,v.channelInterpretation=a;const p=32,m=[],x=[],T=[];for(let C=0;C<c;C+=1){m.push(0);const A=new Float32Array(p),P=new Float32Array(p);A.fill(0),P.fill(0),x.push(A),T.push(P)}v.onaudioprocess=C=>{const A=C.inputBuffer,P=C.outputBuffer,M=A.numberOfChannels;for(let O=0;O<M;O+=1){const F=A.getChannelData(O),I=P.getChannelData(O);m[O]=Sr(u,l,o,f,d,x[O],T[O],m[O],p,F,I)}};const S=t.sampleRate/2;return li({get bufferSize(){return r},get channelCount(){return v.channelCount},set channelCount(C){v.channelCount=C},get channelCountMode(){return v.channelCountMode},set channelCountMode(C){v.channelCountMode=C},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(C){v.channelInterpretation=C},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...C){return v.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return v.dispatchEvent(C[0])},getFrequencyResponse(C,A,P){if(C.length!==A.length||A.length!==P.length)throw R();const M=C.length;for(let O=0;O<M;O+=1){const F=-Math.PI*(C[O]/S),I=[Math.cos(F),Math.sin(F)],N=$s(o,I),G=$s(u,I),Y=Al(N,G);A[O]=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),P[O]=Math.atan2(Y[1],Y[0])}},removeEventListener(...C){return v.removeEventListener(C[0],C[1],C[2])}},v)},Rl=(R,y)=>R.createMediaElementSource(y.mediaElement),Ol=(R,y)=>{const h=R.createMediaStreamDestination();return It(h,y),h.numberOfOutputs===1&&Object.defineProperty(h,"numberOfOutputs",{get:()=>0}),h},Ll=(R,{mediaStream:y})=>{const h=y.getAudioTracks();h.sort((e,c)=>e.id<c.id?-1:e.id>c.id?1:0);const g=h.slice(0,1),t=R.createMediaStreamSource(new MediaStream(g));return Object.defineProperty(t,"mediaStream",{value:y}),t},Fl=(R,y)=>(h,{mediaStreamTrack:g})=>{if(typeof h.createMediaStreamTrackSource=="function")return h.createMediaStreamTrackSource(g);const t=new MediaStream([g]),e=h.createMediaStreamSource(t);if(g.kind!=="audio")throw R();if(y(h))throw new TypeError;return e},Il=R=>R===null?null:R.hasOwnProperty("OfflineAudioContext")?R.OfflineAudioContext:R.hasOwnProperty("webkitOfflineAudioContext")?R.webkitOfflineAudioContext:null,Dl=(R,y,h,g,t,e)=>(c,s)=>{const a=c.createOscillator();return It(a,s),St(a,s,"detune"),St(a,s,"frequency"),s.periodicWave!==void 0?a.setPeriodicWave(s.periodicWave):xt(a,s,"type"),y(h,()=>h(c))||as(a),y(g,()=>g(c))||e(a,c),y(t,()=>t(c))||os(a),R(c,a),a},Nl=R=>(y,h)=>{const g=y.createPanner();return g.orientationX===void 0?R(y,h):(It(g,h),St(g,h,"orientationX"),St(g,h,"orientationY"),St(g,h,"orientationZ"),St(g,h,"positionX"),St(g,h,"positionY"),St(g,h,"positionZ"),xt(g,h,"coneInnerAngle"),xt(g,h,"coneOuterAngle"),xt(g,h,"coneOuterGain"),xt(g,h,"distanceModel"),xt(g,h,"maxDistance"),xt(g,h,"panningModel"),xt(g,h,"refDistance"),xt(g,h,"rolloffFactor"),g)},Bl=(R,y,h,g,t,e,c,s,a,n)=>(i,{coneInnerAngle:r,coneOuterAngle:u,coneOuterGain:o,distanceModel:l,maxDistance:f,orientationX:d,orientationY:v,orientationZ:p,panningModel:m,positionX:x,positionY:T,positionZ:S,refDistance:E,rolloffFactor:C,...A})=>{const P=i.createPanner();if(A.channelCount>2||A.channelCountMode==="max")throw c();It(P,A);const M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=h(i,{...M,channelInterpretation:"speakers",numberOfInputs:6}),F=g(i,{...A,gain:1}),I=g(i,{...M,gain:1}),N=g(i,{...M,gain:0}),G=g(i,{...M,gain:0}),Y=g(i,{...M,gain:0}),z=g(i,{...M,gain:0}),W=g(i,{...M,gain:0}),D=t(i,256,6,1),L=e(i,{...M,curve:new Float32Array([1,1]),oversample:"none"});let B=[d,v,p],w=[x,T,S];const V=new Float32Array(1);D.onaudioprocess=({inputBuffer:b})=>{const Z=[a(b,V,0),a(b,V,1),a(b,V,2)];Z.some((Q,j)=>Q!==B[j])&&(P.setOrientation(...Z),B=Z);const K=[a(b,V,3),a(b,V,4),a(b,V,5)];K.some((Q,j)=>Q!==w[j])&&(P.setPosition(...K),w=K)},Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0});const U={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(b){if(b>2)throw c();F.channelCount=b,P.channelCount=b},get channelCountMode(){return P.channelCountMode},set channelCountMode(b){if(b==="max")throw c();F.channelCountMode=b,P.channelCountMode=b},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(b){F.channelInterpretation=b,P.channelInterpretation=b},get coneInnerAngle(){return P.coneInnerAngle},set coneInnerAngle(b){P.coneInnerAngle=b},get coneOuterAngle(){return P.coneOuterAngle},set coneOuterAngle(b){P.coneOuterAngle=b},get coneOuterGain(){return P.coneOuterGain},set coneOuterGain(b){if(b<0||b>1)throw y();P.coneOuterGain=b},get context(){return P.context},get distanceModel(){return P.distanceModel},set distanceModel(b){P.distanceModel=b},get inputs(){return[F]},get maxDistance(){return P.maxDistance},set maxDistance(b){if(b<0)throw new RangeError;P.maxDistance=b},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get orientationX(){return I.gain},get orientationY(){return N.gain},get orientationZ(){return G.gain},get panningModel(){return P.panningModel},set panningModel(b){P.panningModel=b},get positionX(){return Y.gain},get positionY(){return z.gain},get positionZ(){return W.gain},get refDistance(){return P.refDistance},set refDistance(b){if(b<0)throw new RangeError;P.refDistance=b},get rolloffFactor(){return P.rolloffFactor},set rolloffFactor(b){if(b<0)throw new RangeError;P.rolloffFactor=b},addEventListener(...b){return F.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return F.dispatchEvent(b[0])},removeEventListener(...b){return F.removeEventListener(b[0],b[1],b[2])}};r!==U.coneInnerAngle&&(U.coneInnerAngle=r),u!==U.coneOuterAngle&&(U.coneOuterAngle=u),o!==U.coneOuterGain&&(U.coneOuterGain=o),l!==U.distanceModel&&(U.distanceModel=l),f!==U.maxDistance&&(U.maxDistance=f),d!==U.orientationX.value&&(U.orientationX.value=d),v!==U.orientationY.value&&(U.orientationY.value=v),p!==U.orientationZ.value&&(U.orientationZ.value=p),m!==U.panningModel&&(U.panningModel=m),x!==U.positionX.value&&(U.positionX.value=x),T!==U.positionY.value&&(U.positionY.value=T),S!==U.positionZ.value&&(U.positionZ.value=S),E!==U.refDistance&&(U.refDistance=E),C!==U.rolloffFactor&&(U.rolloffFactor=C),(B[0]!==1||B[1]!==0||B[2]!==0)&&P.setOrientation(...B),(w[0]!==0||w[1]!==0||w[2]!==0)&&P.setPosition(...w);const X=()=>{F.connect(P),R(F,L,0,0),L.connect(I).connect(O,0,0),L.connect(N).connect(O,0,1),L.connect(G).connect(O,0,2),L.connect(Y).connect(O,0,3),L.connect(z).connect(O,0,4),L.connect(W).connect(O,0,5),O.connect(D).connect(i.destination)},H=()=>{F.disconnect(P),s(F,L,0,0),L.disconnect(I),I.disconnect(O),L.disconnect(N),N.disconnect(O),L.disconnect(G),G.disconnect(O),L.disconnect(Y),Y.disconnect(O),L.disconnect(z),z.disconnect(O),L.disconnect(W),W.disconnect(O),O.disconnect(D),D.disconnect(i.destination)};return n(li(U,P),X,H)},wl=R=>(y,{disableNormalization:h,imag:g,real:t})=>{const e=g instanceof Float32Array?g:new Float32Array(g),c=t instanceof Float32Array?t:new Float32Array(t),s=y.createPeriodicWave(c,e,{disableNormalization:h});if(Array.from(g).length<2)throw R();return s},Yi=(R,y,h,g)=>R.createScriptProcessor(y,h,g),Gl=(R,y)=>(h,g)=>{const t=g.channelCountMode;if(t==="clamped-max")throw y();if(h.createStereoPanner===void 0)return R(h,g);const e=h.createStereoPanner();return It(e,g),St(e,g,"pan"),Object.defineProperty(e,"channelCountMode",{get:()=>t,set:c=>{if(c!==t)throw y()}}),e},Vl=(R,y,h,g,t,e)=>{const s=new Float32Array([1,1]),a=Math.PI/2,n={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},i={...n,oversample:"none"},r=(l,f,d,v)=>{const p=new Float32Array(16385),m=new Float32Array(16385);for(let A=0;A<16385;A+=1){const P=A/16384*a;p[A]=Math.cos(P),m[A]=Math.sin(P)}const x=h(l,{...n,gain:0}),T=g(l,{...i,curve:p}),S=g(l,{...i,curve:s}),E=h(l,{...n,gain:0}),C=g(l,{...i,curve:m});return{connectGraph(){f.connect(x),f.connect(S.inputs===void 0?S:S.inputs[0]),f.connect(E),S.connect(d),d.connect(T.inputs===void 0?T:T.inputs[0]),d.connect(C.inputs===void 0?C:C.inputs[0]),T.connect(x.gain),C.connect(E.gain),x.connect(v,0,0),E.connect(v,0,1)},disconnectGraph(){f.disconnect(x),f.disconnect(S.inputs===void 0?S:S.inputs[0]),f.disconnect(E),S.disconnect(d),d.disconnect(T.inputs===void 0?T:T.inputs[0]),d.disconnect(C.inputs===void 0?C:C.inputs[0]),T.disconnect(x.gain),C.disconnect(E.gain),x.disconnect(v,0,0),E.disconnect(v,0,1)}}},u=(l,f,d,v)=>{const p=new Float32Array(16385),m=new Float32Array(16385),x=new Float32Array(16385),T=new Float32Array(16385),S=Math.floor(16385/2);for(let Y=0;Y<16385;Y+=1)if(Y>S){const z=(Y-S)/(16384-S)*a;p[Y]=Math.cos(z),m[Y]=Math.sin(z),x[Y]=0,T[Y]=1}else{const z=Y/(16384-S)*a;p[Y]=1,m[Y]=0,x[Y]=Math.cos(z),T[Y]=Math.sin(z)}const E=y(l,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=h(l,{...n,gain:0}),A=g(l,{...i,curve:p}),P=h(l,{...n,gain:0}),M=g(l,{...i,curve:m}),O=g(l,{...i,curve:s}),F=h(l,{...n,gain:0}),I=g(l,{...i,curve:x}),N=h(l,{...n,gain:0}),G=g(l,{...i,curve:T});return{connectGraph(){f.connect(E),f.connect(O.inputs===void 0?O:O.inputs[0]),E.connect(C,0),E.connect(P,0),E.connect(F,1),E.connect(N,1),O.connect(d),d.connect(A.inputs===void 0?A:A.inputs[0]),d.connect(M.inputs===void 0?M:M.inputs[0]),d.connect(I.inputs===void 0?I:I.inputs[0]),d.connect(G.inputs===void 0?G:G.inputs[0]),A.connect(C.gain),M.connect(P.gain),I.connect(F.gain),G.connect(N.gain),C.connect(v,0,0),F.connect(v,0,0),P.connect(v,0,1),N.connect(v,0,1)},disconnectGraph(){f.disconnect(E),f.disconnect(O.inputs===void 0?O:O.inputs[0]),E.disconnect(C,0),E.disconnect(P,0),E.disconnect(F,1),E.disconnect(N,1),O.disconnect(d),d.disconnect(A.inputs===void 0?A:A.inputs[0]),d.disconnect(M.inputs===void 0?M:M.inputs[0]),d.disconnect(I.inputs===void 0?I:I.inputs[0]),d.disconnect(G.inputs===void 0?G:G.inputs[0]),A.disconnect(C.gain),M.disconnect(P.gain),I.disconnect(F.gain),G.disconnect(N.gain),C.disconnect(v,0,0),F.disconnect(v,0,0),P.disconnect(v,0,1),N.disconnect(v,0,1)}}},o=(l,f,d,v,p)=>{if(f===1)return r(l,d,v,p);if(f===2)return u(l,d,v,p);throw t()};return(l,{channelCount:f,channelCountMode:d,pan:v,...p})=>{if(d==="max")throw t();const m=R(l,{...p,channelCount:1,channelCountMode:d,numberOfInputs:2}),x=h(l,{...p,channelCount:f,channelCountMode:d,gain:1}),T=h(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:S,disconnectGraph:E}=o(l,f,x,T,m);Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(T.gain,"maxValue",{get:()=>1}),Object.defineProperty(T.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(O){x.channelCount!==O&&(A&&E(),{connectGraph:S,disconnectGraph:E}=o(l,O,x,T,m),A&&S()),x.channelCount=O},get channelCountMode(){return x.channelCountMode},set channelCountMode(O){if(O==="clamped-max"||O==="max")throw t();x.channelCountMode=O},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(O){x.channelInterpretation=O},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get pan(){return T.gain},addEventListener(...O){return x.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return x.dispatchEvent(O[0])},removeEventListener(...O){return x.removeEventListener(O[0],O[1],O[2])}};let A=!1;const P=()=>{S(),A=!0},M=()=>{E(),A=!1};return e(li(C,m),P,M)}},Ul=(R,y,h,g,t,e,c)=>(s,a)=>{const n=s.createWaveShaper();if(e!==null&&e.name==="webkitAudioContext"&&s.createGain().gain.automationRate===void 0)return h(s,a);It(n,a);const i=a.curve===null||a.curve instanceof Float32Array?a.curve:new Float32Array(a.curve);if(i!==null&&i.length<2)throw y();xt(n,{curve:i},"curve"),xt(n,a,"oversample");let r=null,u=!1;return c(n,"curve",f=>()=>f.call(n),f=>d=>(f.call(n,d),u&&(g(d)&&r===null?r=R(s,n):!g(d)&&r!==null&&(r(),r=null)),d)),t(n,()=>{u=!0,g(n.curve)&&(r=R(s,n))},()=>{u=!1,r!==null&&(r(),r=null)})},Yl=(R,y,h,g,t)=>(e,{curve:c,oversample:s,...a})=>{const n=e.createWaveShaper(),i=e.createWaveShaper();It(n,a),It(i,a);const r=h(e,{...a,gain:1}),u=h(e,{...a,gain:-1}),o=h(e,{...a,gain:1}),l=h(e,{...a,gain:-1});let f=null,d=!1,v=null;const p={get bufferSize(){},get channelCount(){return n.channelCount},set channelCount(T){r.channelCount=T,u.channelCount=T,n.channelCount=T,o.channelCount=T,i.channelCount=T,l.channelCount=T},get channelCountMode(){return n.channelCountMode},set channelCountMode(T){r.channelCountMode=T,u.channelCountMode=T,n.channelCountMode=T,o.channelCountMode=T,i.channelCountMode=T,l.channelCountMode=T},get channelInterpretation(){return n.channelInterpretation},set channelInterpretation(T){r.channelInterpretation=T,u.channelInterpretation=T,n.channelInterpretation=T,o.channelInterpretation=T,i.channelInterpretation=T,l.channelInterpretation=T},get context(){return n.context},get curve(){return v},set curve(T){if(T!==null&&T.length<2)throw y();if(T===null)n.curve=T,i.curve=T;else{const S=T.length,E=new Float32Array(S+2-S%2),C=new Float32Array(S+2-S%2);E[0]=T[0],C[0]=-T[S-1];const A=Math.ceil((S+1)/2),P=(S+1)/2-1;for(let M=1;M<A;M+=1){const O=M/A*P,F=Math.floor(O),I=Math.ceil(O);E[M]=F===I?T[F]:(1-(O-F))*T[F]+(1-(I-O))*T[I],C[M]=F===I?-T[S-1-F]:-((1-(O-F))*T[S-1-F])-(1-(I-O))*T[S-1-I]}E[A]=S%2===1?T[A-1]:(T[A-2]+T[A-1])/2,n.curve=E,i.curve=C}v=T,d&&(g(v)&&f===null?f=R(e,r):f!==null&&(f(),f=null))},get inputs(){return[r]},get numberOfInputs(){return n.numberOfInputs},get numberOfOutputs(){return n.numberOfOutputs},get oversample(){return n.oversample},set oversample(T){n.oversample=T,i.oversample=T},addEventListener(...T){return r.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return r.dispatchEvent(T[0])},removeEventListener(...T){return r.removeEventListener(T[0],T[1],T[2])}};c!==null&&(p.curve=c instanceof Float32Array?c:new Float32Array(c)),s!==p.oversample&&(p.oversample=s);const m=()=>{r.connect(n).connect(o),r.connect(u).connect(i).connect(l).connect(o),d=!0,g(v)&&(f=R(e,r))},x=()=>{r.disconnect(n),n.disconnect(o),r.disconnect(u),u.disconnect(i),i.disconnect(l),l.disconnect(o),d=!1,f!==null&&(f(),f=null)};return t(li(p,o),m,x)},Xt=()=>new DOMException("","NotSupportedError"),Xl={numberOfChannels:1},Wl=(R,y,h,g,t)=>class extends R{constructor(c,s,a){let n;if(typeof c=="number"&&s!==void 0&&a!==void 0)n={length:s,numberOfChannels:c,sampleRate:a};else if(typeof c=="object")n=c;else throw new Error("The given parameters are not valid.");const{length:i,numberOfChannels:r,sampleRate:u}={...Xl,...n},o=g(r,i,u);y(yi,()=>yi(o))||o.addEventListener("statechange",(()=>{let l=0;const f=d=>{this._state==="running"&&(l>0?(o.removeEventListener("statechange",f),d.stopImmediatePropagation(),this._waitForThePromiseToSettle(d)):l+=1)};return f})()),super(o,r),this._length=i,this._nativeOfflineAudioContext=o,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(h()):(this._state="running",t(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,pr(this)}))}_waitForThePromiseToSettle(c){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(c):setTimeout(()=>this._waitForThePromiseToSettle(c))}},zl={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Hl=(R,y,h,g,t,e,c)=>class extends R{constructor(a,n){const i=t(a),r={...zl,...n},u=h(i,r),o=e(i),l=o?g():null,f=a.sampleRate/2;super(a,!1,u,l),this._detune=y(this,o,u.detune,153600,-153600),this._frequency=y(this,o,u.frequency,f,-f),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=l,this._oscillatorNodeRenderer!==null&&r.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=r.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(a){const n=typeof a=="function"?c(this,a):null;this._nativeOscillatorNode.onended=n;const i=this._nativeOscillatorNode.onended;this._onended=i!==null&&i===n?a:i}get type(){return this._nativeOscillatorNode.type}set type(a){this._nativeOscillatorNode.type=a,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(a){this._nativeOscillatorNode.setPeriodicWave(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=a)}start(a=0){if(this._nativeOscillatorNode.start(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=a),this.context.state!=="closed"){si(this);const n=()=>{this._nativeOscillatorNode.removeEventListener("ended",n),ye(this)&&wi(this)};this._nativeOscillatorNode.addEventListener("ended",n)}}stop(a=0){this._nativeOscillatorNode.stop(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=a)}},bl=(R,y,h,g,t)=>()=>{const e=new WeakMap;let c=null,s=null,a=null;const n=async(i,r)=>{let u=h(i);const o=Gt(u,r);if(!o){const l={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,periodicWave:c===null?void 0:c,type:u.type};u=y(r,l),s!==null&&u.start(s),a!==null&&u.stop(a)}return e.set(r,u),o?(await R(r,i.detune,u.detune),await R(r,i.frequency,u.frequency)):(await g(r,i.detune,u.detune),await g(r,i.frequency,u.frequency)),await t(i,r,u),u};return{set periodicWave(i){c=i},set start(i){s=i},set stop(i){a=i},render(i,r){const u=e.get(r);return u!==void 0?Promise.resolve(u):n(i,r)}}},Zl={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Kl=(R,y,h,g,t,e,c)=>class extends R{constructor(a,n){const i=t(a),r={...Zl,...n},u=h(i,r),o=e(i),l=o?g():null;super(a,!1,u,l),this._nativePannerNode=u,this._orientationX=y(this,o,u.orientationX,Vt,zt),this._orientationY=y(this,o,u.orientationY,Vt,zt),this._orientationZ=y(this,o,u.orientationZ,Vt,zt),this._positionX=y(this,o,u.positionX,Vt,zt),this._positionY=y(this,o,u.positionY,Vt,zt),this._positionZ=y(this,o,u.positionZ,Vt,zt),c(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(a){this._nativePannerNode.coneInnerAngle=a}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(a){this._nativePannerNode.coneOuterAngle=a}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(a){this._nativePannerNode.coneOuterGain=a}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(a){this._nativePannerNode.distanceModel=a}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(a){this._nativePannerNode.maxDistance=a}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(a){this._nativePannerNode.panningModel=a}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(a){this._nativePannerNode.refDistance=a}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(a){this._nativePannerNode.rolloffFactor=a}},Jl=(R,y,h,g,t,e,c,s,a,n)=>()=>{const i=new WeakMap;let r=null;const u=async(o,l)=>{let f=null,d=e(o);const v={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation},p={...v,coneInnerAngle:d.coneInnerAngle,coneOuterAngle:d.coneOuterAngle,coneOuterGain:d.coneOuterGain,distanceModel:d.distanceModel,maxDistance:d.maxDistance,panningModel:d.panningModel,refDistance:d.refDistance,rolloffFactor:d.rolloffFactor},m=Gt(d,l);if("bufferSize"in d)f=g(l,{...v,gain:1});else if(!m){const x={...p,orientationX:d.orientationX.value,orientationY:d.orientationY.value,orientationZ:d.orientationZ.value,positionX:d.positionX.value,positionY:d.positionY.value,positionZ:d.positionZ.value};d=t(l,x)}if(i.set(l,f===null?d:f),f!==null){if(r===null){if(c===null)throw new Error("Missing the native OfflineAudioContext constructor.");const M=new c(6,o.context.length,l.sampleRate),O=y(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});O.connect(M.destination),r=(async()=>{const F=await Promise.all([o.orientationX,o.orientationY,o.orientationZ,o.positionX,o.positionY,o.positionZ].map(async(I,N)=>{const G=h(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:N===0?1:0});return await s(M,I,G.offset),G}));for(let I=0;I<6;I+=1)F[I].connect(O,0,I),F[I].start(0);return n(M)})()}const x=await r,T=g(l,{...v,gain:1});await a(o,l,T);const S=[];for(let M=0;M<x.numberOfChannels;M+=1)S.push(x.getChannelData(M));let E=[S[0][0],S[1][0],S[2][0]],C=[S[3][0],S[4][0],S[5][0]],A=g(l,{...v,gain:1}),P=t(l,{...p,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:C[0],positionY:C[1],positionZ:C[2]});T.connect(A).connect(P.inputs[0]),P.connect(f);for(let M=128;M<x.length;M+=128){const O=[S[0][M],S[1][M],S[2][M]],F=[S[3][M],S[4][M],S[5][M]];if(O.some((I,N)=>I!==E[N])||F.some((I,N)=>I!==C[N])){E=O,C=F;const I=M/l.sampleRate;A.gain.setValueAtTime(0,I),A=g(l,{...v,gain:0}),P=t(l,{...p,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),A.gain.setValueAtTime(1,I),T.connect(A).connect(P.inputs[0]),P.connect(f)}}return f}return m?(await R(l,o.orientationX,d.orientationX),await R(l,o.orientationY,d.orientationY),await R(l,o.orientationZ,d.orientationZ),await R(l,o.positionX,d.positionX),await R(l,o.positionY,d.positionY),await R(l,o.positionZ,d.positionZ)):(await s(l,o.orientationX,d.orientationX),await s(l,o.orientationY,d.orientationY),await s(l,o.orientationZ,d.orientationZ),await s(l,o.positionX,d.positionX),await s(l,o.positionY,d.positionY),await s(l,o.positionZ,d.positionZ)),hi(d)?await a(o,l,d.inputs[0]):await a(o,l,d),d};return{render(o,l){const f=i.get(l);return f!==void 0?Promise.resolve(f):u(o,l)}}},Ql={disableNormalization:!1},$l=(R,y,h,g)=>class Mr{constructor(e,c){const s=y(e),a=g({...Ql,...c}),n=R(s,a);return h.add(n),n}static[Symbol.hasInstance](e){return e!==null&&typeof e=="object"&&Object.getPrototypeOf(e)===Mr.prototype||h.has(e)}},jl=(R,y)=>(h,g,t)=>(R(g).replay(t),y(g,h,t)),kl=(R,y,h)=>async(g,t,e)=>{const c=R(g);await Promise.all(c.activeInputs.map((s,a)=>Array.from(s).map(async([n,i])=>{const u=await y(n).render(n,t),o=g.context.destination;!h(n)&&(g!==o||!h(g))&&u.connect(e,i,a)})).reduce((s,a)=>[...s,...a],[]))},ql=(R,y,h)=>async(g,t,e)=>{const c=y(g);await Promise.all(Array.from(c.activeInputs).map(async([s,a])=>{const i=await R(s).render(s,t);h(s)||i.connect(e,a)}))},_l=(R,y,h,g)=>t=>R(yi,()=>yi(t))?Promise.resolve(R(g,g)).then(e=>{if(!e){const c=h(t,512,0,1);t.oncomplete=()=>{c.onaudioprocess=null,c.disconnect()},c.onaudioprocess=()=>t.currentTime,c.connect(t.destination)}return t.startRendering()}):new Promise(e=>{const c=y(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.oncomplete=s=>{c.disconnect(),e(s.renderedBuffer)},c.connect(t.destination),t.startRendering()}),tu=R=>(y,h)=>{R.set(y,h)},eu=R=>(y,h)=>R.set(y,h),iu=(R,y,h,g,t,e,c,s)=>(a,n)=>h(a).render(a,n).then(()=>Promise.all(Array.from(g(n)).map(i=>h(i).render(i,n)))).then(()=>t(n)).then(i=>(typeof i.copyFromChannel!="function"?(c(i),ns(i)):y(e,()=>e(i))||s(i),R.add(i),i)),nu={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},su=(R,y,h,g,t,e)=>class extends R{constructor(s,a){const n=t(s),i={...nu,...a},r=h(n,i),u=e(n),o=u?g():null;super(s,!1,r,o),this._pan=y(this,u,r.pan)}get pan(){return this._pan}},ru=(R,y,h,g,t)=>()=>{const e=new WeakMap,c=async(s,a)=>{let n=h(s);const i=Gt(n,a);if(!i){const r={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,pan:n.pan.value};n=y(a,r)}return e.set(a,n),i?await R(a,s.pan,n.pan):await g(a,s.pan,n.pan),hi(n)?await t(s,a,n.inputs[0]):await t(s,a,n),n};return{render(s,a){const n=e.get(a);return n!==void 0?Promise.resolve(n):c(s,a)}}},au=R=>()=>{if(R===null)return!1;try{new R({length:1,sampleRate:44100})}catch{return!1}return!0},ou=(R,y)=>async()=>{if(R===null)return!0;if(y===null)return!1;const h=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),g=new y(1,128,44100),t=URL.createObjectURL(h);let e=!1,c=!1;try{await g.audioWorklet.addModule(t);const s=new R(g,"a",{numberOfOutputs:0}),a=g.createOscillator();s.port.onmessage=()=>e=!0,s.onprocessorerror=()=>c=!0,a.connect(s),a.start(0),await g.startRendering()}catch{}finally{URL.revokeObjectURL(t)}return e&&!c},hu=(R,y)=>()=>{if(y===null)return Promise.resolve(!1);const h=new y(1,1,44100),g=R(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(t=>{h.oncomplete=()=>{g.disconnect(),t(h.currentTime!==0)},h.startRendering()})},lu=()=>new DOMException("","UnknownError"),uu={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},fu=(R,y,h,g,t,e,c)=>class extends R{constructor(a,n){const i=t(a),r={...uu,...n},u=h(i,r),l=e(i)?g():null;super(a,!0,u,l),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,c(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(a){if(a===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(a.length<2)throw y();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=a}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(a){this._nativeWaveShaperNode.oversample=a}},cu=(R,y,h)=>()=>{const g=new WeakMap,t=async(e,c)=>{let s=y(e);if(!Gt(s,c)){const n={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,curve:s.curve,oversample:s.oversample};s=R(c,n)}return g.set(c,s),hi(s)?await h(e,c,s.inputs[0]):await h(e,c,s),s};return{render(e,c){const s=g.get(c);return s!==void 0?Promise.resolve(s):t(e,c)}}},du=()=>typeof window>"u"?null:window,vu=(R,y)=>h=>{h.copyFromChannel=(g,t,e=0)=>{const c=R(e),s=R(t);if(s>=h.numberOfChannels)throw y();const a=h.length,n=h.getChannelData(s),i=g.length;for(let r=c<0?-c:0;r+c<a&&r<i;r+=1)g[r]=n[r+c]},h.copyToChannel=(g,t,e=0)=>{const c=R(e),s=R(t);if(s>=h.numberOfChannels)throw y();const a=h.length,n=h.getChannelData(s),i=g.length;for(let r=c<0?-c:0;r+c<a&&r<i;r+=1)n[r+c]=g[r]}},pu=R=>y=>{y.copyFromChannel=(h=>(g,t,e=0)=>{const c=R(e),s=R(t);if(c<y.length)return h.call(y,g,s,c)})(y.copyFromChannel),y.copyToChannel=(h=>(g,t,e=0)=>{const c=R(e),s=R(t);if(c<y.length)return h.call(y,g,s,c)})(y.copyToChannel)},mu=R=>(y,h)=>{const g=h.createBuffer(1,1,44100);y.buffer===null&&(y.buffer=g),R(y,"buffer",t=>()=>{const e=t.call(y);return e===g?null:e},t=>e=>t.call(y,e===null?g:e))},gu=(R,y)=>(h,g)=>{g.channelCount=1,g.channelCountMode="explicit",Object.defineProperty(g,"channelCount",{get:()=>1,set:()=>{throw R()}}),Object.defineProperty(g,"channelCountMode",{get:()=>"explicit",set:()=>{throw R()}});const t=h.createBufferSource();y(g,()=>{const s=g.numberOfInputs;for(let a=0;a<s;a+=1)t.connect(g,0,a)},()=>t.disconnect(g))},Pr=(R,y,h)=>R.copyFromChannel===void 0?R.getChannelData(h)[0]:(R.copyFromChannel(y,h),y[0]),Rr=R=>{if(R===null)return!1;const y=R.length;return y%2!==0?R[Math.floor(y/2)]!==0:R[y/2-1]+R[y/2]!==0},Xi=(R,y,h,g)=>{let t=R;for(;!t.hasOwnProperty(y);)t=Object.getPrototypeOf(t);const{get:e,set:c}=Object.getOwnPropertyDescriptor(t,y);Object.defineProperty(R,y,{get:h(e),set:g(c)})},xu=R=>({...R,outputChannelCount:R.outputChannelCount!==void 0?R.outputChannelCount:R.numberOfInputs===1&&R.numberOfOutputs===1?[R.channelCount]:Array.from({length:R.numberOfOutputs},()=>1)}),yu=R=>({...R,channelCount:R.numberOfOutputs}),Tu=R=>{const{imag:y,real:h}=R;return y===void 0?h===void 0?{...R,imag:[0,0],real:[0,0]}:{...R,imag:Array.from(h,()=>0),real:h}:h===void 0?{...R,imag:y,real:Array.from(y,()=>0)}:{...R,imag:y,real:h}},Or=(R,y,h)=>{try{R.setValueAtTime(y,h)}catch(g){if(g.code!==9)throw g;Or(R,y,h+1e-7)}},Su=R=>{const y=R.createBufferSource();y.start();try{y.start()}catch{return!0}return!1},Eu=R=>{const y=R.createBufferSource(),h=R.createBuffer(1,1,44100);y.buffer=h;try{y.start(0,1)}catch{return!1}return!0},Cu=R=>{const y=R.createBufferSource();y.start();try{y.stop()}catch{return!1}return!0},hs=R=>{const y=R.createOscillator();try{y.start(-1)}catch(h){return h instanceof RangeError}return!1},Lr=R=>{const y=R.createBuffer(1,1,44100),h=R.createBufferSource();h.buffer=y,h.start(),h.stop();try{return h.stop(),!0}catch{return!1}},ls=R=>{const y=R.createOscillator();try{y.stop(-1)}catch(h){return h instanceof RangeError}return!1},Au=R=>{const{port1:y,port2:h}=new MessageChannel;try{y.postMessage(R)}finally{y.close(),h.close()}},Mu=R=>{R.start=(y=>(h=0,g=0,t)=>{const e=R.buffer,c=e===null?g:Math.min(e.duration,g);e!==null&&c>e.duration-.5/R.context.sampleRate?y.call(R,h,0,0):y.call(R,h,c,t)})(R.start)},Fr=(R,y)=>{const h=y.createGain();R.connect(h);const g=(t=>()=>{t.call(R,h),R.removeEventListener("ended",g)})(R.disconnect);R.addEventListener("ended",g),li(R,h),R.stop=(t=>{let e=!1;return(c=0)=>{if(e)try{t.call(R,c)}catch{h.gain.setValueAtTime(0,c)}else t.call(R,c),e=!0}})(R.stop)},ui=(R,y)=>h=>{const g={value:R};return Object.defineProperties(h,{currentTarget:g,target:g}),typeof y=="function"?y.call(R,h):y.handleEvent.call(R,h)},Pu=Za(Ke),Ru=ka(Ke),Ou=uh(Pn),Ir=new WeakMap,Lu=Oh(Ir),_t=Xo(new Map,new WeakMap),ne=du(),Dr=sl(_t,ae),us=Rh(Ut),Bt=kl(Ut,us,ze),Fu=io(Dr,mt,Bt),pt=Ih(Mn),Ce=Il(ne),ut=Qh(Ce),Nr=new WeakMap,Br=Th(ui),Wi=hl(ne),fs=bh(Wi),cs=Zh(ne),wr=Kh(ne),Ti=ul(ne),Pt=Oo(Ka(hr),ja(Pu,Ru,sn,Ou,rn,Ut,Lu,Bi,mt,Ke,ye,ze,ki),_t,Yh(Hn,rn,Ut,mt,xi,ye),ae,Rn,Xt,ah(sn,Hn,Ut,mt,xi,pt,ye,ut),dh(Nr,Ut,kt),Br,pt,fs,cs,wr,ut,Ti),Iu=eo(Pt,Fu,ae,Dr,pt,ut),ds=new WeakSet,js=rl(ne),Gr=_o(new Uint32Array(1)),vs=vu(Gr,ae),ps=pu(Gr),Du=so(ds,_t,Xt,js,Ce,au(js),vs,ps),On=qa(bt),Vr=ql(us,Gi,ze),oe=Jo(Vr),fi=ol(On,_t,Su,Eu,Cu,hs,Lr,ls,Mu,mu(Xi),Fr),he=jl(Lh(Gi),Vr),Nu=oo(oe,fi,mt,he,Bt),te=Lo(Ja(lr),Nr,is,Fo,Ya,Xa,Wa,za,Ha,Xn,ar,Wi,Or),Bu=ao(Pt,Nu,te,Nt,fi,pt,ut,ui),wu=go(Pt,xo,ae,Nt,ll(bt,Xi),pt,ut,Bt),Gu=Yo(oe,Cr,mt,he,Bt),Je=eu(Ir),Vu=Uo(Pt,te,Gu,Rn,Cr,pt,ut,Je),Be=il(Ke,cs),Uu=gu(Nt,Be),we=gl(Wi,Uu),Yu=Ho(we,mt,Bt),Xu=zo(Pt,Yu,we,pt,ut),Wu=Ko(Ui,mt,Bt),zu=Zo(Pt,Wu,Ui,pt,ut,yu),Hu=Tl(On,fi,bt,Be),ci=yl(On,_t,Hu,hs,ls),bu=qo(oe,ci,mt,he,Bt),Zu=ko(Pt,te,bu,ci,pt,ut,ui),Ur=Sl(Xt,Xi),Ku=ih(Ur,mt,Bt),Ju=eh(Pt,Ku,Ur,pt,ut,Je),Qu=lh(oe,Ar,mt,he,Bt),$u=hh(Pt,te,Qu,Ar,pt,ut,Je),Yr=El(Xt),ju=gh(oe,Yr,mt,he,Bt),ku=mh(Pt,te,ju,Yr,Xt,pt,ut,Je),qu=Mh(oe,bt,mt,he,Bt),_u=Ah(Pt,te,qu,bt,pt,ut),tf=Pl(Rn,Nt,Yi,Xt),Ln=_l(_t,bt,Yi,hu(bt,Ce)),ef=Uh(fi,mt,Ce,Bt,Ln),nf=Cl(tf),sf=Gh(Pt,nf,ef,pt,ut,Je),rf=yo(te,we,ci,Yi,Xt,Pr,ut,Xi),Xr=new WeakMap,af=el(wu,rf,Br,ut,Xr,ui),Wr=Dl(On,_t,hs,Lr,ls,Fr),of=bl(oe,Wr,mt,he,Bt),hf=Hl(Pt,te,Wr,of,pt,ut,ui),zr=$o(fi),lf=Yl(zr,Nt,bt,Rr,Be),Fn=Ul(zr,Nt,lf,Rr,Be,Wi,Xi),uf=Bl(sn,Nt,we,bt,Yi,Fn,Xt,rn,Pr,Be),Hr=Nl(uf),ff=Jl(oe,we,ci,bt,Hr,mt,Ce,he,Bt,Ln),cf=Kl(Pt,te,Hr,ff,pt,ut,Je),df=wl(ae),vf=$l(df,pt,new WeakSet,Tu),pf=Vl(we,Ui,bt,Fn,Xt,Be),br=Gl(pf,Xt),mf=ru(oe,br,mt,he,Bt),gf=su(Pt,te,br,mf,pt,ut),xf=cu(Fn,mt,Bt),yf=fu(Pt,Nt,Fn,xf,pt,ut,Je),Zr=$h(ne),ms=Sh(ne),Kr=new WeakMap,Tf=Dh(Kr,Ce),Sf=Zr?$a(_t,Xt,yh(ne),ms,Eh(ba),pt,Tf,ut,Ti,new WeakMap,new WeakMap,ou(Ti,Ce),ne):void 0,Ef=Jh(fs,ut),Cf=rh(ds,_t,sh,xh,new WeakSet,pt,Ef,en,yi,vs,ps),Jr=Go(Sf,Iu,Du,Bu,Vu,Xu,zu,Zu,Ju,Cf,$u,ku,_u,sf,af,hf,cf,vf,gf,yf),Af=jh(Pt,Rl,pt,ut),Mf=qh(Pt,Ol,pt,ut),Pf=_h(Pt,Ll,pt,ut),Rf=Fl(Nt,ut),Of=tl(Pt,Rf,pt),Lf=mo(Jr,Nt,Xt,lu,Af,Mf,Pf,Of,Wi),gs=Nh(Xr),Ff=_a(gs),Qr=Qo(ae),If=fh(gs),$r=vh(ae),jr=new WeakMap,Df=Ph(jr,kt),Nf=ml(Qr,ae,Nt,we,Ui,ci,bt,Yi,Xt,$r,ms,Df,Be),Bf=cl(Nt,Nf,bt,Xt,Be),wf=wo(oe,Qr,fi,we,Ui,ci,bt,If,$r,ms,mt,Ti,Ce,he,Bt,Ln),Gf=Fh(Kr),Vf=tu(jr),ks=Zr?Do(Ff,Pt,te,wf,Bf,Ut,Gf,pt,ut,Ti,xu,Vf,Au,ui):void 0,Uf=nh(Xt,Ce),Yf=iu(ds,_t,us,gs,Ln,en,vs,ps),Xf=Wl(Jr,_t,Nt,Uf,Yf),Wf=Xh(Mn,fs),zf=Wh(es,cs),Hf=zh(is,wr),bf=Hh(Mn,ut);function at(R,y){if(!R)throw new Error(y)}function Ie(R,y,h=1/0){if(!(y<=R&&R<=h))throw new RangeError(`Value must be within [${y}, ${h}], got: ${R}`)}function kr(R){!R.isOffline&&R.state!=="running"&&xs('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let qr=console;function Zf(...R){qr.log(...R)}function xs(...R){qr.warn(...R)}function Jt(R){return typeof R>"u"}function ht(R){return!Jt(R)}function Kf(R){return typeof R=="function"}function De(R){return typeof R=="number"}function Ye(R){return Object.prototype.toString.call(R)==="[object Object]"&&R.constructor===Object}function Jf(R){return typeof R=="boolean"}function Kt(R){return Array.isArray(R)}function se(R){return typeof R=="string"}function $i(R){return se(R)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(R)}function Qf(R){return new Lf(R)}function $f(R,y,h){return new Xf(R,y,h)}const Xe=typeof self=="object"?self:null,jf=Xe&&(Xe.hasOwnProperty("AudioContext")||Xe.hasOwnProperty("webkitAudioContext"));function kf(R,y,h){return at(ht(ks),"This node only works in a secure context (https or localhost)"),new ks(R,y,h)}function ee(R,y,h,g){var t=arguments.length,e=t<3?y:g===null?g=Object.getOwnPropertyDescriptor(y,h):g,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(R,y,h,g);else for(var s=R.length-1;s>=0;s--)(c=R[s])&&(e=(t<3?c(e):t>3?c(y,h,e):c(y,h))||e);return t>3&&e&&Object.defineProperty(y,h,e),e}function Lt(R,y,h,g){function t(e){return e instanceof h?e:new h(function(c){c(e)})}return new(h||(h=Promise))(function(e,c){function s(i){try{n(g.next(i))}catch(r){c(r)}}function a(i){try{n(g.throw(i))}catch(r){c(r)}}function n(i){i.done?e(i.value):t(i.value).then(s,a)}n((g=g.apply(R,y||[])).next())})}class qf{constructor(y,h,g){this._callback=y,this._type=h,this._updateInterval=g,this._createClock()}_createWorker(){const y=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),h=URL.createObjectURL(y),g=new Worker(h);g.onmessage=this._callback.bind(this),this._worker=g}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(y){this._updateInterval=Math.max(y,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(y*1e3,1))}get type(){return this._type}set type(y){this._disposeClock(),this._type=y,this._createClock()}dispose(){this._disposeClock()}}function He(R){return Hf(R)}function Fe(R){return zf(R)}function qi(R){return bf(R)}function ke(R){return Wf(R)}function _r(R){return R instanceof AudioBuffer}function _f(R,y){return R==="value"||He(y)||Fe(y)||_r(y)}function We(R,...y){if(!y.length)return R;const h=y.shift();if(Ye(R)&&Ye(h))for(const g in h)_f(g,h[g])?R[g]=h[g]:Ye(h[g])?(R[g]||Object.assign(R,{[g]:{}}),We(R[g],h[g])):Object.assign(R,{[g]:h[g]});return We(R,...y)}function tc(R,y){return R.length===y.length&&R.every((h,g)=>y[g]===h)}function et(R,y,h=[],g){const t={},e=Array.from(y);if(Ye(e[0])&&g&&!Reflect.has(e[0],g)&&(Object.keys(e[0]).some(s=>Reflect.has(R,s))||(We(t,{[g]:e[0]}),h.splice(h.indexOf(g),1),e.shift())),e.length===1&&Ye(e[0]))We(t,e[0]);else for(let c=0;c<h.length;c++)ht(e[c])&&(t[h[c]]=e[c]);return We(R,t)}function ec(R){return R.constructor.getDefaults()}function _e(R,y){return Jt(R)?y:R}function Ve(R,y){return y.forEach(h=>{Reflect.has(R,h)&&delete R[h]}),R}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class Ae{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...y){(this.debug||Xe&&this.toString()===Xe.TONE_DEBUG_CLASS)&&Zf(this,...y)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ae.version=rr;const ys=1e-6;function ln(R,y){return R>y+ys}function Qn(R,y){return ln(R,y)||Qt(R,y)}function ta(R,y){return R+ys<y}function Qt(R,y){return Math.abs(R-y)<ys}function ic(R,y,h){return Math.max(Math.min(R,h),y)}class le extends Ae{constructor(){super(),this.name="Timeline",this._timeline=[];const y=et(le.getDefaults(),arguments,["memory"]);this.memory=y.memory,this.increasing=y.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(y){if(at(Reflect.has(y,"time"),"Timeline: events must have a time attribute"),y.time=y.time.valueOf(),this.increasing&&this.length){const h=this._timeline[this.length-1];at(Qn(y.time,h.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(y)}else{const h=this._search(y.time);this._timeline.splice(h+1,0,y)}if(this.length>this.memory){const h=this.length-this.memory;this._timeline.splice(0,h)}return this}remove(y){const h=this._timeline.indexOf(y);return h!==-1&&this._timeline.splice(h,1),this}get(y,h="time"){const g=this._search(y,h);return g!==-1?this._timeline[g]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(y,h="time"){const g=this._search(y,h);return g+1<this._timeline.length?this._timeline[g+1]:null}getBefore(y){const h=this._timeline.length;if(h>0&&this._timeline[h-1].time<y)return this._timeline[h-1];const g=this._search(y);return g-1>=0?this._timeline[g-1]:null}cancel(y){if(this._timeline.length>1){let h=this._search(y);if(h>=0)if(Qt(this._timeline[h].time,y)){for(let g=h;g>=0&&Qt(this._timeline[g].time,y);g--)h=g;this._timeline=this._timeline.slice(0,h)}else this._timeline=this._timeline.slice(0,h+1);else this._timeline=[]}else this._timeline.length===1&&Qn(this._timeline[0].time,y)&&(this._timeline=[]);return this}cancelBefore(y){const h=this._search(y);return h>=0&&(this._timeline=this._timeline.slice(h+1)),this}previousEvent(y){const h=this._timeline.indexOf(y);return h>0?this._timeline[h-1]:null}_search(y,h="time"){if(this._timeline.length===0)return-1;let g=0;const t=this._timeline.length;let e=t;if(t>0&&this._timeline[t-1][h]<=y)return t-1;for(;g<e;){let c=Math.floor(g+(e-g)/2);const s=this._timeline[c],a=this._timeline[c+1];if(Qt(s[h],y)){for(let n=c;n<this._timeline.length;n++){const i=this._timeline[n];if(Qt(i[h],y))c=n;else break}return c}else{if(ta(s[h],y)&&ln(a[h],y))return c;ln(s[h],y)?e=c:g=c+1}}return-1}_iterate(y,h=0,g=this._timeline.length-1){this._timeline.slice(h,g+1).forEach(y)}forEach(y){return this._iterate(y),this}forEachBefore(y,h){const g=this._search(y);return g!==-1&&this._iterate(h,0,g),this}forEachAfter(y,h){const g=this._search(y);return this._iterate(h,g+1),this}forEachBetween(y,h,g){let t=this._search(y),e=this._search(h);return t!==-1&&e!==-1?(this._timeline[t].time!==y&&(t+=1),this._timeline[e].time===h&&(e-=1),this._iterate(g,t,e)):t===-1&&this._iterate(g,0,e),this}forEachFrom(y,h){let g=this._search(y);for(;g>=0&&this._timeline[g].time>=y;)g--;return this._iterate(h,g+1),this}forEachAtTime(y,h){const g=this._search(y);if(g!==-1&&Qt(this._timeline[g].time,y)){let t=g;for(let e=g;e>=0&&Qt(this._timeline[e].time,y);e--)t=e;this._iterate(e=>{h(e)},t,g)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const ea=[];function In(R){ea.push(R)}function nc(R){ea.forEach(y=>y(R))}const ia=[];function Dn(R){ia.push(R)}function sc(R){ia.forEach(y=>y(R))}class zi extends Ae{constructor(){super(...arguments),this.name="Emitter"}on(y,h){return y.split(/\W+/).forEach(t=>{Jt(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(h)}),this}once(y,h){const g=(...t)=>{h(...t),this.off(y,g)};return this.on(y,g),this}off(y,h){return y.split(/\W+/).forEach(t=>{if(Jt(this._events)&&(this._events={}),this._events.hasOwnProperty(y))if(Jt(h))this._events[y]=[];else{const e=this._events[y];for(let c=e.length-1;c>=0;c--)e[c]===h&&e.splice(c,1)}}),this}emit(y,...h){if(this._events&&this._events.hasOwnProperty(y)){const g=this._events[y].slice(0);for(let t=0,e=g.length;t<e;t++)g[t].apply(this,h)}return this}static mixin(y){["on","once","off","emit"].forEach(h=>{const g=Object.getOwnPropertyDescriptor(zi.prototype,h);Object.defineProperty(y.prototype,h,g)})}dispose(){return super.dispose(),this._events=void 0,this}}class na extends zi{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Hi extends na{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new le,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const y=et(Hi.getDefaults(),arguments,["context"]);y.context?this._context=y.context:this._context=Qf({latencyHint:y.latencyHint}),this._ticker=new qf(this.emit.bind(this,"tick"),y.clockSource,y.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(y.latencyHint),this.lookAhead=y.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(nc(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(y,h,g){return this._context.createBuffer(y,h,g)}createChannelMerger(y){return this._context.createChannelMerger(y)}createChannelSplitter(y){return this._context.createChannelSplitter(y)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(y){return this._context.createDelay(y)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(y,h){return this._context.createIIRFilter(y,h)}createPanner(){return this._context.createPanner()}createPeriodicWave(y,h,g){return this._context.createPeriodicWave(y,h,g)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(y){return at(ke(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(y)}createMediaElementSource(y){return at(ke(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(y)}createMediaStreamDestination(){return at(ke(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(y){return this._context.decodeAudioData(y)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(y){at(!this._initialized,"The listener cannot be set after initialization."),this._listener=y}get transport(){return this.initialize(),this._transport}set transport(y){at(!this._initialized,"The transport cannot be set after initialization."),this._transport=y}get draw(){return this.initialize(),this._draw}set draw(y){at(!this._initialized,"Draw cannot be set after initialization."),this._draw=y}get destination(){return this.initialize(),this._destination}set destination(y){at(!this._initialized,"The destination cannot be set after initialization."),this._destination=y}createAudioWorkletNode(y,h){return kf(this.rawContext,y,h)}addAudioWorkletModule(y,h){return Lt(this,void 0,void 0,function*(){at(ht(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(h)||this._workletModules.set(h,this.rawContext.audioWorklet.addModule(y)),yield this._workletModules.get(h)})}workletsAreReady(){return Lt(this,void 0,void 0,function*(){const y=[];this._workletModules.forEach(h=>y.push(h)),yield Promise.all(y)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(y){this._ticker.updateInterval=y}get clockSource(){return this._ticker.type}set clockSource(y){this._ticker.type=y}get latencyHint(){return this._latencyHint}_setLatencyHint(y){let h=0;if(this._latencyHint=y,se(y))switch(y){case"interactive":h=.1;break;case"playback":h=.5;break;case"balanced":h=.25;break}this.lookAhead=h,this.updateInterval=h/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return ke(this._context)?this._context.resume():Promise.resolve()}close(){return Lt(this,void 0,void 0,function*(){ke(this._context)&&(yield this._context.close()),this._initialized&&sc(this)})}getConstant(y){if(this._constants.has(y))return this._constants.get(y);{const h=this._context.createBuffer(1,128,this._context.sampleRate),g=h.getChannelData(0);for(let e=0;e<g.length;e++)g[e]=y;const t=this._context.createBufferSource();return t.channelCount=1,t.channelCountMode="explicit",t.buffer=h,t.loop=!0,t.start(0),this._constants.set(y,t),t}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(y=>this._constants[y].disconnect()),this}_timeoutLoop(){const y=this.now();let h=this._timeouts.peek();for(;this._timeouts.length&&h&&h.time<=y;)h.callback(),this._timeouts.shift(),h=this._timeouts.peek()}setTimeout(y,h){this._timeoutIds++;const g=this.now();return this._timeouts.add({callback:y,id:this._timeoutIds,time:g+h}),this._timeoutIds}clearTimeout(y){return this._timeouts.forEach(h=>{h.id===y&&this._timeouts.remove(h)}),this}clearInterval(y){return this.clearTimeout(y)}setInterval(y,h){const g=++this._timeoutIds,t=()=>{const e=this.now();this._timeouts.add({callback:()=>{y(),t()},id:g,time:e+h})};return t(),g}}class rc extends na{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(y,h,g){return{}}createChannelMerger(y){return{}}createChannelSplitter(y){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(y){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(y,h){return{}}createPanner(){return{}}createPeriodicWave(y,h,g){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(y){return{}}createMediaElementSource(y){return{}}createMediaStreamDestination(){return{}}decodeAudioData(y){return Promise.resolve({})}createAudioWorkletNode(y,h){return{}}get rawContext(){return{}}addAudioWorkletModule(y,h){return Lt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(y,h){return 0}clearTimeout(y){return this}setInterval(y,h){return 0}clearInterval(y){return this}getConstant(y){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(y){}get destination(){return{}}set destination(y){}now(){return 0}immediate(){return 0}}function yt(R,y){Kt(y)?y.forEach(h=>yt(R,h)):Object.defineProperty(R,y,{enumerable:!0,writable:!1})}function sa(R,y){Kt(y)?y.forEach(h=>sa(R,h)):Object.defineProperty(R,y,{writable:!0})}const ct=()=>{};class vt extends Ae{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ct;const y=et(vt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=y.reverse,this.onload=y.onload,y.url&&_r(y.url)||y.url instanceof vt?this.set(y.url):se(y.url)&&this.load(y.url).catch(y.onerror)}static getDefaults(){return{onerror:ct,onload:ct,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:$t().sampleRate}set(y){return y instanceof vt?y.loaded?this._buffer=y.get():y.onload=()=>{this.set(y),this.onload(this)}:this._buffer=y,this._reversed&&this._reverse(),this}get(){return this._buffer}load(y){return Lt(this,void 0,void 0,function*(){const h=vt.load(y).then(g=>{this.set(g),this.onload(this)});vt.downloads.push(h);try{yield h}finally{const g=vt.downloads.indexOf(h);vt.downloads.splice(g,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(y){const h=Kt(y)&&y[0].length>0,g=h?y.length:1,t=h?y[0].length:y.length,e=$t(),c=e.createBuffer(g,t,e.sampleRate),s=!h&&g===1?[y]:y;for(let a=0;a<g;a++)c.copyToChannel(s[a],a);return this._buffer=c,this}toMono(y){if(De(y))this.fromArray(this.toArray(y));else{let h=new Float32Array(this.length);const g=this.numberOfChannels;for(let t=0;t<g;t++){const e=this.toArray(t);for(let c=0;c<e.length;c++)h[c]+=e[c]}h=h.map(t=>t/g),this.fromArray(h)}return this}toArray(y){if(De(y))return this.getChannelData(y);if(this.numberOfChannels===1)return this.toArray(0);{const h=[];for(let g=0;g<this.numberOfChannels;g++)h[g]=this.getChannelData(g);return h}}getChannelData(y){return this._buffer?this._buffer.getChannelData(y):new Float32Array(0)}slice(y,h=this.duration){const g=Math.floor(y*this.sampleRate),t=Math.floor(h*this.sampleRate);at(g<t,"The start time must be less than the end time");const e=t-g,c=$t().createBuffer(this.numberOfChannels,e,this.sampleRate);for(let s=0;s<this.numberOfChannels;s++)c.copyToChannel(this.getChannelData(s).subarray(g,t),s);return new vt(c)}_reverse(){if(this.loaded)for(let y=0;y<this.numberOfChannels;y++)this.getChannelData(y).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(y){this._reversed!==y&&(this._reversed=y,this._reverse())}static fromArray(y){return new vt().fromArray(y)}static fromUrl(y){return Lt(this,void 0,void 0,function*(){return yield new vt().load(y)})}static load(y){return Lt(this,void 0,void 0,function*(){const h=y.match(/\[([^\]\[]+\|.+)\]$/);if(h){const s=h[1].split("|");let a=s[0];for(const n of s)if(vt.supportsType(n)){a=n;break}y=y.replace(h[0],a)}const g=vt.baseUrl===""||vt.baseUrl.endsWith("/")?vt.baseUrl:vt.baseUrl+"/",t=yield fetch(g+y);if(!t.ok)throw new Error(`could not load url: ${y}`);const e=yield t.arrayBuffer();return yield $t().decodeAudioData(e)})}static supportsType(y){const h=y.split("."),g=h[h.length-1];return document.createElement("audio").canPlayType("audio/"+g)!==""}static loaded(){return Lt(this,void 0,void 0,function*(){for(yield Promise.resolve();vt.downloads.length;)yield vt.downloads[0]})}}vt.baseUrl="";vt.downloads=[];class Ts extends Hi{constructor(){super({clockSource:"offline",context:qi(arguments[0])?arguments[0]:$f(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:qi(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=qi(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(y){return Lt(this,void 0,void 0,function*(){let h=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,h++;const g=Math.floor(this.sampleRate/128);y&&h%g===0&&(yield new Promise(t=>setTimeout(t,1)))}})}render(y=!0){return Lt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(y);const h=yield this._context.startRendering();return new vt(h)})}close(){return Promise.resolve()}}const ra=new rc;let ti=ra;function $t(){return ti===ra&&jf&&ac(new Hi),ti}function ac(R){ke(R)?ti=new Hi(R):qi(R)?ti=new Ts(R):ti=R}function oc(){return ti.resume()}if(Xe&&!Xe.TONE_SILENCE_LOGGING){const y=` * Tone.js v${rr} * `;console.log(`%c${y}`,"background: #000; color: #fff")}function hc(R){return Math.pow(10,R/20)}function lc(R){return 20*(Math.log(R)/Math.LN10)}function aa(R){return Math.pow(2,R/12)}let Nn=440;function uc(){return Nn}function fc(R){Nn=R}function Ue(R){return Math.round(oa(R))}function oa(R){return 69+12*Math.log2(R/Nn)}function ha(R){return Nn*Math.pow(2,(R-69)/12)}class Ss extends Ae{constructor(y,h,g){super(),this.defaultUnits="s",this._val=h,this._units=g,this.context=y,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:y=>this._frequencyToUnits(parseFloat(y)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:y=>this._ticksToUnits(parseInt(y,10)),regexp:/^(\d+)i$/i},m:{method:y=>this._beatsToUnits(parseInt(y,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(y,h)=>{const g=parseInt(y,10),t=h==="."?1.5:1;return g===1?this._beatsToUnits(this._getTimeSignature())*t:this._beatsToUnits(4/g)*t},regexp:/^(\d+)n(\.?)$/i},number:{method:y=>this._expressions[this.defaultUnits].method.call(this,y),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:y=>this._secondsToUnits(parseFloat(y)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:y=>parseInt(y,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:y=>{const h=parseInt(y,10);return this._beatsToUnits(8/(Math.floor(h)*3))},regexp:/^(\d+)t$/i},tr:{method:(y,h,g)=>{let t=0;return y&&y!=="0"&&(t+=this._beatsToUnits(this._getTimeSignature()*parseFloat(y))),h&&h!=="0"&&(t+=this._beatsToUnits(parseFloat(h))),g&&g!=="0"&&(t+=this._beatsToUnits(parseFloat(g)/4)),t},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Ss&&this.fromType(this._val),Jt(this._val))return this._noArg();if(se(this._val)&&Jt(this._units)){for(const y in this._expressions)if(this._expressions[y].regexp.test(this._val.trim())){this._units=y;break}}else if(Ye(this._val)){let y=0;for(const h in this._val)if(ht(this._val[h])){const g=this._val[h],t=new this.constructor(this.context,h).valueOf()*g;y+=t}return y}if(ht(this._units)){const y=this._expressions[this._units],h=this._val.toString().trim().match(y.regexp);return h?y.method.apply(this,h.slice(1)):y.method.call(this,this._val)}else return se(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(y){return 1/y}_beatsToUnits(y){return 60/this._getBpm()*y}_secondsToUnits(y){return y}_ticksToUnits(y){return y*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(y){switch(this._units=void 0,this.defaultUnits){case"s":this._val=y.toSeconds();break;case"i":this._val=y.toTicks();break;case"hz":this._val=y.toFrequency();break;case"midi":this._val=y.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class jt extends Ss{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:y=>this._now()+new this.constructor(this.context,y).valueOf(),regexp:/^\+(.+)/},quantize:{method:y=>{const h=new jt(this.context,y).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(h))},regexp:/^@(.+)/}})}quantize(y,h=1){const g=new this.constructor(this.context,y).valueOf(),t=this.valueOf(),s=Math.round(t/g)*g-t;return t+s*h}toNotation(){const y=this.toSeconds(),h=["1m"];for(let e=1;e<9;e++){const c=Math.pow(2,e);h.push(c+"n."),h.push(c+"n"),h.push(c+"t")}h.push("0");let g=h[0],t=new jt(this.context,h[0]).toSeconds();return h.forEach(e=>{const c=new jt(this.context,e).toSeconds();Math.abs(c-y)<Math.abs(t-y)&&(g=e,t=c)}),g}toBarsBeatsSixteenths(){const y=this._beatsToUnits(1);let h=this.valueOf()/y;h=parseFloat(h.toFixed(4));const g=Math.floor(h/this._getTimeSignature());let t=h%1*4;h=Math.floor(h)%this._getTimeSignature();const e=t.toString();return e.length>3&&(t=parseFloat(parseFloat(e).toFixed(3))),[g,h,t].join(":")}toTicks(){const y=this._beatsToUnits(1),h=this.valueOf()/y;return Math.round(h*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Ue(this.toFrequency())}_now(){return this.context.now()}}class Zt extends jt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return uc()}static set A4(y){fc(y)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(y){return this.defaultUnits==="midi"?y:Zt.mtof(y)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(y,h){const t=cc[y.toLowerCase()]+(parseInt(h,10)+1)*12;return this.defaultUnits==="midi"?t:Zt.mtof(t)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(y,h,g){let t=1;return y&&y!=="0"&&(t*=this._beatsToUnits(this._getTimeSignature()*parseFloat(y))),h&&h!=="0"&&(t*=this._beatsToUnits(parseFloat(h))),g&&g!=="0"&&(t*=this._beatsToUnits(parseFloat(g)/4)),t}}})}transpose(y){return new Zt(this.context,this.valueOf()*aa(y))}harmonize(y){return y.map(h=>this.transpose(h))}toMidi(){return Ue(this.valueOf())}toNote(){const y=this.toFrequency(),h=Math.log2(y/Zt.A4);let g=Math.round(12*h)+57;const t=Math.floor(g/12);return t<0&&(g+=-12*t),dc[g%12]+t.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const y=this._beatsToUnits(1),h=this.valueOf()/y;return Math.floor(h*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(y){return y}_ticksToUnits(y){return 1/(y*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(y){return 1/super._beatsToUnits(y)}_secondsToUnits(y){return 1/y}static mtof(y){return ha(y)}static ftom(y){return Ue(y)}}const cc={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},dc=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class gi extends jt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ht extends Ae{constructor(){super();const y=et(Ht.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=y.context}static getDefaults(){return{context:$t()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(y){return new jt(this.context,y).toSeconds()}toFrequency(y){return new Zt(this.context,y).toFrequency()}toTicks(y){return new gi(this.context,y).toTicks()}_getPartialProperties(y){const h=this.get();return Object.keys(h).forEach(g=>{Jt(y[g])&&delete h[g]}),h}get(){const y=ec(this);return Object.keys(y).forEach(h=>{if(Reflect.has(this,h)){const g=this[h];ht(g)&&ht(g.value)&&ht(g.setValueAtTime)?y[h]=g.value:g instanceof Ht?y[h]=g._getPartialProperties(y[h]):Kt(g)||De(g)||se(g)||Jf(g)?y[h]=g:delete y[h]}}),y}set(y){return Object.keys(y).forEach(h=>{Reflect.has(this,h)&&ht(this[h])&&(this[h]&&ht(this[h].value)&&ht(this[h].setValueAtTime)?this[h].value!==y[h]&&(this[h].value=y[h]):this[h]instanceof Ht?this[h].set(y[h]):this[h]=y[h])}),this}}class Es extends le{constructor(y="stopped"){super(),this.name="StateTimeline",this._initial=y,this.setStateAtTime(this._initial,0)}getValueAtTime(y){const h=this.get(y);return h!==null?h.state:this._initial}setStateAtTime(y,h,g){return Ie(h,0),this.add(Object.assign({},g,{state:y,time:h})),this}getLastState(y,h){const g=this._search(h);for(let t=g;t>=0;t--){const e=this._timeline[t];if(e.state===y)return e}}getNextState(y,h){const g=this._search(h);if(g!==-1)for(let t=g;t<this._timeline.length;t++){const e=this._timeline[t];if(e.state===y)return e}}}class gt extends Ht{constructor(){super(et(gt.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const y=et(gt.getDefaults(),arguments,["param","units","convert"]);for(at(ht(y.param)&&(He(y.param)||y.param instanceof gt),"param must be an AudioParam");!He(y.param);)y.param=y.param._param;this._swappable=ht(y.swappable)?y.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=y.param,this.input.connect(this._param)):this._param=this.input=y.param,this._events=new le(1e3),this._initialValue=this._param.defaultValue,this.units=y.units,this.convert=y.convert,this._minValue=y.minValue,this._maxValue=y.maxValue,ht(y.value)&&y.value!==this._toType(this._initialValue)&&this.setValueAtTime(y.value,0)}static getDefaults(){return Object.assign(Ht.getDefaults(),{convert:!0,units:"number"})}get value(){const y=this.now();return this.getValueAtTime(y)}set value(y){this.cancelScheduledValues(this.now()),this.setValueAtTime(y,this.now())}get minValue(){return ht(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ht(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(y,h){return this.units===h}_assertRange(y){return ht(this.maxValue)&&ht(this.minValue)&&Ie(y,this._fromType(this.minValue),this._fromType(this.maxValue)),y}_fromType(y){return this.convert&&!this.overridden?this._is(y,"time")?this.toSeconds(y):this._is(y,"decibels")?hc(y):this._is(y,"frequency")?this.toFrequency(y):y:this.overridden?0:y}_toType(y){return this.convert&&this.units==="decibels"?lc(y):y}setValueAtTime(y,h){const g=this.toSeconds(h),t=this._fromType(y);return at(isFinite(t)&&isFinite(g),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(y)}, ${JSON.stringify(h)}`),this._assertRange(t),this.log(this.units,"setValueAtTime",y,g),this._events.add({time:g,type:"setValueAtTime",value:t}),this._param.setValueAtTime(t,g),this}getValueAtTime(y){const h=Math.max(this.toSeconds(y),0),g=this._events.getAfter(h),t=this._events.get(h);let e=this._initialValue;if(t===null)e=this._initialValue;else if(t.type==="setTargetAtTime"&&(g===null||g.type==="setValueAtTime")){const c=this._events.getBefore(t.time);let s;c===null?s=this._initialValue:s=c.value,t.type==="setTargetAtTime"&&(e=this._exponentialApproach(t.time,s,t.value,t.constant,h))}else if(g===null)e=t.value;else if(g.type==="linearRampToValueAtTime"||g.type==="exponentialRampToValueAtTime"){let c=t.value;if(t.type==="setTargetAtTime"){const s=this._events.getBefore(t.time);s===null?c=this._initialValue:c=s.value}g.type==="linearRampToValueAtTime"?e=this._linearInterpolate(t.time,c,g.time,g.value,h):e=this._exponentialInterpolate(t.time,c,g.time,g.value,h)}else e=t.value;return this._toType(e)}setRampPoint(y){y=this.toSeconds(y);let h=this.getValueAtTime(y);return this.cancelAndHoldAtTime(y),this._fromType(h)===0&&(h=this._toType(this._minOutput)),this.setValueAtTime(h,y),this}linearRampToValueAtTime(y,h){const g=this._fromType(y),t=this.toSeconds(h);return at(isFinite(g)&&isFinite(t),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(y)}, ${JSON.stringify(h)}`),this._assertRange(g),this._events.add({time:t,type:"linearRampToValueAtTime",value:g}),this.log(this.units,"linearRampToValueAtTime",y,t),this._param.linearRampToValueAtTime(g,t),this}exponentialRampToValueAtTime(y,h){let g=this._fromType(y);g=Qt(g,0)?this._minOutput:g,this._assertRange(g);const t=this.toSeconds(h);return at(isFinite(g)&&isFinite(t),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(y)}, ${JSON.stringify(h)}`),this._events.add({time:t,type:"exponentialRampToValueAtTime",value:g}),this.log(this.units,"exponentialRampToValueAtTime",y,t),this._param.exponentialRampToValueAtTime(g,t),this}exponentialRampTo(y,h,g){return g=this.toSeconds(g),this.setRampPoint(g),this.exponentialRampToValueAtTime(y,g+this.toSeconds(h)),this}linearRampTo(y,h,g){return g=this.toSeconds(g),this.setRampPoint(g),this.linearRampToValueAtTime(y,g+this.toSeconds(h)),this}targetRampTo(y,h,g){return g=this.toSeconds(g),this.setRampPoint(g),this.exponentialApproachValueAtTime(y,g,h),this}exponentialApproachValueAtTime(y,h,g){h=this.toSeconds(h),g=this.toSeconds(g);const t=Math.log(g+1)/Math.log(200);return this.setTargetAtTime(y,h,t),this.cancelAndHoldAtTime(h+g*.9),this.linearRampToValueAtTime(y,h+g),this}setTargetAtTime(y,h,g){const t=this._fromType(y);at(isFinite(g)&&g>0,"timeConstant must be a number greater than 0");const e=this.toSeconds(h);return this._assertRange(t),at(isFinite(t)&&isFinite(e),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(y)}, ${JSON.stringify(h)}`),this._events.add({constant:g,time:e,type:"setTargetAtTime",value:t}),this.log(this.units,"setTargetAtTime",y,e,g),this._param.setTargetAtTime(t,e,g),this}setValueCurveAtTime(y,h,g,t=1){g=this.toSeconds(g),h=this.toSeconds(h);const e=this._fromType(y[0])*t;this.setValueAtTime(this._toType(e),h);const c=g/(y.length-1);for(let s=1;s<y.length;s++){const a=this._fromType(y[s])*t;this.linearRampToValueAtTime(this._toType(a),h+s*c)}return this}cancelScheduledValues(y){const h=this.toSeconds(y);return at(isFinite(h),`Invalid argument to cancelScheduledValues: ${JSON.stringify(y)}`),this._events.cancel(h),this._param.cancelScheduledValues(h),this.log(this.units,"cancelScheduledValues",h),this}cancelAndHoldAtTime(y){const h=this.toSeconds(y),g=this._fromType(this.getValueAtTime(h));at(isFinite(h),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(y)}`),this.log(this.units,"cancelAndHoldAtTime",h,"value="+g);const t=this._events.get(h),e=this._events.getAfter(h);return t&&Qt(t.time,h)?e?(this._param.cancelScheduledValues(e.time),this._events.cancel(e.time)):(this._param.cancelAndHoldAtTime(h),this._events.cancel(h+this.sampleTime)):e&&(this._param.cancelScheduledValues(e.time),this._events.cancel(e.time),e.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(g),h):e.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(g),h)),this._events.add({time:h,type:"setValueAtTime",value:g}),this._param.setValueAtTime(g,h),this}rampTo(y,h=.1,g){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(y,h,g):this.linearRampTo(y,h,g),this}apply(y){const h=this.context.currentTime;y.setValueAtTime(this.getValueAtTime(h),h);const g=this._events.get(h);if(g&&g.type==="setTargetAtTime"){const t=this._events.getAfter(g.time),e=t?t.time:h+2,c=(e-h)/10;for(let s=h;s<e;s+=c)y.linearRampToValueAtTime(this.getValueAtTime(s),s)}return this._events.forEachAfter(this.context.currentTime,t=>{t.type==="cancelScheduledValues"?y.cancelScheduledValues(t.time):t.type==="setTargetAtTime"?y.setTargetAtTime(t.value,t.time,t.constant):y[t.type](t.value,t.time)}),this}setParam(y){at(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const h=this.input;return h.disconnect(this._param),this.apply(y),this._param=y,h.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(y,h,g,t,e){return g+(h-g)*Math.exp(-(e-y)/t)}_linearInterpolate(y,h,g,t,e){return h+(t-h)*((e-y)/(g-y))}_exponentialInterpolate(y,h,g,t,e){return h*Math.pow(t/h,(e-y)/(g-y))}}class ot extends Ht{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return ht(this.input)?He(this.input)||this.input instanceof gt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ht(this.output)?this.output.numberOfOutputs:0}_isAudioNode(y){return ht(y)&&(y instanceof ot||Fe(y))}_getInternalNodes(){const y=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&y.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&y.push(this.output),y}_setChannelProperties(y){this._getInternalNodes().forEach(g=>{g.channelCount=y.channelCount,g.channelCountMode=y.channelCountMode,g.channelInterpretation=y.channelInterpretation})}_getChannelProperties(){const y=this._getInternalNodes();at(y.length>0,"ToneAudioNode does not have any internal nodes");const h=y[0];return{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(y){const h=this._getChannelProperties();this._setChannelProperties(Object.assign(h,{channelCount:y}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(y){const h=this._getChannelProperties();this._setChannelProperties(Object.assign(h,{channelCountMode:y}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(y){const h=this._getChannelProperties();this._setChannelProperties(Object.assign(h,{channelInterpretation:y}))}connect(y,h=0,g=0){return di(this,y,h,g),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return xs("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(y,h=0,g=0){return vc(this,y,h,g),this}chain(...y){return $n(this,...y),this}fan(...y){return y.forEach(h=>this.connect(h)),this}dispose(){return super.dispose(),ht(this.input)&&(this.input instanceof ot?this.input.dispose():Fe(this.input)&&this.input.disconnect()),ht(this.output)&&(this.output instanceof ot?this.output.dispose():Fe(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function $n(...R){const y=R.shift();R.reduce((h,g)=>(h instanceof ot?h.connect(g):Fe(h)&&di(h,g),g),y)}function di(R,y,h=0,g=0){for(at(ht(R),"Cannot connect from undefined node"),at(ht(y),"Cannot connect to undefined node"),(y instanceof ot||Fe(y))&&at(y.numberOfInputs>0,"Cannot connect to node with no inputs"),at(R.numberOfOutputs>0,"Cannot connect from node with no outputs");y instanceof ot||y instanceof gt;)ht(y.input)&&(y=y.input);for(;R instanceof ot;)ht(R.output)&&(R=R.output);He(y)?R.connect(y,h):R.connect(y,h,g)}function vc(R,y,h=0,g=0){if(ht(y))for(;y instanceof ot;)y=y.input;for(;!Fe(R);)ht(R.output)&&(R=R.output);He(y)?R.disconnect(y,h):Fe(y)?R.disconnect(y,h,g):R.disconnect()}class wt extends ot{constructor(){super(et(wt.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const y=et(wt.getDefaults(),arguments,["gain","units"]);this.gain=new gt({context:this.context,convert:y.convert,param:this._gainNode.gain,units:y.units,value:y.gain,minValue:y.minValue,maxValue:y.maxValue}),yt(this,"gain")}static getDefaults(){return Object.assign(ot.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ri extends ot{constructor(y){super(y),this.onended=ct,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new wt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(h){const g=this.toSeconds(h);return this._startTime!==-1&&g>=this._startTime&&(this._stopTime===-1||g<=this._stopTime)?"started":"stopped"},this._fadeIn=y.fadeIn,this._fadeOut=y.fadeOut,this._curve=y.curve,this.onended=y.onended}static getDefaults(){return Object.assign(ot.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ct})}_startGain(y,h=1){at(this._startTime===-1,"Source cannot be started more than once");const g=this.toSeconds(this._fadeIn);return this._startTime=y+g,this._startTime=Math.max(this._startTime,this.context.currentTime),g>0?(this._gainNode.gain.setValueAtTime(0,y),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(h,y+g):this._gainNode.gain.exponentialApproachValueAtTime(h,y,g)):this._gainNode.gain.setValueAtTime(h,y),this}stop(y){return this.log("stop",y),this._stopGain(this.toSeconds(y)),this}_stopGain(y){at(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const h=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(y)+h,this._stopTime=Math.max(this._stopTime,this.context.currentTime),h>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,h,y):this._gainNode.gain.targetRampTo(0,h,y):(this._gainNode.gain.cancelAndHoldAtTime(y),this._gainNode.gain.setValueAtTime(0,y)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const g=this._curve==="exponential"?h*2:0;this._stopSource(this.now()+g),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ct&&(this.onended(this),this.onended=ct,!this.context.isOffline)){const y=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(y):setTimeout(y,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),at(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class un extends ri{constructor(){super(et(un.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const y=et(un.getDefaults(),arguments,["offset"]);di(this._source,this._gainNode),this.offset=new gt({context:this.context,convert:y.convert,param:this._source.offset,units:y.units,value:y.offset,minValue:y.minValue,maxValue:y.maxValue})}static getDefaults(){return Object.assign(ri.getDefaults(),{convert:!0,offset:1,units:"number"})}start(y){const h=this.toSeconds(y);return this.log("start",h),this._startGain(h),this._source.start(h),this}_stopSource(y){this._source.stop(y)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Mt extends ot{constructor(){super(et(Mt.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const y=et(Mt.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new un({context:this.context,convert:y.convert,offset:y.value,units:y.units,minValue:y.minValue,maxValue:y.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ot.getDefaults(),{convert:!0,units:"number",value:0})}connect(y,h=0,g=0){return Cs(this,y,h,g),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(y,h){return this._param.setValueAtTime(y,h),this}getValueAtTime(y){return this._param.getValueAtTime(y)}setRampPoint(y){return this._param.setRampPoint(y),this}linearRampToValueAtTime(y,h){return this._param.linearRampToValueAtTime(y,h),this}exponentialRampToValueAtTime(y,h){return this._param.exponentialRampToValueAtTime(y,h),this}exponentialRampTo(y,h,g){return this._param.exponentialRampTo(y,h,g),this}linearRampTo(y,h,g){return this._param.linearRampTo(y,h,g),this}targetRampTo(y,h,g){return this._param.targetRampTo(y,h,g),this}exponentialApproachValueAtTime(y,h,g){return this._param.exponentialApproachValueAtTime(y,h,g),this}setTargetAtTime(y,h,g){return this._param.setTargetAtTime(y,h,g),this}setValueCurveAtTime(y,h,g,t){return this._param.setValueCurveAtTime(y,h,g,t),this}cancelScheduledValues(y){return this._param.cancelScheduledValues(y),this}cancelAndHoldAtTime(y){return this._param.cancelAndHoldAtTime(y),this}rampTo(y,h,g){return this._param.rampTo(y,h,g),this}get value(){return this._param.value}set value(y){this._param.value=y}get convert(){return this._param.convert}set convert(y){this._param.convert=y}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(y){this._param.overridden=y}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(y){return this._param.apply(y),this}}function Cs(R,y,h,g){(y instanceof gt||He(y)||y instanceof Mt&&y.override)&&(y.cancelScheduledValues(0),y.setValueAtTime(0,0),y instanceof Mt&&(y.overridden=!0)),di(R,y,h,g)}class fn extends gt{constructor(){super(et(fn.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new le(1/0),this._multiplier=1;const y=et(fn.getDefaults(),arguments,["value"]);this._multiplier=y.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(y.value)}),this.setValueAtTime(y.value,0)}static getDefaults(){return Object.assign(gt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(y,h,g){h=this.toSeconds(h),this.setRampPoint(h);const t=this._fromType(y),e=this._events.get(h),c=Math.round(Math.max(1/g,1));for(let s=0;s<=c;s++){const a=g*s+h,n=this._exponentialApproach(e.time,e.value,t,g,a);this.linearRampToValueAtTime(this._toType(n),a)}return this}setValueAtTime(y,h){const g=this.toSeconds(h);super.setValueAtTime(y,h);const t=this._events.get(g),e=this._events.previousEvent(t),c=this._getTicksUntilEvent(e,g);return t.ticks=Math.max(c,0),this}linearRampToValueAtTime(y,h){const g=this.toSeconds(h);super.linearRampToValueAtTime(y,h);const t=this._events.get(g),e=this._events.previousEvent(t),c=this._getTicksUntilEvent(e,g);return t.ticks=Math.max(c,0),this}exponentialRampToValueAtTime(y,h){h=this.toSeconds(h);const g=this._fromType(y),t=this._events.get(h),e=Math.round(Math.max((h-t.time)*10,1)),c=(h-t.time)/e;for(let s=0;s<=e;s++){const a=c*s+t.time,n=this._exponentialInterpolate(t.time,t.value,h,g,a);this.linearRampToValueAtTime(this._toType(n),a)}return this}_getTicksUntilEvent(y,h){if(y===null)y={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Jt(y.ticks)){const c=this._events.previousEvent(y);y.ticks=this._getTicksUntilEvent(c,y.time)}const g=this._fromType(this.getValueAtTime(y.time));let t=this._fromType(this.getValueAtTime(h));const e=this._events.get(h);return e&&e.time===h&&e.type==="setValueAtTime"&&(t=this._fromType(this.getValueAtTime(h-this.sampleTime))),.5*(h-y.time)*(g+t)+y.ticks}getTicksAtTime(y){const h=this.toSeconds(y),g=this._events.get(h);return Math.max(this._getTicksUntilEvent(g,h),0)}getDurationOfTicks(y,h){const g=this.toSeconds(h),t=this.getTicksAtTime(h);return this.getTimeOfTick(t+y)-g}getTimeOfTick(y){const h=this._events.get(y,"ticks"),g=this._events.getAfter(y,"ticks");if(h&&h.ticks===y)return h.time;if(h&&g&&g.type==="linearRampToValueAtTime"&&h.value!==g.value){const t=this._fromType(this.getValueAtTime(h.time)),c=(this._fromType(this.getValueAtTime(g.time))-t)/(g.time-h.time),s=Math.sqrt(Math.pow(t,2)-2*c*(h.ticks-y)),a=(-t+s)/c,n=(-t-s)/c;return(a>0?a:n)+h.time}else return h?h.value===0?1/0:h.time+(y-h.ticks)/h.value:y/this._initialValue}ticksToTime(y,h){return this.getDurationOfTicks(y,h)}timeToTicks(y,h){const g=this.toSeconds(h),t=this.toSeconds(y),e=this.getTicksAtTime(g);return this.getTicksAtTime(g+t)-e}_fromType(y){return this.units==="bpm"&&this.multiplier?1/(60/y/this.multiplier):super._fromType(y)}_toType(y){return this.units==="bpm"&&this.multiplier?y/this.multiplier*60:super._toType(y)}get multiplier(){return this._multiplier}set multiplier(y){const h=this.value;this._multiplier=y,this.cancelScheduledValues(0),this.setValueAtTime(h,0)}}class cn extends Mt{constructor(){super(et(cn.getDefaults(),arguments,["value"])),this.name="TickSignal";const y=et(cn.getDefaults(),arguments,["value"]);this.input=this._param=new fn({context:this.context,convert:y.convert,multiplier:y.multiplier,param:this._constantSource.offset,units:y.units,value:y.value})}static getDefaults(){return Object.assign(Mt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(y,h){return this._param.ticksToTime(y,h)}timeToTicks(y,h){return this._param.timeToTicks(y,h)}getTimeOfTick(y){return this._param.getTimeOfTick(y)}getDurationOfTicks(y,h){return this._param.getDurationOfTicks(y,h)}getTicksAtTime(y){return this._param.getTicksAtTime(y)}get multiplier(){return this._param.multiplier}set multiplier(y){this._param.multiplier=y}dispose(){return super.dispose(),this._param.dispose(),this}}class dn extends Ht{constructor(){super(et(dn.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Es,this._tickOffset=new le;const y=et(dn.getDefaults(),arguments,["frequency"]);this.frequency=new cn({context:this.context,units:y.units,value:y.frequency}),yt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ht.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(y,h){const g=this.toSeconds(y);return this._state.getValueAtTime(g)!=="started"&&(this._state.setStateAtTime("started",g),ht(h)&&this.setTicksAtTime(h,g)),this}stop(y){const h=this.toSeconds(y);if(this._state.getValueAtTime(h)==="stopped"){const g=this._state.get(h);g&&g.time>0&&(this._tickOffset.cancel(g.time),this._state.cancel(g.time))}return this._state.cancel(h),this._state.setStateAtTime("stopped",h),this.setTicksAtTime(0,h),this}pause(y){const h=this.toSeconds(y);return this._state.getValueAtTime(h)==="started"&&this._state.setStateAtTime("paused",h),this}cancel(y){return y=this.toSeconds(y),this._state.cancel(y),this._tickOffset.cancel(y),this}getTicksAtTime(y){const h=this.toSeconds(y),g=this._state.getLastState("stopped",h),t={state:"paused",time:h};this._state.add(t);let e=g,c=0;return this._state.forEachBetween(g.time,h+this.sampleTime,s=>{let a=e.time;const n=this._tickOffset.get(s.time);n&&n.time>=e.time&&(c=n.ticks,a=n.time),e.state==="started"&&s.state!=="started"&&(c+=this.frequency.getTicksAtTime(s.time)-this.frequency.getTicksAtTime(a)),e=s}),this._state.remove(t),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(y){this.setTicksAtTime(y,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(y){const h=this.now(),g=this.frequency.timeToTicks(y,h);this.setTicksAtTime(g,h)}getSecondsAtTime(y){y=this.toSeconds(y);const h=this._state.getLastState("stopped",y),g={state:"paused",time:y};this._state.add(g);let t=h,e=0;return this._state.forEachBetween(h.time,y+this.sampleTime,c=>{let s=t.time;const a=this._tickOffset.get(c.time);a&&a.time>=t.time&&(e=a.seconds,s=a.time),t.state==="started"&&c.state!=="started"&&(e+=c.time-s),t=c}),this._state.remove(g),e}setTicksAtTime(y,h){return h=this.toSeconds(h),this._tickOffset.cancel(h),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(y,h),ticks:y,time:h}),this}getStateAtTime(y){return y=this.toSeconds(y),this._state.getValueAtTime(y)}getTimeOfTick(y,h=this.now()){const g=this._tickOffset.get(h),t=this._state.get(h),e=Math.max(g.time,t.time),c=this.frequency.getTicksAtTime(e)+y-g.ticks;return this.frequency.getTimeOfTick(c)}forEachTickBetween(y,h,g){let t=this._state.get(y);this._state.forEachBetween(y,h,c=>{t&&t.state==="started"&&c.state!=="started"&&this.forEachTickBetween(Math.max(t.time,y),c.time-this.sampleTime,g),t=c});let e=null;if(t&&t.state==="started"){const c=Math.max(t.time,y),s=this.frequency.getTicksAtTime(c),a=this.frequency.getTicksAtTime(t.time),n=s-a;let i=Math.ceil(n)-n;i=Qt(i,1)?0:i;let r=this.frequency.getTimeOfTick(s+i);for(;r<h;){try{g(r,Math.round(this.getTicksAtTime(r)))}catch(u){e=u;break}r+=this.frequency.getDurationOfTicks(1,r)}}if(e)throw e;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Si extends Ht{constructor(){super(et(Si.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=ct,this._lastUpdate=0,this._state=new Es("stopped"),this._boundLoop=this._loop.bind(this);const y=et(Si.getDefaults(),arguments,["callback","frequency"]);this.callback=y.callback,this._tickSource=new dn({context:this.context,frequency:y.frequency,units:y.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,yt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ht.getDefaults(),{callback:ct,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(y,h){kr(this.context);const g=this.toSeconds(y);return this.log("start",g),this._state.getValueAtTime(g)!=="started"&&(this._state.setStateAtTime("started",g),this._tickSource.start(g,h),g<this._lastUpdate&&this.emit("start",g,h)),this}stop(y){const h=this.toSeconds(y);return this.log("stop",h),this._state.cancel(h),this._state.setStateAtTime("stopped",h),this._tickSource.stop(h),h<this._lastUpdate&&this.emit("stop",h),this}pause(y){const h=this.toSeconds(y);return this._state.getValueAtTime(h)==="started"&&(this._state.setStateAtTime("paused",h),this._tickSource.pause(h),h<this._lastUpdate&&this.emit("pause",h)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(y){this._tickSource.ticks=y}get seconds(){return this._tickSource.seconds}set seconds(y){this._tickSource.seconds=y}getSecondsAtTime(y){return this._tickSource.getSecondsAtTime(y)}setTicksAtTime(y,h){return this._tickSource.setTicksAtTime(y,h),this}getTimeOfTick(y,h=this.now()){return this._tickSource.getTimeOfTick(y,h)}getTicksAtTime(y){return this._tickSource.getTicksAtTime(y)}nextTickTime(y,h){const g=this.toSeconds(h),t=this.getTicksAtTime(g);return this._tickSource.getTimeOfTick(t+y,g)}_loop(){const y=this._lastUpdate,h=this.now();this._lastUpdate=h,this.log("loop",y,h),y!==h&&(this._state.forEachBetween(y,h,g=>{switch(g.state){case"started":const t=this._tickSource.getTicksAtTime(g.time);this.emit("start",g.time,t);break;case"stopped":g.time!==0&&this.emit("stop",g.time);break;case"paused":this.emit("pause",g.time);break}}),this._tickSource.forEachTickBetween(y,h,(g,t)=>{this.callback(g,t)}))}getStateAtTime(y){const h=this.toSeconds(y);return this._state.getValueAtTime(h)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}zi.mixin(Si);class As extends Ae{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const y=et(As.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=y.baseUrl,Object.keys(y.urls).forEach(h=>{this._loadingCount++;const g=y.urls[h];this.add(h,g,this._bufferLoaded.bind(this,y.onload),y.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ct,onload:ct,urls:{}}}has(y){return this._buffers.has(y.toString())}get(y){return at(this.has(y),`ToneAudioBuffers has no buffer named: ${y}`),this._buffers.get(y.toString())}_bufferLoaded(y){this._loadingCount--,this._loadingCount===0&&y&&y()}get loaded(){return Array.from(this._buffers).every(([y,h])=>h.loaded)}add(y,h,g=ct,t=ct){return se(h)?this._buffers.set(y.toString(),new vt(this.baseUrl+h,g,t)):this._buffers.set(y.toString(),new vt(h,g,t)),this}dispose(){return super.dispose(),this._buffers.forEach(y=>y.dispose()),this._buffers.clear(),this}}class vn extends Zt{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(y){return Ue(super._frequencyToUnits(y))}_ticksToUnits(y){return Ue(super._ticksToUnits(y))}_beatsToUnits(y){return Ue(super._beatsToUnits(y))}_secondsToUnits(y){return Ue(super._secondsToUnits(y))}toMidi(){return this.valueOf()}toFrequency(){return ha(this.toMidi())}transpose(y){return new vn(this.context,this.toMidi()+y)}}class xe extends gi{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(y){return this._getPPQ()*y}_secondsToUnits(y){return Math.floor(y/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(y){return y}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class pc extends Ht{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new le,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(y,h){return this._events.add({callback:y,time:this.toSeconds(h)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(y){return this._events.cancel(this.toSeconds(y)),this}_drawLoop(){const y=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=y;){const h=this._events.shift();h&&y-h.time<=this.expiration&&h.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}In(R=>{R.draw=new pc({context:R})});Dn(R=>{R.draw.dispose()});class mc extends Ae{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(y){at(ht(y.time),"Events must have a time property"),at(ht(y.duration),"Events must have a duration parameter"),y.time=y.time.valueOf();let h=new gc(y.time,y.time+y.duration,y);for(this._root===null?this._root=h:this._root.insert(h),this._length++;h!==null;)h.updateHeight(),h.updateMax(),this._rebalance(h),h=h.parent;return this}remove(y){if(this._root!==null){const h=[];this._root.search(y.time,h);for(const g of h)if(g.event===y){this._removeNode(g),this._length--;break}}return this}get length(){return this._length}cancel(y){return this.forEachFrom(y,h=>this.remove(h)),this}_setRoot(y){this._root=y,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(y,h){y.parent!==null?(y.isLeftChild()?y.parent.left=h:y.parent.right=h,this._rebalance(y.parent)):this._setRoot(h)}_removeNode(y){if(y.left===null&&y.right===null)this._replaceNodeInParent(y,null);else if(y.right===null)this._replaceNodeInParent(y,y.left);else if(y.left===null)this._replaceNodeInParent(y,y.right);else{const h=y.getBalance();let g,t=null;if(h>0)if(y.left.right===null)g=y.left,g.right=y.right,t=g;else{for(g=y.left.right;g.right!==null;)g=g.right;g.parent&&(g.parent.right=g.left,t=g.parent,g.left=y.left,g.right=y.right)}else if(y.right.left===null)g=y.right,g.left=y.left,t=g;else{for(g=y.right.left;g.left!==null;)g=g.left;g.parent&&(g.parent.left=g.right,t=g.parent,g.left=y.left,g.right=y.right)}y.parent!==null?y.isLeftChild()?y.parent.left=g:y.parent.right=g:this._setRoot(g),t&&this._rebalance(t)}y.dispose()}_rotateLeft(y){const h=y.parent,g=y.isLeftChild(),t=y.right;t&&(y.right=t.left,t.left=y),h!==null?g?h.left=t:h.right=t:this._setRoot(t)}_rotateRight(y){const h=y.parent,g=y.isLeftChild(),t=y.left;t&&(y.left=t.right,t.right=y),h!==null?g?h.left=t:h.right=t:this._setRoot(t)}_rebalance(y){const h=y.getBalance();h>1&&y.left?y.left.getBalance()<0?this._rotateLeft(y.left):this._rotateRight(y):h<-1&&y.right&&(y.right.getBalance()>0?this._rotateRight(y.right):this._rotateLeft(y))}get(y){if(this._root!==null){const h=[];if(this._root.search(y,h),h.length>0){let g=h[0];for(let t=1;t<h.length;t++)h[t].low>g.low&&(g=h[t]);return g.event}}return null}forEach(y){if(this._root!==null){const h=[];this._root.traverse(g=>h.push(g)),h.forEach(g=>{g.event&&y(g.event)})}return this}forEachAtTime(y,h){if(this._root!==null){const g=[];this._root.search(y,g),g.forEach(t=>{t.event&&h(t.event)})}return this}forEachFrom(y,h){if(this._root!==null){const g=[];this._root.searchAfter(y,g),g.forEach(t=>{t.event&&h(t.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(y=>y.dispose()),this._root=null,this}}class gc{constructor(y,h,g){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=g,this.low=y,this.high=h,this.max=this.high}insert(y){y.low<=this.low?this.left===null?this.left=y:this.left.insert(y):this.right===null?this.right=y:this.right.insert(y)}search(y,h){y>this.max||(this.left!==null&&this.left.search(y,h),this.low<=y&&this.high>y&&h.push(this),!(this.low>y)&&this.right!==null&&this.right.search(y,h))}searchAfter(y,h){this.low>=y&&(h.push(this),this.left!==null&&this.left.searchAfter(y,h)),this.right!==null&&this.right.searchAfter(y,h)}traverse(y){y(this),this.left!==null&&this.left.traverse(y),this.right!==null&&this.right.traverse(y)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let y=0;return this.left!==null&&this.right!==null?y=this.left.height-this.right.height:this.left!==null?y=this.left.height+1:this.right!==null&&(y=-(this.right.height+1)),y}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(y){this._left=y,y!==null&&(y.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(y){this._right=y,y!==null&&(y.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class be extends ot{constructor(){super(et(be.getDefaults(),arguments,["volume"])),this.name="Volume";const y=et(be.getDefaults(),arguments,["volume"]);this.input=this.output=new wt({context:this.context,gain:y.volume,units:"decibels"}),this.volume=this.output.gain,yt(this,"volume"),this._unmutedVolume=y.volume,this.mute=y.mute}static getDefaults(){return Object.assign(ot.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(y){!this.mute&&y?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!y&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class pn extends ot{constructor(){super(et(pn.getDefaults(),arguments)),this.name="Destination",this.input=new be({context:this.context}),this.output=new wt({context:this.context}),this.volume=this.input.volume;const y=et(pn.getDefaults(),arguments);$n(this.input,this.output,this.context.rawContext.destination),this.mute=y.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ot.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(y){this.input.mute=y}chain(...y){return this.input.disconnect(),y.unshift(this.input),y.push(this.output),$n(...y),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}In(R=>{R.destination=new pn({context:R})});Dn(R=>{R.destination.dispose()});class xc extends Ae{constructor(y){super(),this.name="TimelineValue",this._timeline=new le({memory:10}),this._initialValue=y}set(y,h){return this._timeline.add({value:y,time:h}),this}get(y){const h=this._timeline.get(y);return h?h.value:this._initialValue}}class Ne{constructor(y,h){this.id=Ne._eventId++;const g=Object.assign(Ne.getDefaults(),h);this.transport=y,this.callback=g.callback,this._once=g.once,this.time=g.time}static getDefaults(){return{callback:ct,once:!1,time:0}}invoke(y){this.callback&&(this.callback(y),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Ne._eventId=0;class Ms extends Ne{constructor(y,h){super(y,h),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const g=Object.assign(Ms.getDefaults(),h);this.duration=new xe(y.context,g.duration).valueOf(),this._interval=new xe(y.context,g.interval).valueOf(),this._nextTick=g.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ne.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(y){this._createEvents(y),super.invoke(y)}_createEvents(y){const h=this.transport.getTicksAtTime(y);h>=this.time&&h>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new xe(this.context,this._nextTick).toSeconds()))}_restart(y){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const h=this.transport.getTicksAtTime(y);h>this.time&&(this._nextTick=this.time+Math.ceil((h-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new xe(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new xe(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Ei extends Ht{constructor(){super(et(Ei.getDefaults(),arguments)),this.name="Transport",this._loop=new xc(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new le,this._repeatedEvents=new mc,this._syncedSignals=[],this._swingAmount=0;const y=et(Ei.getDefaults(),arguments);this._ppq=y.ppq,this._clock=new Si({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=y.ppq,this.bpm.setValueAtTime(y.bpm,0),yt(this,"bpm"),this._timeSignature=y.timeSignature,this._swingTicks=y.ppq/2}static getDefaults(){return Object.assign(Ht.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(y,h){if(this._loop.get(y)&&h>=this._loopEnd&&(this.emit("loopEnd",y),this._clock.setTicksAtTime(this._loopStart,y),h=this._loopStart,this.emit("loopStart",y,this._clock.getSecondsAtTime(y)),this.emit("loop",y)),this._swingAmount>0&&h%this._ppq!==0&&h%(this._swingTicks*2)!==0){const g=h%(this._swingTicks*2)/(this._swingTicks*2),t=Math.sin(g*Math.PI)*this._swingAmount;y+=new xe(this.context,this._swingTicks*2/3).toSeconds()*t}this._timeline.forEachAtTime(h,g=>g.invoke(y))}schedule(y,h){const g=new Ne(this,{callback:y,time:new gi(this.context,h).toTicks()});return this._addEvent(g,this._timeline)}scheduleRepeat(y,h,g,t=1/0){const e=new Ms(this,{callback:y,duration:new jt(this.context,t).toTicks(),interval:new jt(this.context,h).toTicks(),time:new gi(this.context,g).toTicks()});return this._addEvent(e,this._repeatedEvents)}scheduleOnce(y,h){const g=new Ne(this,{callback:y,once:!0,time:new gi(this.context,h).toTicks()});return this._addEvent(g,this._timeline)}clear(y){if(this._scheduledEvents.hasOwnProperty(y)){const h=this._scheduledEvents[y.toString()];h.timeline.remove(h.event),h.event.dispose(),delete this._scheduledEvents[y.toString()]}return this}_addEvent(y,h){return this._scheduledEvents[y.id.toString()]={event:y,timeline:h},h.add(y),y.id}cancel(y=0){const h=this.toTicks(y);return this._timeline.forEachFrom(h,g=>this.clear(g.id)),this._repeatedEvents.forEachFrom(h,g=>this.clear(g.id)),this}_bindClockEvents(){this._clock.on("start",(y,h)=>{h=new xe(this.context,h).toSeconds(),this.emit("start",y,h)}),this._clock.on("stop",y=>{this.emit("stop",y)}),this._clock.on("pause",y=>{this.emit("pause",y)})}get state(){return this._clock.getStateAtTime(this.now())}start(y,h){let g;return ht(h)&&(g=this.toTicks(h)),this._clock.start(y,g),this}stop(y){return this._clock.stop(y),this}pause(y){return this._clock.pause(y),this}toggle(y){return y=this.toSeconds(y),this._clock.getStateAtTime(y)!=="started"?this.start(y):this.stop(y),this}get timeSignature(){return this._timeSignature}set timeSignature(y){Kt(y)&&(y=y[0]/y[1]*4),this._timeSignature=y}get loopStart(){return new jt(this.context,this._loopStart,"i").toSeconds()}set loopStart(y){this._loopStart=this.toTicks(y)}get loopEnd(){return new jt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(y){this._loopEnd=this.toTicks(y)}get loop(){return this._loop.get(this.now())}set loop(y){this._loop.set(y,this.now())}setLoopPoints(y,h){return this.loopStart=y,this.loopEnd=h,this}get swing(){return this._swingAmount}set swing(y){this._swingAmount=y}get swingSubdivision(){return new xe(this.context,this._swingTicks).toNotation()}set swingSubdivision(y){this._swingTicks=this.toTicks(y)}get position(){const y=this.now(),h=this._clock.getTicksAtTime(y);return new xe(this.context,h).toBarsBeatsSixteenths()}set position(y){const h=this.toTicks(y);this.ticks=h}get seconds(){return this._clock.seconds}set seconds(y){const h=this.now(),g=this._clock.frequency.timeToTicks(y,h);this.ticks=g}get progress(){if(this.loop){const y=this.now();return(this._clock.getTicksAtTime(y)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(y){if(this._clock.ticks!==y){const h=this.now();if(this.state==="started"){const g=this._clock.getTicksAtTime(h),t=this._clock.frequency.getDurationOfTicks(Math.ceil(g)-g,h),e=h+t;this.emit("stop",e),this._clock.setTicksAtTime(y,e),this.emit("start",e,this._clock.getSecondsAtTime(e))}else this._clock.setTicksAtTime(y,h)}}getTicksAtTime(y){return Math.round(this._clock.getTicksAtTime(y))}getSecondsAtTime(y){return this._clock.getSecondsAtTime(y)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(y){this._clock.frequency.multiplier=y}nextSubdivision(y){if(y=this.toTicks(y),this.state!=="started")return 0;{const h=this.now(),g=this.getTicksAtTime(h),t=y-g%y;return this._clock.nextTickTime(t,h)}}syncSignal(y,h){if(!h){const t=this.now();if(y.getValueAtTime(t)!==0){const c=1/(60/this.bpm.getValueAtTime(t)/this.PPQ);h=y.getValueAtTime(t)/c}else h=0}const g=new wt(h);return this.bpm.connect(g),g.connect(y._param),this._syncedSignals.push({initial:y.value,ratio:g,signal:y}),y.value=0,this}unsyncSignal(y){for(let h=this._syncedSignals.length-1;h>=0;h--){const g=this._syncedSignals[h];g.signal===y&&(g.ratio.dispose(),g.signal.value=g.initial,this._syncedSignals.splice(h,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),sa(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}zi.mixin(Ei);In(R=>{R.transport=new Ei({context:R})});Dn(R=>{R.transport.dispose()});class Yt extends ot{constructor(y){super(y),this.input=void 0,this._state=new Es("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ct,this._syncedStop=ct,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new be({context:this.context,mute:y.mute,volume:y.volume}),this.volume=this._volume.volume,yt(this,"volume"),this.onstop=y.onstop}static getDefaults(){return Object.assign(ot.getDefaults(),{mute:!1,onstop:ct,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(y){this._volume.mute=y}_clampToCurrentTime(y){return this._synced?y:Math.max(y,this.context.currentTime)}start(y,h,g){let t=Jt(y)&&this._synced?this.context.transport.seconds:this.toSeconds(y);if(t=this._clampToCurrentTime(t),!this._synced&&this._state.getValueAtTime(t)==="started")at(ln(t,this._state.get(t).time),"Start time must be strictly greater than previous start time"),this._state.cancel(t),this._state.setStateAtTime("started",t),this.log("restart",t),this.restart(t,h,g);else if(this.log("start",t),this._state.setStateAtTime("started",t),this._synced){const e=this._state.get(t);e&&(e.offset=this.toSeconds(_e(h,0)),e.duration=g?this.toSeconds(g):void 0);const c=this.context.transport.schedule(s=>{this._start(s,h,g)},t);this._scheduled.push(c),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>t&&this._syncedStart(this.now(),this.context.transport.seconds)}else kr(this.context),this._start(t,h,g);return this}stop(y){let h=Jt(y)&&this._synced?this.context.transport.seconds:this.toSeconds(y);if(h=this._clampToCurrentTime(h),this._state.getValueAtTime(h)==="started"||ht(this._state.getNextState("started",h))){if(this.log("stop",h),!this._synced)this._stop(h);else{const g=this.context.transport.schedule(this._stop.bind(this),h);this._scheduled.push(g)}this._state.cancel(h),this._state.setStateAtTime("stopped",h)}return this}restart(y,h,g){return y=this.toSeconds(y),this._state.getValueAtTime(y)==="started"&&(this._state.cancel(y),this._restart(y,h,g)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(y,h)=>{if(h>0){const g=this._state.get(h);if(g&&g.state==="started"&&g.time!==h){const t=h-this.toSeconds(g.time);let e;g.duration&&(e=this.toSeconds(g.duration)-t),this._start(y,this.toSeconds(g.offset)+t,e)}}},this._syncedStop=y=>{const h=this.context.transport.getSecondsAtTime(Math.max(y-this.sampleTime,0));this._state.getValueAtTime(h)==="started"&&this._stop(y)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(y=>this.context.transport.clear(y)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ct,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ci extends ri{constructor(){super(et(Ci.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const y=et(Ci.getDefaults(),arguments,["url","onload"]);di(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new gt({context:this.context,param:this._source.playbackRate,units:"positive",value:y.playbackRate}),this.loop=y.loop,this.loopStart=y.loopStart,this.loopEnd=y.loopEnd,this._buffer=new vt(y.url,y.onload,y.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ri.getDefaults(),{url:new vt,loop:!1,loopEnd:0,loopStart:0,onload:ct,onerror:ct,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(y){this._fadeIn=y}get fadeOut(){return this._fadeOut}set fadeOut(y){this._fadeOut=y}get curve(){return this._curve}set curve(y){this._curve=y}start(y,h,g,t=1){at(this.buffer.loaded,"buffer is either not set or not loaded");const e=this.toSeconds(y);this._startGain(e,t),this.loop?h=_e(h,this.loopStart):h=_e(h,0);let c=Math.max(this.toSeconds(h),0);if(this.loop){const s=this.toSeconds(this.loopEnd)||this.buffer.duration,a=this.toSeconds(this.loopStart),n=s-a;Qn(c,s)&&(c=(c-a)%n+a),Qt(c,this.buffer.duration)&&(c=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,ta(c,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(e,c)),ht(g)){let s=this.toSeconds(g);s=Math.max(s,0),this.stop(e+s)}return this}_stopSource(y){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(y)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(y){this._source.loopStart=this.toSeconds(y)}get loopEnd(){return this._source.loopEnd}set loopEnd(y){this._source.loopEnd=this.toSeconds(y)}get buffer(){return this._buffer}set buffer(y){this._buffer.set(y)}get loop(){return this._source.loop}set loop(y){this._source.loop=y,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Qe(R,y){return Lt(this,void 0,void 0,function*(){const h=y/R.context.sampleRate,g=new Ts(1,h,R.context.sampleRate);return new R.constructor(Object.assign(R.get(),{frequency:2/h,detune:0,context:g})).toDestination().start(0),(yield g.render()).getChannelData(0)})}class mn extends ri{constructor(){super(et(mn.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const y=et(mn.getDefaults(),arguments,["frequency","type"]);di(this._oscillator,this._gainNode),this.type=y.type,this.frequency=new gt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:y.frequency}),this.detune=new gt({context:this.context,param:this._oscillator.detune,units:"cents",value:y.detune}),yt(this,["frequency","detune"])}static getDefaults(){return Object.assign(ri.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(y){const h=this.toSeconds(y);return this.log("start",h),this._startGain(h),this._oscillator.start(h),this}_stopSource(y){this._oscillator.stop(y)}setPeriodicWave(y){return this._oscillator.setPeriodicWave(y),this}get type(){return this._oscillator.type}set type(y){this._oscillator.type=y}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class At extends Yt{constructor(){super(et(At.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const y=et(At.getDefaults(),arguments,["frequency","type"]);this.frequency=new Mt({context:this.context,units:"frequency",value:y.frequency}),yt(this,"frequency"),this.detune=new Mt({context:this.context,units:"cents",value:y.detune}),yt(this,"detune"),this._partials=y.partials,this._partialCount=y.partialCount,this._type=y.type,y.partialCount&&y.type!=="custom"&&(this._type=this.baseType+y.partialCount.toString()),this.phase=y.phase}static getDefaults(){return Object.assign(Yt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(y){const h=this.toSeconds(y),g=new mn({context:this.context,onended:()=>this.onstop(this)});this._oscillator=g,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(h)}_stop(y){const h=this.toSeconds(y);this._oscillator&&this._oscillator.stop(h)}_restart(y){const h=this.toSeconds(y);return this.log("restart",h),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(h),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return At._periodicWaveCache.find(h=>h.phase===this._phase&&tc(h.partials,this._partials));{const y=At._periodicWaveCache.find(h=>h.type===this._type&&h.phase===this._phase);return this._partialCount=y?y.partialCount:this._partialCount,y}}get type(){return this._type}set type(y){this._type=y;const h=["sine","square","sawtooth","triangle"].indexOf(y)!==-1;if(this._phase===0&&h)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=y);else{const g=this._getCachedPeriodicWave();if(ht(g)){const{partials:t,wave:e}=g;this._wave=e,this._partials=t,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[t,e]=this._getRealImaginary(y,this._phase),c=this.context.createPeriodicWave(t,e);this._wave=c,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),At._periodicWaveCache.push({imag:e,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:t,type:this._type,wave:this._wave}),At._periodicWaveCache.length>100&&At._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(y){this.partialCount&&this._type!=="custom"&&y!=="custom"?this.type=y+this.partialCount:this.type=y}get partialCount(){return this._partialCount}set partialCount(y){Ie(y,0);let h=this._type;const g=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(g&&(h=g[1]),this._type!=="custom")y===0?this.type=h:this.type=h+y.toString();else{const t=new Float32Array(y);this._partials.forEach((e,c)=>t[c]=e),this._partials=Array.from(t),this.type=this._type}}_getRealImaginary(y,h){let t=2048;const e=new Float32Array(t),c=new Float32Array(t);let s=1;if(y==="custom"){if(s=this._partials.length+1,this._partialCount=this._partials.length,t=s,this._partials.length===0)return[e,c]}else{const a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(y);a?(s=parseInt(a[2],10)+1,this._partialCount=parseInt(a[2],10),y=a[1],s=Math.max(s,2),t=s):this._partialCount=0,this._partials=[]}for(let a=1;a<t;++a){const n=2/(a*Math.PI);let i;switch(y){case"sine":i=a<=s?1:0,this._partials[a-1]=i;break;case"square":i=a&1?2*n:0,this._partials[a-1]=i;break;case"sawtooth":i=n*(a&1?1:-1),this._partials[a-1]=i;break;case"triangle":a&1?i=2*(n*n)*(a-1>>1&1?-1:1):i=0,this._partials[a-1]=i;break;case"custom":i=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+y)}i!==0?(e[a]=-i*Math.sin(h*a),c[a]=i*Math.cos(h*a)):(e[a]=0,c[a]=0)}return[e,c]}_inverseFFT(y,h,g){let t=0;const e=y.length;for(let c=0;c<e;c++)t+=y[c]*Math.cos(c*g)+h[c]*Math.sin(c*g);return t}getInitialValue(){const[y,h]=this._getRealImaginary(this._type,0);let g=0;const t=Math.PI*2,e=32;for(let c=0;c<e;c++)g=Math.max(this._inverseFFT(y,h,c/e*t),g);return ic(-this._inverseFFT(y,h,this._phase)/g,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(y){this._partials=y,this._partialCount=this._partials.length,y.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(y){this._phase=y*Math.PI/180,this.type=this._type}asArray(y=1024){return Lt(this,void 0,void 0,function*(){return Qe(this,y)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}At._periodicWaveCache=[];class Bn extends ot{constructor(){super(Object.assign(et(Bn.getDefaults(),arguments,["context"])))}connect(y,h=0,g=0){return Cs(this,y,h,g),this}}class Ai extends Bn{constructor(){super(Object.assign(et(Ai.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const y=et(Ai.getDefaults(),arguments,["mapping","length"]);Kt(y.mapping)||y.mapping instanceof Float32Array?this.curve=Float32Array.from(y.mapping):Kf(y.mapping)&&this.setMap(y.mapping,y.length)}static getDefaults(){return Object.assign(Mt.getDefaults(),{length:1024})}setMap(y,h=1024){const g=new Float32Array(h);for(let t=0,e=h;t<e;t++){const c=t/(e-1)*2-1;g[t]=y(c,t)}return this.curve=g,this}get curve(){return this._shaper.curve}set curve(y){this._shaper.curve=y}get oversample(){return this._shaper.oversample}set oversample(y){const h=["none","2x","4x"].some(g=>g.includes(y));at(h,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=y}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class la extends Bn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ai({context:this.context,mapping:y=>(y+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Te extends Mt{constructor(){super(Object.assign(et(Te.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const y=et(Te.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new wt({context:this.context,minValue:y.minValue,maxValue:y.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(y.value,0)}static getDefaults(){return Object.assign(Mt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Mi extends Yt{constructor(){super(et(Mi.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new la({context:this.context}),this._modulationNode=new wt({context:this.context});const y=et(Mi.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new At({context:this.context,detune:y.detune,frequency:y.frequency,onstop:()=>this.onstop(this),phase:y.phase,type:y.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new At({context:this.context,phase:y.phase,type:y.modulationType}),this.harmonicity=new Te({context:this.context,units:"positive",value:y.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),yt(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(At.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(y){this._modulator.start(y),this._carrier.start(y)}_stop(y){this._modulator.stop(y),this._carrier.stop(y)}_restart(y){this._modulator.restart(y),this._carrier.restart(y)}get type(){return this._carrier.type}set type(y){this._carrier.type=y}get baseType(){return this._carrier.baseType}set baseType(y){this._carrier.baseType=y}get partialCount(){return this._carrier.partialCount}set partialCount(y){this._carrier.partialCount=y}get modulationType(){return this._modulator.type}set modulationType(y){this._modulator.type=y}get phase(){return this._carrier.phase}set phase(y){this._carrier.phase=y,this._modulator.phase=y}get partials(){return this._carrier.partials}set partials(y){this._carrier.partials=y}asArray(y=1024){return Lt(this,void 0,void 0,function*(){return Qe(this,y)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Pi extends Yt{constructor(){super(et(Pi.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new wt({context:this.context,gain:0});const y=et(Pi.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new At({context:this.context,detune:y.detune,frequency:0,onstop:()=>this.onstop(this),phase:y.phase,type:y.type}),this.detune=this._carrier.detune,this.frequency=new Mt({context:this.context,units:"frequency",value:y.frequency}),this._modulator=new At({context:this.context,phase:y.phase,type:y.modulationType}),this.harmonicity=new Te({context:this.context,units:"positive",value:y.harmonicity}),this.modulationIndex=new Te({context:this.context,units:"positive",value:y.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),yt(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(At.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(y){this._modulator.start(y),this._carrier.start(y)}_stop(y){this._modulator.stop(y),this._carrier.stop(y)}_restart(y){return this._modulator.restart(y),this._carrier.restart(y),this}get type(){return this._carrier.type}set type(y){this._carrier.type=y}get baseType(){return this._carrier.baseType}set baseType(y){this._carrier.baseType=y}get partialCount(){return this._carrier.partialCount}set partialCount(y){this._carrier.partialCount=y}get modulationType(){return this._modulator.type}set modulationType(y){this._modulator.type=y}get phase(){return this._carrier.phase}set phase(y){this._carrier.phase=y,this._modulator.phase=y}get partials(){return this._carrier.partials}set partials(y){this._carrier.partials=y}asArray(y=1024){return Lt(this,void 0,void 0,function*(){return Qe(this,y)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class ai extends Yt{constructor(){super(et(ai.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new wt({context:this.context,gain:0}),this._thresh=new Ai({context:this.context,mapping:h=>h<=0?-1:1});const y=et(ai.getDefaults(),arguments,["frequency","width"]);this.width=new Mt({context:this.context,units:"audioRange",value:y.width}),this._triangle=new At({context:this.context,detune:y.detune,frequency:y.frequency,onstop:()=>this.onstop(this),phase:y.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),yt(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Yt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(y){y=this.toSeconds(y),this._triangle.start(y),this._widthGate.gain.setValueAtTime(1,y)}_stop(y){y=this.toSeconds(y),this._triangle.stop(y),this._widthGate.gain.cancelScheduledValues(y),this._widthGate.gain.setValueAtTime(0,y)}_restart(y){this._triangle.restart(y),this._widthGate.gain.cancelScheduledValues(y),this._widthGate.gain.setValueAtTime(1,y)}get phase(){return this._triangle.phase}set phase(y){this._triangle.phase=y}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(y){this._triangle.type=y}asArray(y=1024){return Lt(this,void 0,void 0,function*(){return Qe(this,y)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Ri extends Yt{constructor(){super(et(Ri.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const y=et(Ri.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Mt({context:this.context,units:"frequency",value:y.frequency}),this.detune=new Mt({context:this.context,units:"cents",value:y.detune}),this._spread=y.spread,this._type=y.type,this._phase=y.phase,this._partials=y.partials,this._partialCount=y.partialCount,this.count=y.count,yt(this,["frequency","detune"])}static getDefaults(){return Object.assign(At.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(y){y=this.toSeconds(y),this._forEach(h=>h.start(y))}_stop(y){y=this.toSeconds(y),this._forEach(h=>h.stop(y))}_restart(y){this._forEach(h=>h.restart(y))}_forEach(y){for(let h=0;h<this._oscillators.length;h++)y(this._oscillators[h],h)}get type(){return this._type}set type(y){this._type=y,this._forEach(h=>h.type=y)}get spread(){return this._spread}set spread(y){if(this._spread=y,this._oscillators.length>1){const h=-y/2,g=y/(this._oscillators.length-1);this._forEach((t,e)=>t.detune.value=h+g*e)}}get count(){return this._oscillators.length}set count(y){if(Ie(y,1),this._oscillators.length!==y){this._forEach(h=>h.dispose()),this._oscillators=[];for(let h=0;h<y;h++){const g=new At({context:this.context,volume:-6-y*1.1,type:this._type,phase:this._phase+h/y*360,partialCount:this._partialCount,onstop:h===0?()=>this.onstop(this):ct});this.type==="custom"&&(g.partials=this._partials),this.frequency.connect(g.frequency),this.detune.connect(g.detune),g.detune.overridden=!1,g.connect(this.output),this._oscillators[h]=g}this.spread=this._spread,this.state==="started"&&this._forEach(h=>h.start())}}get phase(){return this._phase}set phase(y){this._phase=y,this._forEach((h,g)=>h.phase=this._phase+g/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(y){this._forEach(h=>h.baseType=y),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(y){this._partials=y,this._partialCount=this._partials.length,y.length&&(this._type="custom",this._forEach(h=>h.partials=y))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(y){this._partialCount=y,this._forEach(h=>h.partialCount=y),this._type=this._oscillators[0].type}asArray(y=1024){return Lt(this,void 0,void 0,function*(){return Qe(this,y)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(y=>y.dispose()),this}}class Oi extends Yt{constructor(){super(et(Oi.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Te({context:this.context,value:2});const y=et(Oi.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new ai({context:this.context,frequency:y.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new At({context:this.context,detune:y.detune,frequency:y.frequency,onstop:()=>this.onstop(this),phase:y.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),yt(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Yt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(y){y=this.toSeconds(y),this._modulator.start(y),this._pulse.start(y)}_stop(y){y=this.toSeconds(y),this._modulator.stop(y),this._pulse.stop(y)}_restart(y){this._modulator.restart(y),this._pulse.restart(y)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(y){this._modulator.phase=y}asArray(y=1024){return Lt(this,void 0,void 0,function*(){return Qe(this,y)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const qs={am:Mi,fat:Ri,fm:Pi,oscillator:At,pulse:ai,pwm:Oi};class Ze extends Yt{constructor(){super(et(Ze.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const y=et(Ze.getDefaults(),arguments,["frequency","type"]);this.frequency=new Mt({context:this.context,units:"frequency",value:y.frequency}),this.detune=new Mt({context:this.context,units:"cents",value:y.detune}),yt(this,["frequency","detune"]),this.set(y)}static getDefaults(){return Object.assign(At.getDefaults(),Pi.getDefaults(),Mi.getDefaults(),Ri.getDefaults(),ai.getDefaults(),Oi.getDefaults())}_start(y){this._oscillator.start(y)}_stop(y){this._oscillator.stop(y)}_restart(y){return this._oscillator.restart(y),this}get type(){let y="";return["am","fm","fat"].some(h=>this._sourceType===h)&&(y=this._sourceType),y+this._oscillator.type}set type(y){y.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=y.substr(2)):y.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=y.substr(2)):y.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=y.substr(3)):y==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):y==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=y)}get partials(){return this._oscillator.partials}set partials(y){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=y)}get partialCount(){return this._oscillator.partialCount}set partialCount(y){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=y)}set(y){return Reflect.has(y,"type")&&y.type&&(this.type=y.type),super.set(y),this}_createNewOscillator(y){if(y!==this._sourceType){this._sourceType=y;const h=qs[y],g=this.now();if(this._oscillator){const t=this._oscillator;t.stop(g),this.context.setTimeout(()=>t.dispose(),this.blockTime)}this._oscillator=new h({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(g)}}get phase(){return this._oscillator.phase}set phase(y){this._oscillator.phase=y}get sourceType(){return this._sourceType}set sourceType(y){let h="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(h=this._oscillator.type),y==="fm"?this.type="fm"+h:y==="am"?this.type="am"+h:y==="fat"?this.type="fat"+h:y==="oscillator"?this.type=h:y==="pulse"?this.type="pulse":y==="pwm"&&(this.type="pwm")}_getOscType(y,h){return y instanceof qs[h]}get baseType(){return this._oscillator.baseType}set baseType(y){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&y!=="pulse"&&y!=="pwm"&&(this._oscillator.baseType=y)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(y){this._getOscType(this._oscillator,"fat")&&De(y)&&(this._oscillator.count=y)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(y){this._getOscType(this._oscillator,"fat")&&De(y)&&(this._oscillator.spread=y)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(y){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&se(y)&&(this._oscillator.modulationType=y)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(y=1024){return Lt(this,void 0,void 0,function*(){return Qe(this,y)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function ua(R,y=1/0){const h=new WeakMap;return function(g,t){Reflect.defineProperty(g,t,{configurable:!0,enumerable:!0,get:function(){return h.get(this)},set:function(e){Ie(e,R,y),h.set(this,e)}})}}function Me(R,y=1/0){const h=new WeakMap;return function(g,t){Reflect.defineProperty(g,t,{configurable:!0,enumerable:!0,get:function(){return h.get(this)},set:function(e){Ie(this.toSeconds(e),R,y),h.set(this,e)}})}}class Li extends Yt{constructor(){super(et(Li.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const y=et(Li.getDefaults(),arguments,["url","onload"]);this._buffer=new vt({onload:this._onload.bind(this,y.onload),onerror:y.onerror,reverse:y.reverse,url:y.url}),this.autostart=y.autostart,this._loop=y.loop,this._loopStart=y.loopStart,this._loopEnd=y.loopEnd,this._playbackRate=y.playbackRate,this.fadeIn=y.fadeIn,this.fadeOut=y.fadeOut}static getDefaults(){return Object.assign(Yt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ct,onerror:ct,playbackRate:1,reverse:!1})}load(y){return Lt(this,void 0,void 0,function*(){return yield this._buffer.load(y),this._onload(),this})}_onload(y=ct){y(),this.autostart&&this.start()}_onSourceEnd(y){this.onstop(this),this._activeSources.delete(y),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(y,h,g){return super.start(y,h,g),this}_start(y,h,g){this._loop?h=_e(h,this._loopStart):h=_e(h,0);const t=this.toSeconds(h),e=g;g=_e(g,Math.max(this._buffer.duration-t,0));let c=this.toSeconds(g);c=c/this._playbackRate,y=this.toSeconds(y);const s=new Ci({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(y+c),this._state.setStateAtTime("stopped",y+c,{implicitEnd:!0})),this._activeSources.add(s),this._loop&&Jt(e)?s.start(y,t):s.start(y,t,c-this.toSeconds(this.fadeOut))}_stop(y){const h=this.toSeconds(y);this._activeSources.forEach(g=>g.stop(h))}restart(y,h,g){return super.restart(y,h,g),this}_restart(y,h,g){this._stop(y),this._start(y,h,g)}seek(y,h){const g=this.toSeconds(h);if(this._state.getValueAtTime(g)==="started"){const t=this.toSeconds(y);this._stop(g),this._start(g,t)}return this}setLoopPoints(y,h){return this.loopStart=y,this.loopEnd=h,this}get loopStart(){return this._loopStart}set loopStart(y){this._loopStart=y,this.buffer.loaded&&Ie(this.toSeconds(y),0,this.buffer.duration),this._activeSources.forEach(h=>{h.loopStart=y})}get loopEnd(){return this._loopEnd}set loopEnd(y){this._loopEnd=y,this.buffer.loaded&&Ie(this.toSeconds(y),0,this.buffer.duration),this._activeSources.forEach(h=>{h.loopEnd=y})}get buffer(){return this._buffer}set buffer(y){this._buffer.set(y)}get loop(){return this._loop}set loop(y){if(this._loop!==y&&(this._loop=y,this._activeSources.forEach(h=>{h.loop=y}),y)){const h=this._state.getNextState("stopped",this.now());h&&this._state.cancel(h.time)}}get playbackRate(){return this._playbackRate}set playbackRate(y){this._playbackRate=y;const h=this.now(),g=this._state.getNextState("stopped",h);g&&g.implicitEnd&&(this._state.cancel(g.time),this._activeSources.forEach(t=>t.cancelStop())),this._activeSources.forEach(t=>{t.playbackRate.setValueAtTime(y,h)})}get reverse(){return this._buffer.reverse}set reverse(y){this._buffer.reverse=y}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(y=>y.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ee([Me(0)],Li.prototype,"fadeIn",void 0);ee([Me(0)],Li.prototype,"fadeOut",void 0);class qt extends ot{constructor(){super(et(qt.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Mt({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const y=et(qt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=y.attack,this.decay=y.decay,this.sustain=y.sustain,this.release=y.release,this.attackCurve=y.attackCurve,this.releaseCurve=y.releaseCurve,this.decayCurve=y.decayCurve}static getDefaults(){return Object.assign(ot.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(y,h){if(se(y))return y;{let g;for(g in ji)if(ji[g][h]===y)return g;return y}}_setCurve(y,h,g){if(se(g)&&Reflect.has(ji,g)){const t=ji[g];Ye(t)?y!=="_decayCurve"&&(this[y]=t[h]):this[y]=t}else if(Kt(g)&&y!=="_decayCurve")this[y]=g;else throw new Error("Envelope: invalid curve: "+g)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(y){this._setCurve("_attackCurve","In",y)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(y){this._setCurve("_releaseCurve","Out",y)}get decayCurve(){return this._decayCurve}set decayCurve(y){at(["linear","exponential"].some(h=>h===y),`Invalid envelope curve: ${y}`),this._decayCurve=y}triggerAttack(y,h=1){this.log("triggerAttack",y,h),y=this.toSeconds(y);let t=this.toSeconds(this.attack);const e=this.toSeconds(this.decay),c=this.getValueAtTime(y);if(c>0){const s=1/t;t=(1-c)/s}if(t<this.sampleTime)this._sig.cancelScheduledValues(y),this._sig.setValueAtTime(h,y);else if(this._attackCurve==="linear")this._sig.linearRampTo(h,t,y);else if(this._attackCurve==="exponential")this._sig.targetRampTo(h,t,y);else{this._sig.cancelAndHoldAtTime(y);let s=this._attackCurve;for(let a=1;a<s.length;a++)if(s[a-1]<=c&&c<=s[a]){s=this._attackCurve.slice(a),s[0]=c;break}this._sig.setValueCurveAtTime(s,y,t,h)}if(e&&this.sustain<1){const s=h*this.sustain,a=y+t;this.log("decay",a),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(s,e+a):this._sig.exponentialApproachValueAtTime(s,a,e)}return this}triggerRelease(y){this.log("triggerRelease",y),y=this.toSeconds(y);const h=this.getValueAtTime(y);if(h>0){const g=this.toSeconds(this.release);g<this.sampleTime?this._sig.setValueAtTime(0,y):this._releaseCurve==="linear"?this._sig.linearRampTo(0,g,y):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,g,y):(at(Kt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(y),this._sig.setValueCurveAtTime(this._releaseCurve,y,g,h))}return this}getValueAtTime(y){return this._sig.getValueAtTime(y)}triggerAttackRelease(y,h,g=1){return h=this.toSeconds(h),this.triggerAttack(h,g),this.triggerRelease(h+this.toSeconds(y)),this}cancel(y){return this._sig.cancelScheduledValues(this.toSeconds(y)),this}connect(y,h=0,g=0){return Cs(this,y,h,g),this}asArray(y=1024){return Lt(this,void 0,void 0,function*(){const h=y/this.context.sampleRate,g=new Ts(1,h,this.context.sampleRate),t=this.toSeconds(this.attack)+this.toSeconds(this.decay),e=t+this.toSeconds(this.release),c=e*.1,s=e+c,a=new this.constructor(Object.assign(this.get(),{attack:h*this.toSeconds(this.attack)/s,decay:h*this.toSeconds(this.decay)/s,release:h*this.toSeconds(this.release)/s,context:g}));return a._sig.toDestination(),a.triggerAttackRelease(h*(t+c)/s,0),(yield g.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ee([Me(0)],qt.prototype,"attack",void 0);ee([Me(0)],qt.prototype,"decay",void 0);ee([ua(0,1)],qt.prototype,"sustain",void 0);ee([Me(0)],qt.prototype,"release",void 0);const ji=(()=>{let y,h;const g=[];for(y=0;y<128;y++)g[y]=Math.sin(y/(128-1)*(Math.PI/2));const t=[],e=6.4;for(y=0;y<128-1;y++){h=y/(128-1);const u=Math.sin(h*(Math.PI*2)*e-Math.PI/2)+1;t[y]=u/10+h*.83}t[128-1]=1;const c=[],s=5;for(y=0;y<128;y++)c[y]=Math.ceil(y/(128-1)*s)/s;const a=[];for(y=0;y<128;y++)h=y/(128-1),a[y]=.5*(1-Math.cos(Math.PI*h));const n=[];for(y=0;y<128;y++){h=y/(128-1);const u=Math.pow(h,3)*4+.2,o=Math.cos(u*Math.PI*2*h);n[y]=Math.abs(o*(1-h))}function i(u){const o=new Array(u.length);for(let l=0;l<u.length;l++)o[l]=1-u[l];return o}function r(u){return u.slice(0).reverse()}return{bounce:{In:i(n),Out:n},cosine:{In:g,Out:r(g)},exponential:"exponential",linear:"linear",ripple:{In:t,Out:i(t)},sine:{In:a,Out:i(a)},step:{In:c,Out:i(c)}}})();class Se extends ot{constructor(){super(et(Se.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const y=et(Se.getDefaults(),arguments);this._volume=this.output=new be({context:this.context,volume:y.volume}),this.volume=this._volume.volume,yt(this,"volume")}static getDefaults(){return Object.assign(ot.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let y=!1;return this._synced||(this._synced=!0,y=!0),y}_syncMethod(y,h){const g=this["_original_"+y]=this[y];this[y]=(...t)=>{const e=t[h],c=this.context.transport.schedule(s=>{t[h]=s,g.apply(this,t)},e);this._scheduledEvents.push(c)}}unsync(){return this._scheduledEvents.forEach(y=>this.context.transport.clear(y)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(y,h,g,t){const e=this.toSeconds(g),c=this.toSeconds(h);return this.triggerAttack(y,e,t),this.triggerRelease(e+c),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ee extends Se{constructor(){super(et(Ee.getDefaults(),arguments));const y=et(Ee.getDefaults(),arguments);this.portamento=y.portamento,this.onsilence=y.onsilence}static getDefaults(){return Object.assign(Se.getDefaults(),{detune:0,onsilence:ct,portamento:0})}triggerAttack(y,h,g=1){this.log("triggerAttack",y,h,g);const t=this.toSeconds(h);return this._triggerEnvelopeAttack(t,g),this.setNote(y,t),this}triggerRelease(y){this.log("triggerRelease",y);const h=this.toSeconds(y);return this._triggerEnvelopeRelease(h),this}setNote(y,h){const g=this.toSeconds(h),t=y instanceof Zt?y.toFrequency():y;if(this.portamento>0&&this.getLevelAtTime(g)>.05){const e=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(t,e,g)}else this.frequency.setValueAtTime(t,g);return this}}ee([Me(0)],Ee.prototype,"portamento",void 0);class Ps extends qt{constructor(){super(et(Ps.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new wt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class re extends Ee{constructor(){super(et(re.getDefaults(),arguments)),this.name="Synth";const y=et(re.getDefaults(),arguments);this.oscillator=new Ze(Object.assign({context:this.context,detune:y.detune,onstop:()=>this.onsilence(this)},y.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Ps(Object.assign({context:this.context},y.envelope)),this.oscillator.chain(this.envelope,this.output),yt(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ee.getDefaults(),{envelope:Object.assign(Ve(qt.getDefaults(),Object.keys(ot.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Ve(Ze.getDefaults(),[...Object.keys(Yt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(y,h){if(this.envelope.triggerAttack(y,h),this.oscillator.start(y),this.envelope.sustain===0){const g=this.toSeconds(this.envelope.attack),t=this.toSeconds(this.envelope.decay);this.oscillator.stop(y+g+t)}}_triggerEnvelopeRelease(y){this.envelope.triggerRelease(y),this.oscillator.stop(y+this.toSeconds(this.envelope.release))}getLevelAtTime(y){return y=this.toSeconds(y),this.envelope.getValueAtTime(y)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class oi extends Ee{constructor(){super(et(oi.getDefaults(),arguments)),this.name="ModulationSynth";const y=et(oi.getDefaults(),arguments);this._carrier=new re({context:this.context,oscillator:y.oscillator,envelope:y.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new re({context:this.context,oscillator:y.modulation,envelope:y.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Mt({context:this.context,units:"frequency"}),this.detune=new Mt({context:this.context,value:y.detune,units:"cents"}),this.harmonicity=new Te({context:this.context,value:y.harmonicity,minValue:0}),this._modulationNode=new wt({context:this.context,gain:0}),yt(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Ee.getDefaults(),{harmonicity:3,oscillator:Object.assign(Ve(Ze.getDefaults(),[...Object.keys(Yt.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(Ve(qt.getDefaults(),Object.keys(ot.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(Ve(Ze.getDefaults(),[...Object.keys(Yt.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(Ve(qt.getDefaults(),Object.keys(ot.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(y,h){this._carrier._triggerEnvelopeAttack(y,h),this._modulator._triggerEnvelopeAttack(y,h)}_triggerEnvelopeRelease(y){return this._carrier._triggerEnvelopeRelease(y),this._modulator._triggerEnvelopeRelease(y),this}getLevelAtTime(y){return y=this.toSeconds(y),this.envelope.getValueAtTime(y)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class Rs extends oi{constructor(){super(et(Rs.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new la({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class gn extends oi{constructor(){super(et(gn.getDefaults(),arguments)),this.name="FMSynth";const y=et(gn.getDefaults(),arguments);this.modulationIndex=new Te({context:this.context,value:y.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(oi.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class Fi extends re{constructor(){super(et(Fi.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const y=et(Fi.getDefaults(),arguments);this.pitchDecay=y.pitchDecay,this.octaves=y.octaves,yt(this,["oscillator","envelope"])}static getDefaults(){return We(Ee.getDefaults(),re.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(y,h){const g=this.toSeconds(h),t=this.toFrequency(y instanceof Zt?y.toFrequency():y),e=t*this.octaves;return this.oscillator.frequency.setValueAtTime(e,g),this.oscillator.frequency.exponentialRampToValueAtTime(t,g+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ee([ua(0)],Fi.prototype,"octaves",void 0);ee([Me(0)],Fi.prototype,"pitchDecay",void 0);const fa=new Set;function Os(R){fa.add(R)}function ca(R,y){const h=`registerProcessor("${R}", ${y})`;fa.add(h)}const yc=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Os(yc);const Tc=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Os(Tc);const Sc=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Os(Sc);const Ec="feedback-comb-filter",Cc=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ca(Ec,Cc);class xn extends Se{constructor(){super(et(xn.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const y=et(xn.getDefaults(),arguments,["voice","options"]);at(!De(y.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const h=y.voice.getDefaults();this.options=Object.assign(h,y.options),this.voice=y.voice,this.maxPolyphony=y.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const g=this._voices.indexOf(this._dummyVoice);this._voices.splice(g,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Se.getDefaults(),{maxPolyphony:32,options:{},voice:re})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(y){this._availableVoices.push(y);const h=this._activeVoices.findIndex(g=>g.voice===y);this._activeVoices.splice(h,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const y=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return y.connect(this.output),this._voices.push(y),y}else xs("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const y=this._availableVoices.shift(),h=this._voices.indexOf(y);this._voices.splice(h,1),this.context.isOffline||y.dispose()}}_triggerAttack(y,h,g){y.forEach(t=>{const e=new vn(this.context,t).toMidi(),c=this._getNextAvailableVoice();c&&(c.triggerAttack(t,h,g),this._activeVoices.push({midi:e,voice:c,released:!1}),this.log("triggerAttack",t,h))})}_triggerRelease(y,h){y.forEach(g=>{const t=new vn(this.context,g).toMidi(),e=this._activeVoices.find(({midi:c,released:s})=>c===t&&!s);e&&(e.voice.triggerRelease(h),e.released=!0,this.log("triggerRelease",g,h))})}_scheduleEvent(y,h,g,t){at(!this.disposed,"Synth was already disposed"),g<=this.now()?y==="attack"?this._triggerAttack(h,g,t):this._triggerRelease(h,g):this.context.setTimeout(()=>{this._scheduleEvent(y,h,g,t)},g-this.now())}triggerAttack(y,h,g){Array.isArray(y)||(y=[y]);const t=this.toSeconds(h);return this._scheduleEvent("attack",y,t,g),this}triggerRelease(y,h){Array.isArray(y)||(y=[y]);const g=this.toSeconds(h);return this._scheduleEvent("release",y,g),this}triggerAttackRelease(y,h,g,t){const e=this.toSeconds(g);if(this.triggerAttack(y,e,t),Kt(h)){at(Kt(y),"If the duration is an array, the notes must also be an array"),y=y;for(let c=0;c<y.length;c++){const s=h[Math.min(c,h.length-1)],a=this.toSeconds(s);at(a>0,"The duration must be greater than 0"),this.triggerRelease(y[c],e+a)}}else{const c=this.toSeconds(h);at(c>0,"The duration must be greater than 0"),this.triggerRelease(y,e+c)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(y){const h=Ve(y,["onsilence","context"]);return this.options=We(this.options,h),this._voices.forEach(g=>g.set(h)),this._dummyVoice.set(h),this}get(){return this._dummyVoice.get()}releaseAll(y){const h=this.toSeconds(y);return this._activeVoices.forEach(({voice:g})=>{g.triggerRelease(h)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(y=>y.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Ii extends Se{constructor(){super(et(Ii.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const y=et(Ii.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),h={};Object.keys(y.urls).forEach(g=>{const t=parseInt(g,10);if(at($i(g)||De(t)&&isFinite(t),`url key is neither a note or midi pitch: ${g}`),$i(g)){const e=new Zt(this.context,g).toMidi();h[e]=y.urls[g]}else De(t)&&isFinite(t)&&(h[t]=y.urls[t])}),this._buffers=new As({urls:h,onload:y.onload,baseUrl:y.baseUrl,onerror:y.onerror}),this.attack=y.attack,this.release=y.release,this.curve=y.curve,this._buffers.loaded&&Promise.resolve().then(y.onload)}static getDefaults(){return Object.assign(Se.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ct,onerror:ct,release:.1,urls:{}})}_findClosest(y){let g=0;for(;g<96;){if(this._buffers.has(y+g))return-g;if(this._buffers.has(y-g))return g;g++}throw new Error(`No available buffers for note: ${y}`)}triggerAttack(y,h,g=1){return this.log("triggerAttack",y,h,g),Array.isArray(y)||(y=[y]),y.forEach(t=>{const e=oa(new Zt(this.context,t).toFrequency()),c=Math.round(e),s=e-c,a=this._findClosest(c),n=c-a,i=this._buffers.get(n),r=aa(a+s),u=new Ci({url:i,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:r}).connect(this.output);u.start(h,0,i.duration/r,g),Kt(this._activeSources.get(c))||this._activeSources.set(c,[]),this._activeSources.get(c).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(c)){const o=this._activeSources.get(c),l=o.indexOf(u);l!==-1&&o.splice(l,1)}}}),this}triggerRelease(y,h){return this.log("triggerRelease",y,h),Array.isArray(y)||(y=[y]),y.forEach(g=>{const t=new Zt(this.context,g).toMidi();if(this._activeSources.has(t)&&this._activeSources.get(t).length){const e=this._activeSources.get(t);h=this.toSeconds(h),e.forEach(c=>{c.stop(h)}),this._activeSources.set(t,[])}}),this}releaseAll(y){const h=this.toSeconds(y);return this._activeSources.forEach(g=>{for(;g.length;)g.shift().stop(h)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(y,h,g,t=1){const e=this.toSeconds(g);return this.triggerAttack(y,e,t),Kt(h)?(at(Kt(y),"notes must be an array when duration is array"),y.forEach((c,s)=>{const a=h[Math.min(s,h.length-1)];this.triggerRelease(c,e+this.toSeconds(a))})):this.triggerRelease(y,e+this.toSeconds(h)),this}add(y,h,g){if(at($i(y)||isFinite(y),`note must be a pitch or midi: ${y}`),$i(y)){const t=new Zt(this.context,y).toMidi();this._buffers.add(t,h,g)}else this._buffers.add(y,h,g);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(y=>{y.forEach(h=>h.dispose())}),this._activeSources.clear(),this}}ee([Me(0)],Ii.prototype,"attack",void 0);ee([Me(0)],Ii.prototype,"release",void 0);class yn extends ot{constructor(){super(Object.assign(et(yn.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const y=et(yn.getDefaults(),arguments,["pan"]);this.pan=new gt({context:this.context,param:this._panner.pan,value:y.pan,minValue:-1,maxValue:1}),this._panner.channelCount=y.channelCount,this._panner.channelCountMode="explicit",yt(this,"pan")}static getDefaults(){return Object.assign(ot.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Ac="bit-crusher",Mc=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ca(Ac,Mc);class Ct extends ot{constructor(){super(et(Ct.getDefaults(),arguments,["solo"])),this.name="Solo";const y=et(Ct.getDefaults(),arguments,["solo"]);this.input=this.output=new wt({context:this.context}),Ct._allSolos.has(this.context)||Ct._allSolos.set(this.context,new Set),Ct._allSolos.get(this.context).add(this),this.solo=y.solo}static getDefaults(){return Object.assign(ot.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(y){y?this._addSolo():this._removeSolo(),Ct._allSolos.get(this.context).forEach(h=>h._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Ct._soloed.has(this.context)||Ct._soloed.set(this.context,new Set),Ct._soloed.get(this.context).add(this)}_removeSolo(){Ct._soloed.has(this.context)&&Ct._soloed.get(this.context).delete(this)}_isSoloed(){return Ct._soloed.has(this.context)&&Ct._soloed.get(this.context).has(this)}_noSolos(){return!Ct._soloed.has(this.context)||Ct._soloed.has(this.context)&&Ct._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Ct._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Ct._allSolos=new Map;Ct._soloed=new Map;class Tn extends ot{constructor(){super(et(Tn.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const y=et(Tn.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new yn({context:this.context,pan:y.pan,channelCount:y.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new be({context:this.context,volume:y.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=y.mute,yt(this,["pan","volume"])}static getDefaults(){return Object.assign(ot.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(y){this._volume.mute=y}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Ge extends ot{constructor(){super(et(Ge.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const y=et(Ge.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Ct({solo:y.solo,context:this.context}),this._panVol=this.output=new Tn({context:this.context,pan:y.pan,volume:y.volume,mute:y.mute,channelCount:y.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),yt(this,["pan","volume"])}static getDefaults(){return Object.assign(ot.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(y){this._solo.solo=y}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(y){this._panVol.mute=y}_getBus(y){return Ge.buses.has(y)||Ge.buses.set(y,new wt({context:this.context})),Ge.buses.get(y)}send(y,h=0){const g=this._getBus(y),t=new wt({context:this.context,units:"decibels",gain:h});return this.connect(t),t.connect(g),t}receive(y){return this._getBus(y).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Ge.buses=new Map;class Pc extends ot{constructor(){super(...arguments),this.name="Listener",this.positionX=new gt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new gt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new gt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new gt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new gt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new gt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new gt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new gt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new gt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ot.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}In(R=>{R.listener=new Pc({context:R})});Dn(R=>{R.listener.dispose()});$t().transport;$t().destination;$t().destination;$t().listener;$t().draw;$t();class Rc extends Phaser.GameObjects.Sprite{constructor({scene:h,x:g,y:t,value:e,sharp:c,octave:s}){super(h,g,t,c?"piano_key_sharp":"piano_key");dt(this,"_octave");dt(this,"_value");dt(this,"_sharp");this._value=e,this._sharp=c,this._octave=s,h.add.existing(this),this.setInteractive(),this.on("pointerover",()=>{this.setTint(10486017)}),this.on("pointerout",()=>{this.clearTint()})}get value(){return this._value}get sharp(){return this._sharp}get octave(){return this._octave}preUpdate(h,g){super.preUpdate(h,g)}}class da extends Phaser.GameObjects.GameObject{constructor({scene:h,x:g,y:t,text:e,options:c,data:s}){var a,n;super(h,"button");dt(this,"container");dt(this,"background");dt(this,"text");dt(this,"width");dt(this,"height");dt(this,"color");dt(this,"borderRadius");dt(this,"disabled");dt(this,"value");this.scene.add.existing(this),this.value=s,this.color=(c==null?void 0:c.color)||{main:15022390,hover:12986408,active:4431943},this.borderRadius=(c==null?void 0:c.borderRadius)||0,this.disabled=(c==null?void 0:c.disabled)||!0,this.container=this.scene.add.container(g,t),this.text=this.scene.add.text(0,0,e||"button",{wordWrap:{width:150},align:"center"}).setOrigin(.5),this.width=this.text.width+(((a=c==null?void 0:c.padding)==null?void 0:a.x)||5),this.height=this.text.height+(((n=c==null?void 0:c.padding)==null?void 0:n.y)||5),this.background=this.scene.add.graphics(),this.container.add([this.background,this.text]),this.container.sendToBack(this.background),this.container.setSize(this.width,this.height),this.drawBackground(this.color.main),this.enable()}drawBackground(h){this.background.clear(),this.background.fillStyle(h),this.background.fillRoundedRect(-this.width/2,-this.height/2,this.container.width,this.container.height,this.borderRadius)}enable(){this.disabled&&(this.disabled=!1,this.drawBackground(this.color.main),this.container.setInteractive().on(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER,this.handlePointerHover,this).on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut,this).on(Phaser.Input.Events.POINTER_DOWN,this.handlePointerDown,this))}disable(){this.disabled||(this.disabled=!0,this.container.removeInteractive(),this.drawBackground(this.color.active))}handlePointerDown(){this.disable(),this.scene.sys.events.emit("onButtonClick",{data:this.value})}handlePointerHover(){this.drawBackground(this.color.hover)}handlePointerOut(){this.drawBackground(this.color.main)}destroy(h){super.destroy(h),this.text.destroy(),this.background.destroy()}}class Oc extends Phaser.GameObjects.Container{constructor({scene:h,x:g,y:t}){var e;super(h,g,t);dt(this,"notes",["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]);dt(this,"synths",["osc","am","fm","poly"]);dt(this,"synth","osc");dt(this,"synthButtons");this.x=g-25,this.y=t,h.add.existing(this),this.setSize(ei,200),this.generateKeyboard(),this.list.forEach((c,s)=>{if(!c.sharp){const a=this.getAt(s);this.sendToBack(a)}}),Phaser.Display.Align.In.Center(this,this.scene.add.zone((this.width-this.length*30)/2,Un-100,ei,this.height)),this.synthButtons=this.synths.map((c,s)=>new da({scene:h,x:s*70+50,y:Un-250,text:c,data:c})),this.scene.sys.events.on("onButtonClick",this.setSynth.bind(this)),(e=this.synthButtons.find(({value:c})=>c===this.synth))==null||e.disable()}generateKeyboard(){let h=0;const g=this.notes.map((t,e)=>{const c=t.endsWith("#");h+=c?0:50;const s=Math.floor(e/12)+3;return new Rc({scene:this.scene,x:c?h+25:h,y:c?-25:0,value:t,sharp:c,octave:s})});this.add(g)}getKey(h){const{octave:g,noteName:t}=this.parser(h);return this.list.find(e=>e.value===t&&e.octave===g)}parser(h){const g=Math.floor(h/12)-1,t=this.notes[h%12];return{octave:g,noteName:t}}setSynth({data:h}){this.synth=h,this.synthButtons.forEach(g=>{if(g.value!==this.synth){g.enable();return}})}}class Lc extends Phaser.Scene{constructor(){super({key:"main-scene"});dt(this,"fpsText");dt(this,"noteText");dt(this,"history",[]);dt(this,"synth");dt(this,"piano")}async create(h){this.add.text(ei,0,"main-scene",{color:"#000000"}),this.piano=new Oc({scene:this,x:0,y:0}),this.fpsText=new wa(this),this.synth={osc:new re().toDestination(),am:new Rs().toDestination(),fm:new gn().toDestination(),poly:new xn(re).toDestination()},h.device&&new sr.MIDIValInput(h.device).onAllNoteOn(t=>{const e=this.piano.getKey(t.note);if(!e)return;const c=e.value+e.octave;this.synth[this.piano.synth].triggerAttackRelease(c,"8n"),this.history.push(c),this.tweens.add({targets:e,alpha:1,duration:100,ease:"Power1",onStart:()=>{e.setTint(10486017)},onComplete:()=>{e.clearTint()}})}),this.noteText=this.add.text(0,50,"hey",{font:"64px Courier",color:"#ffff00"})}update(){var h;this.fpsText.update(),(h=this.noteText)==null||h.setText([...this.history].slice(-10).reverse().join(" "))}}class Fc extends Phaser.Scene{constructor(){super({key:"config-scene"});dt(this,"fpsText");dt(this,"buttons")}async create(){await this.midi_controller.start(),this.add.text(ei/2,25,"Select Your Device",{color:"#000",fontSize:"32px"}).setOrigin(.5),this.events.on("device_connected",()=>this.generateButtons()),this.events.on("device_disconnected",({device:h})=>this.removeDevicesButtons(h)),this.events.on("onButtonClick",async({data:h})=>{this.scene.start("main-scene",{device:h}),await oc()}),this.add.text(0,0,"config-scene",{color:"#000000"}),this.generateButtons()}generateButtons(){this.buttons=this.midi_controller.devices.map((h,g)=>new da({scene:this.scene.scene,x:ei/2,y:g*100+100,text:h.name,data:h}))}removeDevicesButtons(h){const g=this.buttons.find(t=>(console.log(t.value.id,h.id),t.value.id===h.id));g==null||g.destroy()}}class Ic extends Phaser.GameObjects.Graphics{constructor({scene:y,x:h,y:g,options:t}){super(y,{...t,x:h,y:g}),["piano_key_sharp","piano_key"].forEach(e=>{const c=e.endsWith("sharp"),s=c?30:50,a=c?150:200,n=c?3684408:16777215;this.fillStyle(n,1),this.fillRect(h||0,g||0,s,a),this.lineStyle(1,5592405,1),this.strokeRect(h||0,g||0,s,a),this.generateTexture(e,s,a)})}}class Dc extends Phaser.Scene{constructor(){super({key:"preload-scene"})}preload(){new Ic({scene:this.scene.scene})}create(){this.add.text(0,0,"preload-scene",{color:"#000000"}),this.scene.start("config-scene")}}const Nc=[Dc,Fc,Lc];class Bc extends Phaser.Plugins.ScenePlugin{constructor(h,g,t){super(h,g,t);dt(this,"controller");dt(this,"devices",[])}async start(){this.controller=await sr.MIDIVal.connect(),this.devices=this.controller.inputs,this.systems.events.once("update",this.update,this)}async update(){this.controller.onInputDisconnected(this.removeDevice.bind(this)),this.controller.onInputConnected(this.addDevice.bind(this))}addDevice(h){this.devices=[...this.devices,h],this.systems.events.emit("device_connected")}removeDevice(h){this.devices=this.devices.filter(({id:g})=>g!==h.id),this.systems.events.emit("device_disconnected",{device:h})}}const wc={key:"midi_controller",plugin:Bc,mapping:"midi_controller"},Gc={type:Phaser.AUTO,backgroundColor:"#DEDEDE",render:{pixelArt:!0},scene:Object.values(Nc),loader:{path:"assets/"},plugins:{scene:[wc]},scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:ei,height:Un},physics:{default:"arcade",arcade:{debug:!0,gravity:{y:0}}}};window.devices=[];const Vc="midi";navigator.permissions.query({name:Vc}).then(R=>{R.state==="granted"?new Phaser.Game(Gc):R.state==="prompt"&&console.log("bonjour")});
